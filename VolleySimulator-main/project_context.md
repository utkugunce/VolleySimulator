# Project Application Context - Part 1

## File: package.json
```
{
  "name": "web_app",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "build:analyze": "ANALYZE=true next build",
    "start": "next start",
    "lint": "eslint",
    "test": "jest",
    "test:e2e": "playwright test",
    "test:e2e:ui": "playwright test --ui",
    "test:e2e:report": "playwright show-report"
  },
  "dependencies": {
    "@google/generative-ai": "^0.24.1",
    "@radix-ui/react-accordion": "^1.2.12",
    "@radix-ui/react-avatar": "^1.1.11",
    "@radix-ui/react-checkbox": "^1.3.3",
    "@radix-ui/react-collapsible": "^1.1.12",
    "@radix-ui/react-dialog": "^1.1.15",
    "@radix-ui/react-dropdown-menu": "^2.1.16",
    "@radix-ui/react-label": "^2.1.8",
    "@radix-ui/react-navigation-menu": "^1.2.14",
    "@radix-ui/react-popover": "^1.1.15",
    "@radix-ui/react-progress": "^1.1.8",
    "@radix-ui/react-radio-group": "^1.3.8",
    "@radix-ui/react-scroll-area": "^1.2.10",
    "@radix-ui/react-select": "^2.2.6",
    "@radix-ui/react-separator": "^1.1.8",
    "@radix-ui/react-slider": "^1.3.6",
    "@radix-ui/react-slot": "^1.2.4",
    "@radix-ui/react-switch": "^1.2.6",
    "@radix-ui/react-tabs": "^1.1.13",
    "@radix-ui/react-tooltip": "^1.2.8",
    "@supabase/ssr": "^0.8.0",
    "@supabase/supabase-js": "^2.89.0",
    "@tailwindcss/postcss": "^4.1.18",
    "@tanstack/react-query": "^5.90.16",
    "@types/canvas-confetti": "^1.9.0",
    "@types/node": "^25.0.3",
    "@types/react": "^19.2.7",
    "@types/react-dom": "^19.2.3",
    "@vercel/analytics": "^1.6.1",
    "@vercel/speed-insights": "^1.3.1",
    "autoprefixer": "^10.4.23",
    "canvas-confetti": "^1.9.4",
    "cheerio": "^1.1.2",
    "class-variance-authority": "^0.7.1",
    "clsx": "^2.1.1",
    "cmdk": "^1.1.1",
    "eslint": "^9.39.2",
    "eslint-config-next": "^16.1.1",
    "framer-motion": "^12.23.26",
    "html-to-image": "^1.11.13",
    "iconv-lite": "^0.7.1",
    "lucide-react": "^0.562.0",
    "next": "^16.1.1",
    "next-intl": "^4.7.0",
    "next-themes": "^0.4.6",
    "postcss": "^8.5.6",
    "puppeteer": "^24.34.0",
    "react": "^19.2.3",
    "react-dom": "^19.2.3",
    "react-hot-toast": "^2.6.0",
    "recharts": "^3.6.0",
    "sonner": "^2.0.7",
    "tailwind-merge": "^3.4.0",
    "tailwindcss": "^4.1.18",
    "tailwindcss-animate": "^1.0.7",
    "tw-animate-css": "^1.4.0",
    "typescript": "^5.9.3"
  },
  "devDependencies": {
    "@next/bundle-analyzer": "^16.1.1",
    "@playwright/test": "^1.57.0",
    "@testing-library/dom": "^10.4.1",
    "@testing-library/jest-dom": "^6.9.1",
    "@testing-library/react": "^16.3.1",
    "@types/jest": "^30.0.0",
    "jest": "^30.2.0",
    "jest-environment-jsdom": "^30.2.0",
    "ts-node": "^10.9.2",
    "xlsx": "^0.18.5"
  }
}

```

## File: next.config.ts
```
import type { NextConfig } from "next";
import createNextIntlPlugin from 'next-intl/plugin';

const withNextIntl = createNextIntlPlugin('./i18n/request.ts');

// eslint-disable-next-line @typescript-eslint/no-require-imports
const bundleAnalyzer = process.env.ANALYZE === 'true' ? require('@next/bundle-analyzer') : null;
const withBundleAnalyzer = bundleAnalyzer
  ? bundleAnalyzer({ enabled: true })
  : (config: NextConfig) => config;

const nextConfig: NextConfig = {
  // output: 'export', // Uncomment for static site generation (no API routes support if used)

  // Compiler optimizations
  compiler: {
    removeConsole: process.env.NODE_ENV === 'production'
  },

  // Turbopack requires an empty config object for recognition
  turbopack: {},

  // Image optimization
  images: {
    formats: ['image/avif', 'image/webp'],
    deviceSizes: [640, 750, 828, 1080, 1200],
    imageSizes: [16, 32, 48, 64, 96, 128],
    minimumCacheTTL: 60 * 60 * 24 * 30, // 30 days
  },

  // Experimental features for better performance
  experimental: {
    optimizePackageImports: [
      '@supabase/supabase-js',
      '@tanstack/react-query',
      'cheerio',
      'lucide-react',
      'date-fns',
      'lodash',
      'recharts'
    ],
  },

  // Production optimizations
  poweredByHeader: false,
  reactStrictMode: true,

  // Enable gzip/brotli compression headers hint
  compress: true,

  // Security headers using Next.js async headers function
  async headers() {
    return [
      {
        source: '/((?!api|_next/static|_next/image|favicon.ico).*)',
        headers: [
          {
            key: 'X-Content-Type-Options',
            value: 'nosniff'
          },
          {
            key: 'X-Frame-Options',
            value: 'DENY'
          },
          {
            key: 'X-XSS-Protection',
            value: '1; mode=block'
          },
          {
            key: 'Referrer-Policy',
            value: 'strict-origin-when-cross-origin'
          },
          {
            key: 'Content-Security-Policy',
            value: "default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.jsdelivr.net https://www.googletagmanager.com https://www.google-analytics.com https://acsbapp.com; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self' data: https:; connect-src 'self' https://supabase.co https://www.google-analytics.com https://www.googletagmanager.com https://acsbapp.com; frame-ancestors 'none'"
          }
        ]
      }
    ];
  }
};

export default withNextIntl(withBundleAnalyzer(nextConfig));

```

## File: tsconfig.json
```
{
  "compilerOptions": {
    "forceConsistentCasingInFileNames": true,
    "target": "ES2020",
    "lib": [
      "dom",
      "dom.iterable",
      "esnext"
    ],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "react-jsx",
    "incremental": true,
    "plugins": [
      {
        "name": "next"
      }
    ],
    "paths": {
      "@/*": [
        "./*"
      ]
    }
  },
  "include": [
    "next-env.d.ts",
    "**/*.ts",
    "**/*.tsx",
    ".next/types/**/*.ts",
    ".next/dev/types/**/*.ts",
    "**/*.mts"
  ],
  "exclude": [
    "node_modules"
  ]
}
```

## File: README.md
```
This is a [Next.js](https://nextjs.org) project bootstrapped with [`create-next-app`](https://nextjs.org/docs/app/api-reference/cli/create-next-app).

## Getting Started

First, run the development server:

```bash
npm run dev
# or
yarn dev
# or
pnpm dev
# or
bun dev
```

Open [http://localhost:3000](http://localhost:3000) with your browser to see the result.

You can start editing the page by modifying `app/page.tsx`. The page auto-updates as you edit the file.

This project uses [`next/font`](https://nextjs.org/docs/app/building-your-application/optimizing/fonts) to automatically optimize and load [Geist](https://vercel.com/font), a new font family for Vercel.

## Learn More

To learn more about Next.js, take a look at the following resources:

- [Next.js Documentation](https://nextjs.org/docs) - learn about Next.js features and API.
- [Learn Next.js](https://nextjs.org/learn) - an interactive Next.js tutorial.

You can check out [the Next.js GitHub repository](https://github.com/vercel/next.js) - your feedback and contributions are welcome!

## Deploy on Vercel

The easiest way to deploy your Next.js app is to use the [Vercel Platform](https://vercel.com/new?utm_medium=default-template&filter=next.js&utm_source=create-next-app&utm_campaign=create-next-app-readme) from the creators of Next.js.

Check out our [Next.js deployment documentation](https://nextjs.org/docs/app/building-your-application/deploying) for more details.

```

## File: tailwind.config.ts
```
import type { Config } from 'tailwindcss';

const config: Config = {
    darkMode: ['class', '[data-theme="dark"]'],
    content: [
        './pages/**/*.{js,ts,jsx,tsx,mdx}',
        './components/**/*.{js,ts,jsx,tsx,mdx}',
        './app/**/*.{js,ts,jsx,tsx,mdx}',
    ],
    theme: {
        extend: {
            colors: {
                // Semantic Background Colors
                background: 'var(--background)',
                foreground: 'var(--foreground)',
                surface: {
                    DEFAULT: 'var(--surface-primary)',
                    secondary: 'var(--surface-secondary)',
                    dark: 'var(--surface-dark)',
                    glass: 'var(--surface-glass)',
                },
                // Semantic Text Colors
                'text-primary': 'var(--text-primary)',
                'text-secondary': 'var(--text-secondary)',
                'text-muted': 'var(--text-muted)',
                // Brand Colors
                primary: {
                    50: '#ecfdf5',
                    100: '#d1fae5',
                    200: '#a7f3d0',
                    300: '#6ee7b7',
                    400: '#34d399',
                    500: 'var(--color-primary)',
                    DEFAULT: 'var(--color-primary)',
                    600: 'var(--color-primary-dark)',
                    700: '#047857',
                    800: '#065f46',
                    900: '#064e3b',
                    950: '#022c22',
                },
                accent: {
                    50: '#fffbeb',
                    100: '#fef3c7',
                    200: '#fde68a',
                    300: '#fcd34d',
                    400: '#fbbf24',
                    500: 'var(--color-accent)',
                    DEFAULT: 'var(--color-accent)',
                    600: 'var(--color-accent-dark)',
                    700: '#b45309',
                    800: '#92400e',
                    900: '#78350f',
                    950: '#451a03',
                },
                // Borders
                'border-main': 'var(--border-color)',
                'border-subtle': 'var(--border-subtle)',
            },
            boxShadow: {
                'glow-primary': '0 0 20px var(--glow-primary)',
                'glow-accent': '0 0 20px var(--glow-accent)',
                'glow-blue': '0 0 20px var(--glow-blue)',
                'premium-sm': '0 1px 2px 0 rgb(0 0 0 / 0.05)',
                'premium-md': '0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)',
                'premium-lg': '0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1)',
            },
            borderRadius: {
                sm: 'calc(var(--radius) - 4px)',
                md: 'calc(var(--radius) - 2px)',
                lg: 'var(--radius)',
                xl: 'calc(var(--radius) + 4px)',
            },
            fontFamily: {
                sans: ['var(--font-geist-sans)', 'Arial', 'sans-serif'],
                mono: ['var(--font-geist-mono)', 'monospace'],
            },
            spacing: {
                xs: '0.25rem',
                sm: '0.5rem',
                md: '1rem',
                lg: '1.5rem',
                xl: '2rem',
            }
        },
    },
    plugins: [],
};

export default config;

```

## File: app\error.tsx
```
'use client';

import { useEffect } from 'react';
import Link from 'next/link';

// Extend Window interface for gtag
declare global {
    interface Window {
        gtag?: (...args: unknown[]) => void;
    }
}

// Error tracking - could be Sentry, LogRocket, etc.
function reportError(error: Error, digest?: string) {
    // Send to external error tracking service
    if (typeof window !== 'undefined' && window.gtag) {
        window.gtag('event', 'exception', {
            description: error.message,
            fatal: true,
            error_digest: digest,
        });
    }
    
    // Log to console in development
    if (process.env.NODE_ENV === 'development') {
        console.error('Error reported:', { error, digest });
    }
}

export default function Error({
    error,
    reset,
}: {
    error: Error & { digest?: string };
    reset: () => void;
}) {
    useEffect(() => {
        reportError(error, error.digest);
    }, [error]);

    const isNetworkError = error.message?.toLowerCase().includes('network') ||
                           error.message?.toLowerCase().includes('fetch');
    
    const isAuthError = error.message?.toLowerCase().includes('unauthorized') ||
                        error.message?.toLowerCase().includes('auth');

    return (
        <div className="flex flex-col items-center justify-center min-h-screen bg-slate-950 text-slate-100 p-4">
            <div className="bg-slate-900 border border-slate-800 rounded-xl p-8 max-w-md w-full text-center shadow-2xl">
                <div className="text-5xl mb-4">
                    {isNetworkError ? 'ğŸ“¡' : isAuthError ? 'ğŸ”' : 'âš ï¸'}
                </div>
                <h2 className="text-xl font-bold mb-2 text-white">
                    {isNetworkError 
                        ? 'BaÄŸlantÄ± HatasÄ±' 
                        : isAuthError 
                            ? 'Oturum HatasÄ±'
                            : 'Bir ÅŸeyler ters gitti!'}
                </h2>
                <p className="text-slate-400 mb-6 text-sm">
                    {isNetworkError 
                        ? 'Ä°nternet baÄŸlantÄ±nÄ±zÄ± kontrol edip tekrar deneyin.'
                        : isAuthError
                            ? 'Oturumunuz sona ermiÅŸ olabilir. Tekrar giriÅŸ yapÄ±n.'
                            : 'Uygulama beklenmedik bir hatayla karÅŸÄ±laÅŸtÄ±. LÃ¼tfen tekrar deneyin.'}
                </p>
                
                {/* Error details in development */}
                {process.env.NODE_ENV === 'development' && (
                    <div className="bg-slate-950/50 p-3 rounded mb-6 text-left border border-slate-800">
                        <code className="text-xs text-rose-400 font-mono break-all line-clamp-4">
                            {error.message || "Bilinmeyen Hata"}
                        </code>
                        {error.digest && (
                            <p className="text-xs text-slate-500 mt-2">
                                Digest: {error.digest}
                            </p>
                        )}
                    </div>
                )}
                
                {/* Production: show simple error code */}
                {process.env.NODE_ENV === 'production' && error.digest && (
                    <p className="text-xs text-slate-500 mb-4">
                        Hata kodu: {error.digest}
                    </p>
                )}
                
                <div className="flex flex-col gap-3">
                    <button
                        onClick={reset}
                        className="w-full px-4 py-3 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg transition-colors font-bold"
                    >
                        ğŸ”„ Tekrar Dene
                    </button>
                    
                    {isAuthError && (
                        <Link 
                            href="/login"
                            className="w-full px-4 py-3 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg transition-colors font-bold block"
                        >
                            ğŸ” GiriÅŸ Yap
                        </Link>
                    )}
                    
                    <Link 
                        href="/"
                        className="w-full px-4 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors font-medium block"
                    >
                        ğŸ  Ana Sayfaya DÃ¶n
                    </Link>
                </div>
                
                {/* Helpful tips */}
                <div className="mt-6 pt-4 border-t border-slate-800">
                    <p className="text-xs text-slate-500">
                        Sorun devam ederse{' '}
                        <a 
                            href="mailto:destek@volleysimulator.com" 
                            className="text-emerald-400 hover:underline"
                        >
                            destek@volleysimulator.com
                        </a>
                        {' '}adresinden bize ulaÅŸÄ±n.
                    </p>
                </div>
            </div>
        </div>
    );
}

```

## File: app\global-error.tsx
```
'use client';

import { useEffect } from 'react';

export default function GlobalError({
    error,
    reset,
}: {
    error: Error & { digest?: string };
    reset: () => void;
}) {
    useEffect(() => {
        // Report to error tracking service
        if (typeof window !== 'undefined' && window.gtag) {
            window.gtag('event', 'exception', {
                description: `Global Error: ${error.message}`,
                fatal: true,
                error_digest: error.digest,
            });
        }
        console.error('Global Error:', error);
    }, [error]);

    return (
        <html lang="tr">
            <body className="bg-slate-950 text-white min-h-screen flex items-center justify-center p-4">
                <div className="bg-slate-900 border border-slate-800 rounded-xl p-8 max-w-md w-full text-center shadow-2xl">
                    <div className="text-5xl mb-4">ğŸ’¥</div>
                    <h2 className="text-xl font-bold mb-2 text-white">
                        Kritik Hata
                    </h2>
                    <p className="text-slate-400 mb-6 text-sm">
                        Uygulama kritik bir hatayla karÅŸÄ±laÅŸtÄ±. SayfayÄ± yenilemeyi deneyin.
                    </p>
                    
                    {error.digest && (
                        <p className="text-xs text-slate-500 mb-4">
                            Hata kodu: {error.digest}
                        </p>
                    )}
                    
                    <div className="flex flex-col gap-3">
                        <button
                            onClick={reset}
                            className="w-full px-4 py-3 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg transition-colors font-bold"
                        >
                            ğŸ”„ Tekrar Dene
                        </button>
                        
                        <button
                            onClick={() => window.location.href = '/'}
                            className="w-full px-4 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors font-medium"
                        >
                            ğŸ  Ana Sayfaya DÃ¶n
                        </button>
                    </div>
                </div>
            </body>
        </html>
    );
}

```

## File: app\globals.css
```
@import "tailwindcss";

@plugin "tailwindcss-animate";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

:root {
  --surface-primary: #1e293b;
  --surface-secondary: #334155;
  --border-color: #475569;
  --text-primary: #f1f5f9;
  --text-secondary: #94a3b8;
  --text-muted: #64748b;

  /* Premium Color Palette */
  --color-primary: #10b981;
  --color-primary-light: #34d399;
  --color-primary-dark: #059669;
  --color-accent: #f59e0b;
  --color-accent-light: #fbbf24;
  --color-accent-dark: #d97706;

  /* Glow Colors */
  --glow-primary: rgba(16, 185, 129, 0.4);
  --glow-accent: rgba(245, 158, 11, 0.4);
  --glow-blue: rgba(59, 130, 246, 0.4);

  /* Surface Colors */
  --surface-dark: rgba(15, 23, 42, 0.8);
  --surface-glass: rgba(255, 255, 255, 0.05);
  --border-subtle: rgba(255, 255, 255, 0.1);
  --radius: 0.625rem;
  --background: oklch(1 0 0);
  --foreground: oklch(0.145 0 0);
  --card: oklch(1 0 0);
  --card-foreground: oklch(0.145 0 0);
  --popover: oklch(1 0 0);
  --popover-foreground: oklch(0.145 0 0);
  --primary: oklch(0.205 0 0);
  --primary-foreground: oklch(0.985 0 0);
  --secondary: oklch(0.97 0 0);
  --secondary-foreground: oklch(0.205 0 0);
  --muted: oklch(0.97 0 0);
  --muted-foreground: oklch(0.556 0 0);
  --accent: oklch(0.97 0 0);
  --accent-foreground: oklch(0.205 0 0);
  --destructive: oklch(0.577 0.245 27.325);
  --border: oklch(0.922 0 0);
  --input: oklch(0.922 0 0);
  --ring: oklch(0.708 0 0);
  --chart-1: oklch(0.646 0.222 41.116);
  --chart-2: oklch(0.6 0.118 184.704);
  --chart-3: oklch(0.398 0.07 227.392);
  --chart-4: oklch(0.828 0.189 84.429);
  --chart-5: oklch(0.769 0.188 70.08);
  --sidebar: oklch(0.985 0 0);
  --sidebar-foreground: oklch(0.145 0 0);
  --sidebar-primary: oklch(0.205 0 0);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.97 0 0);
  --sidebar-accent-foreground: oklch(0.205 0 0);
  --sidebar-border: oklch(0.922 0 0);
  --sidebar-ring: oklch(0.708 0 0);
}

/* Light Theme - Premium Warm Aesthetic */
/* Light Theme - Premium Modern (Clean Slate) */
[data-theme="light"] {
  --background: #f8fafc;
  /* Slate 50 - Crisp Cool Base */
  --foreground: #0f172a;
  /* Slate 900 - Deep Sharp Text */

  --surface-primary: #ffffff;
  /* Pure White - High Contrast Cards */
  --surface-secondary: #f1f5f9;
  /* Slate 100 - Subtle Separation */

  --border-color: #e2e8f0;
  /* Slate 200 - Structure without harshness */

  --text-primary: #0f172a;
  /* Slate 900 */
  --text-secondary: #475569;
  /* Slate 600 - Balanced secondary */
  --text-muted: #94a3b8;
  /* Slate 400 */

  --surface-dark: rgba(255, 255, 255, 0.9);
  --surface-glass: rgba(255, 255, 255, 0.7);
  --border-subtle: #cbd5e1;
  /* Slate 300 */

  /* Light Theme Brand Colors - High Contrast */
  --color-primary: #059669;
  /* Emerald 600 - Readable on White */
  --color-primary-light: #10b981;
  /* Emerald 500 */
  --color-primary-dark: #047857;
  /* Emerald 700 */

  --color-accent: #d97706;
  /* Amber 600 - Richer for visibility */
  --color-accent-light: #f59e0b;
  /* Amber 500 */
  --color-accent-dark: #b45309;
  /* Amber 700 */

  /* Light Theme Glow - More diffused for depth */
  --glow-primary: rgba(5, 150, 105, 0.2);
  --glow-accent: rgba(217, 119, 6, 0.2);
  --glow-blue: rgba(37, 99, 235, 0.2);
}

/* Dark Theme (explicit) */
[data-theme="dark"] {
  --background: #0f172a;
  --foreground: #f1f5f9;
  --surface-primary: #1e293b;
  --surface-secondary: #334155;
  --border-color: #475569;
  --text-primary: #f1f5f9;
  --text-secondary: #94a3b8;
  --text-muted: #64748b;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
  --color-sidebar-ring: var(--sidebar-ring);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar: var(--sidebar);
  --color-chart-5: var(--chart-5);
  --color-chart-4: var(--chart-4);
  --color-chart-3: var(--chart-3);
  --color-chart-2: var(--chart-2);
  --color-chart-1: var(--chart-1);
  --color-ring: var(--ring);
  --color-input: var(--input);
  --color-border: var(--border);
  --color-destructive: var(--destructive);
  --color-accent-foreground: var(--accent-foreground);
  --color-accent: var(--accent);
  --color-muted-foreground: var(--muted-foreground);
  --color-muted: var(--muted);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-secondary: var(--secondary);
  --color-primary-foreground: var(--primary-foreground);
  --color-primary: var(--primary);
  --color-popover-foreground: var(--popover-foreground);
  --color-popover: var(--popover);
  --color-card-foreground: var(--card-foreground);
  --color-card: var(--card);
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  --radius-2xl: calc(var(--radius) + 8px);
  --radius-3xl: calc(var(--radius) + 12px);
  --radius-4xl: calc(var(--radius) + 16px);
}

body {
  transition: background-color 0.3s ease, color 0.3s ease;
}

/* Override rules removed - now handled by tailwind.config.ts and CSS variables */

/* ============================================================================
   PREMIUM GRADIENT TEXT
   ============================================================================ */

.gradient-text-primary {
  background: linear-gradient(135deg, var(--color-primary) 0%, #06b6d4 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.gradient-text-accent {
  background: linear-gradient(135deg, var(--color-accent) 0%, #f97316 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.gradient-text-animated {
  background: linear-gradient(90deg, var(--color-primary), #06b6d4, var(--color-primary));
  background-size: 200% auto;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  animation: gradient-shift 3s ease infinite;
}

@keyframes gradient-shift {
  0% {
    background-position: 0% center;
  }

  50% {
    background-position: 100% center;
  }

  100% {
    background-position: 0% center;
  }
}

/* ============================================================================
   ANIMATIONS
   ============================================================================ */

@keyframes fadeIn {
  from {
    opacity: 0;
  }

  to {
    opacity: 1;
  }
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(10px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes pulse {

  0%,
  100% {
    opacity: 1;
  }

  50% {
    opacity: 0.5;
  }
}

@keyframes highlight {
  0% {
    background-color: rgba(16, 185, 129, 0.3);
  }

  100% {
    background-color: transparent;
  }
}

@keyframes bounce {

  0%,
  100% {
    transform: translateY(0);
  }

  50% {
    transform: translateY(-5px);
  }
}

@keyframes shake {

  0%,
  100% {
    transform: translateX(0);
  }

  25% {
    transform: translateX(-5px);
  }

  75% {
    transform: translateX(5px);
  }
}

@keyframes confetti {
  0% {
    transform: translateY(0) rotate(0deg);
    opacity: 1;
  }

  100% {
    transform: translateY(-50px) rotate(360deg);
    opacity: 0;
  }
}

@keyframes confetti-fall {
  0% {
    transform: translateY(-20px) rotate(0deg);
    opacity: 1;
  }

  100% {
    transform: translateY(100vh) rotate(720deg);
    opacity: 0;
  }
}

.animate-confetti {
  animation: confetti-fall 2s ease-out forwards;
}

@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }

  100% {
    background-position: 200% 0;
  }
}

/* Animation utility classes */
.animate-fade-in {
  animation: fadeIn 0.15s ease-out forwards;
}

.animate-slide-up {
  animation: slideUp 0.15s ease-out forwards;
}

.animate-slide-down {
  animation: slideDown 0.15s ease-out forwards;
}

.animate-highlight {
  animation: highlight 1s ease-out forwards;
}

.animate-bounce-once {
  animation: bounce 0.5s ease-out;
}

.animate-shake {
  animation: shake 0.4s ease-out;
}

/* ============================================================================
   TRANSITIONS
   ============================================================================ */

.transition-smooth {
  transition: all 0.1s ease-out;
}

.transition-colors-fast {
  transition: background-color 0.1s ease, border-color 0.1s ease, color 0.1s ease;
}

.transition-transform-fast {
  transition: transform 0.15s ease;
}

/* Hover effects */
.hover-lift:hover {
  transform: translateY(-2px);
}

.hover-glow:hover {
  box-shadow: 0 0 15px rgba(16, 185, 129, 0.4);
}

.hover-scale:hover {
  transform: scale(1.02);
}

/* Active effects */
.active-press:active {
  transform: scale(0.97);
}

/* ============================================================================
   SKELETON LOADING
   ============================================================================ */

.skeleton {
  background: linear-gradient(90deg,
      rgba(255, 255, 255, 0.05) 0%,
      rgba(255, 255, 255, 0.1) 50%,
      rgba(255, 255, 255, 0.05) 100%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
  border-radius: 4px;
}

.skeleton-text {
  height: 1em;
  margin-bottom: 0.5em;
}

.skeleton-card {
  height: 100px;
  margin-bottom: 1rem;
}

/* ============================================================================
   MOBILE OPTIMIZATIONS
   ============================================================================ */

/* Larger touch targets */
@media (max-width: 768px) {
  .touch-target {
    min-height: 44px;
    min-width: 44px;
  }

  .touch-target-sm {
    min-height: 36px;
    padding: 0.5rem;
  }

  .safe-p-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }

  .safe-m-bottom {
    margin-bottom: env(safe-area-inset-bottom);
  }
}

/* ============================================================================
   SCROLLBAR STYLING
   ============================================================================ */

::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* ============================================================================
   TOAST NOTIFICATIONS
   ============================================================================ */

.toast-container {
  position: fixed;
  bottom: 1rem;
  right: 1rem;
  z-index: 9999;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.toast {
  padding: 0.75rem 1rem;
  border-radius: 0.5rem;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  animation: slideUp 0.3s ease-out;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  min-width: 250px;
}

.toast-success {
  background: linear-gradient(135deg, #059669, #10b981);
  color: white;
}

.toast-error {
  background: linear-gradient(135deg, #dc2626, #ef4444);
  color: white;
}

.toast-info {
  background: linear-gradient(135deg, #2563eb, #3b82f6);
  color: white;
}

.toast-undo {
  background: linear-gradient(135deg, #d97706, #f59e0b);
  color: white;
  cursor: default;
}

/* ============================================================================
   SPECIAL EFFECTS
   ============================================================================ */

/* Glass morphism */
.glass {
  background: rgba(255, 255, 255, 0.05);
  -webkit-backdrop-filter: blur(10px);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

/* Gradient borders */
.gradient-border {
  position: relative;
  background: linear-gradient(135deg, #1e293b, #0f172a);
}

.gradient-border::before {
  content: '';
  position: absolute;
  inset: 0;
  padding: 1px;
  background: linear-gradient(135deg, #10b981, #3b82f6);
  -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  border-radius: inherit;
  pointer-events: none;
}

/* Glow effect */
.glow-emerald {
  box-shadow: 0 0 20px rgba(16, 185, 129, 0.3);
}

.glow-amber {
  box-shadow: 0 0 20px rgba(245, 158, 11, 0.3);
}

.glow-rose {
  box-shadow: 0 0 20px rgba(244, 63, 94, 0.3);
}

/* ============================================================================
   GAMIFICATION ANIMATIONS
   ============================================================================ */

@keyframes bounce-in {
  0% {
    transform: translateX(-50%) scale(0.5);
    opacity: 0;
  }

  50% {
    transform: translateX(-50%) scale(1.1);
  }

  100% {
    transform: translateX(-50%) scale(1);
    opacity: 1;
  }
}

@keyframes xp-gain {
  0% {
    transform: translateY(0) scale(1);
    opacity: 1;
  }

  100% {
    transform: translateY(-30px) scale(1.2);
    opacity: 0;
  }
}

@keyframes level-up {
  0% {
    transform: scale(1);
    filter: brightness(1);
  }

  50% {
    transform: scale(1.3);
    filter: brightness(1.5);
  }

  100% {
    transform: scale(1);
    filter: brightness(1);
  }
}

.animate-bounce-in {
  animation: bounce-in 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
}

.animate-xp-gain {
  animation: xp-gain 1s ease-out forwards;
}

.animate-level-up {
  animation: level-up 0.6s ease-out;
}

.animate-shimmer {
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
  background-size: 200% 100%;
  animation: shimmer 2s infinite;
}

/* ============================================================================
   PREMIUM UI EFFECTS (Added for UI/UX Enhancement)
   ============================================================================ */

/* Floating Animation */
@keyframes float {

  0%,
  100% {
    transform: translateY(0px);
  }

  50% {
    transform: translateY(-10px);
  }
}

.animate-float {
  animation: float 3s ease-in-out infinite;
}

.animate-float-slow {
  animation: float 5s ease-in-out infinite;
}

/* Pulse Glow Effect */
@keyframes pulse-glow {

  0%,
  100% {
    box-shadow: 0 0 20px var(--glow-primary);
  }

  50% {
    box-shadow: 0 0 40px var(--glow-primary), 0 0 60px var(--glow-primary);
  }
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-pulse-glow-accent {
  animation: pulse-glow 2s ease-in-out infinite;
  --glow-primary: var(--glow-accent);
}

/* Staggered Fade In */
@keyframes stagger-fade-in {
  from {
    opacity: 0;
    transform: translateY(20px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.stagger-item {
  opacity: 0;
  animation: stagger-fade-in 0.4s ease-out forwards;
}

.stagger-item:nth-child(1) {
  animation-delay: 0.1s;
}

.stagger-item:nth-child(2) {
  animation-delay: 0.2s;
}

.stagger-item:nth-child(3) {
  animation-delay: 0.3s;
}

.stagger-item:nth-child(4) {
  animation-delay: 0.4s;
}

.stagger-item:nth-child(5) {
  animation-delay: 0.5s;
}

.stagger-item:nth-child(6) {
  animation-delay: 0.6s;
}

/* Card Shine Effect on Hover */
.card-shine {
  position: relative;
  overflow: hidden;
}

.card-shine::after {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: linear-gradient(to right,
      transparent 0%,
      rgba(255, 255, 255, 0.1) 50%,
      transparent 100%);
  transform: rotate(45deg) translateX(-100%);
  transition: transform 0.6s ease;
}

.card-shine:hover::after {
  transform: rotate(45deg) translateX(100%);
}

/* Premium Border Glow */
.border-glow {
  position: relative;
}

.border-glow::before {
  content: '';
  position: absolute;
  inset: -1px;
  background: linear-gradient(135deg, var(--color-primary), var(--color-accent));
  border-radius: inherit;
  z-index: -1;
  opacity: 0;
  transition: opacity 0.3s ease;
}

.border-glow:hover::before {
  opacity: 1;
}

/* Focus Ring Animation */
@keyframes focus-ring-pulse {

  0%,
  100% {
    box-shadow: 0 0 0 0 var(--glow-primary);
  }

  50% {
    box-shadow: 0 0 0 4px var(--glow-primary);
  }
}

.focus-ring-animated:focus {
  animation: focus-ring-pulse 1.5s ease-in-out infinite;
  outline: none;
}

/* Smooth Underline on Hover */
.hover-underline {
  position: relative;
}

.hover-underline::after {
  content: '';
  position: absolute;
  left: 0;
  bottom: -2px;
  width: 0;
  height: 2px;
  background: linear-gradient(90deg, var(--color-primary), var(--color-accent));
  transition: width 0.3s ease;
}

.hover-underline:hover::after {
  width: 100%;
}

/* Premium Input Focus */
.input-premium {
  transition: all 0.2s ease;
  border: 1px solid var(--border-subtle);
}

.input-premium:focus {
  border-color: var(--color-primary);
  box-shadow: 0 0 0 3px var(--glow-primary), 0 0 20px var(--glow-primary);
}

/* Button Press Effect */
.btn-press {
  transition: transform 0.1s ease, box-shadow 0.1s ease;
}

.btn-press:active {
  transform: scale(0.97);
}

/* Parallax Layers Base */
.parallax-layer {
  will-change: transform;
  transition: transform 0.1s ease-out;
}

/* Scroll Reveal Base */
.scroll-reveal {
  opacity: 0;
  transform: translateY(30px);
  transition: opacity 0.6s ease, transform 0.6s ease;
}

.scroll-reveal.revealed {
  opacity: 1;
  transform: translateY(0);
}

/* Smooth Scroll */
html {
  scroll-behavior: smooth;
}

/* Selection Color */
::selection {
  background: var(--color-primary);
  color: white;
}

/* Loading Dots Animation */
@keyframes loading-dots {

  0%,
  80%,
  100% {
    transform: scale(0);
    opacity: 0.5;
  }

  40% {
    transform: scale(1);
    opacity: 1;
  }
}

.loading-dot {
  display: inline-block;
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: var(--color-primary);
  animation: loading-dots 1.4s infinite ease-in-out both;
}

.loading-dot:nth-child(1) {
  animation-delay: -0.32s;
}

.loading-dot:nth-child(2) {
  animation-delay: -0.16s;
}

.loading-dot:nth-child(3) {
  animation-delay: 0s;
}

/* Animation Delay Utilities */
.delay-0 {
  animation-delay: 0s;
}

.delay-100 {
  animation-delay: 0.1s;
}

.delay-200 {
  animation-delay: 0.2s;
}

.delay-300 {
  animation-delay: 0.3s;
}

.delay-400 {
  animation-delay: 0.4s;
}

.delay-500 {
  animation-delay: 0.5s;
}

.delay-600 {
  animation-delay: 0.6s;
}

.delay-1000 {
  animation-delay: 1s;
}

.delay-1500 {
  animation-delay: 1.5s;
}

.delay-2000 {
  animation-delay: 2s;
}

.delay-2500 {
  animation-delay: 2.5s;
}

.dark {
  --background: oklch(0.145 0 0);
  --foreground: oklch(0.985 0 0);
  --card: oklch(0.205 0 0);
  --card-foreground: oklch(0.985 0 0);
  --popover: oklch(0.205 0 0);
  --popover-foreground: oklch(0.985 0 0);
  --primary: oklch(0.922 0 0);
  --primary-foreground: oklch(0.205 0 0);
  --secondary: oklch(0.269 0 0);
  --secondary-foreground: oklch(0.985 0 0);
  --muted: oklch(0.269 0 0);
  --muted-foreground: oklch(0.708 0 0);
  --accent: oklch(0.269 0 0);
  --accent-foreground: oklch(0.985 0 0);
  --destructive: oklch(0.704 0.191 22.216);
  --border: oklch(1 0 0 / 10%);
  --input: oklch(1 0 0 / 15%);
  --ring: oklch(0.556 0 0);
  --chart-1: oklch(0.488 0.243 264.376);
  --chart-2: oklch(0.696 0.17 162.48);
  --chart-3: oklch(0.769 0.188 70.08);
  --chart-4: oklch(0.627 0.265 303.9);
  --chart-5: oklch(0.645 0.246 16.439);
  --sidebar: oklch(0.205 0 0);
  --sidebar-foreground: oklch(0.985 0 0);
  --sidebar-primary: oklch(0.488 0.243 264.376);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.269 0 0);
  --sidebar-accent-foreground: oklch(0.985 0 0);
  --sidebar-border: oklch(1 0 0 / 10%);
  --sidebar-ring: oklch(0.556 0 0);
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    @apply bg-background text-foreground;
  }
}
```

## File: app\layout.tsx
```
import type { Metadata } from "next";
import dynamic from "next/dynamic";
import Script from "next/script";
import { Geist, Geist_Mono } from "next/font/google";
import { Analytics } from "@vercel/analytics/react";
import { SpeedInsights } from "@vercel/speed-insights/next";
import { NextIntlClientProvider } from 'next-intl';
import { getMessages, getLocale } from 'next-intl/server';
import "./globals.css";
import { ToastProvider } from "./components/Toast";
import Navbar from "./components/Navbar";
import { AuthProvider } from "./context/AuthContext";
import AuthGuard from "./components/AuthGuard";
import { QueryProvider } from "./providers/QueryProvider";
import { LocaleProvider } from "./context/LocaleContext";
import { OrganizationSchema, WebsiteSchema } from "./components/SEOSchema";
import { ThemeProvider } from "./context/ThemeContext";
import { FriendsProvider } from "./context/FriendsContext";
import { NotificationsProvider } from "./context/NotificationsContext";
import { QuestsProvider } from "./context/QuestsContext";
import { CustomLeaguesProvider } from "./context/CustomLeaguesContext";
import { LiveMatchProvider } from "./context/LiveMatchContext";
import { DynamicTeamTheme } from "./components/DynamicTeamTheme";
import { LevelUpModal } from "./components/ui/LevelUpModal";

import { ClientSideComponents } from "./components/ClientSideComponents";

const geistSans = Geist({
  variable: "--font-geist-sans",
  subsets: ["latin"],
  display: "swap", // Improve FCP by showing fallback font immediately
  preload: true,
});

const geistMono = Geist_Mono({
  variable: "--font-geist-mono",
  subsets: ["latin"],
  display: "swap",
  preload: false, // Only load when needed
});

export const viewport = {
  themeColor: "#0f172a",
};

const BASE_URL = process.env.NEXT_PUBLIC_SITE_URL || 'https://volleysimulator.com.tr';

export const metadata: Metadata = {
  metadataBase: new URL(BASE_URL),
  title: {
    default: "VolleySimulator - Voleybol Tahmin ve SimÃ¼lasyon Platformu",
    template: "%s | VolleySimulator",
  },
  description: "TÃ¼rkiye voleybol ligleri iÃ§in puan durumu, maÃ§ tahminleri, playoff simÃ¼lasyonu ve liderlik tablosu. Sultanlar Ligi, 1. Lig, 2. Lig ve CEV turnuvalarÄ±nÄ± takip edin.",
  keywords: [
    "voleybol",
    "voleybol tahmin",
    "Sultanlar Ligi",
    "voleybol simÃ¼lasyon",
    "puan durumu",
    "playoff",
    "CEV Åampiyonlar Ligi",
    "TÃ¼rkiye voleybol",
    "maÃ§ tahmini",
    "voleybol istatistikleri",
  ],
  authors: [{ name: "VolleySimulator" }],
  creator: "VolleySimulator",
  publisher: "VolleySimulator",
  manifest: "/manifest.json",
  icons: {
    icon: "/favicon.svg",
    apple: "/favicon.svg",
  },
  appleWebApp: {
    capable: true,
    statusBarStyle: "black-translucent",
    title: "VolleySim",
  },
  openGraph: {
    type: "website",
    locale: "tr_TR",
    alternateLocale: "en_US",
    url: BASE_URL,
    siteName: "VolleySimulator",
    title: "VolleySimulator - Voleybol Tahmin ve SimÃ¼lasyon Platformu",
    description: "TÃ¼rkiye voleybol ligleri iÃ§in puan durumu, maÃ§ tahminleri, playoff simÃ¼lasyonu ve liderlik tablosu.",
  },
  twitter: {
    card: "summary_large_image",
    title: "VolleySimulator - Voleybol Tahmin ve SimÃ¼lasyon Platformu",
    description: "TÃ¼rkiye voleybol ligleri iÃ§in puan durumu, maÃ§ tahminleri, playoff simÃ¼lasyonu ve liderlik tablosu.",
  },
  robots: {
    index: true,
    follow: true,
    googleBot: {
      index: true,
      follow: true,
      "max-video-preview": -1,
      "max-image-preview": "large",
      "max-snippet": -1,
    },
  },
  verification: {
    // Add your verification codes when you have them
    // google: "your-google-verification-code",
    // yandex: "your-yandex-verification-code",
  },
  alternates: {
    canonical: BASE_URL,
    languages: {
      "tr-TR": BASE_URL,
      "en-US": `${BASE_URL}/en`,
    },
  },
};

export default async function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode;
}>) {
  const locale = await getLocale();
  const messages = await getMessages();

  return (
    <html lang={locale} suppressHydrationWarning>
      <head>
        <OrganizationSchema />
        <WebsiteSchema />
      </head>
      <body
        className={`${geistSans.variable} ${geistMono.variable} antialiased bg-slate-950`}
        suppressHydrationWarning
      >
        <NextIntlClientProvider messages={messages}>
          <LocaleProvider>
            <QueryProvider>
              <AuthProvider>
                <ThemeProvider>
                  <DynamicTeamTheme />
                  <LevelUpModal />
                  <NotificationsProvider>
                    <FriendsProvider>
                      <QuestsProvider>
                        <CustomLeaguesProvider>
                          <LiveMatchProvider>
                            <ToastProvider>
                              <Navbar />
                              <div className="pt-12 pb-16 min-h-screen flex flex-col">
                                <AuthGuard>
                                  {children}
                                </AuthGuard>
                              </div>
                            </ToastProvider>
                          </LiveMatchProvider>
                        </CustomLeaguesProvider>
                      </QuestsProvider>
                    </FriendsProvider>
                  </NotificationsProvider>
                </ThemeProvider>
              </AuthProvider>
            </QueryProvider>
          </LocaleProvider>
        </NextIntlClientProvider>
        {/* Service Worker Registration */}
        <Script id="sw-register" strategy="lazyOnload">
          {`
              if ('serviceWorker' in navigator) {
                window.addEventListener('load', function() {
                  navigator.serviceWorker.register('/sw.js').then(function(registration) {
                    // Registration successful
                  }, function(err) {
                    // Registration failed
                  });
                });
              }
          `}
        </Script>

        <Analytics />
        <SpeedInsights />

        {/* Google Analytics */}
        <Script
          src="https://www.googletagmanager.com/gtag/js?id=G-C4T368HQ54"
          strategy="afterInteractive"
        />
        <Script id="google-analytics" strategy="afterInteractive">
          {`
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());

            gtag('config', 'G-C4T368HQ54');
          `}
        </Script>

        <ClientSideComponents />
      </body>
    </html>
  );
}

```

## File: app\not-found.tsx
```
import Link from 'next/link';

export default function NotFound() {
    return (
        <div className="flex flex-col items-center justify-center min-h-screen bg-slate-950 text-slate-100 p-4">
            <div className="bg-slate-900 border border-slate-800 rounded-xl p-8 max-w-md w-full text-center shadow-2xl">
                <div className="text-6xl mb-4">ğŸ</div>
                <h1 className="text-4xl font-bold mb-2 text-white">404</h1>
                <h2 className="text-xl font-medium mb-4 text-slate-300">
                    Sayfa BulunamadÄ±
                </h2>
                <p className="text-slate-400 mb-6 text-sm">
                    AradÄ±ÄŸÄ±nÄ±z sayfa mevcut deÄŸil veya taÅŸÄ±nmÄ±ÅŸ olabilir.
                </p>
                
                <div className="flex flex-col gap-3">
                    <Link 
                        href="/"
                        className="w-full px-4 py-3 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg transition-colors font-bold block"
                    >
                        ğŸ  Ana Sayfaya DÃ¶n
                    </Link>
                    
                    <Link 
                        href="/ligler"
                        className="w-full px-4 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors font-medium block"
                    >
                        âš½ Liglere Git
                    </Link>
                </div>
                
                {/* Quick links */}
                <div className="mt-6 pt-4 border-t border-slate-800">
                    <p className="text-xs text-slate-500 mb-3">PopÃ¼ler Sayfalar</p>
                    <div className="flex flex-wrap justify-center gap-2">
                        <Link 
                            href="/vsl/tahminoyunu" 
                            className="text-xs px-3 py-1 bg-slate-800 hover:bg-slate-700 rounded-full text-slate-300 transition-colors"
                        >
                            VSL Tahmin
                        </Link>
                        <Link 
                            href="/1lig/tahminoyunu" 
                            className="text-xs px-3 py-1 bg-slate-800 hover:bg-slate-700 rounded-full text-slate-300 transition-colors"
                        >
                            1.Lig Tahmin
                        </Link>
                        <Link 
                            href="/leaderboard" 
                            className="text-xs px-3 py-1 bg-slate-800 hover:bg-slate-700 rounded-full text-slate-300 transition-colors"
                        >
                            Liderlik
                        </Link>
                    </div>
                </div>
            </div>
        </div>
    );
}

```

## File: app\opengraph-image.tsx
```
import { ImageResponse } from 'next/og';

export const runtime = 'edge';

export const alt = 'VolleySimulator - Voleybol Tahmin ve SimÃ¼lasyon Platformu';
export const size = {
  width: 1200,
  height: 630,
};

export const contentType = 'image/png';

export default async function Image() {
  return new ImageResponse(
    (
      <div
        style={{
          height: '100%',
          width: '100%',
          display: 'flex',
          flexDirection: 'column',
          alignItems: 'center',
          justifyContent: 'center',
          backgroundColor: '#0f172a', // slate-950
          backgroundImage: 'radial-gradient(circle at 25px 25px, #334155 2%, transparent 0%), radial-gradient(circle at 75px 75px, #334155 2%, transparent 0%)',
          backgroundSize: '100px 100px',
        }}
      >
        <div
          style={{
            display: 'flex',
            flexDirection: 'column',
            alignItems: 'center',
            justifyContent: 'center',
            backgroundColor: 'rgba(15, 23, 42, 0.9)',
            padding: '60px 100px',
            borderRadius: '30px',
            border: '2px solid rgba(255, 255, 255, 0.1)',
            boxShadow: '0 25px 50px -12px rgba(0, 0, 0, 0.5)',
          }}
        >
          <div
            style={{
              fontSize: 90,
              fontWeight: 900,
              background: 'linear-gradient(to right, #34d399, #22d3ee)', // emerald-400 to cyan-400
              backgroundClip: 'text',
              color: 'transparent',
              marginBottom: 20,
              letterSpacing: '-0.05em',
              display: 'flex',
            }}
          >
            VolleySimulator
          </div>
          <div
            style={{
              fontSize: 36,
              color: '#e2e8f0', // slate-200
              textAlign: 'center',
              maxWidth: 900,
              lineHeight: 1.4,
              fontWeight: 500,
            }}
          >
            Voleybol TutkunlarÄ± Ä°Ã§in Yeni Nesil SimÃ¼lasyon
          </div>
          
          <div
             style={{
               display: 'flex',
               marginTop: 50,
               gap: 24,
             }}
          >
             <div style={{ display: 'flex', padding: '12px 24px', backgroundColor: 'rgba(220, 38, 38, 0.2)', color: '#f87171', borderRadius: 999, fontSize: 24, fontWeight: 600, border: '1px solid rgba(220, 38, 38, 0.5)' }}>Sultanlar Ligi</div>
             <div style={{ display: 'flex', padding: '12px 24px', backgroundColor: 'rgba(217, 119, 6, 0.2)', color: '#fbbf24', borderRadius: 999, fontSize: 24, fontWeight: 600, border: '1px solid rgba(217, 119, 6, 0.5)' }}>1. Lig</div>
             <div style={{ display: 'flex', padding: '12px 24px', backgroundColor: 'rgba(5, 150, 105, 0.2)', color: '#34d399', borderRadius: 999, fontSize: 24, fontWeight: 600, border: '1px solid rgba(5, 150, 105, 0.5)' }}>2. Lig</div>
             <div style={{ display: 'flex', padding: '12px 24px', backgroundColor: 'rgba(37, 99, 235, 0.2)', color: '#60a5fa', borderRadius: 999, fontSize: 24, fontWeight: 600, border: '1px solid rgba(37, 99, 235, 0.5)' }}>CEV</div>
          </div>
        </div>
      </div>
    ),
    {
      ...size,
    }
  );
}

```

## File: app\page.tsx
```
"use client";

// Prevent static prerendering - this page requires auth context
export const dynamic = 'force-dynamic';

import { useState, useEffect } from "react";
import Link from "next/link";
import { useRouter } from "next/navigation";
import { useAuth } from "./context/AuthContext";

export default function Home() {
  const router = useRouter();
  const { signIn, signInWithGoogle, user } = useAuth();

  const [email, setEmail] = useState("");
  const [password, setPassword] = useState("");
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState("");

  // Redirect if already logged in
  useEffect(() => {
    if (user) {
      router.push('/ligler');
    }
  }, [user, router]);

  if (user) {
    return null;
  }

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    setIsLoading(true);
    setError("");

    const { error } = await signIn(email, password);

    if (error) {
      setError(error.message === "Invalid login credentials"
        ? "E-posta veya ÅŸifre hatalÄ±"
        : error.message
      );
      setIsLoading(false);
    } else {
      router.push('/ligler');
    }
  };

  const handleGoogleLogin = async () => {
    await signInWithGoogle();
  };

  return (
    <main className="min-h-screen relative flex flex-col items-center justify-center p-4 overflow-hidden">
      {/* Background with Modern Gradient & Pattern */}
      <div className="absolute inset-0 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-slate-900 via-[#0a0a1a] to-black -z-20"></div>
      <div className="absolute inset-0 bg-[url('/grid.svg')] opacity-20 -z-10"></div>

      {/* Ambient Light Effects */}
      <div className="absolute top-0 left-1/4 w-96 h-96 bg-emerald-500/20 rounded-full blur-[128px] -z-10"></div>
      <div className="absolute bottom-0 right-1/4 w-96 h-96 bg-indigo-500/20 rounded-full blur-[128px] -z-10"></div>

      <div className="w-full max-w-6xl mx-auto grid lg:grid-cols-2 gap-12 items-center relative z-10">

        {/* Left Side: Brand & Features (Desktop) */}
        <div className="hidden lg:block space-y-8 animate-fade-in-left">
          <div className="space-y-2">
            <h1 className="text-4xl font-black tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-emerald-400 to-cyan-400">
              VolleySimulator
            </h1>
            <p className="text-2xl font-light text-slate-300">
              Voleybol TutkunlarÄ± Ä°Ã§in <br />
              <span className="font-semibold text-white">Yeni Nesil SimÃ¼lasyon</span>
            </p>
          </div>

          <div className="grid grid-cols-2 gap-4">
            <div className="bg-slate-900/40 backdrop-blur-sm border border-slate-700/50 p-4 rounded-2xl">
              <div className="text-3xl mb-2">ğŸ†</div>
              <h2 className="font-bold text-white mb-1">Tahmin Oyunu</h2>
              <p className="text-sm text-slate-400">MaÃ§ skorlarÄ±nÄ± tahmin et, puanlarÄ± topla ve liderliÄŸe yÃ¼ksel.</p>
            </div>
            <div className="bg-slate-900/40 backdrop-blur-sm border border-slate-700/50 p-4 rounded-2xl">
              <div className="text-3xl mb-2">ğŸ“Š</div>
              <h3 className="font-bold text-white mb-1">DetaylÄ± Analiz</h3>
              <p className="text-sm text-slate-400">TakÄ±m form durumlarÄ± ve yapay zeka destekli maÃ§ analizleri.</p>
            </div>
            <div className="bg-slate-900/40 backdrop-blur-sm border border-slate-700/50 p-4 rounded-2xl">
              <div className="text-3xl mb-2">âš¡</div>
              <h3 className="font-bold text-white mb-1">CanlÄ± Skor</h3>
              <p className="text-sm text-slate-400">MaÃ§ sonuÃ§larÄ±nÄ± anlÄ±k takip et, ligdeki geliÅŸmeleri kaÃ§Ä±rma.</p>
            </div>
            <div className="bg-slate-900/40 backdrop-blur-sm border border-slate-700/50 p-4 rounded-2xl">
              <div className="text-3xl mb-2">ğŸŒ</div>
              <h3 className="font-bold text-white mb-1">Topluluk</h3>
              <p className="text-sm text-slate-400">DiÄŸer voleybol severlerle yarÄ±ÅŸ ve sÄ±ralamada yerini al.</p>
            </div>
          </div>
        </div>

        {/* Right Side: Login Card */}
        <div className="w-full max-w-md mx-auto lg:ml-auto">
          <div className="bg-slate-900/60 backdrop-blur-xl border border-slate-700/50 shadow-2xl rounded-3xl p-8 animate-fade-in-up">

            {/* Mobile Header (Visible only on mobile) */}
            <div className="text-center mb-8 lg:hidden">
              <h1 className="text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-emerald-400 to-teal-200">
                VolleySimulator
              </h1>
              <p className="text-2xl font-bold text-white mt-2">HoÅŸ Geldiniz</p>
            </div>

            <div className="text-center mb-6 hidden lg:block">
              <p className="text-2xl font-bold text-white">GiriÅŸ Yap</p>
              <p className="text-slate-400 text-sm">HesabÄ±nÄ±za eriÅŸmek iÃ§in bilgilerinizi girin</p>
            </div>

            {/* Login Form */}
            <form onSubmit={handleSubmit} className="space-y-4">
              {error && (
                <div className="bg-rose-500/10 border border-rose-500/20 rounded-xl p-3 text-rose-400 text-sm text-center">
                  {error}
                </div>
              )}

              <div>
                <label className="block text-xs font-bold text-slate-400 uppercase tracking-wider mb-2">E-posta</label>
                <div className="relative group">
                  <div className="absolute inset-0 bg-gradient-to-r from-emerald-500 to-teal-500 rounded-xl opacity-0 group-focus-within:opacity-20 transition-opacity"></div>
                  <input
                    type="email"
                    value={email}
                    onChange={(e) => setEmail(e.target.value)}
                    className="w-full px-4 py-3 bg-slate-950/50 border border-slate-700 rounded-xl text-white placeholder-slate-600 focus:outline-none focus:border-emerald-500/50 transition-all relative z-10"
                    placeholder="ornek@email.com"
                    required
                  />
                </div>
              </div>

              <div>
                <div className="flex items-center justify-between mb-2">
                  <label className="block text-xs font-bold text-slate-400 uppercase tracking-wider">Åifre</label>
                  <a href="#" className="text-xs text-emerald-400 hover:text-emerald-300 transition-colors">
                    Unuttum?
                  </a>
                </div>
                <div className="relative group">
                  <div className="absolute inset-0 bg-gradient-to-r from-emerald-500 to-teal-500 rounded-xl opacity-0 group-focus-within:opacity-20 transition-opacity"></div>
                  <input
                    type="password"
                    value={password}
                    onChange={(e) => setPassword(e.target.value)}
                    className="w-full px-4 py-3 bg-slate-950/50 border border-slate-700 rounded-xl text-white placeholder-slate-600 focus:outline-none focus:border-emerald-500/50 transition-all relative z-10"
                    placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
                    required
                  />
                </div>
              </div>

              <button
                type="submit"
                disabled={isLoading}
                className="w-full py-3.5 bg-gradient-to-r from-emerald-600 to-teal-600 text-white font-bold rounded-xl shadow-lg shadow-emerald-500/20 hover:shadow-emerald-500/40 hover:scale-[1.02] active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 mt-2"
              >
                {isLoading ? (
                  <>
                    <div className="w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin" />
                  </>
                ) : (
                  <>
                    GiriÅŸ Yap
                    <svg className="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M14 5l7 7m0 0l-7 7m7-7H3" />
                    </svg>
                  </>
                )}
              </button>
            </form>

            <div className="relative my-8">
              <div className="absolute inset-0 flex items-center">
                <div className="w-full border-t border-slate-700/50"></div>
              </div>
              <div className="relative flex justify-center text-xs uppercase tracking-widest">
                <span className="px-4 bg-[#0a0f1e] text-slate-500 rounded-full">veya</span>
              </div>
            </div>

            <button
              type="button"
              onClick={handleGoogleLogin}
              className="w-full py-3 bg-white text-slate-900 font-bold rounded-xl hover:bg-slate-100 transition-all flex items-center justify-center gap-3"
            >
              <svg className="w-5 h-5" viewBox="0 0 24 24">
                <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" />
                <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" />
                <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" />
                <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" />
              </svg>
              Google ile devam et
            </button>

            <div className="mt-8 text-center text-sm">
              <span className="text-slate-400">HesabÄ±n yok mu? </span>
              <Link href="/register" className="text-emerald-400 font-bold hover:text-emerald-300 transition-colors">
                Hemen KayÄ±t Ol
              </Link>
            </div>
          </div>

          {/* Skip Link (Subtle) */}
          <div className="text-center mt-6">
            <Link href="/1lig/tahminoyunu" className="text-slate-500 text-xs hover:text-slate-300 transition-colors flex items-center justify-center gap-1 group">
              GiriÅŸ yapmadan siteye gÃ¶z at
              <span className="group-hover:translate-x-1 transition-transform">â†’</span>
            </Link>
          </div>
        </div>
      </div>

      <style jsx>{`
                @keyframes fade-in-up {
                    from { opacity: 0; transform: translateY(20px); }
                    to { opacity: 1; transform: translateY(0); }
                }
                @keyframes fade-in-left {
                    from { opacity: 0; transform: translateX(-20px); }
                    to { opacity: 1; transform: translateX(0); }
                }
                .animate-fade-in-up {
                    animation: fade-in-up 0.6s ease-out forwards;
                }
                .animate-fade-in-left {
                    animation: fade-in-left 0.6s ease-out forwards;
                    animation-delay: 0.2s;
                    opacity: 0;
                }
            `}</style>
    </main>
  );
}

```

## File: app\robots.ts
```
import { MetadataRoute } from 'next';

const BASE_URL = process.env.NEXT_PUBLIC_SITE_URL || 'https://volleysimulator.com';

export default function robots(): MetadataRoute.Robots {
    return {
        rules: [
            {
                userAgent: '*',
                allow: '/',
                disallow: [
                    '/api/',
                    '/auth/',
                    '/oauth/',
                    '/dashboard/',
                    '/profile/',
                    '/ayarlar/',
                    '/_next/',
                    '/offline/',
                ],
            },
        ],
        sitemap: `${BASE_URL}/sitemap.xml`,
    };
}

```

## File: app\sitemap.ts
```
import { MetadataRoute } from 'next';

// Your production domain
const BASE_URL = process.env.NEXT_PUBLIC_SITE_URL || 'https://volleysimulator.com';

export default async function sitemap(): Promise<MetadataRoute.Sitemap> {
    const now = new Date();

    // Static pages
    const staticPages: MetadataRoute.Sitemap = [
        {
            url: BASE_URL,
            lastModified: now,
            changeFrequency: 'daily',
            priority: 1.0,
        },
        {
            url: `${BASE_URL}/ligler`,
            lastModified: now,
            changeFrequency: 'weekly',
            priority: 0.9,
        },
        {
            url: `${BASE_URL}/leaderboard`,
            lastModified: now,
            changeFrequency: 'daily',
            priority: 0.8,
        },
        {
            url: `${BASE_URL}/login`,
            lastModified: now,
            changeFrequency: 'monthly',
            priority: 0.3,
        },
        {
            url: `${BASE_URL}/register`,
            lastModified: now,
            changeFrequency: 'monthly',
            priority: 0.3,
        },
    ];

    // League pages
    const leagues = ['vsl', '1lig', '2lig', 'cev-cl', 'cev-cup', 'cev-challenge'];
    const leagueSubpages = ['tahminoyunu', 'gunceldurum', 'playoffs', 'stats'];

    const leaguePages: MetadataRoute.Sitemap = leagues.flatMap((league) =>
        leagueSubpages.map((subpage) => ({
            url: `${BASE_URL}/${league}/${subpage}`,
            lastModified: now,
            changeFrequency: 'daily' as const,
            priority: 0.8,
        }))
    );

    // TODO: Add dynamic team pages from team-registry.json
    // const teamsData = await import('@/data/team-registry.json');
    // const teamPages = teamsData.teams.map(team => ({
    //     url: `${BASE_URL}/takimlar/${team.slug}`,
    //     lastModified: now,
    //     changeFrequency: 'weekly' as const,
    //     priority: 0.6,
    // }));

    return [...staticPages, ...leaguePages];
}

```

## File: app\types.ts
```
export interface TeamStats {
  name: string;
  groupName: string; // [NEW] e.g., "1. GRUP"
  played: number;    // [NEW] Matches Played
  wins: number;
  points: number;
  setsWon: number;
  setsLost: number;
  setRatio?: number;
}

export interface Match {
  homeTeam: string;
  awayTeam: string;
  groupName: string; // [NEW]
  isPlayed: boolean;
  resultScore?: string;
  homeScore?: number | null;
  awayScore?: number | null;
  matchDate?: string; // YYYY-MM-DD
  matchTime?: string; // HH:MM
  id?: number;
  venue?: string;
}

export interface ScenarioOverride {
  homeTeam: string;
  awayTeam: string;
  score: string; // e.g. "3-0"
}

export interface MatchPrediction {
  homeTeam: string;
  awayTeam: string;
  homeWinProb: number;
  awayWinProb: number;
}

export interface SimulationResult {
  bestRank: number;
  worstRank: number;
  championshipProbability: number;
  playoffProbability: number;
  relegationProbability: number;
  aiAnalysis: string;
  matchPredictions: MatchPrediction[]; // [NEW] Next 3 matches
}

export interface MatchOutcome {
  homeSets: number;
  awaySets: number;
  homePoints: number;
  awayPoints: number;
  homeWin: boolean;
}

export interface ScenarioExport {
  version: '1.0';
  league: '1lig' | '2lig';
  timestamp: string;
  groupId: string;
  overrides: Record<string, string>;
  metadata: {
    completedMatches: number;
    totalMatches: number;
  };
}

// Used for applyOverridesToTeams in playoffUtils
export interface MatchOverride {
  homeTeam: string;
  awayTeam: string;
  homeScore?: number;
  awayScore?: number;
  score?: string; // Alternative: "3-0" format
}

// Group scenarios storage format
export interface GroupScenarios {
  [groupName: string]: Record<string, string>;
}

// ============================================
// GAMIFICATION TYPES
// ============================================

export type AchievementId =
  | 'first_prediction'
  | 'streak_3'
  | 'streak_5'
  | 'champion_predictor'
  | 'perfect_week'
  | 'underdog_hero'
  | 'game_addict'
  | 'loyal_fan';

export interface Achievement {
  id: AchievementId;
  name: string;
  description: string;
  icon: string;
  unlockedAt?: string; // ISO date string
  xpReward: number;
}

export type QuestId =
  | 'daily_3_predictions'
  | 'daily_underdog'
  | 'daily_complete_group';

export interface Quest {
  id: QuestId;
  name: string;
  description: string;
  icon: string;
  target: number;
  progress: number;
  xpReward: number;
  expiresAt: string; // ISO date string (midnight)
  completed: boolean;
}

export interface PlayerStats {
  totalPredictions: number;
  correctPredictions: number;
  currentStreak: number;
  bestStreak: number;
  predictedChampions: string[];
}

export interface GameState {
  xp: number;
  level: number;
  favoriteTeam: string | null;
  achievements: Achievement[];
  quests: Quest[];
  stats: PlayerStats;
  soundEnabled: boolean;
  lastActiveDate: string; // ISO date for daily reset
}

export const LEVEL_THRESHOLDS = [
  0,      // Level 1
  100,    // Level 2
  250,    // Level 3
  500,    // Level 4
  800,    // Level 5 (AmatÃ¶r)
  1200,   // Level 6
  1700,   // Level 7
  2300,   // Level 8
  3000,   // Level 9
  3800,   // Level 10 (Uzman)
  4700,   // Level 11
  5700,   // Level 12
  6800,   // Level 13
  8000,   // Level 14
  9300,   // Level 15
  10700,  // Level 16
  12200,  // Level 17
  13800,  // Level 18
  15500,  // Level 19
  17300,  // Level 20 (Efsane)
  20000,  // Level 21+
];

export const LEVEL_TITLES: Record<number, string> = {
  1: 'Ã‡aylak',
  5: 'AmatÃ¶r',
  10: 'Uzman',
  15: 'Profesyonel',
  20: 'Efsane',
};

// ============================================
// FRIENDSHIP SYSTEM TYPES
// ============================================

export type FriendshipStatus = 'pending' | 'accepted' | 'rejected' | 'blocked';

export interface Friend {
  id: string;
  oderId: string;
  userId: string;
  friendId: string;
  status: FriendshipStatus;
  createdAt: string;
  updatedAt: string;
  // Joined user data
  friend?: UserProfile;
}

export interface UserProfile {
  id: string;
  email: string;
  displayName: string;
  avatarUrl?: string;
  bio?: string;
  favoriteTeam?: string;
  level: number;
  xp: number;
  totalPoints: number;
  rank?: number;
  badges: Badge[];
  isPremium: boolean;
  createdAt: string;
  lastActiveAt: string;
  // Privacy settings
  isProfilePublic: boolean;
  showPredictions: boolean;
}

export interface FriendActivity {
  id: string;
  userId: string;
  activityType: 'prediction' | 'achievement' | 'level_up' | 'badge' | 'streak';
  title: string;
  description: string;
  metadata?: Record<string, unknown>;
  createdAt: string;
  user?: UserProfile;
}

// ============================================
// BADGE & ACHIEVEMENT SYSTEM
// ============================================

export type BadgeRarity = 'common' | 'uncommon' | 'rare' | 'epic' | 'legendary';
export type BadgeCategory = 'prediction' | 'social' | 'streak' | 'season' | 'special' | 'team';

export interface Badge {
  id: string;
  name: string;
  description: string;
  icon: string;
  rarity: BadgeRarity;
  category: BadgeCategory;
  requirement: string;
  xpReward: number;
  unlockedAt?: string;
  progress?: number;
  target?: number;
}

export const BADGE_RARITY_COLORS: Record<BadgeRarity, string> = {
  common: 'from-slate-400 to-slate-500',
  uncommon: 'from-green-400 to-emerald-500',
  rare: 'from-blue-400 to-cyan-500',
  epic: 'from-purple-400 to-pink-500',
  legendary: 'from-amber-400 to-orange-500',
};

// ============================================
// DAILY QUESTS & CHALLENGES
// ============================================

export type DailyQuestType = 
  | 'make_predictions'
  | 'correct_predictions'
  | 'predict_underdog'
  | 'complete_group'
  | 'view_stats'
  | 'share_prediction'
  | 'add_friend'
  | 'comment_match';

export interface DailyQuest {
  id: string;
  type: DailyQuestType;
  title: string;
  description: string;
  icon: string;
  target: number;
  progress: number;
  xpReward: number;
  coinReward: number;
  expiresAt: string;
  completed: boolean;
  claimed: boolean;
}

export interface WeeklyChallenge {
  id: string;
  title: string;
  description: string;
  icon: string;
  startDate: string;
  endDate: string;
  target: number;
  progress: number;
  xpReward: number;
  badgeReward?: string;
  participants: number;
  leaderboard: ChallengeLeaderboardEntry[];
}

export interface ChallengeLeaderboardEntry {
  userId: string;
  displayName: string;
  avatarUrl?: string;
  score: number;
  rank: number;
}

// ============================================
// STREAK SYSTEM
// ============================================

export interface StreakData {
  currentStreak: number;
  longestStreak: number;
  lastPredictionDate: string;
  streakFreezeAvailable: number;
  streakHistory: StreakHistoryEntry[];
}

export interface StreakHistoryEntry {
  date: string;
  predictionsCount: number;
  correctCount: number;
  streakValue: number;
}

// ============================================
// NOTIFICATION SYSTEM
// ============================================

export type NotificationType = 
  | 'match_reminder'
  | 'match_result'
  | 'prediction_result'
  | 'friend_request'
  | 'friend_activity'
  | 'achievement'
  | 'level_up'
  | 'leaderboard_change'
  | 'daily_quest'
  | 'weekly_challenge'
  | 'system';

export interface Notification {
  id: string;
  userId: string;
  type: NotificationType;
  title: string;
  message: string;
  icon?: string;
  link?: string;
  metadata?: Record<string, unknown>;
  isRead: boolean;
  createdAt: string;
}

export interface NotificationPreferences {
  matchReminders: boolean;
  matchResults: boolean;
  friendRequests: boolean;
  friendActivity: boolean;
  achievements: boolean;
  leaderboardChanges: boolean;
  dailyQuests: boolean;
  weeklyDigest: boolean;
  pushEnabled: boolean;
  emailEnabled: boolean;
  quietHoursStart?: string; // HH:MM
  quietHoursEnd?: string;
}

// ============================================
// AI PREDICTION SYSTEM
// ============================================

export interface AIPrediction {
  matchId: string;
  homeTeam: string;
  awayTeam: string;
  predictedScore: string;
  confidence: number; // 0-100
  homeWinProbability: number;
  awayWinProbability: number;
  analysis: string;
  factors: AIPredictionFactor[];
  lastUpdated: string;
}

export interface AIPredictionFactor {
  name: string;
  description: string;
  impact: 'positive' | 'negative' | 'neutral';
  weight: number;
  team: 'home' | 'away' | 'both';
}

export interface AIMatchAnalysis {
  matchId: string;
  homeTeam: string;
  awayTeam: string;
  overallAnalysis: string;
  keyFactors: string[];
  homeStrengths: string[];
  homeWeaknesses: string[];
  awayStrengths: string[];
  awayWeaknesses: string[];
  headToHead: HeadToHeadStats;
  formComparison: FormComparison;
  prediction: AIPrediction;
}

// ============================================
// ADVANCED STATISTICS
// ============================================

export interface HeadToHeadStats {
  totalMatches: number;
  homeWins: number;
  awayWins: number;
  homeSetWins: number;
  awaySetWins: number;
  lastMeetings: HeadToHeadMatch[];
  averageHomeScore: number;
  averageAwayScore: number;
}

export interface HeadToHeadMatch {
  date: string;
  homeTeam: string;
  awayTeam: string;
  score: string;
  venue: string;
  competition: string;
}

export interface FormComparison {
  homeForm: TeamForm;
  awayForm: TeamForm;
}

export interface TeamForm {
  teamName: string;
  last5Results: ('W' | 'L' | 'D')[];
  last5Scores: string[];
  winRate: number;
  avgPointsScored: number;
  avgPointsConceded: number;
  trend: 'improving' | 'declining' | 'stable';
  strengthRating: number;
  // Additional form fields for components
  lastFiveMatches?: ('W' | 'L' | 'D')[];
  formPercentage?: number;
  goalsScored?: number;
  goalsConceded?: number;
  winStreak?: number;
  recentOpponents?: string[];
}

export interface TeamDetailedStats {
  teamName: string;
  league: string;
  season: string;
  // Basic stats
  played: number;
  wins: number;
  losses: number;
  points: number;
  setsWon: number;
  setsLost: number;
  setRatio: number;
  // Advanced stats
  avgPointsPerSet: number;
  avgPointsConcededPerSet: number;
  homeRecord: { wins: number; losses: number };
  awayRecord: { wins: number; losses: number };
  threeZeroWins: number;
  threeOneWins: number;
  threeTwoWins: number;
  threeZeroLosses: number;
  threeOneLosses: number;
  threeTwoLosses: number;
  // Form
  currentStreak: number;
  streakType: 'W' | 'L';
  last10: ('W' | 'L')[];
  // Rating
  eloRating: number;
  strengthRank: number;
}

export interface UserPredictionStats {
  userId: string;
  totalPredictions: number;
  correctPredictions: number;
  accuracy: number;
  // By league
  byLeague: Record<string, { total: number; correct: number; accuracy: number }>;
  // By team
  byTeam: Record<string, { total: number; correct: number; accuracy: number }>;
  // By score type
  exactScoreHits: number;
  winnerOnlyHits: number;
  // Streaks
  currentStreak: number;
  bestStreak: number;
  // Points
  totalPoints: number;
  avgPointsPerPrediction: number;
  // Time-based
  bestDay: string;
  bestWeek: string;
  bestMonth: string;
}

// ============================================
// LIVE FEATURES
// ============================================

export interface LiveMatch {
  id: string;
  homeTeam: string;
  awayTeam: string;
  league: string;
  status: 'scheduled' | 'live' | 'finished' | 'postponed' | 'upcoming';
  currentSet: number;
  homeSetScore: number;
  awaySetScore: number;
  currentSetHomePoints: number;
  currentSetAwayPoints: number;
  setScores: SetScore[];
  startTime: string;
  lastUpdated: string;
  venue?: string;
  viewers?: number;
  isHighlighted?: boolean;
  homeScore?: number[];
  awayScore?: number[];
  currentSetScore?: { home: number; away: number };
  setWins?: { home: number; away: number };
  // Live betting odds (if available)
  liveOdds?: {
    homeWin: number;
    awayWin: number;
  };
}

export interface SetScore {
  setNumber: number;
  homePoints: number;
  awayPoints: number;
  winner: 'home' | 'away';
}

export interface MatchComment {
  id: string;
  matchId: string;
  oderId: string;
  userId: string;
  message: string;
  createdAt: string;
  likes: number;
  user?: UserProfile;
}

export interface LiveChatMessage {
  id: string;
  matchId: string;
  userId: string;
  message: string;
  timestamp: string;
  user?: {
    displayName: string;
    avatarUrl?: string;
    badge?: string;
  };
}

// ============================================
// CUSTOM LEAGUES (Private Leagues)
// ============================================

export interface CustomLeague {
  id: string;
  name: string;
  description?: string;
  code: string; // Join code
  creatorId: string;
  isPrivate: boolean;
  maxMembers: number;
  members: CustomLeagueMember[];
  season: string;
  leagues: string[]; // Which volleyball leagues are included
  createdAt: string;
  startDate: string;
  endDate: string;
  prizes?: CustomLeaguePrize[];
}

export interface CustomLeagueMember {
  oderId: string;
  userId: string;
  role: 'owner' | 'admin' | 'member';
  points: number;
  rank: number;
  joinedAt: string;
  user?: UserProfile;
}

export interface CustomLeaguePrize {
  rank: number;
  title: string;
  description: string;
  icon: string;
}

export interface CustomLeagueInvite {
  id: string;
  leagueId: string;
  inviterId: string;
  inviteeId?: string;
  inviteeEmail?: string;
  status: 'pending' | 'accepted' | 'rejected' | 'expired';
  createdAt: string;
  expiresAt: string;
}

// ============================================
// TOURNAMENT PREDICTIONS
// ============================================

export interface PlayoffBracketPrediction {
  id: string;
  oderId: string;
  userId: string;
  league: string;
  season: string;
  quarterFinals: BracketMatchPrediction[];
  semiFinals: BracketMatchPrediction[];
  final: BracketMatchPrediction;
  champion: string;
  createdAt: string;
  updatedAt: string;
  points: number;
}

export interface BracketMatchPrediction {
  matchId: string;
  homeTeam: string;
  awayTeam: string;
  predictedWinner: string;
  predictedScore: string;
  actualWinner?: string;
  actualScore?: string;
  pointsEarned?: number;
}

export interface SeasonPrediction {
  id: string;
  userId: string;
  league: string;
  season: string;
  champion: string;
  runnerUp: string;
  thirdPlace?: string;
  relegated: string[];
  mvp?: string;
  topScorer?: string;
  createdAt: string;
  points: number;
}

// ============================================
// PREMIUM FEATURES
// ============================================

export type PremiumTier = 'free' | 'basic' | 'pro' | 'elite';

export interface PremiumSubscription {
  userId: string;
  tier: PremiumTier;
  startDate: string;
  endDate: string;
  autoRenew: boolean;
  paymentMethod?: string;
  features: PremiumFeature[];
}

export interface PremiumFeature {
  id: string;
  name: string;
  description: string;
  icon: string;
  tier: PremiumTier;
  enabled: boolean;
}

export const PREMIUM_FEATURES: Record<PremiumTier, string[]> = {
  free: ['basic_predictions', 'leaderboard_view', 'basic_stats'],
  basic: ['ad_free', 'advanced_stats', 'ai_predictions_5', 'custom_avatar'],
  pro: ['unlimited_ai', 'h2h_analysis', 'form_graphs', 'priority_support', 'exclusive_badges'],
  elite: ['early_access', 'personal_coach', 'api_access', 'custom_leagues_unlimited'],
};

// ============================================
// THEME & UI PREFERENCES
// ============================================

export type ThemeMode = 'light' | 'dark' | 'system';
export type AccentColor = 'emerald' | 'blue' | 'purple' | 'rose' | 'amber' | 'cyan';

export interface UIPreferences {
  theme: ThemeMode;
  accentColor: AccentColor;
  soundEffects: boolean;
  hapticFeedback: boolean;
  compactMode: boolean;
  showAnimations: boolean;
  fontSize: 'small' | 'medium' | 'large';
  dashboardLayout: DashboardWidget[];
}

export interface DashboardWidget {
  id: string;
  type: 'standings' | 'upcoming' | 'leaderboard' | 'stats' | 'friends' | 'quests' | 'streak';
  position: number;
  size: 'small' | 'medium' | 'large';
  visible: boolean;
}

// ============================================
// COINS & VIRTUAL CURRENCY
// ============================================

export interface UserWallet {
  userId: string;
  coins: number;
  totalEarned: number;
  totalSpent: number;
  transactions: CoinTransaction[];
}

export interface CoinTransaction {
  id: string;
  type: 'earn' | 'spend';
  amount: number;
  reason: string;
  metadata?: Record<string, unknown>;
  createdAt: string;
}

export interface ShopItem {
  id: string;
  name: string;
  description: string;
  icon: string;
  category: 'avatar' | 'badge' | 'theme' | 'boost' | 'freeze';
  price: number;
  rarity: BadgeRarity;
  isLimited: boolean;
  availableUntil?: string;
}

// ============================================
// AVATAR CUSTOMIZATION
// ============================================

export interface UserAvatar {
  oderId: string;
  userId: string;
  type: 'image' | 'custom';
  imageUrl?: string;
  customAvatar?: CustomAvatarConfig;
}

export interface CustomAvatarConfig {
  backgroundColor: string;
  shape: 'circle' | 'square' | 'hexagon';
  border: {
    color: string;
    width: number;
    style: 'solid' | 'gradient' | 'animated';
  };
  icon?: string;
  emoji?: string;
  initials?: string;
  frame?: string; // Earned through achievements
  effect?: 'glow' | 'pulse' | 'sparkle' | 'fire' | 'ice';
}

// ============================================
// MATCH SIMULATION
// ============================================

export interface MatchSimulation {
  matchId: string;
  homeTeam: string;
  awayTeam: string;
  simulatedSets: SimulatedSet[];
  finalScore: string;
  winner: string;
  keyMoments: SimulationMoment[];
  duration: number; // in seconds for animation
}

export interface SimulatedSet {
  setNumber: number;
  homePoints: number;
  awayPoints: number;
  winner: 'home' | 'away';
  pointByPoint: SimulatedPoint[];
}

export interface SimulatedPoint {
  pointNumber: number;
  homeScore: number;
  awayScore: number;
  scorer: 'home' | 'away';
  type: 'attack' | 'block' | 'ace' | 'error';
}

export interface SimulationMoment {
  time: number;
  type: 'set_point' | 'match_point' | 'comeback' | 'streak' | 'timeout';
  description: string;
}

```

## File: app\1lig\gunceldurum\OneLigDetailedGroupsClient.tsx
```
"use client";

import { useState, useMemo } from "react";
import { TeamStats, Match } from "../../types";

import StandingsTable from "../../components/Calculator/StandingsTable";
import { sortStandings } from "../../utils/calculatorUtils";
import TeamAvatar from "@/app/components/TeamAvatar";
import LeagueActionBar from "../../components/LeagueTemplate/LeagueActionBar";
import { LEAGUE_CONFIGS } from "../../components/LeagueTemplate/types";

interface OneLigDetailedGroupsClientProps {
    initialTeams: TeamStats[];
    initialMatches: Match[];
}

export default function OneLigDetailedGroupsClient({ initialTeams, initialMatches }: OneLigDetailedGroupsClientProps) {
    const [allTeams] = useState<TeamStats[]>(initialTeams);
    const [allMatches] = useState<Match[]>(initialMatches.map((m: any) => ({
        ...m,
        matchDate: m.date || m.matchDate
    })));

    const groups = useMemo(() => {
        return [...new Set(initialTeams.map(t => t.groupName))].sort();
    }, [initialTeams]);

    const [activeGroup, setActiveGroup] = useState<string>(groups[0] || "");

    // Filter data for active group
    const groupTeams = useMemo(() => sortStandings(allTeams.filter(t => t.groupName === activeGroup)), [allTeams, activeGroup]);
    const groupMatches = useMemo(() => allMatches.filter(m => m.groupName === activeGroup), [allMatches, activeGroup]);

    const playedCount = groupMatches.filter(m => m.isPlayed).length;
    const totalCount = groupMatches.length;
    const completionRate = totalCount > 0 ? Math.round((playedCount / totalCount) * 100) : 0;

    const groupedMatches = useMemo(() => {
        const matchesByDate: Record<string, { formatted: string; matches: Match[] }> = {};
        const upcomingMatches = groupMatches.filter(m => !m.isPlayed);

        upcomingMatches.forEach(match => {
            const { formatted, sortKey } = formatDate(match.matchDate);
            if (!matchesByDate[sortKey]) {
                matchesByDate[sortKey] = { formatted, matches: [] };
            }
            matchesByDate[sortKey].matches.push(match);
        });

        const sortedDates = Object.keys(matchesByDate).sort();
        return sortedDates.reduce((acc, dateKey) => {
            acc[matchesByDate[dateKey].formatted] = matchesByDate[dateKey].matches;
            return acc;
        }, {} as Record<string, Match[]>);
    }, [groupMatches]);

    const bottomTwoTeams = useMemo(() => groupTeams.slice(-2).map(t => t.name), [groupTeams]);

    return (
        <main className="min-h-screen bg-slate-950 text-slate-100 p-0 sm:p-2 font-sans overflow-hidden">
            <div className="max-w-7xl mx-auto space-y-1 h-full flex flex-col">
                <div className="space-y-3 bg-slate-900/40 p-3 rounded-2xl border border-slate-800/60 backdrop-blur-sm animate-in fade-in slide-in-from-bottom-4 duration-300">
                    {/* Action Bar using LeagueTemplate */}
                    <LeagueActionBar
                        config={LEAGUE_CONFIGS['1lig']}
                        title={`${LEAGUE_CONFIGS['1lig'].shortName} - ${activeGroup}`}
                        subtitle="KadÄ±nlar 1. Ligi Analiz ve Puan Durumu"
                        selectorLabel="Grup"
                        selectorValue={activeGroup}
                        selectorOptions={groups}
                        onSelectorChange={setActiveGroup}
                        progress={completionRate}
                        progressLabel={`%${completionRate}`}
                    >
                        {/* Leader Badge */}
                        <div className="hidden sm:flex bg-slate-950/50 px-3 py-1.5 rounded-lg border border-slate-800 text-center flex-col justify-center h-full min-h-[32px]">
                            <div className="text-[9px] font-bold text-slate-500 uppercase leading-none mb-0.5">Lider</div>
                            <div className="text-xs font-bold text-white truncate max-w-[100px] leading-none">{groupTeams[0]?.name}</div>
                        </div>
                        {/* Live Badge */}
                        <div className="px-3 h-8 bg-emerald-950/50 rounded-lg border border-emerald-800/50 flex items-center gap-2">
                            <div className="w-2 h-2 bg-emerald-500 rounded-full animate-pulse"></div>
                            <span className="text-[10px] font-bold text-emerald-400 uppercase hidden sm:inline">Otomatik GÃ¼ncelleme</span>
                            <span className="text-[10px] font-bold text-emerald-400 uppercase sm:hidden">CANLI</span>
                        </div>
                    </LeagueActionBar>

                    <div className="grid grid-cols-1 lg:grid-cols-3 gap-2 h-full">
                        <div className="lg:col-span-2 space-y-1 flex flex-col h-full">
                            <h3 className="text-xs font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2 px-1">
                                <span>ğŸ“‹</span> Puan Durumu DetaylarÄ±
                            </h3>
                            <div className="bg-slate-950/40 rounded-xl overflow-hidden border border-slate-800/50 flex-1 max-h-[calc(100vh-200px)]">
                                <StandingsTable
                                    teams={groupTeams}
                                    playoffSpots={4}
                                    relegationSpots={activeGroup.includes('B') ? 2 : 0}
                                    compact={true}
                                />
                            </div>
                        </div>

                        <div className="space-y-4 flex flex-col h-full">
                            <h3 className="text-xs font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2 px-1">
                                <span>ğŸ“…</span> Gelecek MaÃ§lar
                            </h3>
                            <div className="bg-slate-950/40 rounded-xl overflow-hidden border border-slate-800/50 flex-1 relative">
                                <div className="absolute inset-0 overflow-y-auto p-2 space-y-2">
                                    {Object.keys(groupedMatches).length === 0 ? (
                                        <div className="flex flex-col items-center justify-center h-full text-slate-500 text-xs italic">
                                            MaÃ§ bulunamadÄ± veya sezon tamamlandÄ±.
                                        </div>
                                    ) : (
                                        <div className="space-y-2">
                                            {Object.entries(groupedMatches).map(([date, matches], dateIdx) => (
                                                <div key={date} className={dateIdx > 0 ? 'mt-3' : ''}>
                                                    <div className="sticky top-0 bg-amber-600/20 px-2 py-1 rounded border border-amber-500/30 mb-2 z-10">
                                                        <span className="text-[10px] font-bold text-amber-400 uppercase tracking-wide">
                                                            {date}
                                                        </span>
                                                    </div>
                                                    <div className="px-2 space-y-1">
                                                        {matches.map(match => {
                                                            const isRelegationBattle = activeGroup.includes('B') && (bottomTwoTeams.includes(match.homeTeam) || bottomTwoTeams.includes(match.awayTeam));
                                                            return (
                                                                <div key={match.id || `${match.homeTeam}-${match.awayTeam}`} className={`bg-slate-900/30 border border-slate-800/50 rounded-lg p-2 hover:bg-slate-800/50 transition-colors group ${isRelegationBattle ? 'border-rose-900/50 bg-rose-900/5' : ''}`}>
                                                                    <div className="flex items-center justify-between gap-2">
                                                                        <div className="flex-1 flex items-center justify-end gap-2 overflow-hidden">
                                                                            <div className="text-[11px] font-bold text-slate-200 truncate group-hover:text-amber-500 transition-colors">{match.homeTeam}</div>
                                                                            <TeamAvatar name={match.homeTeam} size="xs" />
                                                                        </div>
                                                                        <div className="px-2 py-0.5 bg-slate-950 rounded text-[9px] font-mono text-slate-500 font-bold whitespace-nowrap border border-slate-900 shadow-inner">
                                                                            {match.matchTime && match.matchTime !== '00:00' ? match.matchTime : '20:00'}
                                                                        </div>
                                                                        <div className="flex-1 flex items-center justify-start gap-2 overflow-hidden">
                                                                            <TeamAvatar name={match.awayTeam} size="xs" />
                                                                            <div className="text-[11px] font-bold text-slate-200 truncate group-hover:text-amber-500 transition-colors">{match.awayTeam}</div>
                                                                        </div>
                                                                    </div>
                                                                    <div className="mt-1.5 pt-1.5 border-t border-slate-800/50 flex justify-between items-center">
                                                                        <div className="flex items-center gap-1 text-[9px] text-slate-500">
                                                                            <span>ğŸ“</span>
                                                                            <span className="truncate max-w-[120px]">{match.venue || 'Salon BelirtilmemiÅŸ'}</span>
                                                                        </div>
                                                                        {isRelegationBattle && (
                                                                            <div className="flex items-center gap-1 px-1.5 py-0.5 bg-rose-950/50 border border-rose-900/50 rounded text-[8px] text-rose-400 font-bold animate-pulse">
                                                                                <span>âš ï¸</span>
                                                                                <span>KÃœME DÃœÅME HATTI</span>
                                                                            </div>
                                                                        )}
                                                                    </div>
                                                                </div>
                                                            );
                                                        })}
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    )}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main >
    );
}

// Helper functions moved outside component
const dayNames = ['PAZAR', 'PAZARTESÄ°', 'SALI', 'Ã‡ARÅAMBA', 'PERÅEMBE', 'CUMA', 'CUMARTESÄ°'];

const formatDate = (dateStr?: string) => {
    if (!dateStr || dateStr.trim() === '') return { formatted: 'TARÄ°H BELÄ°RSÄ°Z', sortKey: '9999-99-99' };
    try {
        const date = new Date(dateStr);
        if (isNaN(date.getTime())) return { formatted: 'TARÄ°H BELÄ°RSÄ°Z', sortKey: '9999-99-99' };
        const day = String(date.getDate()).padStart(2, '0');
        const month = String(date.getMonth() + 1).padStart(2, '0');
        const year = date.getFullYear();
        const dayName = dayNames[date.getDay()];
        return { formatted: `${day}/${month}/${year} ${dayName}`, sortKey: dateStr };
    } catch {
        return { formatted: 'TARÄ°H BELÄ°RSÄ°Z', sortKey: '9999-99-99' };
    }
};

```

## File: app\1lig\gunceldurum\page.tsx
```
import { Metadata } from "next";
import { getLeagueData } from "../../utils/serverData";
import OneLigDetailedGroupsClient from "./OneLigDetailedGroupsClient";

export const metadata: Metadata = {
    title: "1. Lig GÃ¼ncel Durum",
    description: "Arabica Coffee House 1. Lig puan durumu, grup sÄ±ralamalarÄ± ve maÃ§ sonuÃ§larÄ±. Grup A ve Grup B gÃ¼ncel tablo.",
    openGraph: {
        title: "1. Lig GÃ¼ncel Durum | VolleySimulator",
        description: "1. Lig grup sÄ±ralamalarÄ± ve puan durumu.",
    },
};

export default async function OneLigDetailedGroupsPage() {
    const { teams, fixture } = await getLeagueData("1lig");

    return (
        <OneLigDetailedGroupsClient
            initialTeams={teams}
            initialMatches={fixture}
        />
    );
}

```

# Project Application Context - Part 10

## File: app\components\Calculator\StandingsTable.tsx
```
import { memo } from "react";
import Link from "next/link";
import { TeamStats } from "../../types";
import { TeamDiff } from "../../utils/scenarioUtils";
import { generateTeamSlug } from "../../utils/teamSlug";
import TeamAvatar from "../TeamAvatar";
import { Card, CardHeader, CardTitle } from "../ui/Card";
import { StandingsTableSkeleton } from "../ui/Skeleton";
import { Badge } from "../ui/Badge";
import { cn } from "@/lib/utils";

interface StandingsTableProps {
    teams: TeamStats[];
    playoffSpots?: number;
    secondaryPlayoffSpots?: number; // For 5-8 playoff zone (VSL)
    relegationSpots?: number;
    initialRanks?: Map<string, number>; // For showing rank changes
    compact?: boolean;
    loading?: boolean;
    comparisonDiffs?: TeamDiff[];
}

function StandingsTable({
    teams,
    playoffSpots = 2,
    secondaryPlayoffSpots = 0,
    relegationSpots = 2,
    initialRanks,
    compact = false,
    loading = false,
    comparisonDiffs
}: StandingsTableProps) {
    if (loading) {
        return <StandingsTableSkeleton />;
    }

    const headClass = "px-2 py-3 text-[10px] sm:text-xs uppercase tracking-wider font-bold text-text-secondary border-b border-border-main bg-surface-secondary sticky top-0 z-20";
    const cellClass = "px-2 py-3 text-xs sm:text-sm border-b border-border-subtle transition-colors";

    return (
        <Card className={cn("flex flex-col h-full overflow-hidden", compact && "shadow-none border-none bg-transparent")}>
            {!compact && (
                <CardHeader className="bg-surface-secondary/50 py-3 border-b border-border-main">
                    <CardTitle className="text-base flex items-center gap-2">
                        <span className="text-lg">ğŸ“Š</span> Puan Durumu
                    </CardTitle>
                </CardHeader>
            )}

            {!compact && (
                <div className="px-4 py-2 bg-surface-secondary/30 border-b border-border-main flex gap-3 text-[10px] flex-wrap">
                    <div className="flex items-center gap-1.5">
                        <Badge variant="success" className="w-2 h-2 p-0 rounded-full" />
                        <span className="text-text-secondary">Play-off (Ä°lk {playoffSpots})</span>
                    </div>
                    {secondaryPlayoffSpots > 0 && (
                        <div className="flex items-center gap-1.5">
                            <Badge variant="warning" className="w-2 h-2 p-0 rounded-full" />
                            <span className="text-text-secondary">{playoffSpots + 1}-{playoffSpots + secondaryPlayoffSpots} BÃ¶lgesi</span>
                        </div>
                    )}
                    <div className="flex items-center gap-1.5">
                        <Badge variant="destructive" className="w-2 h-2 p-0 rounded-full" />
                        <span className="text-text-secondary">KÃ¼me DÃ¼ÅŸme</span>
                    </div>
                </div>
            )}

            <div className="overflow-x-auto flex-1 custom-scrollbar relative">
                <table className="w-full text-left border-separate border-spacing-0">
                    <thead>
                        <tr>
                            <th scope="col" className={cn(headClass, "sticky left-0 z-30 w-12 text-center pl-4")} aria-label="SÄ±ralama">#</th>
                            <th scope="col" className={cn(headClass, "sticky left-12 z-30 min-w-[140px]")}>TakÄ±m</th>
                            <th scope="col" className={cn(headClass, "w-10 text-center")} title="Oynanan MaÃ§" aria-label="Oynanan MaÃ§">OM</th>
                            <th scope="col" className={cn(headClass, "w-10 text-center text-emerald-500")} title="Galibiyet" aria-label="Galibiyet">G</th>
                            <th scope="col" className={cn(headClass, "w-10 text-center text-rose-500")} title="MaÄŸlubiyet" aria-label="MaÄŸlubiyet">M</th>
                            <th scope="col" className={cn(headClass, "w-12 text-center text-amber-500 font-bold")} title="Puan" aria-label="Puan">P</th>
                            <th scope="col" className={cn(headClass, "w-10 text-center hidden md:table-cell")} title="AlÄ±nan Set" aria-label="AlÄ±nan Set">AS</th>
                            <th scope="col" className={cn(headClass, "w-10 text-center hidden md:table-cell")} title="Verilen Set" aria-label="Verilen Set">VS</th>
                        </tr>
                    </thead>
                    <tbody>
                        {teams.map((team, idx) => {
                            const currentRank = idx + 1;
                            const isChampion = idx === 0;
                            const isPlayoff = idx < playoffSpots;
                            const isSecondaryPlayoff = secondaryPlayoffSpots > 0 && idx >= playoffSpots && idx < playoffSpots + secondaryPlayoffSpots;
                            const isRelegation = idx >= teams.length - relegationSpots;
                            const losses = team.played - team.wins;

                            let rankChangeIcon = null;
                            let pointDiffIcon = null;

                            if (comparisonDiffs) {
                                const diff = comparisonDiffs.find(d => d.name === team.name);
                                if (diff) {
                                    if (diff.rankDiff > 0) rankChangeIcon = <span className="text-emerald-500 text-[10px] ml-1">â–²{diff.rankDiff}</span>;
                                    else if (diff.rankDiff < 0) rankChangeIcon = <span className="text-rose-500 text-[10px] ml-1">â–¼{Math.abs(diff.rankDiff)}</span>;

                                    if (diff.pointDiff > 0) pointDiffIcon = <span className="text-emerald-500 text-[10px] ml-0.5">+{diff.pointDiff}</span>;
                                    else if (diff.pointDiff < 0) pointDiffIcon = <span className="text-rose-500 text-[10px] ml-0.5">{diff.pointDiff}</span>;
                                }
                            } else if (initialRanks && initialRanks.has(team.name)) {
                                const oldRank = initialRanks.get(team.name)!;
                                const diff = oldRank - currentRank;
                                if (diff > 0) rankChangeIcon = <span className="text-emerald-500 text-[10px] ml-1">â–²{diff}</span>;
                                else if (diff < 0) rankChangeIcon = <span className="text-rose-500 text-[10px] ml-1">â–¼{Math.abs(diff)}</span>;
                            }

                            const zoneBg = isChampion ? 'bg-amber-500/5 hover:bg-amber-500/10' :
                                isPlayoff ? 'bg-emerald-500/5 hover:bg-emerald-500/10' :
                                    isSecondaryPlayoff ? 'bg-amber-500/5 hover:bg-amber-500/10' :
                                        isRelegation ? 'bg-rose-500/5 hover:bg-rose-500/10' :
                                            'hover:bg-surface-secondary/50';

                            return (
                                <tr
                                    key={team.name}
                                    className={cn("group group/row transition-colors", zoneBg)}
                                    aria-label={`${currentRank}. sÄ±rada olan ${team.name}, ${team.points} puan`}
                                >
                                    <td className={cn(cellClass, "sticky left-0 z-10 text-center font-mono pl-4",
                                        isChampion ? 'bg-amber-50 dark:bg-amber-900/20' :
                                            isPlayoff ? 'bg-emerald-50 dark:bg-emerald-900/20' :
                                                isSecondaryPlayoff ? 'bg-amber-50/50 dark:bg-amber-900/10' :
                                                    isRelegation ? 'bg-rose-50 dark:bg-rose-900/20' :
                                                        'bg-surface-primary group-hover/row:bg-surface-secondary/50'
                                    )}>
                                        <div className="flex items-center justify-center gap-0.5">
                                            <span className={cn(
                                                "w-6 h-6 flex items-center justify-center rounded-full text-[11px] font-bold shadow-sm",
                                                isChampion ? 'bg-amber-500 text-white' :
                                                    isPlayoff ? 'bg-emerald-500 text-white' :
                                                        isSecondaryPlayoff ? 'bg-amber-500 text-white' :
                                                            isRelegation ? 'bg-rose-500 text-white' :
                                                                'bg-surface-secondary text-text-secondary'
                                            )}>
                                                {isChampion ? '1' : currentRank}
                                            </span>
                                            {rankChangeIcon}
                                        </div>
                                    </td>
                                    <td className={cn(cellClass, "sticky left-12 z-10 font-semibold",
                                        isChampion ? 'bg-amber-50 dark:bg-amber-900/20' :
                                            isPlayoff ? 'bg-emerald-50 dark:bg-emerald-900/20' :
                                                isSecondaryPlayoff ? 'bg-amber-50/50 dark:bg-amber-900/10' :
                                                    isRelegation ? 'bg-rose-50 dark:bg-rose-900/20' :
                                                        'bg-surface-primary group-hover/row:bg-surface-secondary/50'
                                    )}>
                                        <Link href={`/takimlar/${generateTeamSlug(team.name)}`} className="flex items-center gap-2 group/link">
                                            <TeamAvatar name={team.name} size="sm" />
                                            <span className={cn(
                                                "truncate max-w-[120px] sm:max-w-none group-hover/link:underline",
                                                isPlayoff ? 'text-emerald-700 dark:text-emerald-400' :
                                                    isSecondaryPlayoff ? 'text-amber-700 dark:text-amber-400' :
                                                        isRelegation ? 'text-rose-700 dark:text-rose-400' :
                                                            'text-text-primary'
                                            )}>
                                                {team.name}
                                            </span>
                                        </Link>
                                    </td>
                                    <td className={cn(cellClass, "text-center text-text-secondary")}>{team.played}</td>
                                    <td className={cn(cellClass, "text-center text-emerald-600 dark:text-emerald-400 font-medium")}>{team.wins}</td>
                                    <td className={cn(cellClass, "text-center text-rose-600 dark:text-rose-400 font-medium")}>{losses}</td>
                                    <td className={cn(cellClass, "text-center font-bold text-amber-600 dark:text-amber-400 bg-surface-secondary/20")}>
                                        {team.points}
                                        {pointDiffIcon}
                                    </td>
                                    <td className={cn(cellClass, "text-center text-text-secondary hidden md:table-cell")}>{team.setsWon}</td>
                                    <td className={cn(cellClass, "text-center text-text-secondary hidden md:table-cell")}>{team.setsLost}</td>
                                </tr>
                            );
                        })}
                    </tbody>
                </table>
            </div>
        </Card>
    );
}

export default memo(StandingsTable);

```

## File: app\components\Calculator\TeamStatsRadar.tsx
```
"use client";

import React from 'react';
import {
    Radar,
    RadarChart,
    PolarGrid,
    PolarAngleAxis,
    ResponsiveContainer,
    PolarRadiusAxis,
} from 'recharts';
import { getTeamTheme } from '../../utils/team-themes';

interface TeamStats {
    attack: number;
    block: number;
    serve: number;
    dig: number;
    reception: number;
    consistency: number;
}

const MOCK_TEAM_STATS: Record<string, TeamStats> = {
    "VakÄ±fBank": { attack: 95, block: 92, serve: 88, dig: 85, reception: 82, consistency: 90 },
    "EczacÄ±baÅŸÄ± Dynavit": { attack: 98, block: 88, serve: 92, dig: 82, reception: 85, consistency: 92 },
    "FenerbahÃ§e Medicana": { attack: 94, block: 90, serve: 95, dig: 88, reception: 90, consistency: 94 },
    "TÃ¼rk Hava YollarÄ±": { attack: 85, block: 82, serve: 80, dig: 78, reception: 75, consistency: 82 },
    "Galatasaray Daikin": { attack: 88, block: 85, serve: 82, dig: 80, reception: 82, consistency: 85 },
    "Kuzeyboru": { attack: 82, block: 80, serve: 75, dig: 85, reception: 80, consistency: 78 },
};

const DEFAULT_STATS: TeamStats = {
    attack: 70, block: 70, serve: 70, dig: 70, reception: 70, consistency: 70
};

interface TeamStatsRadarProps {
    homeTeam: string;
    awayTeam: string;
}

export function TeamStatsRadar({ homeTeam, awayTeam }: TeamStatsRadarProps) {
    const homeStats = MOCK_TEAM_STATS[homeTeam] || DEFAULT_STATS;
    const awayStats = MOCK_TEAM_STATS[awayTeam] || DEFAULT_STATS;
    const homeTheme = getTeamTheme(homeTeam);
    const awayTheme = getTeamTheme(awayTeam);

    const data = [
        { subject: 'HÃ¼cum', A: homeStats.attack, B: awayStats.attack, fullMark: 100 },
        { subject: 'Blok', A: homeStats.block, B: awayStats.block, fullMark: 100 },
        { subject: 'Servis', A: homeStats.serve, B: awayStats.serve, fullMark: 100 },
        { subject: 'Defans', A: homeStats.dig, B: awayStats.dig, fullMark: 100 },
        { subject: 'ManÅŸet', A: homeStats.reception, B: awayStats.reception, fullMark: 100 },
        { subject: 'Ä°stikrar', A: homeStats.consistency, B: awayStats.consistency, fullMark: 100 },
    ];

    return (
        <div className="w-full h-[300px] flex flex-col items-center justify-center">
            {/* Legend */}
            <div className="flex justify-center gap-6 mb-4 text-[10px] font-black uppercase tracking-widest">
                <div className="flex items-center gap-2">
                    <div className="w-3 h-3 rounded-full" style={{ '--team-color': homeTheme.primary, backgroundColor: 'var(--team-color)' } as any} />
                    <span className="text-text-primary">{homeTeam}</span>
                </div>
                <div className="flex items-center gap-2">
                    <div className="w-3 h-3 rounded-full" style={{ '--team-color': awayTheme.primary, backgroundColor: 'var(--team-color)' } as any} />
                    <span className="text-text-primary">{awayTeam}</span>
                </div>
            </div>

            <ResponsiveContainer width="100%" height="100%">
                <RadarChart cx="50%" cy="50%" outerRadius="80%" data={data}>
                    <PolarGrid stroke="#334155" />
                    <PolarAngleAxis
                        dataKey="subject"
                        tick={{ fill: '#94a3b8', fontSize: 10, fontWeight: 900 }}
                    />
                    <Radar
                        name={homeTeam}
                        dataKey="A"
                        stroke={homeTheme.primary}
                        fill={homeTheme.primary}
                        fillOpacity={0.4}
                    />
                    <Radar
                        name={awayTeam}
                        dataKey="B"
                        stroke={awayTheme.primary}
                        fill={awayTheme.primary}
                        fillOpacity={0.4}
                    />
                </RadarChart>
            </ResponsiveContainer>
        </div>
    );
}

```

## File: app\components\LeagueTemplate\CalculatorTemplate.tsx
```
"use client";

import { useEffect, useState, useMemo, useRef } from "react";
import { TeamStats, Match, Achievement } from "../../types";

import { useToast } from "../Toast";
import { AchievementToast, AchievementsPanel } from "../Achievements";
import StandingsTable from "../Calculator/StandingsTable";
import FixtureList from "../Calculator/FixtureList";
import ShareButton from "../ShareButton";
import { calculateLiveStandings } from "../../utils/calculatorUtils";
import { useGameState, ACHIEVEMENTS } from "../../utils/gameState";
import { sounds } from "../../utils/sounds";
import { LeagueConfig, THEME_COLORS } from "./types";
import LeagueActionBar from "./LeagueActionBar";

interface CalculatorTemplateProps {
    config: LeagueConfig;
    initialTeams: TeamStats[];
    initialMatches: Match[];
}

export default function CalculatorTemplate({ config, initialTeams, initialMatches }: CalculatorTemplateProps) {
    const { showToast, showUndoToast } = useToast();
    const theme = THEME_COLORS[config.theme];
    const standingsRef = useRef<HTMLDivElement>(null);

    // Data State
    const [allTeams, setAllTeams] = useState<TeamStats[]>(initialTeams);
    const [allMatches, setAllMatches] = useState<Match[]>(initialMatches);
    const [activeGroup, setActiveGroup] = useState<string>(config.groups?.[0] || "");

    // UI State
    const [overrides, setOverrides] = useState<Record<string, string>>({});
    const [showAchievements, setShowAchievements] = useState(false);
    const [showAutoMenu, setShowAutoMenu] = useState(false);
    const [newAchievement, setNewAchievement] = useState<Achievement | null>(null);

    // Game State
    const { gameState, addXP, recordPrediction, unlockAchievement, hasAchievement } = useGameState();

    // Update state when props change (needed for some edge cases)
    useEffect(() => {
        setAllTeams(initialTeams);
        setAllMatches(initialMatches);
    }, [initialTeams, initialMatches]);

    // Load saved scenarios on mount
    useEffect(() => {
        const saved = localStorage.getItem(config.storageKey);
        if (saved) {
            try {
                const parsed = JSON.parse(saved);
                setOverrides(parsed);
            } catch (e) { console.error(e); }
        }
    }, [config.storageKey]);

    // Derived Data based on active group (if hasGroups)
    const currentMatches = useMemo(() => {
        if (!config.hasGroups) return allMatches;
        return allMatches.filter(m => !activeGroup || m.groupName === activeGroup);
    }, [allMatches, config.hasGroups, activeGroup]);

    const currentTeams = useMemo(() => {
        if (!config.hasGroups) return allTeams;
        return allTeams.filter(t => !activeGroup || t.groupName === activeGroup);
    }, [allTeams, config.hasGroups, activeGroup]);


    // Handle Predictions
    const handleScoreChange = (matchId: string, score: string) => {
        const newOverrides = { ...overrides };
        const wasNew = !overrides[matchId];

        if (score) {
            newOverrides[matchId] = score;

            if (wasNew) {
                addXP(10);
                sounds.scoreSelect();

                // Achievement: First Prediction
                if (!hasAchievement('first_prediction')) {
                    const wasUnlocked = unlockAchievement('first_prediction');
                    if (wasUnlocked) {
                        setNewAchievement(ACHIEVEMENTS.first_prediction as Achievement);
                        sounds.achievement();
                    }
                }

                // Achievement: Game Addict
                if (gameState.stats.totalPredictions >= 49 && !hasAchievement('game_addict')) {
                    const wasUnlocked = unlockAchievement('game_addict');
                    if (wasUnlocked) {
                        setNewAchievement(ACHIEVEMENTS.game_addict as Achievement);
                        sounds.achievement();
                    }
                }

                recordPrediction(true);
            }
        } else {
            delete newOverrides[matchId];
        }
        setOverrides(newOverrides);
    };

    // Save Scenarios
    useEffect(() => {
        localStorage.setItem(config.storageKey, JSON.stringify(overrides));
    }, [overrides, config.storageKey]);

    // Reset Logic
    const handleReset = () => {
        const previousOverrides = { ...overrides };
        setOverrides({});
        localStorage.removeItem(config.storageKey);
        showUndoToast(`${config.name} tahminleri sÄ±fÄ±rlandÄ±`, () => {
            setOverrides(previousOverrides);
            localStorage.setItem(config.storageKey, JSON.stringify(previousOverrides));
        });
    };

    const handleRandomize = () => {
        if (!confirm("OynanmamÄ±ÅŸ maÃ§lar rastgele skorlarla doldurulacak. OnaylÄ±yor musunuz?")) return;
        const newOverrides = { ...overrides };
        const scores = ["3-0", "3-1", "3-2", "2-3", "1-3", "0-3"];
        let count = 0;

        currentMatches.forEach(match => {
            const matchId = `${match.homeTeam}-${match.awayTeam}`;
            if (!match.isPlayed && !newOverrides[matchId]) {
                const randomScore = scores[Math.floor(Math.random() * scores.length)];
                newOverrides[matchId] = randomScore;
                count++;
            }
        });

        if (count > 0) {
            setOverrides(newOverrides);
            sounds.levelUp();
            showToast(`${count} maÃ§ rastgele tahmin edildi!`, "success");
            addXP(count * 5); // 5xp per random match
        }
    };

    // Calculations
    const standings = useMemo(() =>
        calculateLiveStandings(currentTeams, currentMatches, overrides),
        [currentTeams, currentMatches, overrides]
    );

    // Initial Standings for comparison (rank changes)
    const initialRanks = useMemo(() => {
        const baseStandings = calculateLiveStandings(currentTeams, currentMatches, {});
        // Sort by points/wins etc to get rank
        const map = new Map<string, number>();
        baseStandings.forEach((t, i) => map.set(t.name, i + 1));
        return map;
    }, [currentTeams, currentMatches]);

    const completedMatches = currentMatches.filter(m => m.isPlayed || overrides[`match-${m.id}`]).length;
    const progress = (completedMatches / currentMatches.length) * 100 || 0;


    return (
        <main className="min-h-screen bg-slate-950 text-slate-100 p-2 sm:p-4 font-sans pb-20 sm:pb-4">
            <div className="w-full max-w-[1600px] mx-auto flex flex-col h-[calc(100vh-2rem)] gap-4">

                <LeagueActionBar
                    config={config}
                    title={config.name}
                    subtitle="Tahmin Oyunu & Puan Durumu HesaplayÄ±cÄ±"
                    selectorLabel={config.hasGroups ? "Grup" : undefined}
                    selectorValue={activeGroup}
                    selectorOptions={config.hasGroups ? (config.groups || []) : []}
                    onSelectorChange={config.hasGroups ? setActiveGroup : undefined}
                    progress={progress}
                    progressLabel={`${completedMatches}/${currentMatches.length} MaÃ§`}
                >
                    <button
                        onClick={handleRandomize}
                        className={`px-3 py-1.5 bg-${config.theme}-600 hover:bg-${config.theme}-500 text-white text-xs font-bold rounded-lg transition-all shadow-lg shadow-${config.theme}-900/20`}
                    >
                        ğŸ² Rastgele
                    </button>
                    <button
                        onClick={handleReset}
                        className="px-3 py-1.5 bg-slate-800 hover:bg-rose-900/50 text-slate-400 hover:text-rose-400 text-xs font-bold rounded-lg transition-all border border-slate-700"
                    >
                        SÄ±fÄ±rla
                    </button>
                    <ShareButton
                        targetRef={standingsRef}
                    />
                </LeagueActionBar>

                {/* Content Grid */}
                <div className="flex-1 grid grid-cols-1 lg:grid-cols-12 gap-4 min-h-0 overflow-hidden">
                    {/* Left: Fixture */}
                    <div className="lg:col-span-8 h-full min-h-0 flex flex-col bg-slate-900/50 rounded-xl border border-slate-800 overflow-hidden order-2 lg:order-1">
                        <FixtureList
                            matches={currentMatches}
                            overrides={overrides}
                            onScoreChange={handleScoreChange}
                        />
                    </div>

                    {/* Right: Standings */}
                    <div className="lg:col-span-4 h-full min-h-0 flex flex-col order-1 lg:order-2" ref={standingsRef}>
                        <StandingsTable
                            teams={standings}
                            playoffSpots={config.playoffSpots}
                            relegationSpots={config.relegationSpots}
                            initialRanks={initialRanks}
                        />

                        {/* Achievements Panel */}
                        {showAchievements && (
                            <div className="absolute inset-0 bg-slate-950/90 z-50 flex items-center justify-center p-4">
                                <AchievementsPanel
                                    isOpen={showAchievements}
                                    onClose={() => setShowAchievements(false)}
                                />
                            </div>
                        )}
                    </div>
                </div>
            </div>

            {/* Achievement Toast */}
            {newAchievement && (
                <AchievementToast
                    achievement={newAchievement}
                    onClose={() => setNewAchievement(null)}
                />
            )}
        </main>
    );
}

```

## File: app\components\LeagueTemplate\index.ts
```
// LeagueTemplate - Barrel exports
export * from './types';
export { default as useLeagueData, useLeagueData as useLeague } from './useLeagueData';
export { default as LeagueActionBar } from './LeagueActionBar';

```

## File: app\components\LeagueTemplate\LeagueActionBar.tsx
```
"use client";

import { ReactNode } from 'react';
import { LeagueConfig, THEME_COLORS } from './types';

interface LeagueActionBarProps {
    config: LeagueConfig;
    // Left side
    title?: string;
    subtitle?: string;
    // Selector (group/round/pool)
    selectorLabel?: string;
    selectorValue?: string;
    selectorOptions?: (string | { label: string; value: string })[];
    onSelectorChange?: (value: string) => void;
    // Progress
    progress?: number;
    progressLabel?: string;
    // Right side actions
    children?: ReactNode;
}

export function LeagueActionBar({
    config,
    title,
    subtitle,
    selectorLabel,
    selectorValue,
    selectorOptions = [],
    onSelectorChange,
    progress,
    progressLabel,
    children
}: LeagueActionBarProps) {
    const theme = THEME_COLORS[config.theme];

    return (
        <div className="sticky top-14 z-20 flex flex-col sm:flex-row items-center justify-between gap-3 p-2 bg-slate-900/95 backdrop-blur-sm rounded-xl border border-slate-800 shadow-xl">
            {/* Left Side: Title + Selector */}
            <div className="flex flex-col sm:flex-row items-center gap-4 w-full sm:w-auto">
                {/* Title Block */}
                {(title || subtitle) && (
                    <div className="text-center sm:text-left">
                        {title && (
                            <h1 className="font-bold text-white text-lg tracking-tight leading-none hidden sm:block">
                                {title}
                            </h1>
                        )}
                        {subtitle && (
                            <p className="text-[10px] text-slate-400 hidden sm:block">
                                {subtitle}
                            </p>
                        )}
                    </div>
                )}

                {/* Selector */}
                {selectorOptions.length > 0 && onSelectorChange && (
                    <div className="flex gap-2 items-center w-full sm:w-auto">
                        {selectorLabel && (
                            <span className="text-[10px] font-bold text-slate-500 uppercase tracking-widest hidden sm:inline whitespace-nowrap">
                                {selectorLabel}:
                            </span>
                        )}
                        <div className="flex gap-1 p-1 bg-slate-950/50 rounded-lg border border-slate-800 items-center">
                            <select
                                value={selectorValue}
                                onChange={(e) => onSelectorChange(e.target.value)}
                                title={selectorLabel || 'SeÃ§in'}
                                className={`px-3 py-1 bg-${config.theme}-600/20 ${theme.text} text-[10px] uppercase font-black rounded-md border border-${config.theme}-500/30 outline-none cursor-pointer transition-all focus:ring-2 focus:ring-${config.theme}-500/50`}
                            >
                                {selectorOptions.map(opt => {
                                    const value = typeof opt === 'string' ? opt : opt.value;
                                    const label = typeof opt === 'string' ? opt : opt.label;
                                    return (
                                        <option key={value} value={value} className="bg-slate-900 text-white">
                                            {label}
                                        </option>
                                    );
                                })}
                            </select>
                        </div>
                    </div>
                )}

                {/* Progress */}
                {progress !== undefined && (
                    <div className="hidden sm:flex items-center gap-2">
                        <div className="flex items-center gap-1.5 px-2 py-1 bg-slate-800/50 rounded-lg border border-slate-700/50">
                            <div className="w-16 h-1.5 bg-slate-700 rounded-full overflow-hidden">
                                <div
                                    className={`h-full bg-gradient-to-r ${theme.gradient} transition-all`}
                                    style={{ width: `${Math.min(progress, 100)}%` }}
                                />
                            </div>
                            <span className={`text-[9px] font-bold ${theme.text}`}>
                                {progressLabel || `%${Math.round(progress)}`}
                            </span>
                        </div>
                    </div>
                )}
            </div>

            {/* Right Side: Actions */}
            {children && (
                <div className="flex items-center gap-2 w-full sm:w-auto justify-end flex-wrap sm:flex-nowrap">
                    {children}
                </div>
            )}
        </div>
    );
}

export default LeagueActionBar;

```

## File: app\components\LeagueTemplate\PlayoffTemplate.tsx
```
"use client";

import { useMemo } from "react";
import { TeamStats, Match } from "../../types";
import { LeagueConfig } from "./types";
import LeagueActionBar from "./LeagueActionBar";

interface PlayoffTemplateProps {
    config: LeagueConfig;
    initialTeams: TeamStats[];
    initialMatches: Match[];
}

export default function PlayoffTemplate({ config, initialTeams, initialMatches }: PlayoffTemplateProps) {
    // Determine matches to show (e.g. only playoff rounds if specified)
    const currentMatches = useMemo(() => {
        // Filter for playoff matches if needed, currently assumes all passed matches are relevant
        return initialMatches;
    }, [initialMatches]);

    const progress = useMemo(() => {
        const played = currentMatches.filter(m => m.isPlayed).length;
        const total = currentMatches.length;
        return total > 0 ? Math.round((played / total) * 100) : 0;
    }, [currentMatches]);

    return (
        <main className="min-h-screen bg-slate-950 text-slate-100 p-0 sm:p-2 font-sans pb-20 sm:pb-4">
            <div className="max-w-[1600px] mx-auto flex flex-col h-[calc(100vh-2rem)] gap-4">

                <LeagueActionBar
                    config={config}
                    title={config.name}
                    subtitle="Play-Off AÅŸamasÄ±"
                    progress={progress}
                    progressLabel={`%${progress}`}
                />

                <div className="flex-1 min-h-0 bg-slate-900/50 rounded-xl border border-slate-800 overflow-hidden relative flex items-center justify-center">
                    <div className="text-center text-slate-500">
                        <p className="text-lg font-bold">Play-Off Bracket</p>
                        <p className="text-sm">{currentMatches.length} maÃ§ â€¢ {initialTeams.length} takÄ±m</p>
                    </div>
                </div>
            </div>
        </main>
    );
}

```

## File: app\components\LeagueTemplate\StatsTemplate.tsx
```
"use client";

import { useMemo } from "react";
import { TeamStats, Match } from "../../types";
import { LeagueConfig } from "./types";
import LeagueActionBar from "./LeagueActionBar";
import StatsCard from "../StatsCard";
import TeamAvatar from "../TeamAvatar";
import { sortStandings } from "../../utils/calculatorUtils";

interface StatsTemplateProps {
    config: LeagueConfig;
    initialTeams: TeamStats[];
    initialMatches: Match[];
}

export default function StatsTemplate({ config, initialTeams, initialMatches }: StatsTemplateProps) {
    const teams = useMemo(() => sortStandings(initialTeams), [initialTeams]);

    // Derived Stats
    const stats = useMemo(() => {
        // Calculate Streaks & Form
        const streaks = teams.map(t => {
            // This is a simplified streak calculation based on wins/losses since we don't have full match history in TeamStats
            // Ideally we'd parse matches to find current streak.
            // For now, let's use the matches array to find last matches for each team
            const teamMatches = initialMatches.filter(m => (m.homeTeam === t.name || m.awayTeam === t.name) && m.isPlayed);

            // Sort by ID (assuming ID correlates with time) or Date if available
            // Note: Match ID logic might need improvement
            return {
                name: t.name,
                matches: teamMatches.length,
                wins: t.wins
            };
        });

        const topWinRate = [...teams].sort((a, b) => (b.wins / (b.played || 1)) - (a.wins / (a.played || 1)))[0];
        const topSetRatio = [...teams].sort((a, b) => ((b.setsWon / (b.setsLost || 1)) - (a.setsWon / (a.setsLost || 1))))[0];
        const mostPlayed = [...teams].sort((a, b) => b.played - a.played)[0];

        return {
            topWinRate,
            topSetRatio,
            mostPlayed
        };
    }, [teams, initialMatches]);

    // Completion Rate for Action Bar
    // Completion Rate for Action Bar
    const totalMatches = initialMatches.length;
    const playedMatches = initialMatches.filter(m => m.isPlayed).length;
    const progress = totalMatches > 0 ? Math.round((playedMatches / totalMatches) * 100) : 0;

    return (
        <main className="min-h-screen bg-slate-950 text-slate-100 p-0 sm:p-2 font-sans pb-20 sm:pb-4">
            <div className="max-w-7xl mx-auto space-y-4">

                <LeagueActionBar
                    config={config}
                    title={config.name}
                    subtitle={`${config.subtitle} Ä°statistikleri`}
                    progress={progress}
                    progressLabel={`%${progress}`}
                />

                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                    <StatsCard
                        title="Galibiyet Lideri"
                        value={stats.topWinRate?.name || '-'}
                        subtitle={`${stats.topWinRate?.wins || 0} Galibiyet`}
                        trend="up"
                        icon="ğŸ†"
                        color="emerald"
                    />
                    <StatsCard
                        title="Set AverajÄ±"
                        value={stats.topSetRatio?.name || '-'}
                        subtitle={(stats.topSetRatio?.setsWon / (stats.topSetRatio?.setsLost || 1)).toFixed(2)}
                        trend="up"
                        icon="ğŸ“Š"
                        color="blue"
                    />
                    <StatsCard
                        title="En Ã‡ok MaÃ§"
                        value={stats.mostPlayed?.name || '-'}
                        subtitle={`${stats.mostPlayed?.played || 0} MaÃ§`}
                        trend="neutral"
                        icon="ğŸ“…"
                        color="amber"
                    />
                    <StatsCard
                        title="MVP AdayÄ±"
                        value="Tijana Boskovic"
                        subtitle="EczacÄ±baÅŸÄ±"
                        trend="up"
                        icon="â­"
                        color="rose"
                    />
                </div>

                {/* Detailed Stats Grid - Placeholder for now as we don't have player stats logic fully migrated */}
                <div className="grid grid-cols-1 lg:grid-cols-2 gap-4">
                    <div className="space-y-4">
                        <h3 className="text-sm font-bold text-slate-400 uppercase tracking-widest px-1">
                            Ã–ne Ã‡Ä±kan Oyuncular (Demo)
                        </h3>
                        <div className="grid grid-cols-1 gap-3">
                            <StatTile
                                title="En Skorer"
                                player="Tijana Boskovic"
                                team="EczacÄ±baÅŸÄ± Dynavit"
                                value="324"
                                icon="ğŸ"
                                color="rose"
                            />
                            <StatTile
                                title="En Ã‡ok Blok"
                                player="Zehra GÃ¼neÅŸ"
                                team="VakÄ±fBank"
                                value="42"
                                icon="âœ‹"
                                color="emerald"
                            />
                        </div>
                    </div>

                    <div className="space-y-4">
                        <h3 className="text-sm font-bold text-slate-400 uppercase tracking-widest px-1">
                            TakÄ±m PerformansÄ±
                        </h3>
                        {/* Team Performance Bars could go here */}
                        <div className="bg-slate-900/40 rounded-xl p-4 border border-slate-800/50 h-full flex items-center justify-center text-slate-500 italic">
                            DetaylÄ± takÄ±m istatistikleri yakÄ±nda...
                        </div>
                    </div>
                </div>

            </div>
        </main>
    );
}

// Stat Tile Component (Local helper or could be separate)
const StatTile = ({ title, player, team, value, icon, color }: any) => (
    <div className="bg-slate-900/50 p-4 rounded-xl border border-slate-800/50 flex items-center justify-between group hover:border-slate-700 transition-all">
        <div className="flex items-center gap-4">
            <div className={`w-10 h-10 rounded-lg bg-${color}-500/10 flex items-center justify-center text-xl`}>
                {icon}
            </div>
            <div>
                <div className="text-xs text-slate-400 font-bold uppercase tracking-wider mb-0.5">{title}</div>
                <div className="font-bold text-slate-200 group-hover:text-white transition-colors">{player}</div>
                <div className="text-xs text-slate-500">{team}</div>
            </div>
        </div>
        <div className="text-right">
            <div className={`text-xl font-black text-${color}-400`}>{value}</div>
        </div>
    </div>
);

```

## File: app\components\LeagueTemplate\types.ts
```
// LeagueTemplate Types
import { TeamStats, Match } from '../../types';

export type LeagueTheme = 'red' | 'amber' | 'emerald' | 'blue' | 'rose' | 'purple';

export interface LeagueConfig {
    id: string;
    name: string;
    shortName: string;
    subtitle: string;
    theme: LeagueTheme;
    apiEndpoint: string;
    storageKey: string;
    hasGroups: boolean;
    hasRounds: boolean;
    groups?: string[];
    rounds?: string[];
    playoffSpots?: number;
    secondaryPlayoffSpots?: number;
    relegationSpots?: number;
}

export interface LeagueData {
    teams: TeamStats[];
    fixture: Match[];
    groups?: string[];
    rounds?: string[];
    pools?: string[];
}

export interface LeaguePageProps {
    config: LeagueConfig;
    initialData?: LeagueData;
}

// Theme color definitions for each league theme
export interface ThemeColors {
    text: string;
    gradient: string;
    border: string;
    bg: string;
    ring: string;
}

export const THEME_COLORS: Record<LeagueTheme, ThemeColors> = {
    red: {
        text: 'text-red-400',
        gradient: 'from-red-500 to-rose-500',
        border: 'border-red-500/30',
        bg: 'bg-red-600/20',
        ring: 'ring-red-500/50'
    },
    amber: {
        text: 'text-amber-400',
        gradient: 'from-amber-500 to-orange-500',
        border: 'border-amber-500/30',
        bg: 'bg-amber-600/20',
        ring: 'ring-amber-500/50'
    },
    emerald: {
        text: 'text-emerald-400',
        gradient: 'from-emerald-500 to-teal-500',
        border: 'border-emerald-500/30',
        bg: 'bg-emerald-600/20',
        ring: 'ring-emerald-500/50'
    },
    blue: {
        text: 'text-blue-400',
        gradient: 'from-blue-500 to-cyan-500',
        border: 'border-blue-500/30',
        bg: 'bg-blue-600/20',
        ring: 'ring-blue-500/50'
    },
    rose: {
        text: 'text-rose-400',
        gradient: 'from-rose-500 to-pink-500',
        border: 'border-rose-500/30',
        bg: 'bg-rose-600/20',
        ring: 'ring-rose-500/50'
    },
    purple: {
        text: 'text-purple-400',
        gradient: 'from-purple-500 to-violet-500',
        border: 'border-purple-500/30',
        bg: 'bg-purple-600/20',
        ring: 'ring-purple-500/50'
    }
};

// Pre-defined league configurations
export const LEAGUE_CONFIGS: Record<string, LeagueConfig> = {
    vsl: {
        id: 'vsl',
        name: 'Vodafone Sultanlar Ligi',
        shortName: 'VSL',
        subtitle: 'KadÄ±nlar â€¢ 2025-2026',
        theme: 'red',
        apiEndpoint: '/api/vsl',
        storageKey: 'vslGroupScenarios',
        hasGroups: false,
        hasRounds: false,
        playoffSpots: 4,
        secondaryPlayoffSpots: 4, // 5-8 Playoff
        relegationSpots: 2
    },
    '1lig': {
        id: '1lig',
        name: 'Arabica Coffee House 1. Lig',
        shortName: '1. Lig',
        subtitle: 'KadÄ±nlar â€¢ 2025-2026',
        theme: 'amber',
        apiEndpoint: '/api/1lig',
        storageKey: '1ligGroupScenarios',
        hasGroups: true,
        groups: ["A. Grup", "B. Grup"],
        hasRounds: false,
        playoffSpots: 2,
        relegationSpots: 2
    },
    '2lig': {
        id: '2lig',
        name: 'KadÄ±nlar 2. Lig',
        shortName: '2. Lig',
        subtitle: 'KadÄ±nlar â€¢ 2025-2026',
        theme: 'emerald',
        apiEndpoint: '/api/scrape',
        storageKey: 'groupScenarios',
        hasGroups: true,
        hasRounds: false,
        playoffSpots: 2,
        relegationSpots: 2
    },
    'cev-cl': {
        id: 'cev-cl',
        name: 'CEV Åampiyonlar Ligi',
        shortName: 'CEV CL',
        subtitle: 'KadÄ±nlar â€¢ 2025-2026',
        theme: 'blue',
        apiEndpoint: '/api/cev-cl',
        storageKey: 'cevclGroupScenarios',
        hasGroups: true,
        hasRounds: false
    },
    'cev-cup': {
        id: 'cev-cup',
        name: 'CEV Cup',
        shortName: 'CEV Cup',
        subtitle: 'KadÄ±nlar â€¢ 2025-2026',
        theme: 'amber',
        apiEndpoint: '/api/cev-cup',
        storageKey: 'cevcupScenarios',
        hasGroups: false,
        hasRounds: true
    },
    'cev-challenge': {
        id: 'cev-challenge',
        name: 'CEV Challenge Cup',
        shortName: 'Challenge',
        subtitle: 'KadÄ±nlar â€¢ 2025-2026',
        theme: 'emerald',
        apiEndpoint: '/api/cev-challenge',
        storageKey: 'cevChallengeScenarios',
        hasGroups: false,
        hasRounds: true
    }
};

```

## File: app\components\LeagueTemplate\useLeagueData.ts
```
"use client";

import { useState, useEffect, useCallback } from 'react';
import { LeagueConfig, LeagueData, LEAGUE_CONFIGS } from './types';
import { TeamStats, Match } from '../../types';

interface UseLeagueDataOptions {
    leagueId: string;
    autoFetch?: boolean;
}

interface UseLeagueDataReturn {
    data: LeagueData | null;
    loading: boolean;
    error: string | null;
    refetch: () => Promise<void>;
    config: LeagueConfig;
}

export function useLeagueData({ leagueId, autoFetch = true }: UseLeagueDataOptions): UseLeagueDataReturn {
    const [data, setData] = useState<LeagueData | null>(null);
    const [loading, setLoading] = useState(true);
    const [error, setError] = useState<string | null>(null);

    const config = LEAGUE_CONFIGS[leagueId];

    const fetchData = useCallback(async () => {
        if (!config) {
            setError(`Unknown league: ${leagueId}`);
            setLoading(false);
            return;
        }

        try {
            setLoading(true);
            setError(null);

            const res = await fetch(config.apiEndpoint);
            if (!res.ok) throw new Error('Veri Ã§ekilemedi');

            const json = await res.json();

            // Normalize data structure
            const normalizedData: LeagueData = {
                teams: json.teams || [],
                fixture: json.fixture || json.matches || [],
                groups: json.groups || (config.hasGroups ? extractGroups(json.teams) : undefined),
                rounds: json.rounds || undefined,
                pools: json.pools || undefined
            };

            setData(normalizedData);
        } catch (err) {
            setError(err instanceof Error ? err.message : 'Bilinmeyen hata');
        } finally {
            setLoading(false);
        }
    }, [config, leagueId]);

    useEffect(() => {
        if (autoFetch) {
            fetchData();
        }
    }, [autoFetch, fetchData]);

    return {
        data,
        loading,
        error,
        refetch: fetchData,
        config
    };
}

// Helper to extract unique groups from teams
function extractGroups(teams: TeamStats[]): string[] {
    const groups = [...new Set(teams.map(t => t.groupName))].filter(Boolean);
    return groups.sort((a, b) => {
        const numA = parseInt(a.match(/\d+/)?.[0] || '0');
        const numB = parseInt(b.match(/\d+/)?.[0] || '0');
        return numA - numB;
    });
}

export default useLeagueData;

```

## File: app\components\Skeleton\index.tsx
```
"use client";

import { Skeleton as BaseSkeleton } from '@/components/ui/skeleton';
import { cn } from '@/lib/utils';

interface SkeletonProps {
    className?: string;
}

// Base skeleton with shimmer animation (using shadcn/ui)
export function Skeleton({ className = '' }: SkeletonProps) {
    return (
        <BaseSkeleton className={cn("bg-muted", className)} />
    );
}

// Text line skeleton
export function SkeletonText({ lines = 1, className = '' }: { lines?: number; className?: string }) {
    return (
        <div className={`space-y-2 ${className}`}>
            {Array.from({ length: lines }).map((_, i) => (
                <Skeleton
                    key={i}
                    className={`h-4 ${i === lines - 1 ? 'w-3/4' : 'w-full'}`}
                />
            ))}
        </div>
    );
}

// Avatar/Circle skeleton
export function SkeletonAvatar({ size = 'md' }: { size?: 'sm' | 'md' | 'lg' }) {
    const sizes = {
        sm: 'w-8 h-8',
        md: 'w-12 h-12',
        lg: 'w-16 h-16'
    };
    return <Skeleton className={`${sizes[size]} rounded-full`} />;
}

// Card skeleton
export function SkeletonCard({ className = '' }: SkeletonProps) {
    return (
        <div className={`bg-slate-900/50 rounded-xl border border-slate-800 p-4 ${className}`}>
            <div className="flex items-center gap-3 mb-4">
                <SkeletonAvatar size="sm" />
                <div className="flex-1">
                    <Skeleton className="h-4 w-24 mb-2" />
                    <Skeleton className="h-3 w-16" />
                </div>
            </div>
            <SkeletonText lines={2} />
        </div>
    );
}

// Table row skeleton
export function SkeletonTableRow({ columns = 5 }: { columns?: number }) {
    return (
        <div className="flex items-center gap-3 p-2 border-b border-slate-800/50">
            <Skeleton className="w-6 h-6 rounded" />
            <SkeletonAvatar size="sm" />
            <div className="flex-1">
                <Skeleton className="h-4 w-32" />
            </div>
            {Array.from({ length: columns - 2 }).map((_, i) => (
                <Skeleton key={i} className="h-4 w-8" />
            ))}
        </div>
    );
}

// Table skeleton
export function SkeletonTable({ rows = 8, columns = 5 }: { rows?: number; columns?: number }) {
    return (
        <div className="bg-slate-900/50 rounded-xl border border-slate-800 overflow-hidden">
            {/* Header */}
            <div className="flex items-center gap-3 p-3 border-b border-slate-700 bg-slate-800/50">
                {Array.from({ length: columns }).map((_, i) => (
                    <Skeleton key={i} className={`h-3 ${i === 0 ? 'w-6' : i === 1 ? 'w-32' : 'w-12'}`} />
                ))}
            </div>
            {/* Rows */}
            {Array.from({ length: rows }).map((_, i) => (
                <SkeletonTableRow key={i} columns={columns} />
            ))}
        </div>
    );
}

// Stats grid skeleton
export function SkeletonStats({ count = 4 }: { count?: number }) {
    return (
        <div className="grid grid-cols-2 md:grid-cols-4 gap-3">
            {Array.from({ length: count }).map((_, i) => (
                <div key={i} className="bg-slate-900/50 rounded-xl border border-slate-800 p-4 text-center">
                    <Skeleton className="h-8 w-12 mx-auto mb-2" />
                    <Skeleton className="h-3 w-16 mx-auto" />
                </div>
            ))}
        </div>
    );
}

// Match list skeleton
export function SkeletonMatchList({ count = 6 }: { count?: number }) {
    return (
        <div className="space-y-2">
            {Array.from({ length: count }).map((_, i) => (
                <div key={i} className="flex items-center justify-between p-3 bg-slate-900/50 rounded-xl border border-slate-800">
                    <div className="flex items-center gap-2">
                        <SkeletonAvatar size="sm" />
                        <Skeleton className="h-4 w-24" />
                    </div>
                    <Skeleton className="h-6 w-12 rounded-lg" />
                    <div className="flex items-center gap-2">
                        <Skeleton className="h-4 w-24" />
                        <SkeletonAvatar size="sm" />
                    </div>
                </div>
            ))}
        </div>
    );
}

// Page skeleton (combines multiple elements)
export function SkeletonPage() {
    return (
        <div className="space-y-4 p-4 animate-in fade-in duration-300">
            {/* Header */}
            <div className="flex items-center justify-between">
                <div>
                    <Skeleton className="h-6 w-48 mb-2" />
                    <Skeleton className="h-4 w-32" />
                </div>
                <Skeleton className="h-10 w-24 rounded-lg" />
            </div>

            {/* Stats */}
            <SkeletonStats count={4} />

            {/* Content grid */}
            <div className="grid md:grid-cols-2 gap-4">
                <SkeletonTable rows={6} />
                <SkeletonMatchList count={4} />
            </div>
        </div>
    );
}

// Bracket skeleton for playoff views
export function SkeletonBracket({ rounds = 3 }: { rounds?: number }) {
    return (
        <div className="space-y-4 p-4">
            <Skeleton className="h-8 w-48 mb-6" />
            <div className="flex gap-8 overflow-x-auto pb-4">
                {Array.from({ length: rounds }).map((_, roundIdx) => (
                    <div key={roundIdx} className="flex flex-col gap-4 min-w-[200px]">
                        <Skeleton className="h-5 w-24 mb-2" />
                        {Array.from({ length: Math.pow(2, rounds - roundIdx - 1) }).map((_, matchIdx) => (
                            <div key={matchIdx} className="bg-slate-900/50 border border-slate-800 rounded-lg p-3 space-y-2">
                                <div className="flex items-center gap-2">
                                    <SkeletonAvatar size="sm" />
                                    <Skeleton className="h-4 w-20 flex-1" />
                                    <Skeleton className="h-4 w-6" />
                                </div>
                                <div className="flex items-center gap-2">
                                    <SkeletonAvatar size="sm" />
                                    <Skeleton className="h-4 w-20 flex-1" />
                                    <Skeleton className="h-4 w-6" />
                                </div>
                            </div>
                        ))}
                    </div>
                ))}
            </div>
        </div>
    );
}

// Leaderboard skeleton
export function SkeletonLeaderboard({ count = 10 }: { count?: number }) {
    return (
        <div className="space-y-2 p-4">
            <Skeleton className="h-8 w-48 mb-4" />
            {Array.from({ length: count }).map((_, i) => (
                <div key={i} className="flex items-center gap-3 p-3 bg-slate-900/50 border border-slate-800 rounded-lg">
                    <Skeleton className="h-6 w-8 rounded" />
                    <SkeletonAvatar size="sm" />
                    <div className="flex-1">
                        <Skeleton className="h-4 w-32 mb-1" />
                        <Skeleton className="h-3 w-20" />
                    </div>
                    <Skeleton className="h-6 w-16 rounded-lg" />
                </div>
            ))}
        </div>
    );
}

export default Skeleton;

```

## File: app\components\ui\Badge.tsx
```
import * as React from "react"
import { cva, type VariantProps } from "class-variance-authority"
import { cn } from "@/lib/utils"

const badgeVariants = cva(
    "inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",
    {
        variants: {
            variant: {
                default:
                    "border-transparent bg-primary text-primary-foreground hover:bg-primary/80",
                secondary:
                    "border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",
                destructive:
                    "border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",
                outline: "text-text-primary border-border-main",
                success: "border-transparent bg-emerald-500 text-white",
                warning: "border-transparent bg-amber-500 text-white",
            },
        },
        defaultVariants: {
            variant: "default",
        },
    }
)

export interface BadgeProps
    extends React.HTMLAttributes<HTMLDivElement>,
    VariantProps<typeof badgeVariants> { }

function Badge({ className, variant, ...props }: BadgeProps) {
    return (
        <div className={cn(badgeVariants({ variant }), className)} {...props} />
    )
}

export { Badge, badgeVariants }

```

## File: app\components\ui\BottomSheet.tsx
```
"use client";

import * as React from "react";
import { motion, AnimatePresence, useDragControls } from "framer-motion";
import { cn } from "@/lib/utils";
import { X } from "lucide-react";

interface BottomSheetProps {
    isOpen: boolean;
    onClose: () => void;
    title?: string;
    children: React.ReactNode;
    className?: string;
}

export function BottomSheet({
    isOpen,
    onClose,
    title,
    children,
    className,
}: BottomSheetProps) {
    // Use useEffect to handle body scroll lock
    React.useEffect(() => {
        if (isOpen) {
            document.body.style.overflow = "hidden";
        } else {
            document.body.style.overflow = "unset";
        }
        return () => {
            document.body.style.overflow = "unset";
        };
    }, [isOpen]);

    return (
        <AnimatePresence>
            {isOpen && (
                <>
                    {/* Backdrop */}
                    <motion.div
                        initial={{ opacity: 0 }}
                        animate={{ opacity: 1 }}
                        exit={{ opacity: 0 }}
                        onClick={onClose}
                        className="fixed inset-0 z-[110] bg-black/60 backdrop-blur-sm"
                    />

                    {/* Sheet */}
                    <motion.div
                        initial={{ y: "100%" }}
                        animate={{ y: 0 }}
                        exit={{ y: "100%" }}
                        transition={{ type: "spring", damping: 25, stiffness: 200 }}
                        className={cn(
                            "fixed bottom-0 left-0 right-0 z-[120] flex flex-col rounded-t-[32px] bg-surface-primary border-t border-border-main shadow-2xl safe-p-bottom max-h-[90vh]",
                            className
                        )}
                    >
                        {/* Handle / Drag Bar */}
                        <div className="flex w-full items-center justify-center p-4">
                            <div className="h-1.5 w-12 rounded-full bg-surface-secondary" />
                        </div>

                        {/* Header */}
                        {title && (
                            <div className="flex items-center justify-between px-6 pb-4">
                                {title && (
                                    <h2 className="text-xl font-black text-text-primary tracking-tight">
                                        {title}
                                    </h2>
                                )}
                                <button
                                    onClick={onClose}
                                    className="rounded-full bg-surface-secondary p-1.5 text-text-muted hover:text-text-primary transition-colors"
                                    aria-label="Kapat"
                                >
                                    <X className="h-5 w-5" />
                                </button>
                            </div>
                        )}

                        {/* Content */}
                        <div className="flex-1 overflow-y-auto px-6 pb-8 custom-scrollbar">
                            {children}
                        </div>
                    </motion.div>
                </>
            )}
        </AnimatePresence>
    );
}

```

## File: app\components\ui\Button.tsx
```
import * as React from "react"
import { Slot } from "@radix-ui/react-slot"
import { cva, type VariantProps } from "class-variance-authority"
import { cn } from "@/lib/utils"
import { Loader2 } from "lucide-react"

const buttonVariants = cva(
    "inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 active:scale-[0.98]",
    {
        variants: {
            variant: {
                primary: "bg-primary text-primary-foreground hover:bg-primary/90 shadow-glow-primary",
                secondary: "bg-secondary text-secondary-foreground hover:bg-secondary/80 shadow-premium-sm",
                outline: "border border-border-main bg-transparent hover:bg-surface-secondary hover:text-text-primary",
                ghost: "hover:bg-surface-secondary hover:text-text-primary",
                destructive: "bg-destructive text-destructive-foreground hover:bg-destructive/90",
                premium: "bg-gradient-to-r from-primary to-accent text-white hover:brightness-110 shadow-glow-primary",
            },
            size: {
                default: "h-10 px-4 py-2",
                sm: "h-9 rounded-md px-3",
                lg: "h-11 rounded-md px-8",
                icon: "h-10 w-10",
            },
            fullWidth: {
                true: "w-full",
            },
        },
        defaultVariants: {
            variant: "primary",
            size: "default",
        },
    }
)

export interface ButtonProps
    extends React.ButtonHTMLAttributes<HTMLButtonElement>,
    VariantProps<typeof buttonVariants> {
    asChild?: boolean
    isLoading?: boolean
    leftIcon?: React.ReactNode
    rightIcon?: React.ReactNode
}

const Button = React.forwardRef<HTMLButtonElement, ButtonProps>(
    ({ className, variant, size, fullWidth, asChild = false, isLoading, leftIcon, rightIcon, children, ...props }, ref) => {
        const Comp = asChild ? Slot : "button"
        return (
            <Comp
                className={cn(buttonVariants({ variant, size, fullWidth, className }))}
                ref={ref}
                disabled={isLoading || props.disabled}
                aria-busy={isLoading}
                aria-live={isLoading ? "polite" : "off"}
                {...props}
            >
                {isLoading && <Loader2 className="mr-2 h-4 w-4 animate-spin" />}
                {!isLoading && leftIcon && <span className="mr-2">{leftIcon}</span>}
                {children}
                {!isLoading && rightIcon && <span className="ml-2">{rightIcon}</span>}
            </Comp>
        )
    }
)
Button.displayName = "Button"

export { Button, buttonVariants }

```

## File: app\components\ui\Card.tsx
```
import * as React from "react"
import { cn } from "@/lib/utils"

const Card = React.forwardRef<
    HTMLDivElement,
    React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
    <div
        ref={ref}
        className={cn(
            "rounded-xl border border-border-main bg-surface-primary text-text-primary shadow-premium-sm transition-all hover:shadow-premium-md",
            className
        )}
        {...props}
    />
))
Card.displayName = "Card"

const CardHeader = React.forwardRef<
    HTMLDivElement,
    React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
    <div
        ref={ref}
        className={cn("flex flex-col space-y-1.5 p-6", className)}
        {...props}
    />
))
CardHeader.displayName = "CardHeader"

const CardTitle = React.forwardRef<
    HTMLParagraphElement,
    React.HTMLAttributes<HTMLHeadingElement>
>(({ className, ...props }, ref) => (
    <h3
        ref={ref}
        className={cn(
            "text-2xl font-semibold leading-none tracking-tight",
            className
        )}
        {...props}
    />
))
CardTitle.displayName = "CardTitle"

const CardDescription = React.forwardRef<
    HTMLParagraphElement,
    React.HTMLAttributes<HTMLParagraphElement>
>(({ className, ...props }, ref) => (
    <p
        ref={ref}
        className={cn("text-sm text-text-secondary", className)}
        {...props}
    />
))
CardDescription.displayName = "CardDescription"

const CardContent = React.forwardRef<
    HTMLDivElement,
    React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
    <div ref={ref} className={cn("p-6 pt-0", className)} {...props} />
))
CardContent.displayName = "CardContent"

const CardFooter = React.forwardRef<
    HTMLDivElement,
    React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
    <div
        ref={ref}
        className={cn("flex items-center p-6 pt-0", className)}
        {...props}
    />
))
CardFooter.displayName = "CardFooter"

export { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }

```

## File: app\components\ui\EmptyState.tsx
```
import * as React from "react"
import { cn } from "@/lib/utils"
import { Button } from "./Button"
import { LucideIcon } from "lucide-react"

interface EmptyStateProps extends React.HTMLAttributes<HTMLDivElement> {
    title: string
    description?: string
    icon?: LucideIcon
    actionLabel?: string
    onAction?: () => void
}

export function EmptyState({
    title,
    description,
    icon: Icon,
    actionLabel,
    onAction,
    className,
    ...props
}: EmptyStateProps) {
    return (
        <div
            className={cn(
                "flex min-h-[400px] flex-col items-center justify-center rounded-xl border border-dashed border-border-main p-8 text-center animate-in fade-in zoom-in duration-300",
                className
            )}
            {...props}
        >
            <div className="mx-auto flex h-20 w-20 items-center justify-center rounded-full bg-surface-secondary/50 shadow-premium-sm">
                {Icon ? (
                    <Icon className="h-10 w-10 text-text-muted opacity-50" />
                ) : (
                    <div className="h-10 w-10 rounded-full bg-border-subtle" />
                )}
            </div>
            <h3 className="mt-6 text-xl font-black text-text-primary tracking-tight">{title}</h3>
            {description && (
                <p className="mx-auto mt-4 max-w-sm text-sm text-text-secondary leading-relaxed">
                    {description}
                </p>
            )}
            {actionLabel && onAction && (
                <Button
                    variant="primary"
                    onClick={onAction}
                    className="mt-8 shadow-glow-primary px-8"
                >
                    {actionLabel}
                </Button>
            )}
        </div>
    )
}

```

## File: app\components\ui\LevelUpModal.tsx
```
"use client";

import React, { useEffect } from 'react';
import { motion, AnimatePresence } from 'framer-motion';
import { useGameState } from '../../utils/gameState';
import { Button } from './Button';
import { Trophy, Star, Zap } from 'lucide-react';
import confetti from 'canvas-confetti';

export function LevelUpModal() {
    const { gameState, showLevelUp, clearLevelUp, getLevelTitle } = useGameState();

    useEffect(() => {
        if (showLevelUp) {
            // Play sound would go here
            confetti({
                particleCount: 150,
                spread: 70,
                origin: { y: 0.6 },
                colors: ['#10b981', '#fbbf24', '#3b82f6']
            });
        }
    }, [showLevelUp]);

    if (!showLevelUp) return null;

    return (
        <AnimatePresence>
            <div className="fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/80 backdrop-blur-md">
                <motion.div
                    initial={{ scale: 0.5, opacity: 0, y: 100 }}
                    animate={{ scale: 1, opacity: 1, y: 0 }}
                    exit={{ scale: 0.5, opacity: 0, y: 100 }}
                    className="relative w-full max-w-sm bg-surface-primary rounded-[32px] p-8 border border-primary/20 shadow-glow-primary overflow-hidden"
                >
                    {/* Background Glows */}
                    <div className="absolute top-0 left-1/2 -translate-x-1/2 w-64 h-64 bg-primary/10 blur-[80px] rounded-full -z-10" />

                    <div className="flex flex-col items-center text-center">
                        <motion.div
                            initial={{ rotate: -20, scale: 0 }}
                            animate={{ rotate: 0, scale: 1 }}
                            transition={{ delay: 0.2, type: "spring" }}
                            className="w-24 h-24 bg-gradient-to-br from-primary to-accent rounded-3xl flex items-center justify-center mb-6 shadow-glow-primary"
                        >
                            <Trophy className="w-12 h-12 text-white" />
                        </motion.div>

                        <h2 className="text-[10px] font-black text-primary uppercase tracking-[0.3em] mb-2">
                            Seviye AtladÄ±n!
                        </h2>

                        <div className="text-4xl font-black text-text-primary mb-1">
                            SEVÄ°YE {gameState.level}
                        </div>

                        <div className="px-4 py-1 bg-primary/10 rounded-full text-[11px] font-black text-primary uppercase tracking-wider mb-8">
                            {getLevelTitle()}
                        </div>

                        <div className="grid grid-cols-2 gap-3 w-full mb-8">
                            <div className="bg-surface-secondary p-4 rounded-2xl border border-border-subtle">
                                <div className="text-text-muted text-[9px] font-black uppercase mb-1">Yeni Ã–dÃ¼l</div>
                                <div className="flex items-center gap-2 text-text-primary text-xs font-bold">
                                    <Star className="w-3.5 h-3.5 text-amber-500 fill-amber-500" />
                                    100 Coin
                                </div>
                            </div>
                            <div className="bg-surface-secondary p-4 rounded-2xl border border-border-subtle">
                                <div className="text-text-muted text-[9px] font-black uppercase mb-1">GeliÅŸim</div>
                                <div className="flex items-center gap-2 text-text-primary text-xs font-bold">
                                    <Zap className="w-3.5 h-3.5 text-primary fill-primary" />
                                    +5% Analiz
                                </div>
                            </div>
                        </div>

                        <Button
                            variant="primary"
                            className="w-full h-14 rounded-2xl text-lg font-black shadow-glow-primary"
                            onClick={clearLevelUp}
                        >
                            DEVAM ET
                        </Button>
                    </div>
                </motion.div>
            </div>
        </AnimatePresence>
    );
}

```

## File: app\components\ui\OnboardingTour.tsx
```
"use client";

import React, { useState, useEffect } from "react";
import { motion, AnimatePresence } from "framer-motion";
import { Button } from "./Button";
import { Card } from "./Card";
import { X, ChevronRight, Zap, Trophy, TrendingUp } from "lucide-react";
import { cn } from "@/lib/utils";
import confetti from "canvas-confetti";

interface Step {
    title: string;
    description: string;
    icon: React.ElementType;
    target?: string;
}

const steps: Step[] = [
    {
        title: "HoÅŸ Geldiniz!",
        description: "VolleySimulator ile ligleri simÃ¼le edin, puan durumunu tahmin edin ve sonuÃ§larÄ± gÃ¶rÃ¼n.",
        icon: Trophy,
    },
    {
        title: "HÄ±zlÄ± Tahmin",
        description: "Zap butonuna basarak 'HÄ±zlÄ± Tahmin' moduna geÃ§ebilir, skorlarÄ± anÄ±nda girebilirsiniz.",
        icon: Zap,
        target: "zap-button",
    },
    {
        title: "Puan Durumu",
        description: "Tahminleriniz anÄ±nda puan durumuna yansÄ±r. Play-off ve KÃ¼me dÃ¼ÅŸme hatlarÄ±nÄ± takip edin.",
        icon: TrendingUp,
        target: "standings-table",
    },
];

export default function OnboardingTour() {
    const [isOpen, setIsOpen] = useState(false);
    const [currentStep, setCurrentStep] = useState(0);

    useEffect(() => {
        const hasSeenTour = localStorage.getItem("hasSeenOnboarding_v1");
        if (!hasSeenTour) {
            setIsOpen(true);
        }
    }, []);

    const handleNext = () => {
        if (currentStep < steps.length - 1) {
            setCurrentStep(currentStep + 1);
        } else {
            completeTour();
        }
    };

    const completeTour = () => {
        setIsOpen(false);
        localStorage.setItem("hasSeenOnboarding_v1", "true");
        confetti({
            particleCount: 150,
            spread: 70,
            origin: { y: 0.6 },
            colors: ['#10b981', '#f59e0b', '#3b82f6']
        });
    };

    const skipTour = () => {
        setIsOpen(false);
        localStorage.setItem("hasSeenOnboarding_v1", "true");
    };

    if (!isOpen) return null;

    const current = steps[currentStep];
    const Icon = current.icon;

    return (
        <AnimatePresence>
            <div className="fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm">
                <motion.div
                    initial={{ opacity: 0, scale: 0.9, y: 20 }}
                    animate={{ opacity: 1, scale: 1, y: 0 }}
                    exit={{ opacity: 0, scale: 0.9, y: 20 }}
                    className="w-full max-w-sm"
                >
                    <Card className="relative overflow-hidden border-primary/20 bg-surface-primary shadow-2xl">
                        <div className="absolute top-0 left-0 w-full h-1 bg-surface-secondary">
                            <motion.div
                                className="h-full bg-primary shadow-glow-primary"
                                initial={{ width: 0 }}
                                animate={{ width: `${((currentStep + 1) / steps.length) * 100}%` }}
                            />
                        </div>

                        <button
                            onClick={skipTour}
                            className="absolute top-4 right-4 p-1 rounded-full hover:bg-surface-secondary transition-colors text-text-muted"
                            aria-label="Turu Atla"
                        >
                            <X className="w-4 h-4" />
                        </button>

                        <div className="p-8 pb-6 flex flex-col items-center text-center">
                            <div className="w-16 h-16 rounded-2xl bg-primary/10 flex items-center justify-center mb-6">
                                <Icon className="w-8 h-8 text-primary" />
                            </div>

                            <h2 className="text-2xl font-black text-text-primary tracking-tight mb-3">
                                {current.title}
                            </h2>

                            <p className="text-sm text-text-secondary leading-relaxed mb-8">
                                {current.description}
                            </p>

                            <div className="flex w-full gap-3">
                                <Button
                                    variant="ghost"
                                    size="sm"
                                    className="flex-1"
                                    onClick={skipTour}
                                >
                                    Atla
                                </Button>
                                <Button
                                    variant="primary"
                                    size="sm"
                                    className="flex-1 shadow-glow-primary"
                                    onClick={handleNext}
                                    rightIcon={<ChevronRight className="w-4 h-4" />}
                                >
                                    {currentStep === steps.length - 1 ? "BaÅŸla!" : "Ä°leri"}
                                </Button>
                            </div>

                            <div className="flex gap-1.5 mt-8">
                                {steps.map((_, i) => (
                                    <div
                                        key={i}
                                        className={cn(
                                            "w-1.5 h-1.5 rounded-full transition-all duration-300",
                                            i === currentStep ? "w-4 bg-primary" : "bg-border-subtle"
                                        )}
                                    />
                                ))}
                            </div>
                        </div>
                    </Card>
                </motion.div>
            </div>
        </AnimatePresence>
    );
}

```

## File: app\components\ui\Skeleton.tsx
```
import { cn } from "@/lib/utils"

function Skeleton({
    className,
    ...props
}: React.HTMLAttributes<HTMLDivElement>) {
    return (
        <div
            className={cn("animate-pulse rounded-md bg-surface-secondary", className)}
            {...props}
        />
    )
}

export function StandingsTableSkeleton() {
    return (
        <div className="space-y-3">
            {[...Array(10)].map((_, i) => (
                <div key={i} className="flex items-center gap-4 p-4 bg-surface-primary border border-border-main rounded-xl">
                    <Skeleton className="w-8 h-8 rounded-full" />
                    <Skeleton className="w-10 h-10 rounded-full" />
                    <Skeleton className="h-6 w-32 flex-1" />
                    <div className="flex gap-3">
                        <Skeleton className="w-12 h-6" />
                        <Skeleton className="w-12 h-6" />
                        <Skeleton className="w-12 h-6" />
                    </div>
                </div>
            ))}
        </div>
    )
}

export function MatchCardSkeleton() {
    return (
        <div className="p-4 bg-surface-primary border border-border-main rounded-xl space-y-4">
            <div className="flex justify-between items-center">
                <div className="flex items-center gap-2">
                    <Skeleton className="w-8 h-8 rounded-full" />
                    <Skeleton className="h-4 w-24" />
                </div>
                <Skeleton className="h-4 w-8" />
                <div className="flex items-center gap-2">
                    <Skeleton className="h-4 w-24" />
                    <Skeleton className="w-8 h-8 rounded-full" />
                </div>
            </div>
            <div className="grid grid-cols-4 gap-2">
                <Skeleton className="h-10 rounded-lg" />
                <Skeleton className="h-10 rounded-lg" />
                <Skeleton className="h-10 rounded-lg" />
                <Skeleton className="h-10 rounded-lg" />
            </div>
        </div>
    )
}

export { Skeleton }

```

## File: app\context\AuthContext.tsx
```
"use client";

import { createContext, useContext, useEffect, useState, ReactNode } from 'react';
import { User, Session, SupabaseClient } from '@supabase/supabase-js';
import { createClient } from '../utils/supabase';

interface AuthContextType {
    user: User | null;
    session: Session | null;
    loading: boolean;
    signUp: (email: string, password: string, metadata?: { name?: string }) => Promise<{ error: Error | null }>;
    signIn: (email: string, password: string) => Promise<{ error: Error | null }>;
    signOut: () => Promise<void>;
    signInWithGoogle: () => Promise<void>;
}

const AuthContext = createContext<AuthContextType | undefined>(undefined);

export function AuthProvider({ children }: { children: ReactNode }) {
    const [user, setUser] = useState<User | null>(null);
    const [session, setSession] = useState<Session | null>(null);
    const [loading, setLoading] = useState(true);
    const [supabase, setSupabase] = useState<SupabaseClient | null>(null);

    // Initialize Supabase client only in browser
    useEffect(() => {
        const client = createClient();
        setSupabase(client);

        if (!client) {
            setLoading(false);
            return;
        }

        const initAuth = async () => {
            try {
                // Set a timeout to prevent infinite loading
                const timeoutPromise = new Promise((_, reject) =>
                    setTimeout(() => reject(new Error('Auth timeout')), 5000)
                );

                const sessionPromise = client.auth.getSession();

                // Race between session fetch and timeout
                const { data } = await Promise.race([sessionPromise, timeoutPromise]) as any;

                setSession(data.session);
                setUser(data.session?.user ?? null);
            } catch (err) {
                console.warn("Auth check failed or timed out:", err);
                // If it was a timeout or error, valid state is "not logged in"
                setSession(null);
                setUser(null);
            } finally {
                setLoading(false);
            }
        };

        initAuth();

        // Listen for auth changes
        const { data: { subscription } } = client.auth.onAuthStateChange((_event: string, currentSession: Session | null) => {
            setSession(currentSession);
            setUser(currentSession?.user ?? null);
            setLoading(false);
        });

        return () => subscription.unsubscribe();
    }, []);

    const signUp = async (email: string, password: string, metadata?: { name?: string }) => {
        if (!supabase) {
            return { error: new Error('Supabase is not configured') };
        }
        const { error } = await supabase.auth.signUp({
            email,
            password,
            options: {
                data: metadata
            }
        });
        return { error: error as Error | null };
    };

    const signIn = async (email: string, password: string) => {
        if (!supabase) {
            return { error: new Error('Supabase is not configured') };
        }
        const { error } = await supabase.auth.signInWithPassword({
            email,
            password
        });
        return { error: error as Error | null };
    };

    const signOut = async () => {
        if (!supabase) return;
        await supabase.auth.signOut();
        // Redirect to home page after sign out
        window.location.href = '/';
    };

    const signInWithGoogle = async () => {
        if (!supabase) return;
        await supabase.auth.signInWithOAuth({
            provider: 'google',
            options: {
                redirectTo: `${window.location.origin}/auth/callback`
            }
        });
    };

    return (
        <AuthContext.Provider value={{
            user,
            session,
            loading,
            signUp,
            signIn,
            signOut,
            signInWithGoogle
        }}>
            {children}
        </AuthContext.Provider>
    );
}

export function useAuth() {
    const context = useContext(AuthContext);
    if (context === undefined) {
        throw new Error('useAuth must be used within an AuthProvider');
    }
    return context;
}

```

## File: app\context\CustomLeaguesContext.tsx
```
"use client";

import React, { createContext, useContext, useState, useCallback, useEffect } from "react";
import { 
  CustomLeague, 
  CustomLeagueMember, 
  CustomLeagueInvite,
  UserProfile 
} from "../types";
import { useAuth } from "./AuthContext";

interface CustomLeaguesContextType {
  myLeagues: CustomLeague[];
  joinedLeagues: CustomLeague[];
  pendingInvites: CustomLeagueInvite[];
  currentLeague: CustomLeague | null;
  isLoading: boolean;
  error: string | null;
  // Actions
  createLeague: (data: CreateLeagueData) => Promise<CustomLeague | null>;
  updateLeague: (leagueId: string, data: Partial<CreateLeagueData>) => Promise<boolean>;
  deleteLeague: (leagueId: string) => Promise<boolean>;
  joinLeague: (code: string) => Promise<boolean>;
  leaveLeague: (leagueId: string) => Promise<boolean>;
  inviteMember: (leagueId: string, email: string) => Promise<boolean>;
  removeMember: (leagueId: string, userId: string) => Promise<boolean>;
  promoteMember: (leagueId: string, userId: string, role: 'admin' | 'member') => Promise<boolean>;
  acceptInvite: (inviteId: string) => Promise<boolean>;
  rejectInvite: (inviteId: string) => Promise<boolean>;
  getLeagueDetails: (leagueId: string) => Promise<CustomLeague | null>;
  getLeagueLeaderboard: (leagueId: string) => Promise<CustomLeagueMember[]>;
  refreshLeagues: () => Promise<void>;
}

interface CreateLeagueData {
  name: string;
  description?: string;
  isPrivate: boolean;
  maxMembers: number;
  leagues: string[];
  startDate: string;
  endDate: string;
}

const CustomLeaguesContext = createContext<CustomLeaguesContextType | undefined>(undefined);

export function CustomLeaguesProvider({ children }: { children: React.ReactNode }) {
  const { user } = useAuth();
  const [myLeagues, setMyLeagues] = useState<CustomLeague[]>([]);
  const [joinedLeagues, setJoinedLeagues] = useState<CustomLeague[]>([]);
  const [pendingInvites, setPendingInvites] = useState<CustomLeagueInvite[]>([]);
  const [currentLeague, setCurrentLeague] = useState<CustomLeague | null>(null);
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);

  // Fetch user's leagues
  const fetchLeagues = useCallback(async () => {
    if (!user) return;
    
    setIsLoading(true);
    setError(null);
    
    try {
      const response = await fetch('/api/custom-leagues', {
        headers: {
          'Authorization': `Bearer ${user.id}`,
        },
      });
      
      if (!response.ok) throw new Error('Failed to fetch leagues');
      
      const data = await response.json();
      setMyLeagues(data.myLeagues || []);
      setJoinedLeagues(data.joinedLeagues || []);
      setPendingInvites(data.pendingInvites || []);
    } catch (err) {
      setError(err instanceof Error ? err.message : 'An error occurred');
    } finally {
      setIsLoading(false);
    }
  }, [user]);

  // Create new league
  const createLeague = useCallback(async (data: CreateLeagueData): Promise<CustomLeague | null> => {
    if (!user) return null;
    
    try {
      const response = await fetch('/api/custom-leagues', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${user.id}`,
        },
        body: JSON.stringify(data),
      });
      
      if (!response.ok) throw new Error('Failed to create league');
      
      const result = await response.json();
      await fetchLeagues();
      return result.league;
    } catch (err) {
      setError(err instanceof Error ? err.message : 'An error occurred');
      return null;
    }
  }, [user, fetchLeagues]);

  // Update league
  const updateLeague = useCallback(async (
    leagueId: string, 
    data: Partial<CreateLeagueData>
  ): Promise<boolean> => {
    if (!user) return false;
    
    try {
      const response = await fetch(`/api/custom-leagues/${leagueId}`, {
        method: 'PUT',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${user.id}`,
        },
        body: JSON.stringify(data),
      });
      
      if (!response.ok) throw new Error('Failed to update league');
      
      await fetchLeagues();
      return true;
    } catch (err) {
      setError(err instanceof Error ? err.message : 'An error occurred');
      return false;
    }
  }, [user, fetchLeagues]);

  // Delete league
  const deleteLeague = useCallback(async (leagueId: string): Promise<boolean> => {
    if (!user) return false;
    
    try {
      const response = await fetch(`/api/custom-leagues/${leagueId}`, {
        method: 'DELETE',
        headers: {
          'Authorization': `Bearer ${user.id}`,
        },
      });
      
      if (!response.ok) throw new Error('Failed to delete league');
      
      await fetchLeagues();
      return true;
    } catch (err) {
      setError(err instanceof Error ? err.message : 'An error occurred');
      return false;
    }
  }, [user, fetchLeagues]);

  // Join league with code
  const joinLeague = useCallback(async (code: string): Promise<boolean> => {
    if (!user) return false;
    
    try {
      const response = await fetch('/api/custom-leagues/join', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${user.id}`,
        },
        body: JSON.stringify({ code }),
      });
      
      if (!response.ok) {
        const data = await response.json();
        throw new Error(data.error || 'Failed to join league');
      }
      
      await fetchLeagues();
      return true;
    } catch (err) {
      setError(err instanceof Error ? err.message : 'An error occurred');
      return false;
    }
  }, [user, fetchLeagues]);

  // Leave league
  const leaveLeague = useCallback(async (leagueId: string): Promise<boolean> => {
    if (!user) return false;
    
    try {
      const response = await fetch(`/api/custom-leagues/${leagueId}/leave`, {
        method: 'POST',
        headers: {
          'Authorization': `Bearer ${user.id}`,
        },
      });
      
      if (!response.ok) throw new Error('Failed to leave league');
      
      await fetchLeagues();
      return true;
    } catch (err) {
      setError(err instanceof Error ? err.message : 'An error occurred');
      return false;
    }
  }, [user, fetchLeagues]);

  // Invite member
  const inviteMember = useCallback(async (leagueId: string, email: string): Promise<boolean> => {
    if (!user) return false;
    
    try {
      const response = await fetch(`/api/custom-leagues/${leagueId}/invite`, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${user.id}`,
        },
        body: JSON.stringify({ email }),
      });
      
      if (!response.ok) throw new Error('Failed to invite member');
      
      return true;
    } catch (err) {
      setError(err instanceof Error ? err.message : 'An error occurred');
      return false;
    }
  }, [user]);

  // Remove member
  const removeMember = useCallback(async (leagueId: string, userId: string): Promise<boolean> => {
    if (!user) return false;
    
    try {
      const response = await fetch(`/api/custom-leagues/${leagueId}/members/${userId}`, {
        method: 'DELETE',
        headers: {
          'Authorization': `Bearer ${user.id}`,
        },
      });
      
      if (!response.ok) throw new Error('Failed to remove member');
      
      await fetchLeagues();
      return true;
    } catch (err) {
      setError(err instanceof Error ? err.message : 'An error occurred');
      return false;
    }
  }, [user, fetchLeagues]);

  // Promote/demote member
  const promoteMember = useCallback(async (
    leagueId: string, 
    userId: string, 
    role: 'admin' | 'member'
  ): Promise<boolean> => {
    if (!user) return false;
    
    try {
      const response = await fetch(`/api/custom-leagues/${leagueId}/members/${userId}/role`, {
        method: 'PUT',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${user.id}`,
        },
        body: JSON.stringify({ role }),
      });
      
      if (!response.ok) throw new Error('Failed to update member role');
      
      await fetchLeagues();
      return true;
    } catch (err) {
      setError(err instanceof Error ? err.message : 'An error occurred');
      return false;
    }
  }, [user, fetchLeagues]);

  // Accept invite
  const acceptInvite = useCallback(async (inviteId: string): Promise<boolean> => {
    if (!user) return false;
    
    try {
      const response = await fetch(`/api/custom-leagues/invites/${inviteId}/accept`, {
        method: 'POST',
        headers: {
          'Authorization': `Bearer ${user.id}`,
        },
      });
      
      if (!response.ok) throw new Error('Failed to accept invite');
      
      await fetchLeagues();
      return true;
    } catch (err) {
      setError(err instanceof Error ? err.message : 'An error occurred');
      return false;
    }
  }, [user, fetchLeagues]);

  // Reject invite
  const rejectInvite = useCallback(async (inviteId: string): Promise<boolean> => {
    if (!user) return false;
    
    try {
      const response = await fetch(`/api/custom-leagues/invites/${inviteId}/reject`, {
        method: 'POST',
        headers: {
          'Authorization': `Bearer ${user.id}`,
        },
      });
      
      if (!response.ok) throw new Error('Failed to reject invite');
      
      await fetchLeagues();
      return true;
    } catch (err) {
      setError(err instanceof Error ? err.message : 'An error occurred');
      return false;
    }
  }, [user, fetchLeagues]);

  // Get league details
  const getLeagueDetails = useCallback(async (leagueId: string): Promise<CustomLeague | null> => {
    if (!user) return null;
    
    try {
      const response = await fetch(`/api/custom-leagues/${leagueId}`, {
        headers: {
          'Authorization': `Bearer ${user.id}`,
        },
      });
      
      if (!response.ok) throw new Error('Failed to get league details');
      
      const data = await response.json();
      setCurrentLeague(data.league);
      return data.league;
    } catch (err) {
      setError(err instanceof Error ? err.message : 'An error occurred');
      return null;
    }
  }, [user]);

  // Get league leaderboard
  const getLeagueLeaderboard = useCallback(async (leagueId: string): Promise<CustomLeagueMember[]> => {
    if (!user) return [];
    
    try {
      const response = await fetch(`/api/custom-leagues/${leagueId}/leaderboard`, {
        headers: {
          'Authorization': `Bearer ${user.id}`,
        },
      });
      
      if (!response.ok) throw new Error('Failed to get leaderboard');
      
      const data = await response.json();
      return data.leaderboard || [];
    } catch (err) {
      setError(err instanceof Error ? err.message : 'An error occurred');
      return [];
    }
  }, [user]);

  // Refresh leagues
  const refreshLeagues = useCallback(async () => {
    await fetchLeagues();
  }, [fetchLeagues]);

  // Initial fetch
  useEffect(() => {
    if (user) {
      fetchLeagues();
    }
  }, [user, fetchLeagues]);

  return (
    <CustomLeaguesContext.Provider
      value={{
        myLeagues,
        joinedLeagues,
        pendingInvites,
        currentLeague,
        isLoading,
        error,
        createLeague,
        updateLeague,
        deleteLeague,
        joinLeague,
        leaveLeague,
        inviteMember,
        removeMember,
        promoteMember,
        acceptInvite,
        rejectInvite,
        getLeagueDetails,
        getLeagueLeaderboard,
        refreshLeagues,
      }}
    >
      {children}
    </CustomLeaguesContext.Provider>
  );
}

export function useCustomLeagues() {
  const context = useContext(CustomLeaguesContext);
  if (context === undefined) {
    throw new Error('useCustomLeagues must be used within a CustomLeaguesProvider');
  }
  return context;
}

```

# Project Application Context - Part 11

## File: app\context\FriendsContext.tsx
```
"use client";

import React, { createContext, useContext, useState, useCallback, useEffect } from "react";
import { Friend, UserProfile, FriendActivity, FriendshipStatus } from "../types";
import { useAuth } from "./AuthContext";

interface FriendsContextType {
  friends: Friend[];
  pendingRequests: Friend[];
  friendActivities: FriendActivity[];
  isLoading: boolean;
  error: string | null;
  // Actions
  sendFriendRequest: (userId: string) => Promise<boolean>;
  acceptFriendRequest: (friendshipId: string) => Promise<boolean>;
  rejectFriendRequest: (friendshipId: string) => Promise<boolean>;
  removeFriend: (friendshipId: string) => Promise<boolean>;
  blockUser: (userId: string) => Promise<boolean>;
  searchUsers: (query: string) => Promise<UserProfile[]>;
  getFriendProfile: (userId: string) => Promise<UserProfile | null>;
  comparePredictions: (friendId: string, league?: string) => Promise<PredictionComparison | null>;
  refreshFriends: () => Promise<void>;
}

interface PredictionComparison {
  userId: string;
  friendId: string;
  userStats: {
    totalPredictions: number;
    correctPredictions: number;
    accuracy: number;
    points: number;
  };
  friendStats: {
    totalPredictions: number;
    correctPredictions: number;
    accuracy: number;
    points: number;
  };
  commonMatches: CommonMatchPrediction[];
}

interface CommonMatchPrediction {
  matchId: string;
  homeTeam: string;
  awayTeam: string;
  userPrediction: string;
  friendPrediction: string;
  actualResult?: string;
  userCorrect?: boolean;
  friendCorrect?: boolean;
}

const FriendsContext = createContext<FriendsContextType | undefined>(undefined);

export function FriendsProvider({ children }: { children: React.ReactNode }) {
  const { user } = useAuth();
  const [friends, setFriends] = useState<Friend[]>([]);
  const [pendingRequests, setPendingRequests] = useState<Friend[]>([]);
  const [friendActivities, setFriendActivities] = useState<FriendActivity[]>([]);
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);

  // Fetch friends list
  const fetchFriends = useCallback(async () => {
    if (!user) return;
    
    setIsLoading(true);
    setError(null);
    
    try {
      const response = await fetch('/api/friends', {
        headers: {
          'Authorization': `Bearer ${user.id}`,
        },
      });
      
      if (!response.ok) throw new Error('Failed to fetch friends');
      
      const data = await response.json();
      setFriends(data.friends || []);
      setPendingRequests(data.pendingRequests || []);
      setFriendActivities(data.activities || []);
    } catch (err) {
      setError(err instanceof Error ? err.message : 'An error occurred');
    } finally {
      setIsLoading(false);
    }
  }, [user]);

  // Send friend request
  const sendFriendRequest = useCallback(async (userId: string): Promise<boolean> => {
    if (!user) return false;
    
    try {
      const response = await fetch('/api/friends/request', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${user.id}`,
        },
        body: JSON.stringify({ friendId: userId }),
      });
      
      if (!response.ok) throw new Error('Failed to send friend request');
      
      await fetchFriends();
      return true;
    } catch (err) {
      setError(err instanceof Error ? err.message : 'An error occurred');
      return false;
    }
  }, [user, fetchFriends]);

  // Accept friend request
  const acceptFriendRequest = useCallback(async (friendshipId: string): Promise<boolean> => {
    if (!user) return false;
    
    try {
      const response = await fetch(`/api/friends/request/${friendshipId}`, {
        method: 'PUT',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${user.id}`,
        },
        body: JSON.stringify({ action: 'accept' }),
      });
      
      if (!response.ok) throw new Error('Failed to accept friend request');
      
      await fetchFriends();
      return true;
    } catch (err) {
      setError(err instanceof Error ? err.message : 'An error occurred');
      return false;
    }
  }, [user, fetchFriends]);

  // Reject friend request
  const rejectFriendRequest = useCallback(async (friendshipId: string): Promise<boolean> => {
    if (!user) return false;
    
    try {
      const response = await fetch(`/api/friends/request/${friendshipId}`, {
        method: 'PUT',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${user.id}`,
        },
        body: JSON.stringify({ action: 'reject' }),
      });
      
      if (!response.ok) throw new Error('Failed to reject friend request');
      
      await fetchFriends();
      return true;
    } catch (err) {
      setError(err instanceof Error ? err.message : 'An error occurred');
      return false;
    }
  }, [user, fetchFriends]);

  // Remove friend
  const removeFriend = useCallback(async (friendshipId: string): Promise<boolean> => {
    if (!user) return false;
    
    try {
      const response = await fetch(`/api/friends/${friendshipId}`, {
        method: 'DELETE',
        headers: {
          'Authorization': `Bearer ${user.id}`,
        },
      });
      
      if (!response.ok) throw new Error('Failed to remove friend');
      
      await fetchFriends();
      return true;
    } catch (err) {
      setError(err instanceof Error ? err.message : 'An error occurred');
      return false;
    }
  }, [user, fetchFriends]);

  // Block user
  const blockUser = useCallback(async (userId: string): Promise<boolean> => {
    if (!user) return false;
    
    try {
      const response = await fetch('/api/friends/block', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${user.id}`,
        },
        body: JSON.stringify({ userId }),
      });
      
      if (!response.ok) throw new Error('Failed to block user');
      
      await fetchFriends();
      return true;
    } catch (err) {
      setError(err instanceof Error ? err.message : 'An error occurred');
      return false;
    }
  }, [user, fetchFriends]);

  // Search users
  const searchUsers = useCallback(async (query: string): Promise<UserProfile[]> => {
    if (!user || query.length < 2) return [];
    
    try {
      const response = await fetch(`/api/users/search?q=${encodeURIComponent(query)}`, {
        headers: {
          'Authorization': `Bearer ${user.id}`,
        },
      });
      
      if (!response.ok) throw new Error('Failed to search users');
      
      const data = await response.json();
      return data.users || [];
    } catch (err) {
      setError(err instanceof Error ? err.message : 'An error occurred');
      return [];
    }
  }, [user]);

  // Get friend profile
  const getFriendProfile = useCallback(async (userId: string): Promise<UserProfile | null> => {
    if (!user) return null;
    
    try {
      const response = await fetch(`/api/users/${userId}/profile`, {
        headers: {
          'Authorization': `Bearer ${user.id}`,
        },
      });
      
      if (!response.ok) throw new Error('Failed to get user profile');
      
      const data = await response.json();
      return data.profile;
    } catch (err) {
      setError(err instanceof Error ? err.message : 'An error occurred');
      return null;
    }
  }, [user]);

  // Compare predictions with friend
  const comparePredictions = useCallback(async (
    friendId: string,
    league?: string
  ): Promise<PredictionComparison | null> => {
    if (!user) return null;
    
    try {
      const url = league 
        ? `/api/friends/${friendId}/compare?league=${encodeURIComponent(league)}`
        : `/api/friends/${friendId}/compare`;
        
      const response = await fetch(url, {
        headers: {
          'Authorization': `Bearer ${user.id}`,
        },
      });
      
      if (!response.ok) throw new Error('Failed to compare predictions');
      
      const data = await response.json();
      return data.comparison;
    } catch (err) {
      setError(err instanceof Error ? err.message : 'An error occurred');
      return null;
    }
  }, [user]);

  // Refresh friends data
  const refreshFriends = useCallback(async () => {
    await fetchFriends();
  }, [fetchFriends]);

  // Initial fetch
  useEffect(() => {
    if (user) {
      fetchFriends();
    }
  }, [user, fetchFriends]);

  return (
    <FriendsContext.Provider
      value={{
        friends,
        pendingRequests,
        friendActivities,
        isLoading,
        error,
        sendFriendRequest,
        acceptFriendRequest,
        rejectFriendRequest,
        removeFriend,
        blockUser,
        searchUsers,
        getFriendProfile,
        comparePredictions,
        refreshFriends,
      }}
    >
      {children}
    </FriendsContext.Provider>
  );
}

export function useFriends() {
  const context = useContext(FriendsContext);
  if (context === undefined) {
    throw new Error('useFriends must be used within a FriendsProvider');
  }
  return context;
}

```

## File: app\context\LiveMatchContext.tsx
```
"use client";

import React, { createContext, useContext, useState, useCallback, useEffect } from "react";
import {
  LiveMatch,
  MatchComment,
  LiveChatMessage,
  MatchSimulation
} from "../types";
import { useAuth } from "./AuthContext";

interface LiveMatchContextType {
  liveMatches: LiveMatch[];
  currentMatch: LiveMatch | null;
  comments: MatchComment[];
  chatMessages: LiveChatMessage[];
  isLoading: boolean;
  isConnected: boolean;
  // Actions
  selectMatch: (matchId: string) => void;
  addComment: (matchId: string, message: string) => Promise<boolean>;
  likeComment: (commentId: string) => Promise<boolean>;
  sendChatMessage: (matchId: string, message: string) => Promise<boolean>;
  subscribeToMatch: (matchId: string) => void;
  unsubscribeFromMatch: () => void;
  simulateMatch: (homeTeam: string, awayTeam: string) => Promise<MatchSimulation | null>;
  refreshLiveMatches: () => Promise<void>;
}

const LiveMatchContext = createContext<LiveMatchContextType | undefined>(undefined);

export function LiveMatchProvider({ children }: { children: React.ReactNode }) {
  const { user } = useAuth();
  const [liveMatches, setLiveMatches] = useState<LiveMatch[]>([]);
  const [currentMatch, setCurrentMatch] = useState<LiveMatch | null>(null);
  const [comments, setComments] = useState<MatchComment[]>([]);
  const [chatMessages, setChatMessages] = useState<LiveChatMessage[]>([]);
  const [isLoading, setIsLoading] = useState(false);
  const [isConnected, setIsConnected] = useState(false);
  const [websocket, setWebsocket] = useState<WebSocket | null>(null);

  // Fetch live matches
  const fetchLiveMatches = useCallback(async () => {
    setIsLoading(true);

    try {
      // Use consolidated API endpoint
      const response = await fetch('/api/live');

      if (!response.ok) throw new Error('Failed to fetch live matches');

      const data = await response.json();
      // API returns liveMatches, context expects matches but state is named liveMatches
      // The previous code expected data.matches, but route returns data.liveMatches
      setLiveMatches(data.liveMatches || []);
    } catch (err) {
      console.error('Failed to fetch live matches:', err);
    } finally {
      setIsLoading(false);
    }
  }, []);

  // Select a match to follow
  const selectMatch = useCallback((matchId: string) => {
    const match = liveMatches.find(m => m.id === matchId);
    setCurrentMatch(match || null);

    if (match) {
      // Fetch comments for this match
      fetchComments(matchId);
    }
  }, [liveMatches]);

  // Fetch comments for a match
  const fetchComments = async (matchId: string) => {
    try {
      const response = await fetch(`/api/live/matches/${matchId}/comments`);

      if (response.ok) {
        const data = await response.json();
        setComments(data.comments || []);
      }
    } catch (err) {
      console.error('Failed to fetch comments:', err);
    }
  };

  // Add comment
  const addComment = useCallback(async (matchId: string, message: string): Promise<boolean> => {
    if (!user) return false;

    try {
      const response = await fetch(`/api/live/matches/${matchId}/comments`, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${user.id}`,
        },
        body: JSON.stringify({ message }),
      });

      if (!response.ok) throw new Error('Failed to add comment');

      const data = await response.json();
      setComments(prev => [data.comment, ...prev]);

      return true;
    } catch (err) {
      console.error('Failed to add comment:', err);
      return false;
    }
  }, [user]);

  // Like comment
  const likeComment = useCallback(async (commentId: string): Promise<boolean> => {
    if (!user) return false;

    try {
      const response = await fetch(`/api/live/comments/${commentId}/like`, {
        method: 'POST',
        headers: {
          'Authorization': `Bearer ${user.id}`,
        },
      });

      if (!response.ok) throw new Error('Failed to like comment');

      setComments(prev =>
        prev.map(c => c.id === commentId ? { ...c, likes: c.likes + 1 } : c)
      );

      return true;
    } catch (err) {
      console.error('Failed to like comment:', err);
      return false;
    }
  }, [user]);

  // Send chat message (WebSocket)
  const sendChatMessage = useCallback(async (matchId: string, message: string): Promise<boolean> => {
    if (!user || !websocket || websocket.readyState !== WebSocket.OPEN) return false;

    try {
      websocket.send(JSON.stringify({
        type: 'chat_message',
        matchId,
        message,
        userId: user.id,
      }));

      return true;
    } catch (err) {
      console.error('Failed to send chat message:', err);
      return false;
    }
  }, [user, websocket]);

  // Subscribe to live match updates (WebSocket)
  const subscribeToMatch = useCallback((matchId: string) => {
    // Close existing connection
    if (websocket) {
      websocket.close();
    }

    // Create new WebSocket connection
    const ws = new WebSocket(`${process.env.NEXT_PUBLIC_WS_URL || 'ws://localhost:3001'}/live/${matchId}`);

    ws.onopen = () => {
      setIsConnected(true);
      setIsConnected(true);
      // Connected
    };

    ws.onmessage = (event) => {
      try {
        const data = JSON.parse(event.data);

        switch (data.type) {
          case 'match_update':
            setCurrentMatch(prev => prev ? { ...prev, ...data.match } : null);
            break;
          case 'chat_message':
            setChatMessages(prev => [...prev, data.message]);
            break;
          case 'score_update':
            setCurrentMatch(prev => {
              if (!prev) return null;
              return {
                ...prev,
                currentSetHomePoints: data.homePoints,
                currentSetAwayPoints: data.awayPoints,
              };
            });
            break;
          case 'set_end':
            setCurrentMatch(prev => {
              if (!prev) return null;
              return {
                ...prev,
                homeSetScore: data.homeSetScore,
                awaySetScore: data.awaySetScore,
                currentSet: data.currentSet,
                setScores: data.setScores,
              };
            });
            break;
          case 'match_end':
            setCurrentMatch(prev => prev ? { ...prev, status: 'finished' } : null);
            break;
        }
      } catch (err) {
        console.error('Failed to parse WebSocket message:', err);
      }
    };

    ws.onclose = () => {
      setIsConnected(false);
      setIsConnected(false);
      // Disconnected
    };

    ws.onerror = (error) => {
      console.error('WebSocket error:', error);
      setIsConnected(false);
    };

    setWebsocket(ws);
  }, [websocket]);

  // Unsubscribe from match
  const unsubscribeFromMatch = useCallback(() => {
    if (websocket) {
      websocket.close();
      setWebsocket(null);
    }
    setIsConnected(false);
    setChatMessages([]);
  }, [websocket]);

  // Simulate a match
  const simulateMatch = useCallback(async (
    homeTeam: string,
    awayTeam: string
  ): Promise<MatchSimulation | null> => {
    try {
      const response = await fetch('/api/simulation/match', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ homeTeam, awayTeam }),
      });

      if (!response.ok) throw new Error('Failed to simulate match');

      const data = await response.json();
      return data.simulation;
    } catch (err) {
      console.error('Failed to simulate match:', err);
      return null;
    }
  }, []);

  // Refresh live matches
  const refreshLiveMatches = useCallback(async () => {
    await fetchLiveMatches();
  }, [fetchLiveMatches]);

  // Initial fetch and polling
  useEffect(() => {
    fetchLiveMatches();

    // Poll for updates every 30 seconds
    const interval = setInterval(fetchLiveMatches, 30000);

    return () => clearInterval(interval);
  }, [fetchLiveMatches]);

  // Cleanup WebSocket on unmount
  useEffect(() => {
    return () => {
      if (websocket) {
        websocket.close();
      }
    };
  }, [websocket]);

  return (
    <LiveMatchContext.Provider
      value={{
        liveMatches,
        currentMatch,
        comments,
        chatMessages,
        isLoading,
        isConnected,
        selectMatch,
        addComment,
        likeComment,
        sendChatMessage,
        subscribeToMatch,
        unsubscribeFromMatch,
        simulateMatch,
        refreshLiveMatches,
      }}
    >
      {children}
    </LiveMatchContext.Provider>
  );
}

export function useLiveMatch() {
  const context = useContext(LiveMatchContext);
  if (context === undefined) {
    throw new Error('useLiveMatch must be used within a LiveMatchProvider');
  }
  return context;
}

```

## File: app\context\LocaleContext.tsx
```
'use client';

import { createContext, useContext, useState, useEffect, ReactNode } from 'react';

type Locale = 'tr' | 'en';

interface LocaleContextType {
  locale: Locale;
  setLocale: (locale: Locale) => void;
}

const LocaleContext = createContext<LocaleContextType | undefined>(undefined);

function getInitialLocale(): Locale {
  if (typeof document === 'undefined') return 'tr';
  
  const savedLocale = document.cookie
    .split('; ')
    .find(row => row.startsWith('NEXT_LOCALE='))
    ?.split('=')[1];
  
  if (savedLocale === 'tr' || savedLocale === 'en') {
    return savedLocale;
  }
  return 'tr';
}

export function LocaleProvider({ children }: { children: ReactNode }) {
  const [locale, setLocaleState] = useState<Locale>(getInitialLocale);

  const setLocale = (newLocale: Locale) => {
    setLocaleState(newLocale);
    // Set cookie for 1 year
    document.cookie = `NEXT_LOCALE=${newLocale}; path=/; max-age=31536000`;
    // Reload to apply new locale
    window.location.reload();
  };

  return (
    <LocaleContext.Provider value={{ locale, setLocale }}>
      {children}
    </LocaleContext.Provider>
  );
}

export function useLocale() {
  const context = useContext(LocaleContext);
  if (!context) {
    throw new Error('useLocale must be used within a LocaleProvider');
  }
  return context;
}

```

## File: app\context\NotificationsContext.tsx
```
"use client";

import React, { createContext, useContext, useState, useCallback, useEffect, useRef } from "react";
import type { Notification, NotificationPreferences, NotificationType } from "../types";
import { useAuth } from "./AuthContext";

interface NotificationsContextType {
  notifications: Notification[];
  unreadCount: number;
  preferences: NotificationPreferences;
  isLoading: boolean;
  // Actions
  markAsRead: (notificationId: string) => Promise<void>;
  markAllAsRead: () => Promise<void>;
  deleteNotification: (notificationId: string) => Promise<void>;
  clearAll: () => Promise<void>;
  updatePreferences: (prefs: Partial<NotificationPreferences>) => Promise<void>;
  requestPushPermission: () => Promise<boolean>;
  // Real-time
  subscribeToNotifications: () => void;
  unsubscribeFromNotifications: () => void;
}

const defaultPreferences: NotificationPreferences = {
  matchReminders: true,
  matchResults: true,
  friendRequests: true,
  friendActivity: true,
  achievements: true,
  leaderboardChanges: true,
  dailyQuests: true,
  weeklyDigest: true,
  pushEnabled: false,
  emailEnabled: true,
};

const NotificationsContext = createContext<NotificationsContextType | undefined>(undefined);

export function NotificationsProvider({ children }: { children: React.ReactNode }) {
  const { user } = useAuth();
  const [notifications, setNotifications] = useState<Notification[]>([]);
  const [preferences, setPreferences] = useState<NotificationPreferences>(defaultPreferences);
  const [isLoading, setIsLoading] = useState(false);
  const eventSourceRef = useRef<EventSource | null>(null);

  const unreadCount = notifications.filter(n => !n.isRead).length;

  // Fetch notifications
  const fetchNotifications = useCallback(async () => {
    if (!user) return;
    
    setIsLoading(true);
    
    try {
      const response = await fetch('/api/notifications', {
        headers: {
          'Authorization': `Bearer ${user.id}`,
        },
      });
      
      if (!response.ok) throw new Error('Failed to fetch notifications');
      
      const data = await response.json();
      setNotifications(data.notifications || []);
    } catch (err) {
      console.error('Failed to fetch notifications:', err);
    } finally {
      setIsLoading(false);
    }
  }, [user]);

  // Fetch preferences
  const fetchPreferences = useCallback(async () => {
    if (!user) return;
    
    try {
      const response = await fetch('/api/notifications/preferences', {
        headers: {
          'Authorization': `Bearer ${user.id}`,
        },
      });
      
      if (!response.ok) throw new Error('Failed to fetch preferences');
      
      const data = await response.json();
      setPreferences(data.preferences || defaultPreferences);
    } catch (err) {
      console.error('Failed to fetch preferences:', err);
    }
  }, [user]);

  // Mark single notification as read
  const markAsRead = useCallback(async (notificationId: string) => {
    if (!user) return;
    
    try {
      await fetch(`/api/notifications/${notificationId}/read`, {
        method: 'PUT',
        headers: {
          'Authorization': `Bearer ${user.id}`,
        },
      });
      
      setNotifications(prev => 
        prev.map(n => n.id === notificationId ? { ...n, isRead: true } : n)
      );
    } catch (err) {
      console.error('Failed to mark notification as read:', err);
    }
  }, [user]);

  // Mark all as read
  const markAllAsRead = useCallback(async () => {
    if (!user) return;
    
    try {
      await fetch('/api/notifications/read-all', {
        method: 'PUT',
        headers: {
          'Authorization': `Bearer ${user.id}`,
        },
      });
      
      setNotifications(prev => prev.map(n => ({ ...n, isRead: true })));
    } catch (err) {
      console.error('Failed to mark all as read:', err);
    }
  }, [user]);

  // Delete notification
  const deleteNotification = useCallback(async (notificationId: string) => {
    if (!user) return;
    
    try {
      await fetch(`/api/notifications/${notificationId}`, {
        method: 'DELETE',
        headers: {
          'Authorization': `Bearer ${user.id}`,
        },
      });
      
      setNotifications(prev => prev.filter(n => n.id !== notificationId));
    } catch (err) {
      console.error('Failed to delete notification:', err);
    }
  }, [user]);

  // Clear all notifications
  const clearAll = useCallback(async () => {
    if (!user) return;
    
    try {
      await fetch('/api/notifications', {
        method: 'DELETE',
        headers: {
          'Authorization': `Bearer ${user.id}`,
        },
      });
      
      setNotifications([]);
    } catch (err) {
      console.error('Failed to clear notifications:', err);
    }
  }, [user]);

  // Update preferences
  const updatePreferences = useCallback(async (prefs: Partial<NotificationPreferences>) => {
    if (!user) return;
    
    try {
      const response = await fetch('/api/notifications/preferences', {
        method: 'PUT',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${user.id}`,
        },
        body: JSON.stringify(prefs),
      });
      
      if (!response.ok) throw new Error('Failed to update preferences');
      
      setPreferences(prev => ({ ...prev, ...prefs }));
    } catch (err) {
      console.error('Failed to update preferences:', err);
    }
  }, [user]);

  // Request push permission
  const requestPushPermission = useCallback(async (): Promise<boolean> => {
    if (!('Notification' in window)) {
      console.log('This browser does not support notifications');
      return false;
    }
    
    if (Notification.permission === 'granted') {
      await updatePreferences({ pushEnabled: true });
      return true;
    }
    
    if (Notification.permission !== 'denied') {
      const permission = await Notification.requestPermission();
      if (permission === 'granted') {
        await updatePreferences({ pushEnabled: true });
        
        // Register service worker for push
        if ('serviceWorker' in navigator) {
          try {
            const registration = await navigator.serviceWorker.ready;
            // Here you would subscribe to push notifications
            console.log('Push notification registered');
          } catch (err) {
            console.error('Failed to register push:', err);
          }
        }
        
        return true;
      }
    }
    
    return false;
  }, [updatePreferences]);

  // Subscribe to real-time notifications (SSE)
  const subscribeToNotifications = useCallback(() => {
    if (!user || eventSourceRef.current) return;
    
    eventSourceRef.current = new EventSource(`/api/notifications/stream?userId=${user.id}`);
    
    eventSourceRef.current.onmessage = (event) => {
      try {
        const notification = JSON.parse(event.data) as Notification;
        setNotifications(prev => [notification, ...prev]);
        
        // Show browser notification if enabled
        if (preferences.pushEnabled && Notification.permission === 'granted') {
          new Notification(notification.title, {
            body: notification.message,
            icon: '/icons/icon-192x192.png',
          });
        }
      } catch (err) {
        console.error('Failed to parse notification:', err);
      }
    };
    
    eventSourceRef.current.onerror = () => {
      eventSourceRef.current?.close();
      eventSourceRef.current = null;
      
      // Retry after 5 seconds
      setTimeout(subscribeToNotifications, 5000);
    };
  }, [user, preferences.pushEnabled]);

  // Unsubscribe from notifications
  const unsubscribeFromNotifications = useCallback(() => {
    if (eventSourceRef.current) {
      eventSourceRef.current.close();
      eventSourceRef.current = null;
    }
  }, []);

  // Initial fetch
  useEffect(() => {
    if (user) {
      fetchNotifications();
      fetchPreferences();
    }
  }, [user, fetchNotifications, fetchPreferences]);

  // Cleanup on unmount
  useEffect(() => {
    return () => {
      unsubscribeFromNotifications();
    };
  }, [unsubscribeFromNotifications]);

  return (
    <NotificationsContext.Provider
      value={{
        notifications,
        unreadCount,
        preferences,
        isLoading,
        markAsRead,
        markAllAsRead,
        deleteNotification,
        clearAll,
        updatePreferences,
        requestPushPermission,
        subscribeToNotifications,
        unsubscribeFromNotifications,
      }}
    >
      {children}
    </NotificationsContext.Provider>
  );
}

export function useNotifications() {
  const context = useContext(NotificationsContext);
  if (context === undefined) {
    throw new Error('useNotifications must be used within a NotificationsProvider');
  }
  return context;
}

```

## File: app\context\QuestsContext.tsx
```
"use client";

import React, { createContext, useContext, useState, useCallback, useEffect } from "react";
import { DailyQuest, WeeklyChallenge, StreakData, Badge } from "../types";
import { useAuth } from "./AuthContext";
import { useGameState } from "../utils/gameState";

interface QuestsContextType {
  dailyQuests: DailyQuest[];
  weeklyChallenge: WeeklyChallenge | null;
  streakData: StreakData;
  badges: Badge[];
  unlockedBadges: Badge[];
  isLoading: boolean;
  // Actions
  claimQuestReward: (questId: string) => Promise<{ xp: number; coins: number } | null>;
  useStreakFreeze: () => Promise<boolean>;
  refreshQuests: () => Promise<void>;
  trackQuestProgress: (questType: string, amount?: number) => Promise<void>;
}

const defaultStreakData: StreakData = {
  currentStreak: 0,
  longestStreak: 0,
  lastPredictionDate: '',
  streakFreezeAvailable: 0,
  streakHistory: [],
};

const QuestsContext = createContext<QuestsContextType | undefined>(undefined);

export function QuestsProvider({ children }: { children: React.ReactNode }) {
  const { user } = useAuth();
  const { addXP } = useGameState();
  const [dailyQuests, setDailyQuests] = useState<DailyQuest[]>([]);
  const [weeklyChallenge, setWeeklyChallenge] = useState<WeeklyChallenge | null>(null);
  const [streakData, setStreakData] = useState<StreakData>(defaultStreakData);
  const [badges, setBadges] = useState<Badge[]>([]);
  const [unlockedBadges, setUnlockedBadges] = useState<Badge[]>([]);
  const [isLoading, setIsLoading] = useState(false);

  // Fetch daily quests
  const fetchQuests = useCallback(async () => {
    if (!user) return;

    setIsLoading(true);

    try {
      // Use consolidated API endpoint
      const response = await fetch('/api/quests', {
        headers: { 'Authorization': `Bearer ${user.id}` },
      });

      if (response.ok) {
        const data = await response.json();

        if (data.dailyQuests) {
          setDailyQuests(data.dailyQuests);
        } else {
          setDailyQuests(generateDefaultQuests());
        }

        if (data.weeklyChallenge) {
          setWeeklyChallenge(data.weeklyChallenge);
        }

        if (data.streak) {
          setStreakData(data.streak);
        } else {
          setStreakData(defaultStreakData);
        }

        if (data.badges) {
          setBadges(data.badges);
          // Assuming unlockedBadges are part of badges or separate property, 
          // but API returns 'badges' which likely contains status.
          // For now, filtering if structure supports it, or setting empty if separate property missing
          setUnlockedBadges(data.badges.filter((b: Badge) => b.unlockedAt) || []);
        }
      } else {
        throw new Error('Failed to fetch quests');
      }
    } catch (err) {
      console.error('Failed to fetch quests:', err);
      // Use default quests on error
      setDailyQuests(generateDefaultQuests());
    } finally {
      setIsLoading(false);
    }
  }, [user]);

  // Generate default daily quests
  function generateDefaultQuests(): DailyQuest[] {
    const today = new Date();
    today.setHours(23, 59, 59, 999);
    const expiresAt = today.toISOString();

    return [
      {
        id: 'daily_predict_3',
        type: 'make_predictions',
        title: '3 Tahmin Yap',
        description: 'BugÃ¼n en az 3 maÃ§ tahmini yap',
        icon: 'ğŸ¯',
        target: 3,
        progress: 0,
        xpReward: 50,
        coinReward: 10,
        expiresAt,
        completed: false,
        claimed: false,
      },
      {
        id: 'daily_correct_1',
        type: 'correct_predictions',
        title: 'DoÄŸru Tahmin',
        description: '1 doÄŸru tahmin yap',
        icon: 'âœ…',
        target: 1,
        progress: 0,
        xpReward: 75,
        coinReward: 15,
        expiresAt,
        completed: false,
        claimed: false,
      },
      {
        id: 'daily_underdog',
        type: 'predict_underdog',
        title: 'Underdog Tahmini',
        description: 'Bir maÃ§ta sÃ¼rpriz sonuÃ§ tahmin et',
        icon: 'ğŸº',
        target: 1,
        progress: 0,
        xpReward: 100,
        coinReward: 25,
        expiresAt,
        completed: false,
        claimed: false,
      },
      {
        id: 'daily_view_stats',
        type: 'view_stats',
        title: 'Ä°statistikleri Ä°ncele',
        description: 'TakÄ±m istatistiklerini gÃ¶rÃ¼ntÃ¼le',
        icon: 'ğŸ“Š',
        target: 1,
        progress: 0,
        xpReward: 25,
        coinReward: 5,
        expiresAt,
        completed: false,
        claimed: false,
      },
    ];
  }

  // Claim quest reward
  const claimQuestReward = useCallback(async (questId: string): Promise<{ xp: number; coins: number } | null> => {
    if (!user) return null;

    const quest = dailyQuests.find(q => q.id === questId);
    if (!quest || !quest.completed || quest.claimed) return null;

    try {
      const response = await fetch(`/api/quests/${questId}/claim`, {
        method: 'POST',
        headers: {
          'Authorization': `Bearer ${user.id}`,
        },
      });

      if (!response.ok) throw new Error('Failed to claim reward');

      const data = await response.json();

      // Update local state
      setDailyQuests(prev =>
        prev.map(q => q.id === questId ? { ...q, claimed: true } : q)
      );

      // Add XP
      addXP(quest.xpReward);

      return { xp: quest.xpReward, coins: quest.coinReward };
    } catch (err) {
      console.error('Failed to claim reward:', err);
      return null;
    }
  }, [user, dailyQuests, addXP]);

  // Use streak freeze
  const useStreakFreeze = useCallback(async (): Promise<boolean> => {
    if (!user || streakData.streakFreezeAvailable <= 0) return false;

    try {
      const response = await fetch('/api/streak/freeze', {
        method: 'POST',
        headers: {
          'Authorization': `Bearer ${user.id}`,
        },
      });

      if (!response.ok) throw new Error('Failed to use streak freeze');

      setStreakData(prev => ({
        ...prev,
        streakFreezeAvailable: prev.streakFreezeAvailable - 1,
      }));

      return true;
    } catch (err) {
      console.error('Failed to use streak freeze:', err);
      return false;
    }
  }, [user, streakData.streakFreezeAvailable]);

  // Track quest progress
  const trackQuestProgress = useCallback(async (questType: string, amount: number = 1) => {
    if (!user) return;

    // Update local state optimistically
    setDailyQuests(prev =>
      prev.map(q => {
        if (q.type === questType && !q.completed) {
          const newProgress = Math.min(q.progress + amount, q.target);
          return {
            ...q,
            progress: newProgress,
            completed: newProgress >= q.target,
          };
        }
        return q;
      })
    );

    // Send to server
    try {
      await fetch('/api/quests/progress', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${user.id}`,
        },
        body: JSON.stringify({ questType, amount }),
      });
    } catch (err) {
      console.error('Failed to track quest progress:', err);
    }
  }, [user]);

  // Refresh quests
  const refreshQuests = useCallback(async () => {
    await fetchQuests();
  }, [fetchQuests]);

  // Initial fetch
  useEffect(() => {
    if (user) {
      fetchQuests();
    }
  }, [user, fetchQuests]);

  // Check for new day and reset quests
  useEffect(() => {
    const checkDailyReset = () => {
      const now = new Date();
      const questExpiry = dailyQuests[0]?.expiresAt;

      if (questExpiry && new Date(questExpiry) < now) {
        fetchQuests();
      }
    };

    const interval = setInterval(checkDailyReset, 60000); // Check every minute
    return () => clearInterval(interval);
  }, [dailyQuests, fetchQuests]);

  return (
    <QuestsContext.Provider
      value={{
        dailyQuests,
        weeklyChallenge,
        streakData,
        badges,
        unlockedBadges,
        isLoading,
        claimQuestReward,
        useStreakFreeze,
        refreshQuests,
        trackQuestProgress,
      }}
    >
      {children}
    </QuestsContext.Provider>
  );
}

export function useQuests() {
  const context = useContext(QuestsContext);
  if (context === undefined) {
    throw new Error('useQuests must be used within a QuestsProvider');
  }
  return context;
}

```

## File: app\context\ThemeContext.tsx
```
"use client";

import { createContext, useContext, useState, useEffect, ReactNode, useCallback } from "react";
import { ThemeMode, AccentColor, UIPreferences, DashboardWidget } from "../types";

type Theme = "dark" | "light";

interface ThemeContextType {
    theme: Theme;
    themeMode: ThemeMode;
    accentColor: AccentColor;
    preferences: UIPreferences;
    isDark: boolean;
    toggleTheme: () => void;
    setTheme: (theme: Theme) => void;
    setThemeMode: (mode: ThemeMode) => void;
    setAccentColor: (color: AccentColor) => void;
    updatePreferences: (prefs: Partial<UIPreferences>) => void;
    updateDashboardLayout: (widgets: DashboardWidget[]) => void;
    playSound: (sound: SoundType) => void;
}

type SoundType = 'success' | 'error' | 'notification' | 'levelUp' | 'achievement' | 'click';

const defaultPreferences: UIPreferences = {
    theme: 'dark',
    accentColor: 'emerald',
    soundEffects: true,
    hapticFeedback: true,
    compactMode: false,
    showAnimations: true,
    fontSize: 'medium',
    dashboardLayout: [
        { id: 'standings', type: 'standings', position: 1, size: 'large', visible: true },
        { id: 'upcoming', type: 'upcoming', position: 2, size: 'medium', visible: true },
        { id: 'quests', type: 'quests', position: 3, size: 'small', visible: true },
        { id: 'streak', type: 'streak', position: 4, size: 'small', visible: true },
        { id: 'leaderboard', type: 'leaderboard', position: 5, size: 'medium', visible: true },
        { id: 'friends', type: 'friends', position: 6, size: 'medium', visible: true },
    ],
};

const SOUNDS: Record<SoundType, string> = {
    success: '/sounds/success.mp3',
    error: '/sounds/error.mp3',
    notification: '/sounds/notification.mp3',
    levelUp: '/sounds/level-up.mp3',
    achievement: '/sounds/achievement.mp3',
    click: '/sounds/click.mp3',
};

const ThemeContext = createContext<ThemeContextType | undefined>(undefined);

export function ThemeProvider({ children }: { children: ReactNode }) {
    const [theme, setThemeState] = useState<Theme>("dark");
    const [themeMode, setThemeModeState] = useState<ThemeMode>("dark");
    const [accentColor, setAccentColorState] = useState<AccentColor>("emerald");
    const [preferences, setPreferences] = useState<UIPreferences>(defaultPreferences);
    const [mounted, setMounted] = useState(false);
    const [systemTheme, setSystemTheme] = useState<'light' | 'dark'>('dark');

    const isDark = themeMode === 'dark' || (themeMode === 'system' && systemTheme === 'dark');

    // Listen for system theme changes
    useEffect(() => {
        if (typeof window === 'undefined') return;

        const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
        // Initialize system theme
        Promise.resolve().then(() => setSystemTheme(mediaQuery.matches ? 'dark' : 'light'));

        const handleChange = (e: MediaQueryListEvent) => {
            setSystemTheme(e.matches ? 'dark' : 'light');
        };

        mediaQuery.addEventListener('change', handleChange);

        return () => mediaQuery.removeEventListener('change', handleChange);
    }, []);

    useEffect(() => {
        Promise.resolve().then(() => setMounted(true));
    }, []);

    useEffect(() => {
        if (!mounted) return;

        const saved = localStorage.getItem("theme") as Theme | null;
        const savedPrefs = localStorage.getItem("ui-preferences");

        if (saved) {
            Promise.resolve().then(() => {
                setThemeState(saved);
                document.documentElement.setAttribute("data-theme", saved);
            });
        }

        if (savedPrefs) {
            try {
                const prefs = JSON.parse(savedPrefs);
                Promise.resolve().then(() => {
                    setPreferences(prefs);
                    setThemeModeState(prefs.theme || 'dark');
                    setAccentColorState(prefs.accentColor || 'emerald');
                });
            } catch (e) {
                // Ignore parse errors
            }
        }
    }, []);

    // Apply accent color as CSS variable
    useEffect(() => {
        if (!mounted) return;

        const root = document.documentElement;
        const colors: Record<AccentColor, string> = {
            emerald: '#10b981',
            blue: '#3b82f6',
            purple: '#8b5cf6',
            rose: '#f43f5e',
            amber: '#f59e0b',
            cyan: '#06b6d4',
        };
        root.style.setProperty('--accent-color', colors[accentColor]);

        // Apply font size
        const fontSizes = { small: '14px', medium: '16px', large: '18px' };
        root.style.setProperty('--base-font-size', fontSizes[preferences.fontSize]);
    }, [mounted, accentColor, preferences.fontSize]);

    const setTheme = (newTheme: Theme) => {
        setThemeState(newTheme);
        localStorage.setItem("theme", newTheme);
        document.documentElement.setAttribute("data-theme", newTheme);
    };

    const toggleTheme = () => {
        setTheme(theme === "dark" ? "light" : "dark");
    };

    const setThemeMode = useCallback((mode: ThemeMode) => {
        setThemeModeState(mode);
        const newPrefs = { ...preferences, theme: mode };
        setPreferences(newPrefs);
        localStorage.setItem("ui-preferences", JSON.stringify(newPrefs));

        // Also update legacy theme
        const actualTheme = mode === 'system' ? systemTheme : mode;
        setTheme(actualTheme as Theme);
    }, [preferences, systemTheme]);

    const setAccentColor = useCallback((color: AccentColor) => {
        setAccentColorState(color);
        const newPrefs = { ...preferences, accentColor: color };
        setPreferences(newPrefs);
        localStorage.setItem("ui-preferences", JSON.stringify(newPrefs));
    }, [preferences]);

    const updatePreferences = useCallback((prefs: Partial<UIPreferences>) => {
        const newPrefs = { ...preferences, ...prefs };
        setPreferences(newPrefs);
        localStorage.setItem("ui-preferences", JSON.stringify(newPrefs));
    }, [preferences]);

    const updateDashboardLayout = useCallback((widgets: DashboardWidget[]) => {
        const newPrefs = { ...preferences, dashboardLayout: widgets };
        setPreferences(newPrefs);
        localStorage.setItem("ui-preferences", JSON.stringify(newPrefs));
    }, [preferences]);

    const playSound = useCallback((sound: SoundType) => {
        if (!preferences.soundEffects) return;

        try {
            const audio = new Audio(SOUNDS[sound]);
            audio.volume = 0.5;
            audio.play().catch(() => {
                // Ignore errors (e.g., user hasn't interacted with page yet)
            });
        } catch (err) {
            // Ignore sound errors
        }
    }, [preferences.soundEffects]);

    // Prevent flash of wrong theme
    if (!mounted) {
        return <>{children}</>;
    }

    return (
        <ThemeContext.Provider value={{
            theme,
            themeMode,
            accentColor,
            preferences,
            isDark,
            toggleTheme,
            setTheme,
            setThemeMode,
            setAccentColor,
            updatePreferences,
            updateDashboardLayout,
            playSound,
        }}>
            {children}
        </ThemeContext.Provider>
    );
}

export function useTheme() {
    const context = useContext(ThemeContext);
    if (!context) {
        throw new Error("useTheme must be used within a ThemeProvider");
    }
    return context;
}

// Hook for accent color classes
export function useAccentClasses() {
    const { accentColor } = useTheme();

    const classes: Record<AccentColor, {
        bg: string;
        bgHover: string;
        text: string;
        border: string;
        gradient: string;
    }> = {
        emerald: {
            bg: 'bg-emerald-500',
            bgHover: 'hover:bg-emerald-600',
            text: 'text-emerald-500',
            border: 'border-emerald-500',
            gradient: 'from-emerald-500 to-teal-500',
        },
        blue: {
            bg: 'bg-blue-500',
            bgHover: 'hover:bg-blue-600',
            text: 'text-blue-500',
            border: 'border-blue-500',
            gradient: 'from-blue-500 to-cyan-500',
        },
        purple: {
            bg: 'bg-purple-500',
            bgHover: 'hover:bg-purple-600',
            text: 'text-purple-500',
            border: 'border-purple-500',
            gradient: 'from-purple-500 to-pink-500',
        },
        rose: {
            bg: 'bg-rose-500',
            bgHover: 'hover:bg-rose-600',
            text: 'text-rose-500',
            border: 'border-rose-500',
            gradient: 'from-rose-500 to-red-500',
        },
        amber: {
            bg: 'bg-amber-500',
            bgHover: 'hover:bg-amber-600',
            text: 'text-amber-500',
            border: 'border-amber-500',
            gradient: 'from-amber-500 to-orange-500',
        },
        cyan: {
            bg: 'bg-cyan-500',
            bgHover: 'hover:bg-cyan-600',
            text: 'text-cyan-500',
            border: 'border-cyan-500',
            gradient: 'from-cyan-500 to-blue-500',
        },
    };

    return classes[accentColor];
}

```

## File: app\custom-leagues\page.tsx
```
"use client";

import React, { useState, useEffect } from "react";
import { useCustomLeagues } from "../context/CustomLeaguesContext";
import { useAuth } from "../context/AuthContext";
import Link from "next/link";

export default function CustomLeaguesPage() {
  const { user } = useAuth();
  const {
    myLeagues,
    joinedLeagues,
    pendingInvites,
    isLoading,
    createLeague,
    joinLeague,
    acceptInvite,
    rejectInvite,
  } = useCustomLeagues();

  const [activeTab, setActiveTab] = useState<'my' | 'joined' | 'create' | 'join'>('my');
  const [joinCode, setJoinCode] = useState('');
  const [joinError, setJoinError] = useState('');
  const [showCreateModal, setShowCreateModal] = useState(false);

  // Create league form state
  const [newLeague, setNewLeague] = useState({
    name: '',
    description: '',
    isPrivate: true,
    maxMembers: 20,
    leagues: ['vsl'],
    startDate: '',
    endDate: '',
  });

  // Initialize dates after render (Date.now() is impure, so must be in effect)
  const [initialStartDate, setInitialStartDate] = useState('');
  const [initialEndDate, setInitialEndDate] = useState('');

  useEffect(() => {
    const start = new Date().toISOString().split('T')[0];
    const end = new Date(Date.now() + 90 * 24 * 60 * 60 * 1000).toISOString().split('T')[0];
    Promise.resolve().then(() => {
      setInitialStartDate(start);
      setInitialEndDate(end);
      setNewLeague(prev => ({ ...prev, startDate: start, endDate: end }));
    });
  }, []);

  const handleJoinLeague = async () => {
    if (!joinCode.trim()) return;

    setJoinError('');
    const success = await joinLeague(joinCode.trim());

    if (success) {
      setJoinCode('');
      setActiveTab('joined');
    } else {
      setJoinError('GeÃ§ersiz kod veya lig bulunamadÄ±');
    }
  };

  const handleCreateLeague = async () => {
    if (!newLeague.name.trim()) return;

    const league = await createLeague(newLeague);

    if (league) {
      setShowCreateModal(false);
      setActiveTab('my');
      setNewLeague({
        name: '',
        description: '',
        isPrivate: true,
        maxMembers: 20,
        leagues: ['vsl'],
        startDate: initialStartDate,
        endDate: initialEndDate,
      });
    }
  };

  if (!user) {
    return (
      <div className="min-h-screen bg-slate-950 flex items-center justify-center">
        <div className="text-center">
          <p className="text-slate-400 mb-4">Bu sayfayÄ± gÃ¶rÃ¼ntÃ¼lemek iÃ§in giriÅŸ yapmalÄ±sÄ±nÄ±z.</p>
          <Link href="/" className="text-emerald-400 hover:underline">GiriÅŸ Yap</Link>
        </div>
      </div>
    );
  }

  return (
    <main className="min-h-screen bg-slate-950 text-slate-100">
      {/* Header */}
      <div className="bg-gradient-to-r from-indigo-600 to-purple-600 px-4 py-6">
        <div className="max-w-4xl mx-auto">
          <div className="flex items-center justify-between">
            <div>
              <h1 className="text-2xl font-bold text-white">Ã–zel Ligler</h1>
              <p className="text-white/70 text-sm mt-1">
                ArkadaÅŸlarÄ±nla kendi ligini oluÅŸtur!
              </p>
            </div>
            <button
              onClick={() => setShowCreateModal(true)}
              className="px-4 py-2 bg-white/20 hover:bg-white/30 rounded-xl text-sm font-medium transition-colors"
            >
              + Lig OluÅŸtur
            </button>
          </div>
        </div>
      </div>

      {/* Pending Invites Banner */}
      {pendingInvites.length > 0 && (
        <div className="max-w-4xl mx-auto px-4 mt-4">
          <div className="bg-amber-500/20 border border-amber-500/30 rounded-xl p-4">
            <div className="flex items-center justify-between">
              <div className="flex items-center gap-3">
                <span className="text-2xl">ğŸ“©</span>
                <div>
                  <p className="font-medium text-amber-300">
                    {pendingInvites.length} bekleyen davet
                  </p>
                  <p className="text-sm text-amber-400/70">
                    Ã–zel liglere katÄ±lmak iÃ§in davetleri kontrol edin
                  </p>
                </div>
              </div>
              <div className="flex gap-2">
                {pendingInvites.slice(0, 2).map(invite => (
                  <div key={invite.id} className="flex gap-1">
                    <button
                      onClick={() => acceptInvite(invite.id)}
                      className="px-3 py-1 bg-emerald-600 hover:bg-emerald-700 rounded-lg text-xs"
                    >
                      Kabul
                    </button>
                    <button
                      onClick={() => rejectInvite(invite.id)}
                      className="px-3 py-1 bg-slate-600 hover:bg-slate-700 rounded-lg text-xs"
                    >
                      Reddet
                    </button>
                  </div>
                ))}
              </div>
            </div>
          </div>
        </div>
      )}

      {/* Tabs */}
      <div className="max-w-4xl mx-auto px-4">
        <div className="flex gap-2 py-4 border-b border-slate-800">
          {[
            { key: 'my', label: 'Liglerim', icon: 'ğŸ‘‘', count: myLeagues.length },
            { key: 'joined', label: 'KatÄ±ldÄ±klarÄ±m', icon: 'ğŸ®', count: joinedLeagues.length },
            { key: 'join', label: 'KatÄ±l', icon: 'ğŸ”—' },
          ].map(tab => (
            <button
              key={tab.key}
              onClick={() => setActiveTab(tab.key as typeof activeTab)}
              className={`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium transition-all ${activeTab === tab.key
                ? 'bg-white/10 text-white'
                : 'text-slate-400 hover:text-white hover:bg-white/5'
                }`}
            >
              <span>{tab.icon}</span>
              <span>{tab.label}</span>
              {tab.count !== undefined && tab.count > 0 && (
                <span className="bg-indigo-500 text-white text-xs px-2 py-0.5 rounded-full">
                  {tab.count}
                </span>
              )}
            </button>
          ))}
        </div>

        {/* Content */}
        <div className="py-6">
          {/* My Leagues */}
          {activeTab === 'my' && (
            <div className="space-y-4">
              {myLeagues.length === 0 ? (
                <div className="text-center py-12">
                  <div className="text-5xl mb-4">ğŸ‘‘</div>
                  <p className="text-slate-400">HenÃ¼z oluÅŸturduÄŸunuz bir lig yok</p>
                  <button
                    onClick={() => setShowCreateModal(true)}
                    className="mt-4 px-6 py-2 bg-indigo-600 hover:bg-indigo-700 rounded-lg text-sm font-medium transition-colors"
                  >
                    Ä°lk Ligini OluÅŸtur
                  </button>
                </div>
              ) : (
                myLeagues.map(league => (
                  <LeagueCard key={league.id} league={league} isOwner />
                ))
              )}
            </div>
          )}

          {/* Joined Leagues */}
          {activeTab === 'joined' && (
            <div className="space-y-4">
              {joinedLeagues.length === 0 ? (
                <div className="text-center py-12">
                  <div className="text-5xl mb-4">ğŸ®</div>
                  <p className="text-slate-400">HenÃ¼z katÄ±ldÄ±ÄŸÄ±nÄ±z bir lig yok</p>
                  <button
                    onClick={() => setActiveTab('join')}
                    className="mt-4 px-6 py-2 bg-indigo-600 hover:bg-indigo-700 rounded-lg text-sm font-medium transition-colors"
                  >
                    Bir Lige KatÄ±l
                  </button>
                </div>
              ) : (
                joinedLeagues.map(league => (
                  <LeagueCard key={league.id} league={league} />
                ))
              )}
            </div>
          )}

          {/* Join League */}
          {activeTab === 'join' && (
            <div className="max-w-md mx-auto">
              <div className="bg-slate-900/50 border border-slate-800 rounded-xl p-6">
                <h2 className="text-lg font-bold text-white mb-4">Lige KatÄ±l</h2>
                <p className="text-sm text-slate-400 mb-6">
                  ArkadaÅŸÄ±nÄ±zdan aldÄ±ÄŸÄ±nÄ±z davet kodunu girin
                </p>

                <div className="space-y-4">
                  <div>
                    <input
                      type="text"
                      value={joinCode}
                      onChange={(e) => {
                        setJoinCode(e.target.value.toUpperCase());
                        setJoinError('');
                      }}
                      placeholder="ABCD1234"
                      className="w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white text-center text-xl tracking-widest placeholder:text-slate-600 focus:outline-none focus:border-indigo-500"
                      maxLength={8}
                    />
                    {joinError && (
                      <p className="text-red-400 text-sm mt-2">{joinError}</p>
                    )}
                  </div>

                  <button
                    onClick={handleJoinLeague}
                    disabled={!joinCode.trim()}
                    className="w-full px-6 py-3 bg-indigo-600 hover:bg-indigo-700 disabled:bg-slate-700 disabled:cursor-not-allowed rounded-xl font-medium transition-colors"
                  >
                    KatÄ±l
                  </button>
                </div>
              </div>
            </div>
          )}
        </div>
      </div>

      {/* Create League Modal */}
      {showCreateModal && (
        <div className="fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4">
          <div className="bg-slate-900 border border-slate-700 rounded-2xl p-6 w-full max-w-lg max-h-[90vh] overflow-y-auto">
            <div className="flex items-center justify-between mb-6">
              <h2 className="text-xl font-bold text-white">Yeni Lig OluÅŸtur</h2>
              <button
                onClick={() => setShowCreateModal(false)}
                className="text-slate-400 hover:text-white"
              >
                âœ•
              </button>
            </div>

            <div className="space-y-4">
              {/* Name */}
              <div>
                <label className="block text-sm font-medium text-slate-400 mb-2">
                  Lig AdÄ± *
                </label>
                <input
                  type="text"
                  value={newLeague.name}
                  onChange={(e) => setNewLeague({ ...newLeague, name: e.target.value })}
                  placeholder="ArkadaÅŸlar Ligi"
                  className="w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white placeholder:text-slate-500 focus:outline-none focus:border-indigo-500"
                />
              </div>

              {/* Description */}
              <div>
                <label className="block text-sm font-medium text-slate-400 mb-2">
                  AÃ§Ä±klama
                </label>
                <textarea
                  value={newLeague.description}
                  onChange={(e) => setNewLeague({ ...newLeague, description: e.target.value })}
                  placeholder="Lig hakkÄ±nda kÄ±sa bir aÃ§Ä±klama..."
                  className="w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white placeholder:text-slate-500 focus:outline-none focus:border-indigo-500 resize-none h-20"
                />
              </div>

              {/* Privacy */}
              <div>
                <label className="block text-sm font-medium text-slate-400 mb-2">
                  Gizlilik
                </label>
                <div className="flex gap-3">
                  <button
                    onClick={() => setNewLeague({ ...newLeague, isPrivate: true })}
                    className={`flex-1 px-4 py-3 rounded-xl border transition-colors ${newLeague.isPrivate
                      ? 'bg-indigo-600 border-indigo-500 text-white'
                      : 'bg-slate-800 border-slate-700 text-slate-400'
                      }`}
                  >
                    ğŸ”’ Ã–zel
                  </button>
                  <button
                    onClick={() => setNewLeague({ ...newLeague, isPrivate: false })}
                    className={`flex-1 px-4 py-3 rounded-xl border transition-colors ${!newLeague.isPrivate
                      ? 'bg-indigo-600 border-indigo-500 text-white'
                      : 'bg-slate-800 border-slate-700 text-slate-400'
                      }`}
                  >
                    ğŸŒ Herkese AÃ§Ä±k
                  </button>
                </div>
              </div>

              {/* Max Members */}
              <div>
                <label htmlFor="max-members" className="block text-sm font-medium text-slate-400 mb-2">
                  Maksimum Ãœye: {newLeague.maxMembers}
                </label>
                <input
                  id="max-members"
                  type="range"
                  min="5"
                  max="100"
                  value={newLeague.maxMembers}
                  onChange={(e) => setNewLeague({ ...newLeague, maxMembers: parseInt(e.target.value) })}
                  className="w-full"
                  aria-label="Maksimum Ãœye SayÄ±sÄ±"
                />
              </div>

              {/* Included Leagues */}
              <div>
                <label className="block text-sm font-medium text-slate-400 mb-2">
                  Dahil Edilecek Ligler
                </label>
                <div className="flex flex-wrap gap-2">
                  {['vsl', '1lig', '2lig', 'cev-cl', 'cev-cup'].map(league => (
                    <button
                      key={league}
                      onClick={() => {
                        const leagues = newLeague.leagues.includes(league)
                          ? newLeague.leagues.filter(l => l !== league)
                          : [...newLeague.leagues, league];
                        setNewLeague({ ...newLeague, leagues });
                      }}
                      className={`px-3 py-1.5 rounded-lg text-sm transition-colors ${newLeague.leagues.includes(league)
                        ? 'bg-indigo-600 text-white'
                        : 'bg-slate-800 text-slate-400'
                        }`}
                    >
                      {league.toUpperCase()}
                    </button>
                  ))}
                </div>
              </div>

              {/* Dates */}
              <div className="grid grid-cols-2 gap-4">
                <div>
                  <label htmlFor="start-date" className="block text-sm font-medium text-slate-400 mb-2">
                    BaÅŸlangÄ±Ã§
                  </label>
                  <input
                    id="start-date"
                    type="date"
                    value={newLeague.startDate}
                    onChange={(e) => setNewLeague({ ...newLeague, startDate: e.target.value })}
                    className="w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-indigo-500"
                    aria-label="BaÅŸlangÄ±Ã§ Tarihi"
                  />
                </div>
                <div>
                  <label htmlFor="end-date" className="block text-sm font-medium text-slate-400 mb-2">
                    BitiÅŸ
                  </label>
                  <input
                    id="end-date"
                    type="date"
                    value={newLeague.endDate}
                    onChange={(e) => setNewLeague({ ...newLeague, endDate: e.target.value })}
                    className="w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-indigo-500"
                    aria-label="BitiÅŸ Tarihi"
                  />
                </div>
              </div>

              {/* Submit */}
              <button
                onClick={handleCreateLeague}
                disabled={!newLeague.name.trim() || newLeague.leagues.length === 0}
                className="w-full px-6 py-3 bg-indigo-600 hover:bg-indigo-700 disabled:bg-slate-700 disabled:cursor-not-allowed rounded-xl font-medium transition-colors mt-4"
              >
                Lig OluÅŸtur
              </button>
            </div>
          </div>
        </div>
      )}
    </main>
  );
}

// League Card Component
function LeagueCard({ league, isOwner = false }: { league: any; isOwner?: boolean }) {
  return (
    <div className="bg-slate-900/50 border border-slate-800 rounded-xl p-4 hover:border-slate-700 transition-colors">
      <div className="flex items-start gap-4">
        <div className="w-16 h-16 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center text-2xl">
          {isOwner ? 'ğŸ‘‘' : 'ğŸ†'}
        </div>

        <div className="flex-1">
          <div className="flex items-center gap-2">
            <h3 className="font-bold text-white text-lg">{league.name}</h3>
            {league.isPrivate && (
              <span className="text-xs bg-slate-700 text-slate-300 px-2 py-0.5 rounded">ğŸ”’ Ã–zel</span>
            )}
          </div>

          {league.description && (
            <p className="text-sm text-slate-400 mt-1">{league.description}</p>
          )}

          <div className="flex items-center gap-4 mt-3 text-sm text-slate-500">
            <span>ğŸ‘¥ {league.members?.length || 0}/{league.maxMembers}</span>
            <span>ğŸ“… {new Date(league.endDate).toLocaleDateString('tr-TR')}</span>
            {isOwner && (
              <span className="text-indigo-400">Kod: {league.code}</span>
            )}
          </div>
        </div>

        <Link
          href={`/custom-leagues/${league.id}`}
          className="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 rounded-lg text-sm font-medium transition-colors"
        >
          GÃ¶rÃ¼ntÃ¼le
        </Link>
      </div>
    </div>
  );
}

```

## File: app\dashboard\page.tsx
```
'use client';

import { useState } from 'react';
import Link from 'next/link';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Badge } from '@/components/ui/badge';
import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';
import { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar';
import { Separator } from '@/components/ui/separator';
import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';
import { Progress } from '@/components/ui/progress';
import { ScrollArea } from '@/components/ui/scroll-area';
import { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuLabel, DropdownMenuSeparator, DropdownMenuTrigger } from '@/components/ui/dropdown-menu';

// Stat Card Component
function StatCard({ 
  title, 
  value, 
  description, 
  icon, 
  trend 
}: { 
  title: string; 
  value: string | number; 
  description?: string;
  icon: string;
  trend?: { value: number; isPositive: boolean };
}) {
  return (
    <Card className="bg-slate-900/80 border-slate-800 hover:border-slate-700 transition-colors">
      <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
        <CardTitle className="text-sm font-medium text-slate-400">{title}</CardTitle>
        <span className="text-2xl">{icon}</span>
      </CardHeader>
      <CardContent>
        <div className="text-2xl font-bold text-white">{value}</div>
        {description && (
          <p className="text-xs text-slate-500 mt-1">{description}</p>
        )}
        {trend && (
          <div className={`flex items-center gap-1 mt-2 text-xs ${trend.isPositive ? 'text-emerald-500' : 'text-red-500'}`}>
            <span>{trend.isPositive ? 'â†‘' : 'â†“'}</span>
            <span>{Math.abs(trend.value)}% geÃ§en haftaya gÃ¶re</span>
          </div>
        )}
      </CardContent>
    </Card>
  );
}

// League Progress Card
function LeagueProgressCard({
  league,
  logo,
  completedMatches,
  totalMatches,
  predictedMatches,
}: {
  league: string;
  logo: string;
  completedMatches: number;
  totalMatches: number;
  predictedMatches: number;
}) {
  const completionPercent = Math.round((completedMatches / totalMatches) * 100);
  const predictionPercent = Math.round((predictedMatches / totalMatches) * 100);
  
  return (
    <Card className="bg-slate-900/80 border-slate-800">
      <CardHeader className="pb-2">
        <div className="flex items-center gap-3">
          <Avatar className="h-10 w-10">
            <AvatarImage src={logo} alt={league} />
            <AvatarFallback className="bg-slate-800 text-xs">{league.substring(0, 2)}</AvatarFallback>
          </Avatar>
          <div>
            <CardTitle className="text-base text-white">{league}</CardTitle>
            <CardDescription className="text-xs">{completedMatches}/{totalMatches} maÃ§ oynandÄ±</CardDescription>
          </div>
        </div>
      </CardHeader>
      <CardContent className="space-y-3">
        <div>
          <div className="flex justify-between text-xs mb-1">
            <span className="text-slate-400">Sezon Ä°lerlemesi</span>
            <span className="text-slate-300">{completionPercent}%</span>
          </div>
          <Progress value={completionPercent} className="h-2" />
        </div>
        <div>
          <div className="flex justify-between text-xs mb-1">
            <span className="text-slate-400">Tahmin OranÄ±n</span>
            <span className="text-emerald-400">{predictionPercent}%</span>
          </div>
          <Progress value={predictionPercent} className="h-2 [&>div]:bg-emerald-500" />
        </div>
      </CardContent>
    </Card>
  );
}

// Recent Activity Item
function ActivityItem({
  action,
  league,
  time,
  icon
}: {
  action: string;
  league: string;
  time: string;
  icon: string;
}) {
  return (
    <div className="flex items-center gap-3 py-3">
      <div className="w-8 h-8 rounded-full bg-slate-800 flex items-center justify-center text-sm">
        {icon}
      </div>
      <div className="flex-1 min-w-0">
        <p className="text-sm text-white truncate">{action}</p>
        <p className="text-xs text-slate-500">{league}</p>
      </div>
      <span className="text-xs text-slate-600">{time}</span>
    </div>
  );
}

// Mock data for demonstration
const mockLeaderboard = [
  { rank: 1, name: 'voleybolcu42', points: 2847, avatar: 'ğŸ¥‡', accuracy: 78 },
  { rank: 2, name: 'smash_master', points: 2654, avatar: 'ğŸ¥ˆ', accuracy: 75 },
  { rank: 3, name: 'set_king', points: 2512, avatar: 'ğŸ¥‰', accuracy: 72 },
  { rank: 4, name: 'ace_hunter', points: 2398, avatar: 'ğŸ', accuracy: 70 },
  { rank: 5, name: 'block_star', points: 2256, avatar: 'ğŸ', accuracy: 68 },
];

const mockUpcomingMatches = [
  { id: 1, home: 'EczacÄ±baÅŸÄ±', away: 'VakÄ±fBank', date: '05 Ocak', league: 'VSL' },
  { id: 2, home: 'FenerbahÃ§e', away: 'Galatasaray', date: '06 Ocak', league: 'VSL' },
  { id: 3, home: 'THY', away: 'NilÃ¼fer', date: '06 Ocak', league: 'VSL' },
  { id: 4, home: 'Ankara DSÄ°', away: 'Kuzeyboru', date: '07 Ocak', league: '1. Lig' },
];

const mockActivities = [
  { action: 'VSL 15. Hafta tahminleri kaydedildi', league: 'Vestel Sultanlar Ligi', time: '2 dk', icon: 'ğŸ“' },
  { action: 'Liderlik tablosunda 12. sÄ±raya yÃ¼kseldin', league: 'Genel', time: '1 sa', icon: 'ğŸ“ˆ' },
  { action: 'EczacÄ±baÅŸÄ± vs VakÄ±fBank tahmini doÄŸru!', league: 'VSL', time: '3 sa', icon: 'âœ…' },
  { action: 'CEV Cup tahminleri tamamlandÄ±', league: 'CEV Cup', time: '1 gÃ¼n', icon: 'ğŸ†' },
];

export default function DashboardPage() {
  const [mounted, setMounted] = useState(() => {
    // Check if we're on client side
    return typeof window !== 'undefined';
  });

  // Handle hydration mismatch by checking window availability
  if (!mounted) {
    // This will only render on server, client will immediately have mounted=true
    if (typeof window !== 'undefined') {
      setMounted(true);
    }
    return (
      <div className="min-h-screen bg-slate-950 flex items-center justify-center">
        <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-white"></div>
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-slate-950">
      {/* Header */}
      <header className="sticky top-0 z-50 w-full border-b border-slate-800 bg-slate-950/95 backdrop-blur supports-[backdrop-filter]:bg-slate-950/60">
        <div className="container flex h-14 items-center justify-between px-4">
          <div className="flex items-center gap-4">
            <Link href="/" className="flex items-center gap-2">
              <span className="text-2xl">ğŸ</span>
              <span className="font-bold text-white hidden sm:inline">VolleySimulator</span>
            </Link>
            <Badge variant="secondary" className="bg-emerald-900/50 text-emerald-400 border-emerald-800">
              Dashboard
            </Badge>
          </div>
          
          <div className="flex items-center gap-3">
            <Button variant="ghost" size="sm" className="text-slate-400 hover:text-white">
              ğŸ””
            </Button>
            <DropdownMenu>
              <DropdownMenuTrigger asChild>
                <Button variant="ghost" size="sm" className="gap-2">
                  <Avatar className="h-7 w-7">
                    <AvatarImage src="/avatars/user.png" />
                    <AvatarFallback className="bg-slate-800 text-xs">U</AvatarFallback>
                  </Avatar>
                  <span className="hidden sm:inline text-slate-300">KullanÄ±cÄ±</span>
                </Button>
              </DropdownMenuTrigger>
              <DropdownMenuContent align="end" className="w-48 bg-slate-900 border-slate-800">
                <DropdownMenuLabel className="text-slate-400">HesabÄ±m</DropdownMenuLabel>
                <DropdownMenuSeparator className="bg-slate-800" />
                <DropdownMenuItem className="text-slate-300 focus:bg-slate-800">
                  ğŸ‘¤ Profil
                </DropdownMenuItem>
                <DropdownMenuItem className="text-slate-300 focus:bg-slate-800">
                  âš™ï¸ Ayarlar
                </DropdownMenuItem>
                <DropdownMenuSeparator className="bg-slate-800" />
                <DropdownMenuItem className="text-red-400 focus:bg-slate-800">
                  ğŸšª Ã‡Ä±kÄ±ÅŸ Yap
                </DropdownMenuItem>
              </DropdownMenuContent>
            </DropdownMenu>
          </div>
        </div>
      </header>

      {/* Main Content */}
      <main className="container px-4 py-6 space-y-6">
        {/* Welcome Section */}
        <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
          <div>
            <h1 className="text-2xl font-bold text-white">HoÅŸ Geldin! ğŸ‘‹</h1>
            <p className="text-slate-400 mt-1">Tahminlerini takip et, istatistiklerini gÃ¶r.</p>
          </div>
          <div className="flex gap-2">
            <Button asChild className="bg-emerald-600 hover:bg-emerald-500">
              <Link href="/vsl">Tahmin Yap</Link>
            </Button>
            <Button variant="outline" asChild className="border-slate-700 text-slate-300 hover:bg-slate-800">
              <Link href="/leaderboard">SÄ±ralama</Link>
            </Button>
          </div>
        </div>

        {/* Stats Grid */}
        <div className="grid gap-4 grid-cols-2 lg:grid-cols-4">
          <StatCard
            title="Toplam Puan"
            value="2,847"
            icon="ğŸ†"
            trend={{ value: 12, isPositive: true }}
          />
          <StatCard
            title="SÄ±ralaman"
            value="#12"
            description="1,245 kullanÄ±cÄ± arasÄ±nda"
            icon="ğŸ“Š"
          />
          <StatCard
            title="DoÄŸru Tahmin"
            value="78%"
            description="Son 30 gÃ¼n"
            icon="ğŸ¯"
            trend={{ value: 5, isPositive: true }}
          />
          <StatCard
            title="Tahmin Edilen"
            value="156"
            description="Toplam maÃ§"
            icon="ğŸ“"
          />
        </div>

        {/* Tabs Section */}
        <Tabs defaultValue="overview" className="space-y-4">
          <TabsList className="bg-slate-900 border border-slate-800">
            <TabsTrigger value="overview" className="data-[state=active]:bg-slate-800">
              Genel BakÄ±ÅŸ
            </TabsTrigger>
            <TabsTrigger value="leagues" className="data-[state=active]:bg-slate-800">
              Ligler
            </TabsTrigger>
            <TabsTrigger value="matches" className="data-[state=active]:bg-slate-800">
              MaÃ§lar
            </TabsTrigger>
          </TabsList>

          <TabsContent value="overview" className="space-y-4">
            <div className="grid gap-4 lg:grid-cols-3">
              {/* Leaderboard Preview */}
              <Card className="lg:col-span-2 bg-slate-900/80 border-slate-800">
                <CardHeader>
                  <div className="flex items-center justify-between">
                    <div>
                      <CardTitle className="text-white">Liderlik Tablosu</CardTitle>
                      <CardDescription>En iyi tahmin edenler</CardDescription>
                    </div>
                    <Button variant="ghost" size="sm" asChild className="text-slate-400">
                      <Link href="/leaderboard">TÃ¼mÃ¼nÃ¼ GÃ¶r â†’</Link>
                    </Button>
                  </div>
                </CardHeader>
                <CardContent>
                  <Table>
                    <TableHeader>
                      <TableRow className="border-slate-800 hover:bg-transparent">
                        <TableHead className="text-slate-400 w-12">#</TableHead>
                        <TableHead className="text-slate-400">KullanÄ±cÄ±</TableHead>
                        <TableHead className="text-slate-400 text-right">Puan</TableHead>
                        <TableHead className="text-slate-400 text-right hidden sm:table-cell">DoÄŸruluk</TableHead>
                      </TableRow>
                    </TableHeader>
                    <TableBody>
                      {mockLeaderboard.map((user) => (
                        <TableRow key={user.rank} className="border-slate-800 hover:bg-slate-800/50">
                          <TableCell className="font-medium">
                            <span className="text-lg">{user.avatar}</span>
                          </TableCell>
                          <TableCell className="text-white font-medium">{user.name}</TableCell>
                          <TableCell className="text-right text-emerald-400 font-bold">{user.points.toLocaleString()}</TableCell>
                          <TableCell className="text-right text-slate-400 hidden sm:table-cell">{user.accuracy}%</TableCell>
                        </TableRow>
                      ))}
                    </TableBody>
                  </Table>
                </CardContent>
              </Card>

              {/* Recent Activity */}
              <Card className="bg-slate-900/80 border-slate-800">
                <CardHeader>
                  <CardTitle className="text-white">Son Aktiviteler</CardTitle>
                  <CardDescription>Senin aktivitelerin</CardDescription>
                </CardHeader>
                <CardContent className="p-0">
                  <ScrollArea className="h-[280px] px-6">
                    {mockActivities.map((activity, idx) => (
                      <div key={idx}>
                        <ActivityItem {...activity} />
                        {idx < mockActivities.length - 1 && <Separator className="bg-slate-800" />}
                      </div>
                    ))}
                  </ScrollArea>
                </CardContent>
              </Card>
            </div>
          </TabsContent>

          <TabsContent value="leagues" className="space-y-4">
            <div className="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
              <LeagueProgressCard
                league="Vestel Sultanlar Ligi"
                logo="/logos/vsl.png"
                completedMatches={98}
                totalMatches={132}
                predictedMatches={85}
              />
              <LeagueProgressCard
                league="1. Lig"
                logo="/logos/1lig.png"
                completedMatches={72}
                totalMatches={110}
                predictedMatches={45}
              />
              <LeagueProgressCard
                league="2. Lig"
                logo="/logos/2lig.png"
                completedMatches={54}
                totalMatches={96}
                predictedMatches={20}
              />
              <LeagueProgressCard
                league="CEV Champions League"
                logo="/logos/cev-cl.png"
                completedMatches={24}
                totalMatches={48}
                predictedMatches={24}
              />
              <LeagueProgressCard
                league="CEV Cup"
                logo="/logos/cev-cup.png"
                completedMatches={16}
                totalMatches={32}
                predictedMatches={16}
              />
              <LeagueProgressCard
                league="CEV Challenge Cup"
                logo="/logos/cev-challenge.png"
                completedMatches={12}
                totalMatches={24}
                predictedMatches={8}
              />
            </div>
          </TabsContent>

          <TabsContent value="matches" className="space-y-4">
            <Card className="bg-slate-900/80 border-slate-800">
              <CardHeader>
                <CardTitle className="text-white">YaklaÅŸan MaÃ§lar</CardTitle>
                <CardDescription>Tahmin bekleyen maÃ§lar</CardDescription>
              </CardHeader>
              <CardContent>
                <Table>
                  <TableHeader>
                    <TableRow className="border-slate-800 hover:bg-transparent">
                      <TableHead className="text-slate-400">MaÃ§</TableHead>
                      <TableHead className="text-slate-400 text-center">Lig</TableHead>
                      <TableHead className="text-slate-400 text-right">Tarih</TableHead>
                      <TableHead className="text-slate-400 text-right">Aksiyon</TableHead>
                    </TableRow>
                  </TableHeader>
                  <TableBody>
                    {mockUpcomingMatches.map((match) => (
                      <TableRow key={match.id} className="border-slate-800 hover:bg-slate-800/50">
                        <TableCell>
                          <div className="flex items-center gap-2">
                            <span className="text-white font-medium">{match.home}</span>
                            <span className="text-slate-500">vs</span>
                            <span className="text-white font-medium">{match.away}</span>
                          </div>
                        </TableCell>
                        <TableCell className="text-center">
                          <Badge variant="outline" className="border-slate-700 text-slate-400">
                            {match.league}
                          </Badge>
                        </TableCell>
                        <TableCell className="text-right text-slate-400">{match.date}</TableCell>
                        <TableCell className="text-right">
                          <Button size="sm" variant="ghost" className="text-emerald-400 hover:text-emerald-300 hover:bg-emerald-900/20">
                            Tahmin Et
                          </Button>
                        </TableCell>
                      </TableRow>
                    ))}
                  </TableBody>
                </Table>
              </CardContent>
            </Card>
          </TabsContent>
        </Tabs>
      </main>
    </div>
  );
}

```

## File: app\friends\page.tsx
```
"use client";

import { useState, useEffect } from "react";
import { useFriends } from "../context/FriendsContext";
import { useAuth } from "../context/AuthContext";
import TeamAvatar from "../components/TeamAvatar";
import Link from "next/link";

export default function FriendsPage() {
  const { user } = useAuth();
  const { 
    friends, 
    pendingRequests, 
    friendActivities,
    isLoading, 
    sendFriendRequest, 
    acceptFriendRequest, 
    rejectFriendRequest,
    removeFriend,
    searchUsers 
  } = useFriends();
  
  const [activeTab, setActiveTab] = useState<'friends' | 'requests' | 'search' | 'activity'>('friends');
  const [searchQuery, setSearchQuery] = useState('');
  const [searchResults, setSearchResults] = useState<any[]>([]);
  const [isSearching, setIsSearching] = useState(false);

  // Search users
  useEffect(() => {
    const timer = setTimeout(async () => {
      if (searchQuery.length >= 2) {
        setIsSearching(true);
        const results = await searchUsers(searchQuery);
        setSearchResults(results);
        setIsSearching(false);
      } else {
        setSearchResults([]);
      }
    }, 300);
    
    return () => clearTimeout(timer);
  }, [searchQuery, searchUsers]);

  if (!user) {
    return (
      <div className="min-h-screen bg-slate-950 flex items-center justify-center">
        <div className="text-center">
          <p className="text-slate-400 mb-4">Bu sayfayÄ± gÃ¶rÃ¼ntÃ¼lemek iÃ§in giriÅŸ yapmalÄ±sÄ±nÄ±z.</p>
          <Link href="/" className="text-emerald-400 hover:underline">GiriÅŸ Yap</Link>
        </div>
      </div>
    );
  }

  return (
    <main className="min-h-screen bg-slate-950 text-slate-100">
      {/* Header */}
      <div className="bg-gradient-to-r from-purple-600 to-pink-600 px-4 py-6">
        <div className="max-w-4xl mx-auto">
          <h1 className="text-2xl font-bold text-white">ArkadaÅŸlar</h1>
          <p className="text-white/70 text-sm mt-1">
            {friends.length} arkadaÅŸ â€¢ {pendingRequests.length} bekleyen istek
          </p>
        </div>
      </div>

      {/* Tabs */}
      <div className="max-w-4xl mx-auto px-4">
        <div className="flex gap-2 py-4 border-b border-slate-800 overflow-x-auto">
          {[
            { key: 'friends', label: 'ArkadaÅŸlar', icon: 'ğŸ‘¥', count: friends.length },
            { key: 'requests', label: 'Ä°stekler', icon: 'ğŸ“©', count: pendingRequests.length },
            { key: 'search', label: 'Ara', icon: 'ğŸ”' },
            { key: 'activity', label: 'Aktivite', icon: 'ğŸ“Š' },
          ].map(tab => (
            <button
              key={tab.key}
              onClick={() => setActiveTab(tab.key as typeof activeTab)}
              className={`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium transition-all whitespace-nowrap ${
                activeTab === tab.key
                  ? 'bg-white/10 text-white'
                  : 'text-slate-400 hover:text-white hover:bg-white/5'
              }`}
            >
              <span>{tab.icon}</span>
              <span>{tab.label}</span>
              {tab.count !== undefined && tab.count > 0 && (
                <span className="bg-purple-500 text-white text-xs px-2 py-0.5 rounded-full">
                  {tab.count}
                </span>
              )}
            </button>
          ))}
        </div>

        {/* Content */}
        <div className="py-6">
          {/* Friends List */}
          {activeTab === 'friends' && (
            <div className="space-y-3">
              {friends.length === 0 ? (
                <div className="text-center py-12">
                  <div className="text-5xl mb-4">ğŸ‘¥</div>
                  <p className="text-slate-400">HenÃ¼z arkadaÅŸÄ±nÄ±z yok</p>
                  <button
                    onClick={() => setActiveTab('search')}
                    className="mt-4 px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded-lg text-sm font-medium transition-colors"
                  >
                    ArkadaÅŸ Bul
                  </button>
                </div>
              ) : (
                friends.map(friend => (
                  <div
                    key={friend.id}
                    className="bg-slate-900/50 border border-slate-800 rounded-xl p-4 flex items-center gap-4"
                  >
                    <div className="w-12 h-12 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white font-bold">
                      {friend.friend?.displayName?.charAt(0) || '?'}
                    </div>
                    <div className="flex-1">
                      <h3 className="font-bold text-white">{friend.friend?.displayName}</h3>
                      <div className="flex items-center gap-2 text-sm text-slate-400">
                        <span>Lv.{friend.friend?.level || 1}</span>
                        <span>â€¢</span>
                        <span>{friend.friend?.totalPoints || 0} puan</span>
                      </div>
                    </div>
                    <div className="flex gap-2">
                      <Link
                        href={`/profile/${friend.friendId}`}
                        className="px-3 py-1.5 bg-slate-800 hover:bg-slate-700 rounded-lg text-sm transition-colors"
                      >
                        Profil
                      </Link>
                      <button
                        onClick={() => removeFriend(friend.id)}
                        className="px-3 py-1.5 bg-red-600/20 hover:bg-red-600/40 text-red-400 rounded-lg text-sm transition-colors"
                      >
                        Ã‡Ä±kar
                      </button>
                    </div>
                  </div>
                ))
              )}
            </div>
          )}

          {/* Pending Requests */}
          {activeTab === 'requests' && (
            <div className="space-y-3">
              {pendingRequests.length === 0 ? (
                <div className="text-center py-12">
                  <div className="text-5xl mb-4">ğŸ“©</div>
                  <p className="text-slate-400">Bekleyen arkadaÅŸlÄ±k isteÄŸi yok</p>
                </div>
              ) : (
                pendingRequests.map(request => (
                  <div
                    key={request.id}
                    className="bg-slate-900/50 border border-slate-800 rounded-xl p-4 flex items-center gap-4"
                  >
                    <div className="w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center text-white font-bold">
                      {request.friend?.displayName?.charAt(0) || '?'}
                    </div>
                    <div className="flex-1">
                      <h3 className="font-bold text-white">{request.friend?.displayName}</h3>
                      <p className="text-sm text-slate-400">ArkadaÅŸlÄ±k isteÄŸi gÃ¶nderdi</p>
                    </div>
                    <div className="flex gap-2">
                      <button
                        onClick={() => acceptFriendRequest(request.id)}
                        className="px-4 py-1.5 bg-emerald-600 hover:bg-emerald-700 rounded-lg text-sm font-medium transition-colors"
                      >
                        Kabul Et
                      </button>
                      <button
                        onClick={() => rejectFriendRequest(request.id)}
                        className="px-4 py-1.5 bg-slate-700 hover:bg-slate-600 rounded-lg text-sm transition-colors"
                      >
                        Reddet
                      </button>
                    </div>
                  </div>
                ))
              )}
            </div>
          )}

          {/* Search */}
          {activeTab === 'search' && (
            <div className="space-y-4">
              <div className="relative">
                <input
                  type="text"
                  value={searchQuery}
                  onChange={(e) => setSearchQuery(e.target.value)}
                  placeholder="KullanÄ±cÄ± ara..."
                  className="w-full bg-slate-900 border border-slate-700 rounded-xl px-4 py-3 pl-10 text-white placeholder:text-slate-500 focus:outline-none focus:border-purple-500"
                />
                <span className="absolute left-3 top-1/2 -translate-y-1/2 text-slate-500">ğŸ”</span>
              </div>
              
              {isSearching && (
                <div className="text-center py-8">
                  <div className="animate-spin w-8 h-8 border-2 border-purple-500 border-t-transparent rounded-full mx-auto"></div>
                </div>
              )}
              
              {!isSearching && searchResults.length > 0 && (
                <div className="space-y-3">
                  {searchResults.map(user => (
                    <div
                      key={user.id}
                      className="bg-slate-900/50 border border-slate-800 rounded-xl p-4 flex items-center gap-4"
                    >
                      <div className="w-12 h-12 rounded-full bg-gradient-to-br from-emerald-500 to-teal-500 flex items-center justify-center text-white font-bold">
                        {user.displayName?.charAt(0) || '?'}
                      </div>
                      <div className="flex-1">
                        <h3 className="font-bold text-white">{user.displayName}</h3>
                        <p className="text-sm text-slate-400">Lv.{user.level || 1}</p>
                      </div>
                      <button
                        onClick={() => sendFriendRequest(user.id)}
                        className="px-4 py-1.5 bg-purple-600 hover:bg-purple-700 rounded-lg text-sm font-medium transition-colors"
                      >
                        ArkadaÅŸ Ekle
                      </button>
                    </div>
                  ))}
                </div>
              )}
              
              {!isSearching && searchQuery.length >= 2 && searchResults.length === 0 && (
                <div className="text-center py-8">
                  <p className="text-slate-400">KullanÄ±cÄ± bulunamadÄ±</p>
                </div>
              )}
            </div>
          )}

          {/* Activity Feed */}
          {activeTab === 'activity' && (
            <div className="space-y-3">
              {friendActivities.length === 0 ? (
                <div className="text-center py-12">
                  <div className="text-5xl mb-4">ğŸ“Š</div>
                  <p className="text-slate-400">HenÃ¼z aktivite yok</p>
                </div>
              ) : (
                friendActivities.map(activity => (
                  <div
                    key={activity.id}
                    className="bg-slate-900/50 border border-slate-800 rounded-xl p-4"
                  >
                    <div className="flex items-start gap-3">
                      <div className="w-10 h-10 rounded-full bg-gradient-to-br from-amber-500 to-orange-500 flex items-center justify-center text-white font-bold text-sm">
                        {activity.user?.displayName?.charAt(0) || '?'}
                      </div>
                      <div className="flex-1">
                        <p className="text-white">
                          <span className="font-bold">{activity.user?.displayName}</span>
                          {' '}{activity.description}
                        </p>
                        <p className="text-xs text-slate-500 mt-1">
                          {new Date(activity.createdAt).toLocaleDateString('tr-TR')}
                        </p>
                      </div>
                      <span className="text-2xl">{getActivityIcon(activity.activityType)}</span>
                    </div>
                  </div>
                ))
              )}
            </div>
          )}
        </div>
      </div>
    </main>
  );
}

function getActivityIcon(type: string): string {
  switch (type) {
    case 'prediction': return 'ğŸ¯';
    case 'achievement': return 'ğŸ†';
    case 'level_up': return 'â¬†ï¸';
    case 'badge': return 'ğŸ–ï¸';
    case 'streak': return 'ğŸ”¥';
    default: return 'ğŸ“Œ';
  }
}

```

## File: app\hooks\index.ts
```
// Hooks barrel export
export { useLocalStorage } from './useLocalStorage';
export { usePredictions } from './usePredictions';
export { useSimulationEngine } from './useSimulationEngine';
export { useUndoableAction } from './useUndoableAction';
export { useUserStats } from './useUserStats';
export { useLeagueQuery, useLeagueData, useInvalidateLeague } from './useLeagueQuery';
export { useWebVitals, useNavigationTiming } from './usePerformance';
export { usePushNotifications } from './usePushNotifications';
export { useModal } from './useModal';

```

# Project Application Context - Part 12

## File: app\hooks\useAdvancedStats.ts
```
"use client";

import { useState, useCallback, useEffect, useMemo } from "react";
import { 
  TeamDetailedStats, 
  UserPredictionStats, 
  HeadToHeadStats,
  TeamForm
} from "../types";

interface TeamStatsInput {
  name: string;
  played: number;
  wins: number;
  points: number;
  setsWon: number;
  setsLost: number;
}

interface MatchResult {
  homeTeam: string;
  awayTeam: string;
  homeScore: number;
  awayScore: number;
  date?: string;
}

export function useAdvancedStats(teams: TeamStatsInput[], matches: MatchResult[]) {
  const [selectedTeam, setSelectedTeam] = useState<string | null>(null);
  const [isLoading, setIsLoading] = useState(false);

  // Calculate detailed stats for all teams
  const teamStats = useMemo((): Map<string, TeamDetailedStats> => {
    const stats = new Map<string, TeamDetailedStats>();
    
    teams.forEach(team => {
      const teamMatches = matches.filter(
        m => m.homeTeam === team.name || m.awayTeam === team.name
      );
      
      const homeMatches = teamMatches.filter(m => m.homeTeam === team.name);
      const awayMatches = teamMatches.filter(m => m.awayTeam === team.name);
      
      const homeWins = homeMatches.filter(m => m.homeScore > m.awayScore).length;
      const awayWins = awayMatches.filter(m => m.awayScore > m.homeScore).length;
      
      // Calculate score-specific wins/losses
      const threeZeroWins = teamMatches.filter(m => 
        (m.homeTeam === team.name && m.homeScore === 3 && m.awayScore === 0) ||
        (m.awayTeam === team.name && m.awayScore === 3 && m.homeScore === 0)
      ).length;
      
      const threeOneWins = teamMatches.filter(m => 
        (m.homeTeam === team.name && m.homeScore === 3 && m.awayScore === 1) ||
        (m.awayTeam === team.name && m.awayScore === 3 && m.homeScore === 1)
      ).length;
      
      const threeTwoWins = teamMatches.filter(m => 
        (m.homeTeam === team.name && m.homeScore === 3 && m.awayScore === 2) ||
        (m.awayTeam === team.name && m.awayScore === 3 && m.homeScore === 2)
      ).length;
      
      const threeZeroLosses = teamMatches.filter(m => 
        (m.homeTeam === team.name && m.homeScore === 0 && m.awayScore === 3) ||
        (m.awayTeam === team.name && m.awayScore === 0 && m.homeScore === 3)
      ).length;
      
      const threeOneLosses = teamMatches.filter(m => 
        (m.homeTeam === team.name && m.homeScore === 1 && m.awayScore === 3) ||
        (m.awayTeam === team.name && m.awayScore === 1 && m.homeScore === 3)
      ).length;
      
      const threeTwoLosses = teamMatches.filter(m => 
        (m.homeTeam === team.name && m.homeScore === 2 && m.awayScore === 3) ||
        (m.awayTeam === team.name && m.awayScore === 2 && m.homeScore === 3)
      ).length;
      
      // Calculate last 10 results
      const sortedMatches = [...teamMatches].sort((a, b) => 
        new Date(b.date || 0).getTime() - new Date(a.date || 0).getTime()
      );
      
      const last10: ('W' | 'L')[] = sortedMatches.slice(0, 10).map(m => {
        const isHome = m.homeTeam === team.name;
        const won = isHome ? m.homeScore > m.awayScore : m.awayScore > m.homeScore;
        return won ? 'W' : 'L';
      });
      
      // Calculate current streak
      let currentStreak = 0;
      let streakType: 'W' | 'L' = 'W';
      
      for (const result of last10) {
        if (currentStreak === 0) {
          streakType = result;
          currentStreak = 1;
        } else if (result === streakType) {
          currentStreak++;
        } else {
          break;
        }
      }
      
      // ELO rating calculation (simplified)
      const eloRating = 1500 + (team.wins * 30) - ((team.played - team.wins) * 20) + 
        (team.setsWon - team.setsLost) * 2;
      
      stats.set(team.name, {
        teamName: team.name,
        league: '',
        season: '',
        played: team.played,
        wins: team.wins,
        losses: team.played - team.wins,
        points: team.points,
        setsWon: team.setsWon,
        setsLost: team.setsLost,
        setRatio: team.setsLost > 0 ? team.setsWon / team.setsLost : team.setsWon,
        avgPointsPerSet: team.setsWon > 0 ? (team.points / team.setsWon) * 25 : 0,
        avgPointsConcededPerSet: team.setsLost > 0 ? (team.points / team.setsLost) * 20 : 0,
        homeRecord: { wins: homeWins, losses: homeMatches.length - homeWins },
        awayRecord: { wins: awayWins, losses: awayMatches.length - awayWins },
        threeZeroWins,
        threeOneWins,
        threeTwoWins,
        threeZeroLosses,
        threeOneLosses,
        threeTwoLosses,
        currentStreak,
        streakType,
        last10,
        eloRating,
        strengthRank: 0, // Will be calculated after
      });
    });
    
    // Calculate strength rank
    const sortedByElo = [...stats.entries()]
      .sort((a, b) => b[1].eloRating - a[1].eloRating);
    
    sortedByElo.forEach(([name, teamStat], index) => {
      teamStat.strengthRank = index + 1;
      stats.set(name, teamStat);
    });
    
    return stats;
  }, [teams, matches]);

  // Get head-to-head stats between two teams
  const getHeadToHead = useCallback((team1: string, team2: string): HeadToHeadStats => {
    const h2hMatches = matches.filter(
      m => (m.homeTeam === team1 && m.awayTeam === team2) ||
           (m.homeTeam === team2 && m.awayTeam === team1)
    );
    
    let team1Wins = 0;
    let team2Wins = 0;
    let team1Sets = 0;
    let team2Sets = 0;
    
    h2hMatches.forEach(m => {
      const isTeam1Home = m.homeTeam === team1;
      if (isTeam1Home) {
        if (m.homeScore > m.awayScore) team1Wins++;
        else team2Wins++;
        team1Sets += m.homeScore;
        team2Sets += m.awayScore;
      } else {
        if (m.awayScore > m.homeScore) team1Wins++;
        else team2Wins++;
        team1Sets += m.awayScore;
        team2Sets += m.homeScore;
      }
    });
    
    return {
      totalMatches: h2hMatches.length,
      homeWins: team1Wins,
      awayWins: team2Wins,
      homeSetWins: team1Sets,
      awaySetWins: team2Sets,
      lastMeetings: h2hMatches.slice(0, 5).map(m => ({
        date: m.date || '',
        homeTeam: m.homeTeam,
        awayTeam: m.awayTeam,
        score: `${m.homeScore}-${m.awayScore}`,
        venue: '',
        competition: '',
      })),
      averageHomeScore: h2hMatches.length > 0 ? team1Sets / h2hMatches.length : 0,
      averageAwayScore: h2hMatches.length > 0 ? team2Sets / h2hMatches.length : 0,
    };
  }, [matches]);

  // Get team form
  const getTeamForm = useCallback((teamName: string): TeamForm => {
    const teamData = teamStats.get(teamName);
    
    if (!teamData) {
      return {
        teamName,
        last5Results: [],
        last5Scores: [],
        winRate: 0,
        avgPointsScored: 0,
        avgPointsConceded: 0,
        trend: 'stable',
        strengthRating: 0,
      };
    }
    
    const last5 = teamData.last10.slice(0, 5) as ('W' | 'L')[];
    const recentWins = last5.filter(r => r === 'W').length;
    const previousWins = teamData.last10.slice(5, 10).filter(r => r === 'W').length;
    
    let trend: 'improving' | 'declining' | 'stable' = 'stable';
    if (recentWins > previousWins + 1) trend = 'improving';
    else if (recentWins < previousWins - 1) trend = 'declining';
    
    return {
      teamName,
      last5Results: last5,
      last5Scores: [],
      winRate: teamData.played > 0 ? (teamData.wins / teamData.played) * 100 : 0,
      avgPointsScored: teamData.avgPointsPerSet,
      avgPointsConceded: teamData.avgPointsConcededPerSet,
      trend,
      strengthRating: teamData.eloRating,
    };
  }, [teamStats]);

  // Get top performers in various categories
  const getTopPerformers = useCallback((category: keyof TeamDetailedStats, count: number = 5) => {
    return [...teamStats.values()]
      .sort((a, b) => {
        const aVal = a[category];
        const bVal = b[category];
        if (typeof aVal === 'number' && typeof bVal === 'number') {
          return bVal - aVal;
        }
        return 0;
      })
      .slice(0, count);
  }, [teamStats]);

  // Get comparison between teams
  const compareTeams = useCallback((team1: string, team2: string) => {
    const stats1 = teamStats.get(team1);
    const stats2 = teamStats.get(team2);
    
    if (!stats1 || !stats2) return null;
    
    const h2h = getHeadToHead(team1, team2);
    
    return {
      team1: stats1,
      team2: stats2,
      headToHead: h2h,
      comparison: {
        winRate: {
          team1: stats1.played > 0 ? (stats1.wins / stats1.played) * 100 : 0,
          team2: stats2.played > 0 ? (stats2.wins / stats2.played) * 100 : 0,
        },
        setRatio: {
          team1: stats1.setRatio,
          team2: stats2.setRatio,
        },
        elo: {
          team1: stats1.eloRating,
          team2: stats2.eloRating,
        },
        form: {
          team1: stats1.last10.slice(0, 5).filter(r => r === 'W').length,
          team2: stats2.last10.slice(0, 5).filter(r => r === 'W').length,
        },
      },
    };
  }, [teamStats, getHeadToHead]);

  return {
    teamStats,
    selectedTeam,
    setSelectedTeam,
    getHeadToHead,
    getTeamForm,
    getTopPerformers,
    compareTeams,
    isLoading,
    getTeamDetails: (name: string) => teamStats.get(name),
  };
}

// Hook for user prediction stats
export function useUserPredictionStats(userId: string) {
  const [stats, setStats] = useState<UserPredictionStats | null>(null);
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);

  const fetchStats = useCallback(async () => {
    if (!userId) return;
    
    setIsLoading(true);
    setError(null);
    
    try {
      const response = await fetch(`/api/users/${userId}/prediction-stats`);
      
      if (!response.ok) throw new Error('Failed to fetch prediction stats');
      
      const data = await response.json();
      setStats(data.stats);
    } catch (err) {
      setError(err instanceof Error ? err.message : 'An error occurred');
    } finally {
      setIsLoading(false);
    }
  }, [userId]);

  useEffect(() => {
    fetchStats();
  }, [fetchStats]);

  return {
    stats,
    isLoading,
    error,
    refetch: fetchStats,
  };
}

```

## File: app\hooks\useAIPredictions.ts
```
"use client";

import { useState, useCallback } from "react";
import { 
  AIPrediction, 
  AIMatchAnalysis, 
  HeadToHeadStats, 
  TeamForm 
} from "../types";

interface UseAIPredictionsOptions {
  cacheTime?: number; // ms
}

interface UseAIPredictionsReturn {
  isLoading: boolean;
  error: string | null;
  getPrediction: (homeTeam: string, awayTeam: string, league: string) => Promise<AIPrediction | null>;
  getMatchAnalysis: (homeTeam: string, awayTeam: string, league: string) => Promise<AIMatchAnalysis | null>;
  getHeadToHead: (team1: string, team2: string) => Promise<HeadToHeadStats | null>;
  getTeamForm: (teamName: string, league: string) => Promise<TeamForm | null>;
  getBulkPredictions: (matches: { homeTeam: string; awayTeam: string }[], league: string) => Promise<AIPrediction[]>;
}

// Simple in-memory cache
const predictionCache = new Map<string, { data: AIPrediction; timestamp: number }>();
const analysisCache = new Map<string, { data: AIMatchAnalysis; timestamp: number }>();

export function useAIPredictions(options: UseAIPredictionsOptions = {}): UseAIPredictionsReturn {
  const { cacheTime = 5 * 60 * 1000 } = options; // 5 minutes default
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);

  // Get AI prediction for a match
  const getPrediction = useCallback(async (
    homeTeam: string, 
    awayTeam: string, 
    league: string
  ): Promise<AIPrediction | null> => {
    const cacheKey = `${league}-${homeTeam}-${awayTeam}`;
    
    // Check cache
    const cached = predictionCache.get(cacheKey);
    if (cached && Date.now() - cached.timestamp < cacheTime) {
      return cached.data;
    }
    
    setIsLoading(true);
    setError(null);
    
    try {
      const response = await fetch('/api/ai/predict', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ homeTeam, awayTeam, league }),
      });
      
      if (!response.ok) {
        throw new Error('Failed to get AI prediction');
      }
      
      const data = await response.json();
      const prediction = data.prediction as AIPrediction;
      
      // Cache result
      predictionCache.set(cacheKey, { data: prediction, timestamp: Date.now() });
      
      return prediction;
    } catch (err) {
      setError(err instanceof Error ? err.message : 'An error occurred');
      return null;
    } finally {
      setIsLoading(false);
    }
  }, [cacheTime]);

  // Get detailed match analysis
  const getMatchAnalysis = useCallback(async (
    homeTeam: string, 
    awayTeam: string, 
    league: string
  ): Promise<AIMatchAnalysis | null> => {
    const cacheKey = `analysis-${league}-${homeTeam}-${awayTeam}`;
    
    // Check cache
    const cached = analysisCache.get(cacheKey);
    if (cached && Date.now() - cached.timestamp < cacheTime) {
      return cached.data;
    }
    
    setIsLoading(true);
    setError(null);
    
    try {
      const response = await fetch('/api/ai/analyze', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ homeTeam, awayTeam, league }),
      });
      
      if (!response.ok) {
        throw new Error('Failed to get match analysis');
      }
      
      const data = await response.json();
      const analysis = data.analysis as AIMatchAnalysis;
      
      // Cache result
      analysisCache.set(cacheKey, { data: analysis, timestamp: Date.now() });
      
      return analysis;
    } catch (err) {
      setError(err instanceof Error ? err.message : 'An error occurred');
      return null;
    } finally {
      setIsLoading(false);
    }
  }, [cacheTime]);

  // Get head-to-head stats
  const getHeadToHead = useCallback(async (
    team1: string, 
    team2: string
  ): Promise<HeadToHeadStats | null> => {
    setIsLoading(true);
    setError(null);
    
    try {
      const response = await fetch(`/api/stats/h2h?team1=${encodeURIComponent(team1)}&team2=${encodeURIComponent(team2)}`);
      
      if (!response.ok) {
        throw new Error('Failed to get head-to-head stats');
      }
      
      const data = await response.json();
      return data.stats as HeadToHeadStats;
    } catch (err) {
      setError(err instanceof Error ? err.message : 'An error occurred');
      return null;
    } finally {
      setIsLoading(false);
    }
  }, []);

  // Get team form
  const getTeamForm = useCallback(async (
    teamName: string, 
    league: string
  ): Promise<TeamForm | null> => {
    setIsLoading(true);
    setError(null);
    
    try {
      const response = await fetch(`/api/stats/form?team=${encodeURIComponent(teamName)}&league=${encodeURIComponent(league)}`);
      
      if (!response.ok) {
        throw new Error('Failed to get team form');
      }
      
      const data = await response.json();
      return data.form as TeamForm;
    } catch (err) {
      setError(err instanceof Error ? err.message : 'An error occurred');
      return null;
    } finally {
      setIsLoading(false);
    }
  }, []);

  // Get bulk predictions for multiple matches
  const getBulkPredictions = useCallback(async (
    matches: { homeTeam: string; awayTeam: string }[],
    league: string
  ): Promise<AIPrediction[]> => {
    setIsLoading(true);
    setError(null);
    
    try {
      const response = await fetch('/api/ai/predict/bulk', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ matches, league }),
      });
      
      if (!response.ok) {
        throw new Error('Failed to get bulk predictions');
      }
      
      const data = await response.json();
      return data.predictions as AIPrediction[];
    } catch (err) {
      setError(err instanceof Error ? err.message : 'An error occurred');
      return [];
    } finally {
      setIsLoading(false);
    }
  }, []);

  return {
    isLoading,
    error,
    getPrediction,
    getMatchAnalysis,
    getHeadToHead,
    getTeamForm,
    getBulkPredictions,
  };
}

// Utility function to generate simple AI prediction locally (fallback)
export function generateLocalPrediction(
  homeTeam: string,
  awayTeam: string,
  homeStats: { wins: number; played: number; setsWon: number; setsLost: number },
  awayStats: { wins: number; played: number; setsWon: number; setsLost: number }
): AIPrediction {
  // Calculate win rates
  const homeWinRate = homeStats.played > 0 ? homeStats.wins / homeStats.played : 0.5;
  const awayWinRate = awayStats.played > 0 ? awayStats.wins / awayStats.played : 0.5;
  
  // Calculate set ratios
  const homeSetRatio = homeStats.setsLost > 0 ? homeStats.setsWon / homeStats.setsLost : homeStats.setsWon || 1;
  const awaySetRatio = awayStats.setsLost > 0 ? awayStats.setsWon / awayStats.setsLost : awayStats.setsWon || 1;
  
  // Home advantage factor
  const homeAdvantage = 0.05;
  
  // Calculate probabilities
  let homeWinProb = (homeWinRate + homeAdvantage + (1 - awayWinRate)) / 2;
  let awayWinProb = 1 - homeWinProb;
  
  // Adjust based on set ratio
  const setRatioFactor = homeSetRatio / (homeSetRatio + awaySetRatio);
  homeWinProb = (homeWinProb + setRatioFactor) / 2;
  awayWinProb = 1 - homeWinProb;
  
  // Normalize to percentages
  homeWinProb = Math.round(homeWinProb * 100);
  awayWinProb = Math.round(awayWinProb * 100);
  
  // Determine predicted score
  let predictedScore: string;
  if (homeWinProb > 65) {
    predictedScore = '3-0';
  } else if (homeWinProb > 55) {
    predictedScore = '3-1';
  } else if (homeWinProb > 45) {
    predictedScore = homeWinProb > 50 ? '3-2' : '2-3';
  } else if (awayWinProb > 55) {
    predictedScore = '1-3';
  } else {
    predictedScore = '0-3';
  }
  
  // Calculate confidence
  const confidence = Math.max(homeWinProb, awayWinProb);
  
  return {
    matchId: `${homeTeam}-${awayTeam}`,
    homeTeam,
    awayTeam,
    predictedScore,
    confidence,
    homeWinProbability: homeWinProb,
    awayWinProbability: awayWinProb,
    analysis: generateAnalysisText(homeTeam, awayTeam, homeWinProb, awayWinProb),
    factors: [
      {
        name: 'Galibiyet OranÄ±',
        description: `${homeTeam}: ${Math.round(homeWinRate * 100)}%, ${awayTeam}: ${Math.round(awayWinRate * 100)}%`,
        impact: homeWinRate > awayWinRate ? 'positive' : 'negative',
        weight: 0.4,
        team: homeWinRate > awayWinRate ? 'home' : 'away',
      },
      {
        name: 'Set OranÄ±',
        description: `${homeTeam}: ${homeSetRatio.toFixed(2)}, ${awayTeam}: ${awaySetRatio.toFixed(2)}`,
        impact: homeSetRatio > awaySetRatio ? 'positive' : 'negative',
        weight: 0.3,
        team: homeSetRatio > awaySetRatio ? 'home' : 'away',
      },
      {
        name: 'Ev Sahibi AvantajÄ±',
        description: `${homeTeam} ev sahibi olarak oynuyor`,
        impact: 'positive',
        weight: 0.15,
        team: 'home',
      },
    ],
    lastUpdated: new Date().toISOString(),
  };
}

function generateAnalysisText(
  homeTeam: string, 
  awayTeam: string, 
  homeWinProb: number, 
  awayWinProb: number
): string {
  if (homeWinProb > 70) {
    return `${homeTeam} bu maÃ§ta aÃ§Ä±k favori. Ev sahibi avantajÄ± ve form durumu gÃ¶z Ã¶nÃ¼ne alÄ±ndÄ±ÄŸÄ±nda rahat bir galibiyet bekleniyor.`;
  } else if (homeWinProb > 55) {
    return `${homeTeam} hafif favori gÃ¶rÃ¼nÃ¼yor. Ancak ${awayTeam} sÃ¼rpriz yapabilecek kapasitede. Ã‡ekiÅŸmeli bir maÃ§ olmasÄ± bekleniyor.`;
  } else if (awayWinProb > 55) {
    return `${awayTeam} deplasmana raÄŸmen favorisi. ${homeTeam} ev sahibi avantajÄ±nÄ± kullanmakta zorlanabilir.`;
  } else {
    return `Ä°ki takÄ±m arasÄ±nda dengeli bir mÃ¼cadele bekleniyor. Her iki taraf da galibiyete yakÄ±n, maÃ§ son setlere gidebilir.`;
  }
}

```

## File: app\hooks\useLeagueQuery.ts
```
"use client";

import { useQuery, useQueryClient } from '@tanstack/react-query';
import { TeamStats, Match } from '../types';

interface RoundData {
    name?: string;
    matches?: Match[];
}

interface PoolData {
    name?: string;
    teams?: TeamStats[];
}

interface LeagueData {
    teams: TeamStats[];
    fixture: Match[];
    groups?: string[];
    rounds?: RoundData[];
    pools?: PoolData[];
}

interface LeagueConfig {
    hasGroups: boolean;
    apiEndpoint: string;
    name: string;
}

export function useLeagueQuery(
    leagueId: string,
    config: LeagueConfig,
    options?: {
        enabled?: boolean;
    }
) {
    return useQuery({
        queryKey: ['league', leagueId],
        queryFn: async () => {
            const res = await fetch(config.apiEndpoint);
            if (!res.ok) throw new Error(`Failed to fetch ${leagueId} data`);

            const json = await res.json();

            // Normalize data structure
            const normalizedData: LeagueData = {
                teams: json.teams || [],
                fixture: json.fixture || json.matches || [],
                groups: json.groups || (config.hasGroups ? extractGroups(json.teams) : undefined),
                rounds: json.rounds || undefined,
                pools: json.pools || undefined
            };

            return normalizedData;
        },
        staleTime: 1000 * 60 * 10, // 10 minutes
        gcTime: 1000 * 60 * 30, // 30 minutes
        retry: 2,
        enabled: options?.enabled !== false,
    });
}

export function useLeagueData(leagueId: string, config: LeagueConfig) {
    return useQuery({
        queryKey: ['league', leagueId, 'data'],
        queryFn: async () => {
            const res = await fetch(config.apiEndpoint);
            if (!res.ok) throw new Error(`Failed to fetch ${leagueId} data`);
            return res.json();
        },
        staleTime: 1000 * 60 * 10,
        gcTime: 1000 * 60 * 30,
        retry: 2,
    });
}

export function useInvalidateLeague(leagueId: string) {
    const queryClient = useQueryClient();
    
    return {
        invalidate: () => {
            queryClient.invalidateQueries({
                queryKey: ['league', leagueId]
            });
        },
        refetch: () => {
            queryClient.refetchQueries({
                queryKey: ['league', leagueId]
            });
        }
    };
}

// Helper to extract unique groups from teams
function extractGroups(teams: TeamStats[]): string[] {
    const groups = [...new Set(teams.map(t => t.groupName))].filter(Boolean);
    return groups.sort((a, b) => {
        const numA = parseInt(a.match(/\d+/)?.[0] || '0');
        const numB = parseInt(b.match(/\d+/)?.[0] || '0');
        return numA - numB;
    });
}

```

## File: app\hooks\useLocalStorage.ts
```
"use client";

import { useState, useEffect, useCallback } from 'react';

/**
 * Type-safe localStorage hook with SSR support
 */
export function useLocalStorage<T>(
    key: string,
    initialValue: T
): [T, (value: T | ((prev: T) => T)) => void, () => void] {
    // State to store our value
    const [storedValue, setStoredValue] = useState<T>(initialValue);
    const [isHydrated, setIsHydrated] = useState(false);

    // Hydrate from localStorage after mount
    useEffect(() => {
        const value = (() => {
            try {
                const item = window.localStorage.getItem(key);
                return item ? JSON.parse(item) : initialValue;
            } catch (error) {
                console.warn(`Error reading localStorage key "${key}":`, error);
                return initialValue;
            }
        })();

        // Defer state updates to avoid "cascading renders" warning 
        // and ensure the initial render matches the server output.
        Promise.resolve().then(() => {
            setStoredValue(value);
            setIsHydrated(true);
        });
    }, [key, initialValue]);

    // Return a wrapped version of useState's setter function
    const setValue = useCallback((value: T | ((prev: T) => T)) => {
        try {
            // Allow value to be a function for same API as useState
            const valueToStore = value instanceof Function ? value(storedValue) : value;
            setStoredValue(valueToStore);

            if (typeof window !== 'undefined') {
                window.localStorage.setItem(key, JSON.stringify(valueToStore));
            }
        } catch (error) {
            console.warn(`Error setting localStorage key "${key}":`, error);
        }
    }, [key, storedValue]);

    // Remove from localStorage
    const removeValue = useCallback(() => {
        try {
            setStoredValue(initialValue);
            if (typeof window !== 'undefined') {
                window.localStorage.removeItem(key);
            }
        } catch (error) {
            console.warn(`Error removing localStorage key "${key}":`, error);
        }
    }, [key, initialValue]);

    return [storedValue, setValue, removeValue];
}

export default useLocalStorage;

```

## File: app\hooks\useMatchSimulation.ts
```
"use client";

import { useState, useCallback, useEffect, useRef } from "react";
import {
  MatchSimulation,
  SimulatedSet,
  SimulatedPoint,
  SimulationMoment
} from "../types";

interface UseMatchSimulationOptions {
  speed?: number; // Animation speed multiplier
  autoPlay?: boolean;
}

interface UseMatchSimulationReturn {
  simulation: MatchSimulation | null;
  isSimulating: boolean;
  isPlaying: boolean;
  currentSet: number;
  currentPoint: number;
  progress: number; // 0-100
  // Actions
  startSimulation: (homeTeam: string, awayTeam: string) => Promise<void>;
  play: () => void;
  pause: () => void;
  reset: () => void;
  skipToEnd: () => void;
  setSpeed: (speed: number) => void;
}

// Simulate a single set
const simulateSet = (
  setNumber: number,
  endScore: number,
  homeTeam: string,
  awayTeam: string
): SimulatedSet => {
  const points: SimulatedPoint[] = [];
  let homeScore = 0;
  let awayScore = 0;
  let pointNumber = 0;

  // Randomly determine which team is slightly favored
  const homeBias = 0.48 + Math.random() * 0.08; // 48-56% for home

  while (true) {
    pointNumber++;

    // Determine point type
    const types: Array<'attack' | 'block' | 'ace' | 'error'> = ['attack', 'attack', 'attack', 'block', 'ace', 'error'];
    const type = types[Math.floor(Math.random() * types.length)];

    // Determine scorer
    const scorer = Math.random() < homeBias ? 'home' : 'away';

    if (scorer === 'home') {
      homeScore++;
    } else {
      awayScore++;
    }

    points.push({
      pointNumber,
      homeScore,
      awayScore,
      scorer,
      type,
    });

    // Check if set is over
    const maxScore = Math.max(homeScore, awayScore);
    const minScore = Math.min(homeScore, awayScore);

    if (maxScore >= endScore && maxScore - minScore >= 2) {
      break;
    }

    // Safety limit
    if (pointNumber > 100) break;
  }

  return {
    setNumber,
    homePoints: homeScore,
    awayPoints: awayScore,
    winner: homeScore > awayScore ? 'home' : 'away',
    pointByPoint: points,
  };
};

export function useMatchSimulation(
  options: UseMatchSimulationOptions = {}
): UseMatchSimulationReturn {
  const { speed: initialSpeed = 1, autoPlay = true } = options;

  const [simulation, setSimulation] = useState<MatchSimulation | null>(null);
  const [isSimulating, setIsSimulating] = useState(false);
  const [isPlaying, setIsPlaying] = useState(false);
  const [currentSet, setCurrentSet] = useState(0);
  const [currentPoint, setCurrentPoint] = useState(0);
  const [speed, setSpeedState] = useState(initialSpeed);

  const animationRef = useRef<NodeJS.Timeout | null>(null);
  const progressRef = useRef(0);
  const [progressState, setProgressState] = useState(0);

  // Generate a simulated match
  const generateSimulation = useCallback((
    homeTeam: string,
    awayTeam: string
  ): MatchSimulation => {
    const sets: SimulatedSet[] = [];
    let homeSetsWon = 0;
    let awaySetsWon = 0;
    let setNumber = 0;
    const moments: SimulationMoment[] = [];
    let totalDuration = 0;

    // Simulate sets until one team wins 3
    while (homeSetsWon < 3 && awaySetsWon < 3) {
      setNumber++;
      const isDecidingSet = homeSetsWon === 2 && awaySetsWon === 2;
      const setEndScore = isDecidingSet ? 15 : 25;

      const set = simulateSet(setNumber, setEndScore, homeTeam, awayTeam);
      sets.push(set);

      if (set.winner === 'home') {
        homeSetsWon++;
      } else {
        awaySetsWon++;
      }

      // Add set end moment
      moments.push({
        time: totalDuration + set.pointByPoint.length * 2,
        type: 'set_point',
        description: `${set.winner === 'home' ? homeTeam : awayTeam} ${setNumber}. seti kazandÄ± (${set.homePoints}-${set.awayPoints})`,
      });

      totalDuration += set.pointByPoint.length * 2;
    }

    const winner = homeSetsWon === 3 ? homeTeam : awayTeam;

    // Add match end moment
    moments.push({
      time: totalDuration,
      type: 'match_point',
      description: `${winner} maÃ§Ä± kazandÄ±! (${homeSetsWon}-${awaySetsWon})`,
    });

    return {
      matchId: `sim-${Date.now()}`,
      homeTeam,
      awayTeam,
      simulatedSets: sets,
      finalScore: `${homeSetsWon}-${awaySetsWon}`,
      winner,
      keyMoments: moments,
      duration: totalDuration,
    };
  }, []);

  // Calculate progress - use state to avoid accessing ref during render
  const progress = simulation
    ? (progressState / simulation.duration) * 100
    : 0;

  // Start simulation
  const startSimulation = useCallback(async (
    homeTeam: string,
    awayTeam: string
  ) => {
    setIsSimulating(true);
    setCurrentSet(0);
    setCurrentPoint(0);
    progressRef.current = 0;
    setProgressState(0);

    // Generate simulation
    const sim = generateSimulation(homeTeam, awayTeam);
    setSimulation(sim);
    setIsSimulating(false);

    if (autoPlay) {
      setIsPlaying(true);
    }
  }, [generateSimulation, autoPlay]);

  // Play animation
  const play = useCallback(() => {
    if (!simulation) return;
    setIsPlaying(true);
  }, [simulation]);

  // Pause animation
  const pause = useCallback(() => {
    setIsPlaying(false);
    if (animationRef.current) {
      clearTimeout(animationRef.current);
      animationRef.current = null;
    }
  }, []);

  // Reset simulation
  const reset = useCallback(() => {
    pause();
    setCurrentSet(0);
    setCurrentPoint(0);
    progressRef.current = 0;
    setProgressState(0);
  }, [pause]);

  // Skip to end
  const skipToEnd = useCallback(() => {
    if (!simulation) return;

    pause();
    setCurrentSet(simulation.simulatedSets.length - 1);
    const lastSet = simulation.simulatedSets[simulation.simulatedSets.length - 1];
    setCurrentPoint(lastSet.pointByPoint.length - 1);
    progressRef.current = simulation.duration;
    setProgressState(simulation.duration);
  }, [simulation, pause]);

  // Set speed
  const setSpeed = useCallback((newSpeed: number) => {
    setSpeedState(Math.max(0.25, Math.min(4, newSpeed)));
  }, []);

  // Animation loop
  useEffect(() => {
    if (!isPlaying || !simulation) return;

    const animate = () => {
      progressRef.current += 2 * speed;
      setProgressState(progressRef.current);

      // Find current set and point based on progress
      let elapsed = 0;
      let foundSet = 0;
      let foundPoint = 0;

      for (let s = 0; s < simulation.simulatedSets.length; s++) {
        const set = simulation.simulatedSets[s];
        for (let p = 0; p < set.pointByPoint.length; p++) {
          elapsed += 2;
          if (elapsed >= progressRef.current) {
            foundSet = s;
            foundPoint = p;
            break;
          }
        }
        if (elapsed >= progressRef.current) break;
      }

      setCurrentSet(foundSet);
      setCurrentPoint(foundPoint);

      // Check if animation is complete
      if (progressRef.current >= simulation.duration) {
        setIsPlaying(false);
        return;
      }

      animationRef.current = setTimeout(animate, 50 / speed);
    };

    animationRef.current = setTimeout(animate, 50 / speed);

    return () => {
      if (animationRef.current) {
        clearTimeout(animationRef.current);
      }
    };
  }, [isPlaying, simulation, speed]);

  // Cleanup on unmount
  useEffect(() => {
    return () => {
      if (animationRef.current) {
        clearTimeout(animationRef.current);
      }
    };
  }, []);

  return {
    simulation,
    isSimulating,
    isPlaying,
    currentSet,
    currentPoint,
    progress,
    startSimulation,
    play,
    pause,
    reset,
    skipToEnd,
    setSpeed,
  };
}

// Utility to get current state of simulation
export function getSimulationState(
  simulation: MatchSimulation,
  setIndex: number,
  pointIndex: number
) {
  const currentSetData = simulation.simulatedSets[setIndex];
  const currentPointData = currentSetData?.pointByPoint[pointIndex];

  let homeSetsWon = 0;
  let awaySetsWon = 0;

  for (let i = 0; i < setIndex; i++) {
    if (simulation.simulatedSets[i].winner === 'home') {
      homeSetsWon++;
    } else {
      awaySetsWon++;
    }
  }

  return {
    setScore: { home: homeSetsWon, away: awaySetsWon },
    currentSetScore: currentPointData
      ? { home: currentPointData.homeScore, away: currentPointData.awayScore }
      : { home: 0, away: 0 },
    lastPoint: currentPointData,
    isComplete: setIndex >= simulation.simulatedSets.length - 1 &&
      pointIndex >= currentSetData.pointByPoint.length - 1,
  };
}

```

## File: app\hooks\useModal.ts
```
'use client';

import { useEffect, useCallback, useRef } from 'react';

interface UseModalOptions {
  isOpen: boolean;
  onClose: () => void;
  closeOnEscape?: boolean;
  closeOnBackdrop?: boolean;
  trapFocus?: boolean;
}

/**
 * Hook for accessible modal behavior
 * - Escape key to close
 * - Focus trap within modal
 * - Click outside to close
 * - Prevents body scroll when open
 */
export function useModal({
  isOpen,
  onClose,
  closeOnEscape = true,
  closeOnBackdrop = true,
  trapFocus = true,
}: UseModalOptions) {
  const modalRef = useRef<HTMLDivElement>(null);
  const previousActiveElement = useRef<HTMLElement | null>(null);

  // Handle escape key
  const handleKeyDown = useCallback(
    (e: KeyboardEvent) => {
      if (closeOnEscape && e.key === 'Escape') {
        e.preventDefault();
        onClose();
      }

      // Focus trap
      if (trapFocus && e.key === 'Tab' && modalRef.current) {
        const focusableElements = modalRef.current.querySelectorAll<HTMLElement>(
          'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'
        );
        
        const firstElement = focusableElements[0];
        const lastElement = focusableElements[focusableElements.length - 1];

        if (e.shiftKey && document.activeElement === firstElement) {
          e.preventDefault();
          lastElement?.focus();
        } else if (!e.shiftKey && document.activeElement === lastElement) {
          e.preventDefault();
          firstElement?.focus();
        }
      }
    },
    [closeOnEscape, trapFocus, onClose]
  );

  // Handle backdrop click
  const handleBackdropClick = useCallback(
    (e: React.MouseEvent) => {
      if (closeOnBackdrop && e.target === e.currentTarget) {
        onClose();
      }
    },
    [closeOnBackdrop, onClose]
  );

  useEffect(() => {
    if (isOpen) {
      // Store current active element
      previousActiveElement.current = document.activeElement as HTMLElement;
      
      // Add event listener
      document.addEventListener('keydown', handleKeyDown);
      
      // Prevent body scroll
      document.body.style.overflow = 'hidden';
      
      // Focus first focusable element in modal
      if (trapFocus && modalRef.current) {
        const firstFocusable = modalRef.current.querySelector<HTMLElement>(
          'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'
        );
        firstFocusable?.focus();
      }
    }

    return () => {
      document.removeEventListener('keydown', handleKeyDown);
      document.body.style.overflow = '';
      
      // Restore focus to previous element
      if (previousActiveElement.current) {
        previousActiveElement.current.focus();
      }
    };
  }, [isOpen, handleKeyDown, trapFocus]);

  return {
    modalRef,
    handleBackdropClick,
  };
}

```

## File: app\hooks\usePerformance.ts
```
"use client";

import { useEffect } from 'react';

declare global {
    interface Window {
        gtag?: (...args: unknown[]) => void;
    }
}

// Extended PerformanceEntry types for Web Vitals
interface LCPEntry extends PerformanceEntry {
    renderTime?: number;
    loadTime?: number;
}

interface LayoutShiftEntry extends PerformanceEntry {
    hadRecentInput?: boolean;
    value: number;
}

interface InteractionEntry extends PerformanceEntry {
    processingDuration?: number;
}

interface WebVitals {
    name: string;
    value: number;
    rating?: 'good' | 'needs-improvement' | 'poor';
}

/**
 * Track Web Vitals (LCP, FID, CLS)
 * Useful for performance monitoring and optimization
 */
export function useWebVitals() {
    useEffect(() => {
        // Largest Contentful Paint
        if ('PerformanceObserver' in window) {
            try {
                const lcpObserver = new PerformanceObserver((entryList) => {
                    const entries = entryList.getEntries();
                    const lastEntry = entries[entries.length - 1] as LCPEntry;
                    if (lastEntry) {
                        const vital: WebVitals = {
                            name: 'LCP',
                            value: lastEntry.renderTime || lastEntry.loadTime || lastEntry.startTime || 0,
                        };
                        // LCP > 2.5s is poor
                        if (vital.value > 2500) {
                            vital.rating = 'poor';
                        } else if (vital.value > 1200) {
                            vital.rating = 'needs-improvement';
                        } else {
                            vital.rating = 'good';
                        }
                        sendAnalytics(vital);
                    }
                });
                lcpObserver.observe({ entryTypes: ['largest-contentful-paint'], buffered: true });
            } catch {
                console.warn('LCP observer not supported');
            }

            // Cumulative Layout Shift
            try {
                const clsObserver = new PerformanceObserver((entryList) => {
                    let clsValue = 0;
                    for (const entry of entryList.getEntries()) {
                        const shiftEntry = entry as LayoutShiftEntry;
                        if (shiftEntry.hadRecentInput) continue;
                        clsValue += shiftEntry.value;
                    }
                    const vital: WebVitals = {
                        name: 'CLS',
                        value: clsValue,
                    };
                    // CLS > 0.25 is poor
                    if (vital.value > 0.25) {
                        vital.rating = 'poor';
                    } else if (vital.value > 0.1) {
                        vital.rating = 'needs-improvement';
                    } else {
                        vital.rating = 'good';
                    }
                    sendAnalytics(vital);
                });
                clsObserver.observe({ type: 'layout-shift', buffered: true });
            } catch {
                console.warn('CLS observer not supported');
            }

            // First Input Delay / Interaction to Next Paint
            try {
                const ttpObserver = new PerformanceObserver((entryList) => {
                    const entries = entryList.getEntries();
                    if (entries.length > 0) {
                        const entry = entries[0] as InteractionEntry;
                        const vital: WebVitals = {
                            name: 'INP',
                            value: entry.processingDuration || 0,
                        };
                        // INP > 500ms is poor
                        if (vital.value > 500) {
                            vital.rating = 'poor';
                        } else if (vital.value > 200) {
                            vital.rating = 'needs-improvement';
                        } else {
                            vital.rating = 'good';
                        }
                        sendAnalytics(vital);
                    }
                });
                ttpObserver.observe({ entryTypes: ['first-input', 'interaction'], buffered: true });
            } catch {
                console.warn('INP observer not supported');
            }
        }
    }, []);
}

function sendAnalytics(vital: WebVitals) {
    // Send to Google Analytics if available
    if (typeof window !== 'undefined' && window.gtag) {
        window.gtag('event', vital.name, {
            value: Math.round(vital.value),
            event_category: 'Web Vitals',
            event_label: vital.name,
            non_interaction: true,
        });
    }

    // Log to console in development
    if (process.env.NODE_ENV === 'development') {
        console.log(`[${vital.name}] ${vital.value}ms - ${vital.rating}`);
    }
}

/**
 * Track Navigation Timing
 */
export function useNavigationTiming() {
    useEffect(() => {
        const logNavigationMetrics = () => {
            if (typeof window !== 'undefined' && 'performance' in window) {
                const perfData = performance.getEntriesByType('navigation')[0] as PerformanceNavigationTiming;
                
                if (perfData) {
                    const metrics = {
                        'DNS Lookup': perfData.domainLookupEnd - perfData.domainLookupStart,
                        'TCP Connection': perfData.connectEnd - perfData.connectStart,
                        'Request Time': perfData.responseStart - perfData.requestStart,
                        'Response Time': perfData.responseEnd - perfData.responseStart,
                        'DOM Processing': perfData.domContentLoadedEventEnd - perfData.domContentLoadedEventStart,
                        'Page Load Time': perfData.loadEventEnd - perfData.loadEventStart,
                        'Total Time to Interactive': perfData.loadEventEnd - perfData.fetchStart,
                    };

                    if (process.env.NODE_ENV === 'development') {
                        console.group('Navigation Timing Metrics');
                        Object.entries(metrics).forEach(([key, value]) => {
                            console.log(`${key}: ${Math.round(value)}ms`);
                        });
                        console.groupEnd();
                    }
                }
            }
        };

        // Wait for page to fully load
        window.addEventListener('load', logNavigationMetrics);
        return () => window.removeEventListener('load', logNavigationMetrics);
    }, []);
}

```

## File: app\hooks\usePredictions.ts
```
"use client";

import { useQuery, useMutation, useQueryClient } from "@tanstack/react-query";
import { createClient } from "../utils/supabase";
import { useAuth } from "../context/AuthContext";

// Types
export interface Prediction {
    id?: string;
    user_id: string;
    league: "vsl" | "1lig" | "2lig" | "cev-cl";
    group_name?: string;
    match_id: string;
    score: string;
    created_at?: string;
    updated_at?: string;
}

export type PredictionOverrides = Record<string, string>;

// ============================================
// FETCH PREDICTIONS
// ============================================
async function fetchPredictions(
    userId: string,
    league: string,
    groupName?: string
): Promise<PredictionOverrides> {
    const supabase = createClient();
    if (!supabase) {
        // Fallback to localStorage if Supabase is not configured
        const storageKey = getStorageKey(league);
        const saved = localStorage.getItem(storageKey);
        if (saved) {
            const parsed = JSON.parse(saved);
            if (groupName && parsed[groupName]) {
                return parsed[groupName];
            }
            return parsed;
        }
        return {};
    }

    let query = supabase
        .from("predictions")
        .select("match_id, score")
        .eq("user_id", userId)
        .eq("league", league);

    if (groupName) {
        query = query.eq("group_name", groupName);
    }

    const { data, error } = await query;

    if (error) {
        console.error("Error fetching predictions:", error);
        return {};
    }

    // Convert array to Record<matchId, score>
    const overrides: PredictionOverrides = {};
    data?.forEach((p) => {
        overrides[p.match_id] = p.score;
    });

    return overrides;
}

// ============================================
// SAVE PREDICTION
// ============================================
async function savePrediction(
    userId: string,
    league: string,
    matchId: string,
    score: string,
    groupName?: string
): Promise<void> {
    const supabase = createClient();
    if (!supabase) {
        // Fallback to localStorage
        const storageKey = getStorageKey(league);
        const saved = localStorage.getItem(storageKey);
        const existing = saved ? JSON.parse(saved) : {};

        if (groupName) {
            if (!existing[groupName]) existing[groupName] = {};
            if (score) {
                existing[groupName][matchId] = score;
            } else {
                delete existing[groupName][matchId];
            }
        } else {
            if (score) {
                existing[matchId] = score;
            } else {
                delete existing[matchId];
            }
        }

        localStorage.setItem(storageKey, JSON.stringify(existing));
        return;
    }

    if (!score) {
        // Delete prediction
        await supabase
            .from("predictions")
            .delete()
            .eq("user_id", userId)
            .eq("league", league)
            .eq("match_id", matchId);
    } else {
        // Upsert prediction
        await supabase.from("predictions").upsert(
            {
                user_id: userId,
                league,
                group_name: groupName || null,
                match_id: matchId,
                score,
            },
            { onConflict: "user_id,league,match_id" }
        );
    }
}

// ============================================
// BULK SAVE PREDICTIONS
// ============================================
async function bulkSavePredictions(
    userId: string,
    league: string,
    overrides: PredictionOverrides,
    groupName?: string
): Promise<void> {
    const supabase = createClient();
    if (!supabase) {
        // Fallback to localStorage
        const storageKey = getStorageKey(league);
        const saved = localStorage.getItem(storageKey);
        const existing = saved ? JSON.parse(saved) : {};

        if (groupName) {
            existing[groupName] = overrides;
        } else {
            Object.assign(existing, overrides);
        }

        localStorage.setItem(storageKey, JSON.stringify(existing));
        return;
    }

    // Convert overrides to array of predictions
    const predictions = Object.entries(overrides).map(([matchId, score]) => ({
        user_id: userId,
        league,
        group_name: groupName || null,
        match_id: matchId,
        score,
    }));

    if (predictions.length > 0) {
        await supabase
            .from("predictions")
            .upsert(predictions, { onConflict: "user_id,league,match_id" });
    }
}

// ============================================
// CLEAR PREDICTIONS
// ============================================
async function clearPredictions(
    userId: string,
    league: string,
    groupName?: string
): Promise<void> {
    const supabase = createClient();
    if (!supabase) {
        const storageKey = getStorageKey(league);
        if (groupName) {
            const saved = localStorage.getItem(storageKey);
            const existing = saved ? JSON.parse(saved) : {};
            delete existing[groupName];
            localStorage.setItem(storageKey, JSON.stringify(existing));
        } else {
            localStorage.removeItem(storageKey);
        }
        return;
    }

    let query = supabase
        .from("predictions")
        .delete()
        .eq("user_id", userId)
        .eq("league", league);

    if (groupName) {
        query = query.eq("group_name", groupName);
    }

    await query;
}

// ============================================
// STORAGE KEY HELPER
// ============================================
function getStorageKey(league: string): string {
    switch (league) {
        case "1lig":
            return "1ligGroupScenarios";
        case "2lig":
            return "groupScenarios";
        case "cev-cl":
            return "cevclGroupScenarios";
        case "vsl":
            return "vslGroupScenarios";
        default:
            return `${league}Scenarios`;
    }
}

// ============================================
// REACT QUERY HOOKS
// ============================================

/**
 * Hook to fetch and manage predictions for a specific league
 */
export function usePredictions(league: string, groupName?: string) {
    const { user } = useAuth();
    const queryClient = useQueryClient();

    const userId = user?.id || "anonymous";

    const query = useQuery({
        queryKey: ["predictions", league, groupName, userId],
        queryFn: () => fetchPredictions(userId, league, groupName),
        enabled: true, // Always enabled, will use localStorage fallback
    });

    const saveMutation = useMutation({
        mutationFn: ({
            matchId,
            score,
        }: {
            matchId: string;
            score: string;
        }) => savePrediction(userId, league, matchId, score, groupName),
        onMutate: async ({ matchId, score }) => {
            // Optimistic update
            await queryClient.cancelQueries({
                queryKey: ["predictions", league, groupName, userId],
            });
            const previousData = queryClient.getQueryData<PredictionOverrides>([
                "predictions",
                league,
                groupName,
                userId,
            ]);

            queryClient.setQueryData<PredictionOverrides>(
                ["predictions", league, groupName, userId],
                (old = {}) => {
                    const newData = { ...old };
                    if (score) {
                        newData[matchId] = score;
                    } else {
                        delete newData[matchId];
                    }
                    return newData;
                }
            );

            return { previousData };
        },
        onError: (err, variables, context) => {
            if (context?.previousData) {
                queryClient.setQueryData(
                    ["predictions", league, groupName, userId],
                    context.previousData
                );
            }
        },
        onSettled: () => {
            queryClient.invalidateQueries({
                queryKey: ["predictions", league, groupName, userId],
            });
        },
    });

    const bulkSaveMutation = useMutation({
        mutationFn: (overrides: PredictionOverrides) =>
            bulkSavePredictions(userId, league, overrides, groupName),
        onSuccess: () => {
            queryClient.invalidateQueries({
                queryKey: ["predictions", league, groupName, userId],
            });
        },
    });

    const clearMutation = useMutation({
        mutationFn: () => clearPredictions(userId, league, groupName),
        onSuccess: () => {
            queryClient.setQueryData(
                ["predictions", league, groupName, userId],
                {}
            );
        },
    });

    return {
        overrides: query.data || {},
        isLoading: query.isLoading,
        isError: query.isError,
        error: query.error,
        // Actions
        setPrediction: (matchId: string, score: string) =>
            saveMutation.mutate({ matchId, score }),
        bulkSave: (overrides: PredictionOverrides) =>
            bulkSaveMutation.mutate(overrides),
        clear: () => clearMutation.mutate(),
        // Mutation states
        isSaving: saveMutation.isPending,
        isClearing: clearMutation.isPending,
    };
}

```

## File: app\hooks\usePushNotifications.ts
```
'use client';

import { useState, useEffect, useCallback } from 'react';

interface PushSubscriptionState {
  isSupported: boolean;
  isSubscribed: boolean;
  isLoading: boolean;
  error: string | null;
}

/**
 * Hook for managing push notification subscriptions
 */
export function usePushNotifications() {
  const [state, setState] = useState<PushSubscriptionState>({
    isSupported: false,
    isSubscribed: false,
    isLoading: true,
    error: null,
  });

  useEffect(() => {
    checkSubscription();
  }, []);

  const checkSubscription = async () => {
    // Check if push notifications are supported
    if (!('serviceWorker' in navigator) || !('PushManager' in window)) {
      setState(prev => ({ ...prev, isSupported: false, isLoading: false }));
      return;
    }

    setState(prev => ({ ...prev, isSupported: true }));

    try {
      const registration = await navigator.serviceWorker.ready;
      const subscription = await registration.pushManager.getSubscription();
      
      setState(prev => ({
        ...prev,
        isSubscribed: !!subscription,
        isLoading: false,
      }));
    } catch {
      setState(prev => ({
        ...prev,
        error: 'Bildirim durumu kontrol edilemedi',
        isLoading: false,
      }));
    }
  };

  const subscribe = useCallback(async () => {
    setState(prev => ({ ...prev, isLoading: true, error: null }));

    try {
      // Request notification permission
      const permission = await Notification.requestPermission();
      
      if (permission !== 'granted') {
        setState(prev => ({
          ...prev,
          error: 'Bildirim izni reddedildi',
          isLoading: false,
        }));
        return false;
      }

      const registration = await navigator.serviceWorker.ready;
      
      // Get VAPID public key from environment
      const vapidPublicKey = process.env.NEXT_PUBLIC_VAPID_PUBLIC_KEY;
      
      if (!vapidPublicKey) {
        setState(prev => ({
          ...prev,
          error: 'VAPID key bulunamadÄ±',
          isLoading: false,
        }));
        return false;
      }

      // Subscribe to push notifications
      const subscription = await registration.pushManager.subscribe({
        userVisibleOnly: true,
        applicationServerKey: urlBase64ToUint8Array(vapidPublicKey),
      });

      // Send subscription to server
      const response = await fetch('/api/push/subscribe', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(subscription),
      });

      if (!response.ok) {
        throw new Error('Sunucu aboneliÄŸi kaydedemedi');
      }

      setState(prev => ({
        ...prev,
        isSubscribed: true,
        isLoading: false,
      }));

      return true;
    } catch (error) {
      setState(prev => ({
        ...prev,
        error: error instanceof Error ? error.message : 'Abonelik baÅŸarÄ±sÄ±z',
        isLoading: false,
      }));
      return false;
    }
  }, []);

  const unsubscribe = useCallback(async () => {
    setState(prev => ({ ...prev, isLoading: true, error: null }));

    try {
      const registration = await navigator.serviceWorker.ready;
      const subscription = await registration.pushManager.getSubscription();

      if (subscription) {
        await subscription.unsubscribe();
        
        // Notify server
        await fetch('/api/push/unsubscribe', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ endpoint: subscription.endpoint }),
        });
      }

      setState(prev => ({
        ...prev,
        isSubscribed: false,
        isLoading: false,
      }));

      return true;
    } catch {
      setState(prev => ({
        ...prev,
        error: 'Abonelik iptal edilemedi',
        isLoading: false,
      }));
      return false;
    }
  }, []);

  return {
    ...state,
    subscribe,
    unsubscribe,
  };
}

/**
 * Convert VAPID public key from base64 to Uint8Array
 */
function urlBase64ToUint8Array(base64String: string): ArrayBuffer {
  const padding = '='.repeat((4 - (base64String.length % 4)) % 4);
  const base64 = (base64String + padding)
    .replace(/-/g, '+')
    .replace(/_/g, '/');

  const rawData = window.atob(base64);
  const outputArray = new Uint8Array(rawData.length);

  for (let i = 0; i < rawData.length; ++i) {
    outputArray[i] = rawData.charCodeAt(i);
  }
  return outputArray.buffer;
}

```

## File: app\hooks\useSimulationEngine.ts
```
"use client";

import { useMemo, useCallback } from "react";
import { Match, TeamStats } from "../types";
import { calculateLiveStandings, getOutcomeFromScore, SCORES } from "../utils/calculatorUtils";
import { calculateElo } from "../utils/eloCalculator";

// Types
export type SimulationMode = "smart" | "random";

export interface SimulationResult {
    standings: TeamStats[];
    eloRatings: Map<string, number>;
    completedMatches: number;
    totalMatches: number;
    progress: number;
}

export interface UseSimulationEngineOptions {
    teams: TeamStats[];
    matches: Match[];
    overrides: Record<string, string>;
}

export interface UseSimulationEngineReturn {
    // Computed data
    standings: TeamStats[];
    eloRatings: Map<string, number>;
    teamRanks: Map<string, number>;
    progress: { completed: number; total: number; percentage: number };

    // Actions
    simulateMatch: (matchId: string, score: string) => Record<string, string>;
    autoSimulate: (mode: SimulationMode, unplayedMatches: Match[]) => Record<string, string>;
    clearPredictions: () => Record<string, string>;

    // Utilities
    getTeamElo: (teamName: string) => number;
    predictMatchScore: (homeTeam: string, awayTeam: string) => string;
    getRandomScore: () => string;
}

/**
 * useSimulationEngine - Encapsulates all simulation business logic
 * 
 * This hook separates the calculation/simulation logic from UI concerns,
 * making it testable and reusable across different prediction pages.
 */
export function useSimulationEngine({
    teams,
    matches,
    overrides,
}: UseSimulationEngineOptions): UseSimulationEngineReturn {

    // ============================================
    // COMPUTED VALUES (Memoized)
    // ============================================

    /**
     * Calculate live standings based on current overrides
     */
    const standings = useMemo(() => {
        return calculateLiveStandings(teams, matches, overrides);
    }, [teams, matches, overrides]);

    /**
     * Calculate ELO ratings from played matches
     */
    const eloRatings = useMemo(() => {
        return calculateElo(teams, matches);
    }, [teams, matches]);

    /**
     * Map team names to their current rank
     */
    const teamRanks = useMemo(() => {
        const ranks = new Map<string, number>();
        standings.forEach((team, index) => {
            ranks.set(team.name, index + 1);
        });
        return ranks;
    }, [standings]);

    /**
     * Calculate match completion progress
     */
    const progress = useMemo(() => {
        const unplayedMatches = matches.filter(m => !m.isPlayed);
        const predictedCount = unplayedMatches.filter(m => {
            const matchId = `${m.homeTeam}-${m.awayTeam}`;
            return overrides[matchId] !== undefined;
        }).length;

        return {
            completed: predictedCount,
            total: unplayedMatches.length,
            percentage: unplayedMatches.length > 0
                ? Math.round((predictedCount / unplayedMatches.length) * 100)
                : 100,
        };
    }, [matches, overrides]);

    // ============================================
    // UTILITY FUNCTIONS
    // ============================================

    /**
     * Get ELO rating for a team
     */
    const getTeamElo = useCallback((teamName: string): number => {
        return eloRatings.get(teamName) || 1200;
    }, [eloRatings]);

    /**
     * Predict match score based on ELO difference
     */
    const predictMatchScore = useCallback((homeTeam: string, awayTeam: string): string => {
        const homeElo = getTeamElo(homeTeam);
        const awayElo = getTeamElo(awayTeam);
        const eloDiff = homeElo - awayElo;

        // Calculate win probability using ELO formula
        const homeWinProb = 1 / (1 + Math.pow(10, -eloDiff / 400));

        // Determine score based on probability
        const rand = Math.random();

        if (homeWinProb > 0.65) {
            // Strong home favorite
            return rand < 0.5 ? "3-0" : "3-1";
        } else if (homeWinProb > 0.55) {
            // Slight home favorite
            return rand < 0.4 ? "3-1" : rand < 0.7 ? "3-2" : "3-0";
        } else if (homeWinProb > 0.45) {
            // Toss-up
            return rand < 0.5
                ? (rand < 0.25 ? "3-2" : "3-1")
                : (rand < 0.75 ? "2-3" : "1-3");
        } else if (homeWinProb > 0.35) {
            // Slight away favorite
            return rand < 0.4 ? "1-3" : rand < 0.7 ? "2-3" : "0-3";
        } else {
            // Strong away favorite
            return rand < 0.5 ? "0-3" : "1-3";
        }
    }, [getTeamElo]);

    /**
     * Get a random valid score
     */
    const getRandomScore = useCallback((): string => {
        return SCORES[Math.floor(Math.random() * SCORES.length)];
    }, []);

    // ============================================
    // SIMULATION ACTIONS
    // ============================================

    /**
     * Simulate a single match with a given score
     * Returns new overrides object (immutable)
     */
    const simulateMatch = useCallback((matchId: string, score: string): Record<string, string> => {
        if (!score) {
            // Remove prediction
            const newOverrides = { ...overrides };
            delete newOverrides[matchId];
            return newOverrides;
        }

        // Validate score
        const outcome = getOutcomeFromScore(score);
        if (!outcome) {
            console.warn(`Invalid score: ${score}`);
            return overrides;
        }

        return { ...overrides, [matchId]: score };
    }, [overrides]);

    /**
     * Auto-simulate all unplayed matches
     */
    const autoSimulate = useCallback((
        mode: SimulationMode,
        unplayedMatches: Match[]
    ): Record<string, string> => {
        const newOverrides = { ...overrides };

        unplayedMatches.forEach(match => {
            const matchId = `${match.homeTeam}-${match.awayTeam}`;

            if (mode === "smart") {
                newOverrides[matchId] = predictMatchScore(match.homeTeam, match.awayTeam);
            } else {
                newOverrides[matchId] = getRandomScore();
            }
        });

        return newOverrides;
    }, [overrides, predictMatchScore, getRandomScore]);

    /**
     * Clear all predictions
     */
    const clearPredictions = useCallback((): Record<string, string> => {
        return {};
    }, []);

    // ============================================
    // RETURN
    // ============================================

    return {
        // Computed data
        standings,
        eloRatings,
        teamRanks,
        progress,

        // Actions
        simulateMatch,
        autoSimulate,
        clearPredictions,

        // Utilities
        getTeamElo,
        predictMatchScore,
        getRandomScore,
    };
}

// ============================================
// PURE FUNCTIONS (For Unit Testing)
// ============================================

/**
 * Pure function to calculate win probability from ELO ratings
 */
export function calculateWinProbability(homeElo: number, awayElo: number): number {
    return 1 / (1 + Math.pow(10, -(homeElo - awayElo) / 400));
}

/**
 * Pure function to determine score based on win probability
 */
export function scoreFromProbability(winProb: number, randomValue: number): string {
    if (winProb > 0.65) {
        return randomValue < 0.5 ? "3-0" : "3-1";
    } else if (winProb > 0.55) {
        return randomValue < 0.4 ? "3-1" : randomValue < 0.7 ? "3-2" : "3-0";
    } else if (winProb > 0.45) {
        return randomValue < 0.5
            ? (randomValue < 0.25 ? "3-2" : "3-1")
            : (randomValue < 0.75 ? "2-3" : "1-3");
    } else if (winProb > 0.35) {
        return randomValue < 0.4 ? "1-3" : randomValue < 0.7 ? "2-3" : "0-3";
    } else {
        return randomValue < 0.5 ? "0-3" : "1-3";
    }
}

```

## File: app\hooks\useUndoableAction.ts
```
"use client";

import { useState, useCallback, useRef } from 'react';
import { useToast } from '../components/Toast';

interface UseUndoableActionOptions<T> {
    /** Message to show in the toast */
    message: string;
    /** Duration in ms before undo expires (default: 5000) */
    duration?: number;
    /** Callback when the action is executed */
    onExecute: () => T;
    /** Callback to restore previous state (receives the stored state) */
    onUndo: (previousState: T) => void;
}

/**
 * Hook for creating undoable actions
 * 
 * Usage:
 * ```tsx
 * const { execute } = useUndoableAction({
 *   message: 'Tahminler temizlendi',
 *   onExecute: () => {
 *     const prev = predictions;
 *     setPredictions({});
 *     return prev; // Return state to restore
 *   },
 *   onUndo: (prev) => setPredictions(prev)
 * });
 * 
 * // In button:
 * <button onClick={execute}>SÄ±fÄ±rla</button>
 * ```
 */
export function useUndoableAction<T>({
    message,
    duration = 5000,
    onExecute,
    onUndo,
}: UseUndoableActionOptions<T>) {
    const { showUndoToast } = useToast();
    const previousStateRef = useRef<T | null>(null);
    const [isUndoable, setIsUndoable] = useState(false);

    const execute = useCallback(() => {
        // Store previous state
        const previousState = onExecute();
        previousStateRef.current = previousState;
        setIsUndoable(true);

        // Show undo toast
        showUndoToast(message, () => {
            if (previousStateRef.current !== null) {
                onUndo(previousStateRef.current);
                previousStateRef.current = null;
            }
            setIsUndoable(false);
        }, duration);

        // Clear undo ability after duration
        setTimeout(() => {
            previousStateRef.current = null;
            setIsUndoable(false);
        }, duration);
    }, [message, duration, onExecute, onUndo, showUndoToast]);

    const undo = useCallback(() => {
        if (previousStateRef.current !== null) {
            onUndo(previousStateRef.current);
            previousStateRef.current = null;
            setIsUndoable(false);
        }
    }, [onUndo]);

    return {
        execute,
        undo,
        isUndoable,
    };
}

```

## File: app\hooks\useUserStats.ts
```
"use client";

import { useQuery, useMutation, useQueryClient } from "@tanstack/react-query";
import { createClient } from "../utils/supabase";
import { useAuth } from "../context/AuthContext";
import { GameState, AchievementId, LEVEL_THRESHOLDS } from "../types";
import { ACHIEVEMENTS, calculateLevel, getXPForNextLevel, getLevelTitle } from "../utils/gameState";

// Types
interface UserStats {
    user_id: string;
    xp: number;
    level: number;
    favorite_team: string | null;
    achievements: string[];
    stats: {
        totalPredictions: number;
        correctPredictions: number;
        currentStreak: number;
        bestStreak: number;
        predictedChampions: string[];
    };
    sound_enabled: boolean;
    last_active_date: string;
}

const STORAGE_KEY = "volleySimGameState";

// ============================================
// FETCH USER STATS
// ============================================
async function fetchUserStats(userId: string): Promise<GameState> {
    const supabase = createClient();

    // Default state
    const defaultState: GameState = {
        xp: 0,
        level: 1,
        favoriteTeam: null,
        achievements: [],
        quests: [],
        stats: {
            totalPredictions: 0,
            correctPredictions: 0,
            currentStreak: 0,
            bestStreak: 0,
            predictedChampions: [],
        },
        soundEnabled: true,
        lastActiveDate: new Date().toISOString().split("T")[0],
    };

    if (!supabase || userId === "anonymous") {
        // Fallback to localStorage
        const saved = localStorage.getItem(STORAGE_KEY);
        if (saved) {
            return { ...defaultState, ...JSON.parse(saved) };
        }
        return defaultState;
    }

    const { data, error } = await supabase
        .from("user_stats")
        .select("*")
        .eq("user_id", userId)
        .single();

    if (error || !data) {
        // Try localStorage as fallback
        const saved = localStorage.getItem(STORAGE_KEY);
        if (saved) {
            return { ...defaultState, ...JSON.parse(saved) };
        }
        return defaultState;
    }

    // Map database fields to GameState
    return {
        xp: data.xp,
        level: data.level,
        favoriteTeam: data.favorite_team,
        achievements: data.achievements.map((id: string) => {
            const def = ACHIEVEMENTS[id as AchievementId];
            return def ? { ...def, unlockedAt: new Date().toISOString() } : null;
        }).filter(Boolean),
        quests: [],
        stats: data.stats,
        soundEnabled: data.sound_enabled,
        lastActiveDate: data.last_active_date,
    };
}

// ============================================
// SAVE USER STATS
// ============================================
async function saveUserStats(userId: string, state: Partial<GameState>): Promise<void> {
    const supabase = createClient();

    if (!supabase || userId === "anonymous") {
        // Fallback to localStorage
        const saved = localStorage.getItem(STORAGE_KEY);
        const existing = saved ? JSON.parse(saved) : {};
        localStorage.setItem(STORAGE_KEY, JSON.stringify({ ...existing, ...state }));
        return;
    }

    const updateData: Partial<UserStats> = {};

    if (state.xp !== undefined) updateData.xp = state.xp;
    if (state.level !== undefined) updateData.level = state.level;
    if (state.favoriteTeam !== undefined) updateData.favorite_team = state.favoriteTeam;
    if (state.achievements !== undefined) {
        updateData.achievements = state.achievements.map(a => a.id);
    }
    if (state.stats !== undefined) updateData.stats = state.stats;
    if (state.soundEnabled !== undefined) updateData.sound_enabled = state.soundEnabled;

    await supabase
        .from("user_stats")
        .upsert({ user_id: userId, ...updateData }, { onConflict: "user_id" });
}

// ============================================
// REACT QUERY HOOK
// ============================================
export function useUserStats() {
    const { user } = useAuth();
    const queryClient = useQueryClient();
    const userId = user?.id || "anonymous";

    const query = useQuery({
        queryKey: ["userStats", userId],
        queryFn: () => fetchUserStats(userId),
    });

    const updateMutation = useMutation({
        mutationFn: (updates: Partial<GameState>) => saveUserStats(userId, updates),
        onMutate: async (updates) => {
            await queryClient.cancelQueries({ queryKey: ["userStats", userId] });
            const previous = queryClient.getQueryData<GameState>(["userStats", userId]);

            queryClient.setQueryData<GameState>(["userStats", userId], (old) => ({
                ...old!,
                ...updates,
            }));

            return { previous };
        },
        onError: (err, variables, context) => {
            if (context?.previous) {
                queryClient.setQueryData(["userStats", userId], context.previous);
            }
        },
    });

    const gameState = query.data;

    // Add XP
    const addXP = (amount: number) => {
        if (!gameState) return;
        const newXP = gameState.xp + amount;
        const newLevel = calculateLevel(newXP);
        updateMutation.mutate({ xp: newXP, level: newLevel });
    };

    // Record prediction
    const recordPrediction = (isCorrect: boolean) => {
        if (!gameState) return;
        const newStats = { ...gameState.stats };
        newStats.totalPredictions++;

        if (isCorrect) {
            newStats.correctPredictions++;
            newStats.currentStreak++;
            if (newStats.currentStreak > newStats.bestStreak) {
                newStats.bestStreak = newStats.currentStreak;
            }
        } else {
            newStats.currentStreak = 0;
        }

        updateMutation.mutate({ stats: newStats });
    };

    // Unlock achievement
    const unlockAchievement = (id: AchievementId): boolean => {
        if (!gameState) return false;
        if (gameState.achievements.some(a => a.id === id)) return false;

        const def = ACHIEVEMENTS[id];
        if (!def) return false;

        const newAchievement = { ...def, unlockedAt: new Date().toISOString() };
        const newXP = gameState.xp + def.xpReward;

        updateMutation.mutate({
            xp: newXP,
            level: calculateLevel(newXP),
            achievements: [...gameState.achievements, newAchievement],
        });

        return true;
    };

    // Set favorite team
    const setFavoriteTeam = (teamName: string | null) => {
        updateMutation.mutate({ favoriteTeam: teamName });
    };

    // Toggle sound
    const toggleSound = () => {
        if (!gameState) return;
        updateMutation.mutate({ soundEnabled: !gameState.soundEnabled });
    };

    return {
        gameState: gameState || {
            xp: 0,
            level: 1,
            favoriteTeam: null,
            achievements: [],
            quests: [],
            stats: { totalPredictions: 0, correctPredictions: 0, currentStreak: 0, bestStreak: 0, predictedChampions: [] },
            soundEnabled: true,
            lastActiveDate: new Date().toISOString().split("T")[0],
        },
        isLoaded: !query.isLoading,
        isLoading: query.isLoading,
        addXP,
        recordPrediction,
        unlockAchievement,
        setFavoriteTeam,
        toggleSound,
        hasAchievement: (id: AchievementId) => gameState?.achievements.some(a => a.id === id) || false,
        getLevelTitle: () => getLevelTitle(gameState?.level || 1),
        getXPProgress: () => {
            const level = gameState?.level || 1;
            const xp = gameState?.xp || 0;
            const currentLevelXP = LEVEL_THRESHOLDS[level - 1] || 0;
            const nextLevelXP = getXPForNextLevel(level);
            const progress = xp - currentLevelXP;
            const required = nextLevelXP - currentLevelXP;
            return { progress, required, percentage: (progress / required) * 100 };
        },
    };
}

```

## File: app\leaderboard\LeaderboardClient.tsx
```
"use client";

import { useState, useEffect } from "react";
import { useAuth } from "../context/AuthContext";
import { Card, CardHeader, CardTitle, CardContent } from "../components/ui/Card";
import { Button } from "../components/ui/Button";
import { Badge } from "../components/ui/Badge";
import { Skeleton } from "../components/ui/Skeleton";
import { EmptyState } from "../components/ui/EmptyState";
import { Trophy, TrendingUp, Calendar, Zap, Info, Award } from "lucide-react";
import { cn } from "@/lib/utils";

interface LeaderboardEntry {
    rank: number;
    user_id: string;
    display_name: string;
    total_points: number;
    correct_predictions: number;
    total_predictions: number;
    current_streak: number;
    best_streak: number;
    weekly_points: number;
    monthly_points: number;
}

type LeaderboardType = 'total' | 'weekly' | 'monthly';

interface LeaderboardClientProps {
    initialLeaderboard: LeaderboardEntry[];
    initialUserEntry: LeaderboardEntry | null;
    initialUserRank: number | null;
}

export default function LeaderboardClient({
    initialLeaderboard,
    initialUserEntry,
    initialUserRank
}: LeaderboardClientProps) {
    const { user } = useAuth();
    const [loading, setLoading] = useState(false);
    const [leaderboard, setLeaderboard] = useState<LeaderboardEntry[]>(initialLeaderboard);
    const [userEntry, setUserEntry] = useState<LeaderboardEntry | null>(initialUserEntry);
    const [userRank, setUserRank] = useState<number | null>(initialUserRank);
    const [type, setType] = useState<LeaderboardType>('total');

    useEffect(() => {
        if (type !== 'total' || leaderboard !== initialLeaderboard) {
            fetchLeaderboard();
        }
    }, [type]);

    async function fetchLeaderboard() {
        try {
            setLoading(true);
            const res = await fetch(`/api/leaderboard?type=${type}&limit=50`);
            if (res.ok) {
                const data = await res.json();
                setLeaderboard(data.leaderboard || []);
                setUserEntry(data.userEntry);
                setUserRank(data.userRank);
            }
        } catch (err) {
            console.error("Leaderboard fetch error:", err);
        } finally {
            setLoading(false);
        }
    }

    const typeLabels: Record<LeaderboardType, string> = {
        total: 'TÃ¼m Zamanlar',
        weekly: 'Bu Hafta',
        monthly: 'Bu Ay'
    };

    return (
        <main className="min-h-screen bg-background text-text-primary p-4 sm:p-6 lg:p-8 animate-in fade-in duration-500">
            <div className="max-w-4xl mx-auto space-y-8">

                {/* Header Section */}
                <div className="flex flex-col sm:flex-row sm:items-end justify-between gap-4 border-b border-border-subtle pb-6">
                    <div className="space-y-1">
                        <Badge variant="outline" className="text-primary border-primary/20 bg-primary/5 mb-2">
                            PREMIUM ANALÄ°TÄ°K
                        </Badge>
                        <h1 className="text-4xl font-black tracking-tighter text-text-primary uppercase italic">
                            SÄ±ralama <span className="text-primary shadow-glow-primary">Tablosu</span>
                        </h1>
                        <p className="text-text-secondary font-medium">En iyi voleybol tahmin uzmanlarÄ± arasÄ±nda yerini al.</p>
                    </div>

                    {/* Filter Tabs */}
                    <div className="inline-flex p-1 bg-surface-secondary/50 backdrop-blur-sm rounded-xl border border-border-main">
                        {(['total', 'weekly', 'monthly'] as LeaderboardType[]).map((t) => (
                            <Button
                                key={t}
                                variant={type === t ? 'primary' : 'ghost'}
                                size="sm"
                                onClick={() => setType(t)}
                                className={cn(
                                    "rounded-lg text-xs font-black transition-all px-4 h-9 uppercase",
                                    type === t && "shadow-glow-primary"
                                )}
                            >
                                {typeLabels[t]}
                            </Button>
                        ))}
                    </div>
                </div>

                {/* Top 3 Podium (Visual) - Only on Desktop and if data exists */}
                {leaderboard.length >= 3 && !loading && (
                    <div className="grid grid-cols-1 sm:grid-cols-3 gap-4 mb-8">
                        {[leaderboard[1], leaderboard[0], leaderboard[2]].map((entry, i) => {
                            const isFirst = entry.rank === 1;
                            return (
                                <Card
                                    key={entry.user_id}
                                    className={cn(
                                        "relative border-none overflow-hidden",
                                        isFirst ? "bg-gradient-to-br from-amber-400/20 via-amber-600/10 to-transparent ring-2 ring-amber-500/50 scale-105 z-10 sm:-translate-y-2" : "bg-surface-secondary/30",
                                        user?.id === entry.user_id && "ring-2 ring-primary/50"
                                    )}
                                >
                                    <div className="p-6 flex flex-col items-center">
                                        <div className={cn(
                                            "w-16 h-16 rounded-full flex items-center justify-center text-3xl mb-4 relative",
                                            entry.rank === 1 ? "bg-amber-500 shadow-glow-accent" : "bg-surface-dark border border-border-main"
                                        )}>
                                            {entry.rank === 1 ? 'ğŸ¥‡' : entry.rank === 2 ? 'ğŸ¥ˆ' : 'ğŸ¥‰'}
                                            {user?.id === entry.user_id && (
                                                <div className="absolute -bottom-1 -right-1">
                                                    <Badge variant="success" className="p-0.5 rounded-full"><TrendingUp className="w-3 h-3" /></Badge>
                                                </div>
                                            )}
                                        </div>
                                        <h3 className="font-black text-lg truncate w-full px-2">{entry.display_name || 'Anonim'}</h3>
                                        <div className="text-2xl font-black text-text-primary mt-2">
                                            {type === 'weekly' ? entry.weekly_points :
                                                type === 'monthly' ? entry.monthly_points :
                                                    entry.total_points}
                                            <span className="text-[10px] text-text-muted ml-0.5 uppercase tracking-tighter">Puan</span>
                                        </div>
                                        <Badge variant="secondary" className="mt-4 text-[10px] font-black tracking-widest uppercase">
                                            {entry.correct_predictions} DoÄŸru
                                        </Badge>
                                    </div>
                                </Card>
                            );
                        })}
                    </div>
                )}

                {/* User's Current Status Banner */}
                {userEntry && userRank && userRank > 3 && (
                    <Card className="bg-primary/5 border-primary/20 overflow-hidden relative group">
                        <div className="absolute inset-0 bg-gradient-to-r from-primary/10 to-transparent group-hover:from-primary/20 transition-all duration-700" />
                        <CardContent className="p-4 sm:p-6 relative z-10">
                            <div className="flex items-center justify-between gap-4">
                                <div className="flex items-center gap-4">
                                    <div className="w-12 h-12 bg-primary/20 rounded-2xl flex items-center justify-center font-black text-primary text-xl shadow-glow-primary">
                                        #{userRank}
                                    </div>
                                    <div>
                                        <div className="text-[10px] font-black text-primary uppercase tracking-widest mb-1">Senin Mevcut SÄ±ran</div>
                                        <div className="font-black text-xl text-text-primary tracking-tight">{userEntry.display_name || 'KullanÄ±cÄ±'}</div>
                                    </div>
                                </div>
                                <div className="text-right">
                                    <div className="text-3xl font-black text-primary tabular-nums">
                                        {type === 'weekly' ? userEntry.weekly_points :
                                            type === 'monthly' ? userEntry.monthly_points :
                                                userEntry.total_points}
                                        <span className="text-xs ml-1 font-medium text-text-muted uppercase">Puan</span>
                                    </div>
                                </div>
                            </div>
                        </CardContent>
                    </Card>
                )}

                {/* Main List */}
                <Card className="bg-surface-primary/50 backdrop-blur-sm border-border-main/50 overflow-hidden">
                    <CardHeader className="bg-surface-secondary/30 p-4 border-b border-border-main">
                        <CardTitle className="text-sm font-black flex items-center gap-2 tracking-widest uppercase">
                            <TrendingUp className="w-4 h-4 text-primary" />
                            TOP 50 Tahminci
                        </CardTitle>
                    </CardHeader>

                    <CardContent className="p-0 relative">
                        {loading && (
                            <div className="absolute inset-0 bg-background/50 backdrop-blur-[2px] z-50 flex flex-col items-center justify-center gap-3">
                                <Zap className="w-8 h-8 text-primary animate-pulse shadow-glow-primary" />
                                <span className="text-[10px] font-black uppercase tracking-[0.2em] animate-pulse">Veriler Ã‡ekiliyor</span>
                            </div>
                        )}

                        {leaderboard.length === 0 && !loading ? (
                            <EmptyState
                                title="HenÃ¼z Skor Yok"
                                description="Bu kategori iÃ§in henÃ¼z sÄ±ralama verisi oluÅŸturulmamÄ±ÅŸ. Ä°lk tahmini sen yap!"
                                icon={Award}
                                className="min-h-[400px] border-none"
                                actionLabel="Hemen Tahmin Yap"
                                onAction={() => window.location.href = '/ligler'}
                            />
                        ) : (
                            <div className="divide-y divide-border-subtle">
                                {leaderboard.map((entry) => {
                                    const isCurrentUser = user?.id === entry.user_id;
                                    const points = type === 'weekly' ? entry.weekly_points :
                                        type === 'monthly' ? entry.monthly_points :
                                            entry.total_points;
                                    const isTop3 = entry.rank <= 3;

                                    return (
                                        <div
                                            key={entry.user_id}
                                            className={cn(
                                                "flex items-center justify-between p-4 transition-all duration-300 group",
                                                isCurrentUser ? "bg-primary/5" : "hover:bg-surface-secondary/50"
                                            )}
                                        >
                                            <div className="flex items-center gap-4">
                                                <div className={cn(
                                                    "w-10 h-10 rounded-xl flex items-center justify-center font-black text-sm transition-transform group-hover:scale-110",
                                                    entry.rank === 1 ? "bg-amber-500 text-white shadow-glow-accent" :
                                                        entry.rank === 2 ? "bg-slate-300 text-slate-800" :
                                                            entry.rank === 3 ? "bg-amber-600 text-white shadow-md shadow-amber-900/20" :
                                                                "bg-surface-secondary text-text-muted border border-border-subtle"
                                                )}>
                                                    #{entry.rank}
                                                </div>

                                                <div className="flex flex-col">
                                                    <div className="flex items-center gap-2">
                                                        <span className={cn(
                                                            "font-black tracking-tight",
                                                            isCurrentUser ? "text-primary" : "text-text-primary"
                                                        )}>
                                                            {entry.display_name || 'Anonim Tahminci'}
                                                        </span>
                                                        {isCurrentUser && (
                                                            <Badge variant="default" className="h-4 px-1.5 py-0 text-[8px] font-black uppercase tracking-widest">Sen</Badge>
                                                        )}
                                                    </div>
                                                    <div className="flex items-center gap-3 mt-1 underline-offset-4">
                                                        <span className="text-[10px] font-medium text-text-muted flex items-center gap-1">
                                                            <Badge variant="secondary" className="px-1 py-0 h-4 text-[8px]">{entry.correct_predictions}</Badge> Ä°sabet
                                                        </span>
                                                        {entry.current_streak >= 3 && (
                                                            <span className="text-[10px] font-black text-primary italic flex items-center gap-1">
                                                                <Zap className="w-2.5 h-2.5 fill-current" />
                                                                {entry.current_streak} SERÄ°!
                                                            </span>
                                                        )}
                                                    </div>
                                                </div>
                                            </div>

                                            <div className="text-right">
                                                <div className={cn(
                                                    "text-xl font-black tabular-nums tracking-tighter",
                                                    isTop3 ? "text-amber-500" : "text-text-primary"
                                                )}>
                                                    {points}
                                                    <span className="text-[9px] text-text-muted ml-0.5 uppercase">pts</span>
                                                </div>
                                            </div>
                                        </div>
                                    );
                                })}
                            </div>
                        )}
                    </CardContent>
                </Card>

                {/* Legend / Info Footer */}
                <Card className="bg-surface-secondary/20 border-border-main/30 border-dashed">
                    <CardContent className="p-6">
                        <div className="flex items-center gap-2 mb-4">
                            <Info className="w-4 h-4 text-primary" />
                            <h4 className="text-[10px] font-black text-text-muted uppercase tracking-[0.2em]">Puanlama Sistemi</h4>
                        </div>
                        <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <InfoCard title="Tahmin" value="+10" desc="Skoru tam bilenlere" />
                            <InfoCard title="Seri Bonusu" value="+5" desc="Ãœst Ã¼ste 3 doÄŸru maÃ§a" />
                            <InfoCard title="SÄ±ralama" value="15 DK" desc="GÃ¼ncelleme aralÄ±ÄŸÄ±" />
                        </div>
                    </CardContent>
                </Card>
            </div>
        </main>
    );
}

const InfoCard = ({ title, value, desc }: { title: string; value: string; desc: string }) => (
    <div className="flex flex-col gap-1">
        <div className="flex items-center justify-between">
            <span className="text-[10px] font-black text-text-muted uppercase">{title}</span>
            <span className="text-xs font-black text-primary">{value}</span>
        </div>
        <p className="text-[10px] text-text-secondary leading-tight">{desc}</p>
    </div>
);

```

## File: app\leaderboard\loading.tsx
```
import { SkeletonTable, SkeletonStats } from "../components/Skeleton";

export default function LeaderboardLoading() {
    return (
        <div className="min-h-screen bg-slate-950 text-slate-100 p-4">
            <div className="max-w-4xl mx-auto space-y-6">
                {/* Header skeleton */}
                <div className="text-center space-y-2">
                    <div className="h-10 w-64 bg-slate-800 rounded animate-pulse mx-auto" />
                    <div className="h-4 w-96 bg-slate-800/50 rounded animate-pulse mx-auto" />
                </div>

                {/* Stats skeleton */}
                <SkeletonStats count={4} />

                {/* Table skeleton */}
                <SkeletonTable rows={10} columns={5} />
            </div>
        </div>
    );
}

```

## File: app\leaderboard\page.tsx
```
import { createServerSupabaseClient } from "../utils/supabase-server";
import LeaderboardClient from "./LeaderboardClient";

export const metadata = {
    title: "SÄ±ralama Tablosu | VolleySimulator",
    description: "VolleySimulator sÄ±ralama tablosu ile en iyi tahmincileri gÃ¶rÃ¼n.",
};

export default async function LeaderboardPage() {
    const supabase = await createServerSupabaseClient();

    // Fetch initial total leaderboard
    const { data: leaderboardData, error } = await supabase
        .from('leaderboard')
        .select('*')
        .order('total_points', { ascending: false })
        .limit(50);

    const rankedData = leaderboardData?.map((entry, index) => ({
        ...entry,
        rank: index + 1
    })) || [];

    // Get current user details
    const { data: { user } } = await supabase.auth.getUser();
    let userEntry = null;
    let userRank = null;

    if (user) {
        // Find user rank
        const { data: allData } = await supabase
            .from('leaderboard')
            .select('user_id')
            .order('total_points', { ascending: false });

        if (allData) {
            const userIndex = allData.findIndex(e => e.user_id === user.id);
            if (userIndex !== -1) {
                userRank = userIndex + 1;
                userEntry = rankedData.find(e => e.user_id === user.id) || null;

                if (!userEntry) {
                    const { data: userData } = await supabase
                        .from('leaderboard')
                        .select('*')
                        .eq('user_id', user.id)
                        .single();

                    if (userData) {
                        userEntry = { ...userData, rank: userRank };
                    }
                }
            }
        }
    }

    return (
        <LeaderboardClient
            initialLeaderboard={rankedData}
            initialUserEntry={userEntry}
            initialUserRank={userRank}
        />
    );
}

```

## File: app\ligler\loading.tsx
```
import { SkeletonCard } from "../components/Skeleton";

export default function LiglerLoading() {
    return (
        <div className="min-h-screen bg-slate-950">
            <div className="max-w-5xl mx-auto px-4 py-6 space-y-6">
                <div className="flex flex-col gap-1 items-center md:items-start text-center md:text-left">
                    <div className="h-8 w-32 bg-slate-800 rounded animate-pulse" />
                    <div className="h-4 w-64 bg-slate-800/50 rounded animate-pulse mt-2" />
                </div>

                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                    {[...Array(4)].map((_, i) => (
                        <SkeletonCard key={i} className="h-48" />
                    ))}
                </div>
            </div>
        </div>
    );
}

```

# Project Application Context - Part 13

## File: app\ligler\page.tsx
```
import Link from "next/link";
import { Metadata } from "next";
import { Card, CardHeader, CardTitle, CardContent } from "../components/ui/Card";
import { Badge } from "../components/ui/Badge";
import { Button } from "../components/ui/Button";
import { Trophy, Globe, Zap, ArrowRight, Star } from "lucide-react";
import { cn } from "@/lib/utils";

export const metadata: Metadata = {
    title: "Ligler - TÃ¼rkiye KadÄ±nlar Voleybol Ligleri",
    description: "Sultanlar Ligi, 1. Lig, 2. Lig ve CEV Avrupa turnuvalarÄ±. 2025-2026 sezonu maÃ§ tahminleri ve puan durumlarÄ±.",
};

const leagues = [
    {
        name: "Vodafone Sultanlar Ligi",
        desc: "TÃ¼rkiye'nin en Ã¼st dÃ¼zey kadÄ±nlar voleybol ligi",
        href: "/vsl/tahminoyunu",
        color: "from-red-600 to-rose-700",
        badge: "PRO LÄ°G",
        icon: Trophy,
        stats: "14 TakÄ±m â€¢ Play-off Sistemi"
    },
    {
        name: "Arabica Coffee House 1. Lig",
        desc: "2 Gruplu 1. Lig HeyecanÄ±",
        href: "/1lig/tahminoyunu",
        color: "from-amber-500 to-orange-600",
        badge: "YENÄ°",
        icon: Zap,
        stats: "2 Grup â€¢ 24 TakÄ±m"
    },
    {
        name: "KadÄ±nlar 2. Lig",
        desc: "5 Gruplu GeniÅŸ KapsamlÄ± 2. Lig",
        href: "/2lig/tahminoyunu",
        color: "from-emerald-600 to-teal-700",
        badge: "AKTÄ°F",
        icon: Star,
        stats: "5 Grup â€¢ BÃ¶lgesel Lig"
    },
    {
        name: "CEV Åampiyonlar Ligi",
        desc: "Avrupa'nÄ±n En Ä°yilerinin MÃ¼cadelesi",
        href: "/cev-cl/tahminoyunu",
        color: "from-blue-600 to-indigo-700",
        badge: "AVRUPA",
        icon: Globe,
        stats: "Grup AÅŸamasÄ± â€¢ Play-off"
    }
];

export default function LiglerPage() {
    return (
        <main className="min-h-screen bg-background text-text-primary p-4 sm:p-8 lg:p-12 animate-in fade-in duration-500">
            <div className="max-w-6xl mx-auto space-y-12">

                {/* Hero / Header */}
                <div className="text-center space-y-4">
                    <Badge variant="outline" className="text-primary border-primary/20 bg-primary/5 uppercase tracking-widest px-4">
                        Sezon 2025-2026
                    </Badge>
                    <h1 className="text-5xl md:text-6xl font-black tracking-tighter text-text-primary uppercase italic">
                        AKTÄ°F <span className="text-primary shadow-glow-primary">LÄ°GLER</span>
                    </h1>
                    <p className="max-w-xl mx-auto text-text-secondary text-lg font-medium leading-relaxed">
                        Tahmin yapmak istediÄŸin ligi seÃ§ ve simÃ¼lasyona baÅŸla. PuanlarÄ± toplayarak liderlik koltuÄŸuna otur!
                    </p>
                </div>

                {/* Leagues Grid */}
                <div className="grid grid-cols-1 md:grid-cols-2 gap-6 lg:gap-8">
                    {leagues.map((league) => (
                        <Link
                            key={league.name}
                            href={league.href}
                            className="group block"
                        >
                            <Card className="h-full relative overflow-hidden border-border-main/50 transition-all duration-500 group-hover:scale-[1.02] group-hover:border-primary/30 group-hover:shadow-premium-lg">
                                {/* Gradient Background overlay */}
                                <div className={cn(
                                    "absolute top-0 right-0 w-32 h-32 blur-[64px] opacity-10 transition-opacity group-hover:opacity-20 bg-gradient-to-br",
                                    league.color
                                )} />

                                <CardContent className="p-8">
                                    <div className="flex justify-between items-start mb-6">
                                        <div className={cn(
                                            "w-14 h-14 rounded-2xl flex items-center justify-center shadow-lg transition-transform duration-500 group-hover:rotate-6 bg-gradient-to-br",
                                            league.color
                                        )}>
                                            <league.icon className="w-7 h-7 text-white" />
                                        </div>
                                        <Badge variant="secondary" className="font-black text-[10px] tracking-widest px-3">
                                            {league.badge}
                                        </Badge>
                                    </div>

                                    <div className="space-y-4">
                                        <div className="space-y-1">
                                            <h2 className="text-2xl font-black text-text-primary tracking-tight group-hover:text-primary transition-colors">
                                                {league.name}
                                            </h2>
                                            <p className="text-text-secondary text-sm font-medium line-clamp-1">
                                                {league.desc}
                                            </p>
                                        </div>

                                        <div className="pt-4 flex items-center justify-between border-t border-border-subtle">
                                            <span className="text-[10px] font-black text-text-muted uppercase tracking-widest">
                                                {league.stats}
                                            </span>
                                            <div className="flex items-center gap-1.5 text-primary font-bold text-sm">
                                                GiriÅŸ Yap
                                                <ArrowRight className="w-4 h-4 transition-transform group-hover:translate-x-1" />
                                            </div>
                                        </div>
                                    </div>
                                </CardContent>
                            </Card>
                        </Link>
                    ))}
                </div>

                {/* Info Section */}
                <div className="grid grid-cols-1 lg:grid-cols-3 gap-8 pt-12 border-t border-border-subtle">
                    <div className="flex gap-4">
                        <div className="shrink-0 w-10 h-10 rounded-full bg-surface-secondary flex items-center justify-center">
                            <Zap className="w-5 h-5 text-amber-500" />
                        </div>
                        <div className="space-y-1">
                            <h4 className="font-black text-xs uppercase tracking-widest">HÄ±zlÄ± Tahmin</h4>
                            <p className="text-xs text-text-secondary leading-relaxed">Ã–zel arayÃ¼z ile saniyeler iÃ§inde tÃ¼m haftayÄ± tahmin et.</p>
                        </div>
                    </div>
                    <div className="flex gap-4">
                        <div className="shrink-0 w-10 h-10 rounded-full bg-surface-secondary flex items-center justify-center">
                            <Trophy className="w-5 h-5 text-emerald-500" />
                        </div>
                        <div className="space-y-1">
                            <h4 className="font-black text-xs uppercase tracking-widest">Liderlik YarÄ±ÅŸÄ±</h4>
                            <p className="text-xs text-text-secondary leading-relaxed">Tahmin baÅŸarÄ±larÄ±na gÃ¶re global sÄ±ralamada yÃ¼ksel.</p>
                        </div>
                    </div>
                    <div className="flex gap-4">
                        <div className="shrink-0 w-10 h-10 rounded-full bg-surface-secondary flex items-center justify-center">
                            <ArrowRight className="w-5 h-5 text-blue-500" />
                        </div>
                        <div className="space-y-1">
                            <h4 className="font-black text-xs uppercase tracking-widest">GeliÅŸmiÅŸ Veriler</h4>
                            <p className="text-xs text-text-secondary leading-relaxed">Yapay zeka destekli form durumlarÄ±nÄ± ve analizleri gÃ¶r.</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    );
}

```

## File: app\live\page.tsx
```
"use client";

import { useState, useEffect } from "react";
import { useLiveMatch } from "../context/LiveMatchContext";
import { useAuth } from "../context/AuthContext";
import { LiveMatch, SetScore } from "../types";
import Link from "next/link";

export default function LivePage() {
  const { user } = useAuth();
  const { 
    liveMatches, 
    currentMatch,
    comments,
    chatMessages,
    isConnected,
    selectMatch,
    addComment,
    likeComment,
    sendChatMessage,
    subscribeToMatch,
    unsubscribeFromMatch,
    refreshLiveMatches,
    isLoading
  } = useLiveMatch();
  
  const [newComment, setNewComment] = useState('');
  const [newChatMessage, setNewChatMessage] = useState('');
  const [activeTab, setActiveTab] = useState<'matches' | 'chat' | 'comments'>('matches');

  useEffect(() => {
    if (currentMatch) {
      subscribeToMatch(currentMatch.id);
    }
    
    return () => {
      unsubscribeFromMatch();
    };
  }, [currentMatch?.id]);

  const handleSendComment = async () => {
    if (!currentMatch || !newComment.trim()) return;
    
    await addComment(currentMatch.id, newComment.trim());
    setNewComment('');
  };

  const handleSendChat = async () => {
    if (!currentMatch || !newChatMessage.trim()) return;
    
    await sendChatMessage(currentMatch.id, newChatMessage.trim());
    setNewChatMessage('');
  };

  return (
    <main className="min-h-screen bg-slate-950 text-slate-100">
      {/* Header */}
      <div className="bg-gradient-to-r from-red-600 to-orange-600 px-4 py-6">
        <div className="max-w-4xl mx-auto">
          <div className="flex items-center justify-between">
            <div>
              <h1 className="text-2xl font-bold text-white flex items-center gap-2">
                <span className="animate-pulse">ğŸ”´</span> CanlÄ± MaÃ§lar
              </h1>
              <p className="text-white/70 text-sm mt-1">
                {liveMatches.filter(m => m.status === 'live').length} canlÄ± maÃ§
              </p>
            </div>
            <button
              onClick={refreshLiveMatches}
              className="px-4 py-2 bg-white/20 hover:bg-white/30 rounded-xl text-sm font-medium transition-colors"
            >
              ğŸ”„ Yenile
            </button>
          </div>
        </div>
      </div>

      <div className="max-w-4xl mx-auto px-4 py-6">
        {/* Live Matches Grid */}
        {!currentMatch ? (
          <div className="space-y-4">
            {liveMatches.length === 0 ? (
              <div className="text-center py-12">
                <div className="text-5xl mb-4">ğŸ“º</div>
                <p className="text-slate-400">Åu anda canlÄ± maÃ§ bulunmuyor</p>
                <p className="text-sm text-slate-500 mt-2">
                  YaklaÅŸan maÃ§lar iÃ§in tahminlerinizi yapmayÄ± unutmayÄ±n!
                </p>
              </div>
            ) : (
              <div className="grid gap-4">
                {liveMatches.map(match => (
                  <LiveMatchCard 
                    key={match.id} 
                    match={match} 
                    onClick={() => selectMatch(match.id)}
                  />
                ))}
              </div>
            )}
          </div>
        ) : (
          // Match Detail View
          <div className="space-y-4">
            {/* Back Button */}
            <button
              onClick={() => selectMatch('')}
              className="flex items-center gap-2 text-slate-400 hover:text-white transition-colors"
            >
              â† Geri
            </button>

            {/* Match Score Board */}
            <div className="bg-gradient-to-br from-slate-900 to-slate-800 border border-slate-700 rounded-2xl p-6">
              {/* Connection Status */}
              <div className="flex items-center justify-center gap-2 mb-4">
                <span className={`w-2 h-2 rounded-full ${isConnected ? 'bg-green-500 animate-pulse' : 'bg-red-500'}`} />
                <span className="text-xs text-slate-500">
                  {isConnected ? 'CanlÄ± BaÄŸlantÄ±' : 'BaÄŸlantÄ± Bekleniyor...'}
                </span>
              </div>

              {/* Teams and Score */}
              <div className="flex items-center justify-between">
                <div className="flex-1 text-center">
                  <div className="w-20 h-20 mx-auto bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center text-3xl mb-3">
                    ğŸ
                  </div>
                  <h3 className="font-bold text-white text-lg">{currentMatch.homeTeam}</h3>
                </div>

                <div className="px-8 text-center">
                  <div className="text-5xl font-black text-white">
                    {currentMatch.homeSetScore} - {currentMatch.awaySetScore}
                  </div>
                  <div className="text-sm text-slate-400 mt-2">Set Skoru</div>
                  
                  {currentMatch.status === 'live' && (
                    <div className="mt-4 bg-red-500/20 border border-red-500/30 rounded-lg px-4 py-2">
                      <div className="text-2xl font-bold text-white">
                        {currentMatch.currentSetHomePoints} - {currentMatch.currentSetAwayPoints}
                      </div>
                      <div className="text-xs text-red-400">{currentMatch.currentSet}. Set</div>
                    </div>
                  )}
                </div>

                <div className="flex-1 text-center">
                  <div className="w-20 h-20 mx-auto bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl flex items-center justify-center text-3xl mb-3">
                    ğŸ
                  </div>
                  <h3 className="font-bold text-white text-lg">{currentMatch.awayTeam}</h3>
                </div>
              </div>

              {/* Set Scores */}
              {currentMatch.setScores.length > 0 && (
                <div className="mt-6 flex justify-center gap-4">
                  {currentMatch.setScores.map((set, index) => (
                    <div 
                      key={index}
                      className={`px-4 py-2 rounded-lg text-center ${
                        set.winner === 'home' 
                          ? 'bg-blue-500/20 border border-blue-500/30' 
                          : 'bg-orange-500/20 border border-orange-500/30'
                      }`}
                    >
                      <div className="text-xs text-slate-400">{index + 1}. Set</div>
                      <div className="font-bold text-white">{set.homePoints}-{set.awayPoints}</div>
                    </div>
                  ))}
                </div>
              )}
            </div>

            {/* Tabs */}
            <div className="flex gap-2 border-b border-slate-800 pb-4">
              {[
                { key: 'chat', label: 'CanlÄ± Sohbet', icon: 'ğŸ’¬' },
                { key: 'comments', label: 'Yorumlar', icon: 'ğŸ“' },
              ].map(tab => (
                <button
                  key={tab.key}
                  onClick={() => setActiveTab(tab.key as typeof activeTab)}
                  className={`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium transition-all ${
                    activeTab === tab.key
                      ? 'bg-white/10 text-white'
                      : 'text-slate-400 hover:text-white hover:bg-white/5'
                  }`}
                >
                  <span>{tab.icon}</span>
                  <span>{tab.label}</span>
                </button>
              ))}
            </div>

            {/* Chat */}
            {activeTab === 'chat' && (
              <div className="bg-slate-900/50 border border-slate-800 rounded-xl">
                <div className="h-64 overflow-y-auto p-4 space-y-3">
                  {chatMessages.length === 0 ? (
                    <div className="text-center text-slate-500 py-8">
                      HenÃ¼z mesaj yok. Ä°lk mesajÄ± sen yaz!
                    </div>
                  ) : (
                    chatMessages.map(msg => (
                      <div key={msg.id} className="flex items-start gap-3">
                        <div className="w-8 h-8 rounded-full bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center text-white text-xs font-bold">
                          {msg.user?.displayName?.charAt(0) || '?'}
                        </div>
                        <div>
                          <div className="flex items-center gap-2">
                            <span className="font-bold text-white text-sm">
                              {msg.user?.displayName}
                            </span>
                            <span className="text-xs text-slate-500">
                              {new Date(msg.timestamp).toLocaleTimeString('tr-TR', { hour: '2-digit', minute: '2-digit' })}
                            </span>
                          </div>
                          <p className="text-slate-300 text-sm">{msg.message}</p>
                        </div>
                      </div>
                    ))
                  )}
                </div>

                {user && (
                  <div className="border-t border-slate-800 p-4">
                    <div className="flex gap-2">
                      <input
                        type="text"
                        value={newChatMessage}
                        onChange={(e) => setNewChatMessage(e.target.value)}
                        onKeyPress={(e) => e.key === 'Enter' && handleSendChat()}
                        placeholder="Mesaj yaz..."
                        className="flex-1 bg-slate-800 border border-slate-700 rounded-xl px-4 py-2 text-white placeholder:text-slate-500 focus:outline-none focus:border-indigo-500"
                      />
                      <button
                        onClick={handleSendChat}
                        className="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 rounded-xl font-medium transition-colors"
                      >
                        GÃ¶nder
                      </button>
                    </div>
                  </div>
                )}
              </div>
            )}

            {/* Comments */}
            {activeTab === 'comments' && (
              <div className="space-y-4">
                {user && (
                  <div className="bg-slate-900/50 border border-slate-800 rounded-xl p-4">
                    <textarea
                      value={newComment}
                      onChange={(e) => setNewComment(e.target.value)}
                      placeholder="MaÃ§ hakkÄ±nda yorumunuzu yazÄ±n..."
                      className="w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white placeholder:text-slate-500 focus:outline-none focus:border-indigo-500 resize-none h-20"
                    />
                    <div className="flex justify-end mt-2">
                      <button
                        onClick={handleSendComment}
                        className="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 rounded-xl text-sm font-medium transition-colors"
                      >
                        Yorum Yap
                      </button>
                    </div>
                  </div>
                )}

                <div className="space-y-3">
                  {comments.length === 0 ? (
                    <div className="text-center py-8 text-slate-500">
                      HenÃ¼z yorum yok
                    </div>
                  ) : (
                    comments.map(comment => (
                      <div 
                        key={comment.id}
                        className="bg-slate-900/50 border border-slate-800 rounded-xl p-4"
                      >
                        <div className="flex items-start gap-3">
                          <div className="w-10 h-10 rounded-full bg-gradient-to-br from-emerald-500 to-teal-500 flex items-center justify-center text-white font-bold">
                            {comment.user?.displayName?.charAt(0) || '?'}
                          </div>
                          <div className="flex-1">
                            <div className="flex items-center gap-2">
                              <span className="font-bold text-white">{comment.user?.displayName}</span>
                              <span className="text-xs text-slate-500">
                                {new Date(comment.createdAt).toLocaleString('tr-TR')}
                              </span>
                            </div>
                            <p className="text-slate-300 mt-1">{comment.message}</p>
                            <button
                              onClick={() => likeComment(comment.id)}
                              className="flex items-center gap-1 text-sm text-slate-500 hover:text-red-400 mt-2 transition-colors"
                            >
                              â¤ï¸ {comment.likes}
                            </button>
                          </div>
                        </div>
                      </div>
                    ))
                  )}
                </div>
              </div>
            )}
          </div>
        )}
      </div>
    </main>
  );
}

// Live Match Card Component
function LiveMatchCard({ match, onClick }: { match: LiveMatch; onClick: () => void }) {
  const isLive = match.status === 'live';
  
  return (
    <button
      onClick={onClick}
      className={`w-full bg-slate-900/50 border rounded-xl p-4 text-left transition-all hover:border-slate-600 ${
        isLive ? 'border-red-500/50' : 'border-slate-800'
      }`}
    >
      <div className="flex items-center justify-between">
        <div className="flex items-center gap-4 flex-1">
          {/* Home Team */}
          <div className="flex-1 text-right">
            <span className="font-bold text-white">{match.homeTeam}</span>
          </div>

          {/* Score */}
          <div className="text-center px-4">
            {isLive ? (
              <div>
                <div className="flex items-center gap-2 justify-center">
                  <span className="w-2 h-2 bg-red-500 rounded-full animate-pulse" />
                  <span className="text-xs text-red-400 font-medium">CANLI</span>
                </div>
                <div className="text-2xl font-black text-white mt-1">
                  {match.homeSetScore} - {match.awaySetScore}
                </div>
                <div className="text-xs text-slate-400">
                  {match.currentSetHomePoints}-{match.currentSetAwayPoints} ({match.currentSet}. Set)
                </div>
              </div>
            ) : match.status === 'finished' ? (
              <div>
                <span className="text-xs text-slate-500">Bitti</span>
                <div className="text-2xl font-black text-white mt-1">
                  {match.homeSetScore} - {match.awaySetScore}
                </div>
              </div>
            ) : (
              <div>
                <span className="text-xs text-slate-500">
                  {new Date(match.startTime).toLocaleTimeString('tr-TR', { hour: '2-digit', minute: '2-digit' })}
                </span>
                <div className="text-lg font-bold text-slate-400 mt-1">vs</div>
              </div>
            )}
          </div>

          {/* Away Team */}
          <div className="flex-1 text-left">
            <span className="font-bold text-white">{match.awayTeam}</span>
          </div>
        </div>

        <span className="text-slate-400 ml-4">â†’</span>
      </div>

      <div className="mt-3 text-xs text-slate-500 text-center">
        {match.league} {match.venue && `â€¢ ${match.venue}`}
      </div>
    </button>
  );
}

```

## File: app\login\layout.tsx
```
import { Metadata } from "next";

export const metadata: Metadata = {
    title: "GiriÅŸ Yap",
    description: "VolleySimulator hesabÄ±nÄ±za giriÅŸ yapÄ±n. MaÃ§ tahminleri yapÄ±n, puan kazanÄ±n ve liderlik tablosunda yerinizi alÄ±n.",
    openGraph: {
        title: "GiriÅŸ Yap | VolleySimulator",
        description: "VolleySimulator hesabÄ±nÄ±za giriÅŸ yapÄ±n ve tahmin oyununa katÄ±lÄ±n.",
    },
    robots: {
        index: false,
        follow: true,
    },
};

export default function LoginLayout({
    children,
}: {
    children: React.ReactNode;
}) {
    return children;
}

```

## File: app\login\page.tsx
```
"use client";

// Prevent static prerendering - this page requires auth context
export const dynamic = 'force-dynamic';

import { useState, useEffect } from "react";
import Link from "next/link";
import { useRouter } from "next/navigation";
import { useAuth } from "../context/AuthContext";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Label } from "@/components/ui/label";
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card";
import { Alert, AlertDescription } from "@/components/ui/alert";
import { Separator } from "@/components/ui/separator";
import { Loader2, ArrowRight, AlertCircle } from "lucide-react";

import LoginBackground from "../components/LoginBackground";

export default function LoginPage() {
    const router = useRouter();
    const { signIn, signInWithGoogle, user } = useAuth();
    const [email, setEmail] = useState("");
    const [password, setPassword] = useState("");
    const [isLoading, setIsLoading] = useState(false);
    const [error, setError] = useState("");

    // Redirect if already logged in
    useEffect(() => {
        if (user) {
            router.push('/ligler');
        }
    }, [user, router]);

    if (user) {
        return null;
    }

    const handleSubmit = async (e: React.FormEvent) => {
        e.preventDefault();
        setIsLoading(true);
        setError("");

        const { error } = await signIn(email, password);

        if (error) {
            setError(error.message === "Invalid login credentials"
                ? "E-posta veya ÅŸifre hatalÄ±"
                : error.message
            );
            setIsLoading(false);
        } else {
            router.push('/ligler');
        }
    };

    const handleGoogleLogin = async () => {
        await signInWithGoogle();
    };

    return (
        <main className="min-h-screen relative flex flex-col items-center justify-center p-4 overflow-hidden">
            <LoginBackground />

            <div className="w-full max-w-6xl mx-auto grid lg:grid-cols-2 gap-12 items-center relative z-10">

                {/* Left Side: Brand & Features (Desktop) */}
                <div className="hidden lg:block space-y-8 animate-fade-in-left">
                    <div className="space-y-2">
                        <Link href="/" className="inline-block">
                            <span className="text-4xl font-black tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-emerald-400 to-cyan-400">
                                VolleySimulator
                            </span>
                        </Link>
                        <h1 className="text-2xl font-light text-slate-300">
                            Voleybol TutkunlarÄ± Ä°Ã§in <br />
                            <span className="font-semibold text-white">Yeni Nesil SimÃ¼lasyon</span>
                        </h1>
                    </div>

                    <div className="grid grid-cols-2 gap-4">
                        <div className="bg-slate-900/40 backdrop-blur-sm border border-slate-700/50 p-4 rounded-2xl">
                            <div className="text-3xl mb-2">ğŸ†</div>
                            <h3 className="font-bold text-white mb-1">Tahmin Oyunu</h3>
                            <p className="text-sm text-slate-400">MaÃ§ skorlarÄ±nÄ± tahmin et, puanlarÄ± topla ve liderliÄŸe yÃ¼ksel.</p>
                        </div>
                        <div className="bg-slate-900/40 backdrop-blur-sm border border-slate-700/50 p-4 rounded-2xl">
                            <div className="text-3xl mb-2">ğŸ“Š</div>
                            <h3 className="font-bold text-white mb-1">DetaylÄ± Analiz</h3>
                            <p className="text-sm text-slate-400">TakÄ±m form durumlarÄ± ve yapay zeka destekli maÃ§ analizleri.</p>
                        </div>
                        <div className="bg-slate-900/40 backdrop-blur-sm border border-slate-700/50 p-4 rounded-2xl">
                            <div className="text-3xl mb-2">âš¡</div>
                            <h3 className="font-bold text-white mb-1">CanlÄ± Skor</h3>
                            <p className="text-sm text-slate-400">MaÃ§ sonuÃ§larÄ±nÄ± anlÄ±k takip et, ligdeki geliÅŸmeleri kaÃ§Ä±rma.</p>
                        </div>
                        <div className="bg-slate-900/40 backdrop-blur-sm border border-slate-700/50 p-4 rounded-2xl">
                            <div className="text-3xl mb-2">ğŸŒ</div>
                            <h3 className="font-bold text-white mb-1">Topluluk</h3>
                            <p className="text-sm text-slate-400">DiÄŸer voleybol severlerle yarÄ±ÅŸ ve sÄ±ralamada yerini al.</p>
                        </div>
                    </div>
                </div>

                {/* Right Side: Login Card */}
                <div className="w-full max-w-md mx-auto lg:ml-auto">
                    <Card className="bg-background/60 backdrop-blur-xl border-border/50 shadow-2xl">
                        <CardHeader className="text-center">
                            {/* Mobile Header (Visible only on mobile) */}
                            <div className="lg:hidden mb-4">
                                <Link href="/" className="inline-block mb-2">
                                    <span className="text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-emerald-400 to-teal-200">
                                        VolleySimulator
                                    </span>
                                </Link>
                            </div>
                            <CardTitle className="text-2xl">GiriÅŸ Yap</CardTitle>
                            <CardDescription>HesabÄ±nÄ±za eriÅŸmek iÃ§in bilgilerinizi girin</CardDescription>
                        </CardHeader>
                        <CardContent>
                            {/* Login Form */}
                            <form onSubmit={handleSubmit} className="space-y-4">
                                {error && (
                                    <Alert variant="destructive">
                                        <AlertCircle className="h-4 w-4" />
                                        <AlertDescription>{error}</AlertDescription>
                                    </Alert>
                                )}

                                <div className="space-y-2">
                                    <Label htmlFor="email">E-posta</Label>
                                    <Input
                                        id="email"
                                        type="email"
                                        value={email}
                                        onChange={(e) => setEmail(e.target.value)}
                                        placeholder="ornek@email.com"
                                        required
                                    />
                                </div>

                                <div className="space-y-2">
                                    <div className="flex items-center justify-between">
                                        <Label htmlFor="password">Åifre</Label>
                                        <Link href="#" className="text-xs text-primary hover:underline">
                                            Unuttum?
                                        </Link>
                                    </div>
                                    <Input
                                        id="password"
                                        type="password"
                                        value={password}
                                        onChange={(e) => setPassword(e.target.value)}
                                        placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
                                        required
                                    />
                                </div>

                                <Button
                                    type="submit"
                                    disabled={isLoading}
                                    className="w-full bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-500 hover:to-teal-500"
                                >
                                    {isLoading ? (
                                        <Loader2 className="h-4 w-4 animate-spin" />
                                    ) : (
                                        <>
                                            GiriÅŸ Yap
                                            <ArrowRight className="ml-2 h-4 w-4" />
                                        </>
                                    )}
                                </Button>
                            </form>

                            <div className="relative my-6">
                                <Separator />
                                <span className="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 bg-card px-2 text-xs text-muted-foreground">
                                    veya
                                </span>
                            </div>

                            <Button
                                type="button"
                                variant="outline"
                                onClick={handleGoogleLogin}
                                className="w-full"
                            >
                                <svg className="w-5 h-5 mr-2" viewBox="0 0 24 24">
                                    <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" />
                                    <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" />
                                    <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" />
                                    <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" />
                                </svg>
                                Google ile devam et
                            </Button>

                            <p className="mt-6 text-center text-sm text-muted-foreground">
                                HesabÄ±n yok mu?{" "}
                                <Link href="/register" className="text-primary font-medium hover:underline">
                                    Hemen KayÄ±t Ol
                                </Link>
                            </p>
                        </CardContent>
                    </Card>

                    {/* Skip Link (Subtle) */}
                    <div className="text-center mt-6">
                        <Link href="/1lig/tahminoyunu" className="text-muted-foreground text-xs hover:text-foreground transition-colors flex items-center justify-center gap-1 group">
                            GiriÅŸ yapmadan siteye gÃ¶z at
                            <span className="group-hover:translate-x-1 transition-transform">â†’</span>
                        </Link>
                    </div>
                </div>
            </div>

            <style jsx>{`
                @keyframes fade-in-up {
                    from { opacity: 0; transform: translateY(20px); }
                    to { opacity: 1; transform: translateY(0); }
                }
                @keyframes fade-in-left {
                    from { opacity: 0; transform: translateX(-20px); }
                    to { opacity: 1; transform: translateX(0); }
                }
                .animate-fade-in-up {
                    animation: fade-in-up 0.6s ease-out forwards;
                }
                .animate-fade-in-left {
                    animation: fade-in-left 0.6s ease-out forwards;
                    animation-delay: 0.2s;
                    opacity: 0;
                }
            `}</style>
        </main>
    );
}

```

## File: app\notifications\page.tsx
```
"use client";

import { useState, useMemo } from "react";
import { useNotifications } from "../context/NotificationsContext";
import { useAuth } from "../context/AuthContext";
import { Notification, NotificationType } from "../types";
import Link from "next/link";

export default function NotificationsPage() {
  const { user } = useAuth();
  const { 
    notifications, 
    unreadCount,
    preferences,
    markAsRead, 
    markAllAsRead,
    deleteNotification,
    clearAll,
    updatePreferences,
    requestPushPermission,
    isLoading 
  } = useNotifications();
  
  const [activeTab, setActiveTab] = useState<'all' | 'unread' | 'settings'>('all');
  const [filter, setFilter] = useState<NotificationType | 'all'>('all');

  // Filter notifications
  const filteredNotifications = useMemo(() => {
    let filtered = notifications;
    
    if (activeTab === 'unread') {
      filtered = filtered.filter(n => !n.isRead);
    }
    
    if (filter !== 'all') {
      filtered = filtered.filter(n => n.type === filter);
    }
    
    return filtered;
  }, [notifications, activeTab, filter]);

  // Group notifications by date
  const groupedNotifications = useMemo(() => {
    const groups: Record<string, Notification[]> = {};
    
    filteredNotifications.forEach(notification => {
      const date = new Date(notification.createdAt).toLocaleDateString('tr-TR');
      if (!groups[date]) {
        groups[date] = [];
      }
      groups[date].push(notification);
    });
    
    return groups;
  }, [filteredNotifications]);

  if (!user) {
    return (
      <div className="min-h-screen bg-slate-950 flex items-center justify-center">
        <div className="text-center">
          <p className="text-slate-400 mb-4">Bu sayfayÄ± gÃ¶rÃ¼ntÃ¼lemek iÃ§in giriÅŸ yapmalÄ±sÄ±nÄ±z.</p>
          <Link href="/" className="text-emerald-400 hover:underline">GiriÅŸ Yap</Link>
        </div>
      </div>
    );
  }

  return (
    <main className="min-h-screen bg-slate-950 text-slate-100">
      {/* Header */}
      <div className="bg-gradient-to-r from-cyan-600 to-blue-600 px-4 py-6">
        <div className="max-w-4xl mx-auto">
          <div className="flex items-center justify-between">
            <div>
              <h1 className="text-2xl font-bold text-white">Bildirimler</h1>
              <p className="text-white/70 text-sm mt-1">
                {unreadCount > 0 ? `${unreadCount} okunmamÄ±ÅŸ bildirim` : 'TÃ¼m bildirimler okundu'}
              </p>
            </div>
            {unreadCount > 0 && (
              <button
                onClick={markAllAsRead}
                className="px-4 py-2 bg-white/20 hover:bg-white/30 rounded-xl text-sm font-medium transition-colors"
              >
                TÃ¼mÃ¼nÃ¼ Okundu Ä°ÅŸaretle
              </button>
            )}
          </div>
        </div>
      </div>

      {/* Tabs */}
      <div className="max-w-4xl mx-auto px-4">
        <div className="flex gap-2 py-4 border-b border-slate-800">
          {[
            { key: 'all', label: 'TÃ¼mÃ¼', icon: 'ğŸ“¬', count: notifications.length },
            { key: 'unread', label: 'OkunmamÄ±ÅŸ', icon: 'ğŸ””', count: unreadCount },
            { key: 'settings', label: 'Ayarlar', icon: 'âš™ï¸' },
          ].map(tab => (
            <button
              key={tab.key}
              onClick={() => setActiveTab(tab.key as typeof activeTab)}
              className={`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium transition-all ${
                activeTab === tab.key
                  ? 'bg-white/10 text-white'
                  : 'text-slate-400 hover:text-white hover:bg-white/5'
              }`}
            >
              <span>{tab.icon}</span>
              <span>{tab.label}</span>
              {tab.count !== undefined && tab.count > 0 && (
                <span className="bg-cyan-500 text-white text-xs px-2 py-0.5 rounded-full">
                  {tab.count}
                </span>
              )}
            </button>
          ))}
        </div>

        {/* Content */}
        <div className="py-6">
          {/* Notification List */}
          {(activeTab === 'all' || activeTab === 'unread') && (
            <div className="space-y-6">
              {/* Filter */}
              <div className="flex gap-2 overflow-x-auto pb-2">
                {[
                  { key: 'all', label: 'TÃ¼mÃ¼' },
                  { key: 'match_reminder', label: 'MaÃ§ HatÄ±rlatma' },
                  { key: 'match_result', label: 'SonuÃ§lar' },
                  { key: 'friend_request', label: 'ArkadaÅŸlÄ±k' },
                  { key: 'achievement', label: 'BaÅŸarÄ±mlar' },
                  { key: 'leaderboard_change', label: 'SÄ±ralama' },
                ].map(f => (
                  <button
                    key={f.key}
                    onClick={() => setFilter(f.key as typeof filter)}
                    className={`px-3 py-1.5 rounded-lg text-xs font-medium whitespace-nowrap transition-colors ${
                      filter === f.key
                        ? 'bg-cyan-600 text-white'
                        : 'bg-slate-800 text-slate-400 hover:text-white'
                    }`}
                  >
                    {f.label}
                  </button>
                ))}
              </div>

              {/* Notifications */}
              {Object.keys(groupedNotifications).length === 0 ? (
                <div className="text-center py-12">
                  <div className="text-5xl mb-4">ğŸ””</div>
                  <p className="text-slate-400">Bildirim yok</p>
                </div>
              ) : (
                Object.entries(groupedNotifications).map(([date, notifs]) => (
                  <div key={date}>
                    <h3 className="text-sm font-medium text-slate-500 mb-3">{date}</h3>
                    <div className="space-y-2">
                      {notifs.map(notification => (
                        <NotificationItem
                          key={notification.id}
                          notification={notification}
                          onRead={() => markAsRead(notification.id)}
                          onDelete={() => deleteNotification(notification.id)}
                        />
                      ))}
                    </div>
                  </div>
                ))
              )}

              {notifications.length > 0 && (
                <div className="text-center pt-4">
                  <button
                    onClick={clearAll}
                    className="text-sm text-slate-500 hover:text-red-400 transition-colors"
                  >
                    TÃ¼m Bildirimleri Temizle
                  </button>
                </div>
              )}
            </div>
          )}

          {/* Settings */}
          {activeTab === 'settings' && (
            <div className="space-y-6">
              {/* Push Notifications */}
              <div className="bg-slate-900/50 border border-slate-800 rounded-xl p-6">
                <div className="flex items-center justify-between">
                  <div>
                    <h3 className="font-bold text-white">Push Bildirimleri</h3>
                    <p className="text-sm text-slate-400 mt-1">
                      TarayÄ±cÄ± bildirimleri alÄ±n
                    </p>
                  </div>
                  {preferences.pushEnabled ? (
                    <span className="text-emerald-400 text-sm">âœ“ Aktif</span>
                  ) : (
                    <button
                      onClick={requestPushPermission}
                      className="px-4 py-2 bg-cyan-600 hover:bg-cyan-700 rounded-lg text-sm font-medium transition-colors"
                    >
                      EtkinleÅŸtir
                    </button>
                  )}
                </div>
              </div>

              {/* Notification Types */}
              <div className="bg-slate-900/50 border border-slate-800 rounded-xl overflow-hidden">
                <div className="p-4 border-b border-slate-800">
                  <h3 className="font-bold text-white">Bildirim TÃ¼rleri</h3>
                </div>
                
                <div className="divide-y divide-slate-800">
                  {[
                    { key: 'matchReminders', label: 'MaÃ§ HatÄ±rlatmalarÄ±', icon: 'â°', desc: 'Tahmin edilmemiÅŸ maÃ§lar iÃ§in hatÄ±rlatma' },
                    { key: 'matchResults', label: 'MaÃ§ SonuÃ§larÄ±', icon: 'âš½', desc: 'Tahmin edilen maÃ§larÄ±n sonuÃ§larÄ±' },
                    { key: 'friendRequests', label: 'ArkadaÅŸlÄ±k Ä°stekleri', icon: 'ğŸ‘¥', desc: 'Yeni arkadaÅŸlÄ±k istekleri' },
                    { key: 'friendActivity', label: 'ArkadaÅŸ Aktiviteleri', icon: 'ğŸ“Š', desc: 'ArkadaÅŸlarÄ±n tahminleri ve baÅŸarÄ±mlarÄ±' },
                    { key: 'achievements', label: 'BaÅŸarÄ±mlar', icon: 'ğŸ†', desc: 'Yeni rozetler ve baÅŸarÄ±mlar' },
                    { key: 'leaderboardChanges', label: 'SÄ±ralama DeÄŸiÅŸiklikleri', icon: 'ğŸ“ˆ', desc: 'Liderlik tablosu gÃ¼ncellemeleri' },
                    { key: 'dailyQuests', label: 'GÃ¼nlÃ¼k GÃ¶revler', icon: 'ğŸ“‹', desc: 'GÃ¼nlÃ¼k gÃ¶rev hatÄ±rlatmalarÄ±' },
                    { key: 'weeklyDigest', label: 'HaftalÄ±k Ã–zet', icon: 'ğŸ“°', desc: 'HaftalÄ±k performans Ã¶zeti' },
                  ].map(setting => (
                    <div key={setting.key} className="flex items-center justify-between p-4">
                      <div className="flex items-center gap-3">
                        <span className="text-2xl">{setting.icon}</span>
                        <div>
                          <h4 className="font-medium text-white">{setting.label}</h4>
                          <p className="text-xs text-slate-500">{setting.desc}</p>
                        </div>
                      </div>
                      <button
                        onClick={() => updatePreferences({ 
                          [setting.key]: !preferences[setting.key as keyof typeof preferences]
                        })}
                        className={`relative w-12 h-6 rounded-full transition-colors ${
                          preferences[setting.key as keyof typeof preferences]
                            ? 'bg-cyan-600'
                            : 'bg-slate-700'
                        }`}
                      >
                        <span 
                          className={`absolute top-1 w-4 h-4 bg-white rounded-full transition-all ${
                            preferences[setting.key as keyof typeof preferences]
                              ? 'left-7'
                              : 'left-1'
                          }`}
                        />
                      </button>
                    </div>
                  ))}
                </div>
              </div>

              {/* Quiet Hours */}
              <div className="bg-slate-900/50 border border-slate-800 rounded-xl p-6">
                <h3 className="font-bold text-white mb-4">Sessiz Saatler</h3>
                <p className="text-sm text-slate-400 mb-4">
                  Bu saatler arasÄ±nda bildirim almayÄ±n
                </p>
                <div className="grid grid-cols-2 gap-4">
                  <div>
                    <label className="block text-xs text-slate-500 mb-2">BaÅŸlangÄ±Ã§</label>
                    <input
                      type="time"
                      value={preferences.quietHoursStart || '23:00'}
                      onChange={(e) => updatePreferences({ quietHoursStart: e.target.value })}
                      className="w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2 text-white"
                    />
                  </div>
                  <div>
                    <label className="block text-xs text-slate-500 mb-2">BitiÅŸ</label>
                    <input
                      type="time"
                      value={preferences.quietHoursEnd || '08:00'}
                      onChange={(e) => updatePreferences({ quietHoursEnd: e.target.value })}
                      className="w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2 text-white"
                    />
                  </div>
                </div>
              </div>

              {/* Email Notifications */}
              <div className="bg-slate-900/50 border border-slate-800 rounded-xl p-6">
                <div className="flex items-center justify-between">
                  <div>
                    <h3 className="font-bold text-white">E-posta Bildirimleri</h3>
                    <p className="text-sm text-slate-400 mt-1">
                      Ã–nemli gÃ¼ncellemeler iÃ§in e-posta alÄ±n
                    </p>
                  </div>
                  <button
                    onClick={() => updatePreferences({ emailEnabled: !preferences.emailEnabled })}
                    className={`relative w-12 h-6 rounded-full transition-colors ${
                      preferences.emailEnabled ? 'bg-cyan-600' : 'bg-slate-700'
                    }`}
                  >
                    <span 
                      className={`absolute top-1 w-4 h-4 bg-white rounded-full transition-all ${
                        preferences.emailEnabled ? 'left-7' : 'left-1'
                      }`}
                    />
                  </button>
                </div>
              </div>
            </div>
          )}
        </div>
      </div>
    </main>
  );
}

// Notification Item Component
function NotificationItem({ 
  notification, 
  onRead, 
  onDelete 
}: { 
  notification: Notification; 
  onRead: () => void;
  onDelete: () => void;
}) {
  const icon = getNotificationIcon(notification.type);
  
  return (
    <div 
      className={`bg-slate-900/50 border rounded-xl p-4 transition-all ${
        notification.isRead 
          ? 'border-slate-800 opacity-70' 
          : 'border-cyan-500/30 bg-cyan-500/5'
      }`}
    >
      <div className="flex items-start gap-3">
        <div className="text-2xl">{icon}</div>
        <div className="flex-1">
          <h4 className={`font-medium ${notification.isRead ? 'text-slate-300' : 'text-white'}`}>
            {notification.title}
          </h4>
          <p className="text-sm text-slate-400 mt-1">{notification.message}</p>
          <div className="flex items-center gap-4 mt-2">
            <span className="text-xs text-slate-500">
              {new Date(notification.createdAt).toLocaleTimeString('tr-TR', { 
                hour: '2-digit', 
                minute: '2-digit' 
              })}
            </span>
            {notification.link && (
              <Link 
                href={notification.link}
                className="text-xs text-cyan-400 hover:underline"
              >
                GÃ¶rÃ¼ntÃ¼le â†’
              </Link>
            )}
          </div>
        </div>
        <div className="flex items-center gap-2">
          {!notification.isRead && (
            <button
              onClick={onRead}
              className="p-1 text-slate-400 hover:text-white transition-colors"
              title="Okundu iÅŸaretle"
            >
              âœ“
            </button>
          )}
          <button
            onClick={onDelete}
            className="p-1 text-slate-400 hover:text-red-400 transition-colors"
            title="Sil"
          >
            âœ•
          </button>
        </div>
      </div>
    </div>
  );
}

function getNotificationIcon(type: NotificationType): string {
  switch (type) {
    case 'match_reminder': return 'â°';
    case 'match_result': return 'âš½';
    case 'prediction_result': return 'ğŸ¯';
    case 'friend_request': return 'ğŸ‘¥';
    case 'friend_activity': return 'ğŸ“Š';
    case 'achievement': return 'ğŸ†';
    case 'level_up': return 'â¬†ï¸';
    case 'leaderboard_change': return 'ğŸ“ˆ';
    case 'daily_quest': return 'ğŸ“‹';
    case 'weekly_challenge': return 'ğŸ…';
    case 'system': return 'ğŸ“¢';
    default: return 'ğŸ””';
  }
}

```

## File: app\oauth\consent\page.tsx
```
"use client";

import { useEffect } from "react";
import { useRouter, useSearchParams } from "next/navigation";
import { createClient } from "../../utils/supabase";
import Link from "next/link";
import { Suspense } from "react";

function ConsentContent() {
    const router = useRouter();
    const searchParams = useSearchParams();
    const supabase = createClient();

    useEffect(() => {
        // Check if there's an auth code to exchange
        const code = searchParams.get('code');
        if (code && supabase) {
            supabase.auth.exchangeCodeForSession(code).then(() => {
                router.push('/profile');
            });
        }
    }, [searchParams, router, supabase]);

    return (
        <main className="min-h-screen bg-slate-950 text-slate-100 flex items-center justify-center p-4">
            <div className="w-full max-w-md text-center">
                {/* Header */}
                <div className="mb-8">
                    <Link href="/" className="inline-block mb-6">
                        <span className="text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-emerald-400 to-teal-200">
                            VolleySimulator
                        </span>
                    </Link>
                </div>

                {/* Consent Card */}
                <div className="bg-slate-900/80 rounded-2xl border border-slate-700 p-8 space-y-6">
                    <div className="w-16 h-16 mx-auto bg-gradient-to-br from-emerald-500 to-teal-600 rounded-2xl flex items-center justify-center shadow-lg shadow-emerald-500/30">
                        <span className="text-3xl">ğŸ”</span>
                    </div>

                    <div>
                        <h1 className="text-2xl font-black text-white mb-2">GiriÅŸ OnayÄ±</h1>
                        <p className="text-slate-400 text-sm">
                            VolleySimulator uygulamasÄ±na eriÅŸim izni verin
                        </p>
                    </div>

                    <div className="bg-slate-800/50 rounded-xl p-4 text-left space-y-3">
                        <div className="text-xs font-bold text-slate-400 uppercase tracking-wider mb-2">
                            Ä°zin Verilen EriÅŸimler:
                        </div>
                        <div className="flex items-center gap-3 text-sm text-slate-300">
                            <span className="text-emerald-400">âœ“</span>
                            <span>Profil bilgileriniz</span>
                        </div>
                        <div className="flex items-center gap-3 text-sm text-slate-300">
                            <span className="text-emerald-400">âœ“</span>
                            <span>E-posta adresiniz</span>
                        </div>
                        <div className="flex items-center gap-3 text-sm text-slate-300">
                            <span className="text-emerald-400">âœ“</span>
                            <span>Tahmin ve oyun ilerlemeniz</span>
                        </div>
                    </div>

                    <div className="space-y-3">
                        <Link
                            href="/profile"
                            className="block w-full py-3 bg-gradient-to-r from-emerald-600 to-teal-600 text-white font-bold rounded-xl shadow-lg shadow-emerald-500/20 hover:shadow-emerald-500/40 transition-all text-center"
                        >
                            âœ“ Ä°zin Ver ve Devam Et
                        </Link>
                        <Link
                            href="/"
                            className="block w-full py-3 bg-slate-800 border border-slate-700 text-slate-400 font-medium rounded-xl hover:bg-slate-700 transition-all text-center"
                        >
                            Ä°ptal
                        </Link>
                    </div>
                </div>

                <p className="mt-6 text-xs text-slate-500">
                    GiriÅŸ yaparak{" "}
                    <a href="#" className="text-emerald-400 hover:underline">KullanÄ±m KoÅŸullarÄ±</a>
                    {" "}ve{" "}
                    <a href="#" className="text-emerald-400 hover:underline">Gizlilik PolitikasÄ±</a>
                    &apos;nÄ± kabul etmiÅŸ olursunuz.
                </p>
            </div>
        </main>
    );
}

export default function OAuthConsentPage() {
    return (
        <Suspense fallback={
            <div className="min-h-screen bg-slate-950 flex items-center justify-center">
                <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500"></div>
            </div>
        }>
            <ConsentContent />
        </Suspense>
    );
}

```

## File: app\offline\page.tsx
```
'use client';

import Link from 'next/link';

export default function OfflinePage() {
    return (
        <div className="min-h-screen bg-gradient-to-b from-slate-950 to-slate-900 flex flex-col items-center justify-center p-4">
            <div className="text-center space-y-6 max-w-md">
                {/* Icon */}
                <div className="text-6xl">ğŸ“¡</div>

                {/* Title */}
                <h1 className="text-3xl font-bold text-white">
                    Ä°nternet BaÄŸlantÄ±sÄ± Yok
                </h1>

                {/* Description */}
                <p className="text-slate-400 text-lg">
                    Åu anda Ã§evrimdÄ±ÅŸÄ±sÄ±nÄ±z. LÃ¼tfen internet baÄŸlantÄ±nÄ±zÄ± kontrol edin.
                </p>

                {/* Cached Content Info */}
                <div className="bg-slate-900/50 border border-slate-800 rounded-lg p-4 text-sm text-slate-300">
                    <p className="mb-2">âœ“ Kacak sayfa Ã¶nbellekte saklanmÄ±ÅŸtÄ±r</p>
                    <p className="mb-2">âœ“ Tahminleriniz yerel olarak kaydedilmiÅŸtir</p>
                    <p>âœ“ BaÄŸlantÄ± saÄŸlandÄ±ÄŸÄ±nda senkronize olacaktÄ±r</p>
                </div>

                {/* Actions */}
                <div className="space-y-3 pt-4">
                    <button
                        onClick={() => window.location.reload()}
                        className="w-full px-4 py-3 bg-emerald-600 hover:bg-emerald-500 text-white font-bold rounded-lg transition-colors"
                    >
                        Yenile
                    </button>

                    <Link
                        href="/"
                        className="block w-full px-4 py-3 bg-slate-800 hover:bg-slate-700 text-white font-bold rounded-lg transition-colors text-center"
                    >
                        Ana Sayfaya DÃ¶n
                    </Link>
                </div>

                {/* Tips */}
                <div className="text-xs text-slate-500 space-y-1 pt-4 border-t border-slate-800">
                    <p>ğŸ’¡ WiFi baÄŸlantÄ±nÄ±zÄ± kontrol edin</p>
                    <p>ğŸ’¡ Mobil veri baÄŸlantÄ±nÄ±zÄ± aÃ§mayÄ± deneyin</p>
                    <p>ğŸ’¡ UÃ§ak modu kapalÄ± olduÄŸundan emin olun</p>
                </div>
            </div>
        </div>
    );
}

```

## File: app\premium\page.tsx
```
"use client";

import { useState } from "react";
import { useAuth } from "../context/AuthContext";
import Link from "next/link";

interface PremiumPlan {
  id: string;
  name: string;
  price: number;
  period: 'monthly' | 'yearly';
  features: string[];
  popular?: boolean;
}

const PREMIUM_PLANS: PremiumPlan[] = [
  {
    id: 'basic',
    name: 'Temel',
    price: 0,
    period: 'monthly',
    features: [
      'MaÃ§ tahminleri',
      'Temel istatistikler',
      'HaftalÄ±k sÄ±ralama',
      'ArkadaÅŸlÄ±k sistemi',
    ]
  },
  {
    id: 'pro',
    name: 'Pro',
    price: 29.99,
    period: 'monthly',
    features: [
      'TÃ¼m Temel Ã¶zellikler',
      'AI Tahmin AsistanÄ±',
      'GeliÅŸmiÅŸ istatistikler',
      'Ã–zel rozetler',
      'ReklamsÄ±z deneyim',
      'Ã–ncelikli destek',
      'Ã–zel temalar',
      'MaÃ§ simÃ¼lasyonu',
    ],
    popular: true
  },
  {
    id: 'elite',
    name: 'Elite',
    price: 199.99,
    period: 'yearly',
    features: [
      'TÃ¼m Pro Ã¶zellikler',
      'SÄ±nÄ±rsÄ±z Ã¶zel lig',
      'Elit rozetler',
      'VIP Discord kanalÄ±',
      'Erken eriÅŸim',
      'AylÄ±k Ã¶dÃ¼ller',
      '%40 indirim',
    ]
  }
];

const PREMIUM_FEATURES = [
  {
    icon: 'ğŸ¤–',
    title: 'AI Tahmin AsistanÄ±',
    description: 'Yapay zeka destekli tahmin Ã¶nerileri ve analiz',
    premium: true
  },
  {
    icon: 'ğŸ“Š',
    title: 'GeliÅŸmiÅŸ Ä°statistikler',
    description: 'TakÄ±m formlarÄ±, H2H analizleri ve trend grafikleri',
    premium: true
  },
  {
    icon: 'ğŸ®',
    title: 'MaÃ§ SimÃ¼lasyonu',
    description: 'MaÃ§larÄ± simÃ¼le et ve sonuÃ§larÄ± tahmin et',
    premium: true
  },
  {
    icon: 'ğŸ¨',
    title: 'Ã–zel Temalar',
    description: '15+ Ã¶zel tema ve renk seÃ§eneÄŸi',
    premium: true
  },
  {
    icon: 'ğŸ†',
    title: 'Ã–zel Rozetler',
    description: 'Premium Ã¼yelere Ã¶zel rozetler ve unvanlar',
    premium: true
  },
  {
    icon: 'ğŸš«',
    title: 'ReklamsÄ±z Deneyim',
    description: 'HiÃ§bir reklam gÃ¶rmeden oyunun keyfini Ã§Ä±kar',
    premium: true
  },
  {
    icon: 'âš¡',
    title: 'Ã–ncelikli Destek',
    description: '24 saat iÃ§inde yanÄ±t garantisi',
    premium: true
  },
  {
    icon: 'ğŸ”®',
    title: 'Erken EriÅŸim',
    description: 'Yeni Ã¶zelliklere ilk sen eriÅŸ',
    premium: true
  }
];

export default function PremiumPage() {
  const { user } = useAuth();
  const [selectedPlan, setSelectedPlan] = useState<string | null>(null);
  const [billingPeriod, setBillingPeriod] = useState<'monthly' | 'yearly'>('monthly');

  const handleSubscribe = (planId: string) => {
    // In real app, this would open payment modal
    alert(`${planId} planÄ±na abone olunuyor...`);
  };

  return (
    <main className="min-h-screen bg-slate-950 text-slate-100">
      {/* Hero Section */}
      <div className="relative bg-gradient-to-br from-amber-600 via-orange-600 to-red-600 px-4 py-16 overflow-hidden">
        <div className="absolute inset-0 bg-[url('/grid.svg')] opacity-10" />
        <div className="absolute top-20 left-10 w-32 h-32 bg-white/10 rounded-full blur-3xl" />
        <div className="absolute bottom-10 right-10 w-40 h-40 bg-white/10 rounded-full blur-3xl" />
        
        <div className="max-w-4xl mx-auto text-center relative">
          <div className="inline-flex items-center gap-2 bg-white/20 backdrop-blur-sm px-4 py-2 rounded-full text-sm font-medium mb-6">
            <span className="animate-pulse">âœ¨</span>
            <span>Premium Ãœyelik</span>
          </div>
          
          <h1 className="text-4xl md:text-5xl font-black text-white mb-4">
            Tahmin GÃ¼cÃ¼nÃ¼
            <span className="block text-amber-200">SÄ±nÄ±rsÄ±z Hale Getir</span>
          </h1>
          
          <p className="text-white/80 text-lg max-w-2xl mx-auto">
            AI destekli tahminler, geliÅŸmiÅŸ istatistikler ve Ã¶zel Ã¶zelliklerle 
            rakiplerinin bir adÄ±m Ã¶nÃ¼nde ol.
          </p>
        </div>
      </div>

      <div className="max-w-5xl mx-auto px-4 py-12 space-y-16">
        {/* Billing Toggle */}
        <div className="flex items-center justify-center gap-4">
          <button
            onClick={() => setBillingPeriod('monthly')}
            className={`px-4 py-2 rounded-lg font-medium transition-colors ${
              billingPeriod === 'monthly'
                ? 'bg-white text-slate-900'
                : 'text-slate-400 hover:text-white'
            }`}
          >
            AylÄ±k
          </button>
          <button
            onClick={() => setBillingPeriod('yearly')}
            className={`px-4 py-2 rounded-lg font-medium transition-colors ${
              billingPeriod === 'yearly'
                ? 'bg-white text-slate-900'
                : 'text-slate-400 hover:text-white'
            }`}
          >
            YÄ±llÄ±k <span className="text-emerald-400 text-sm ml-1">%40 indirim</span>
          </button>
        </div>

        {/* Pricing Cards */}
        <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
          {PREMIUM_PLANS.map(plan => {
            const displayPrice = billingPeriod === 'yearly' && plan.id === 'pro' 
              ? (plan.price * 12 * 0.6).toFixed(2)
              : plan.price;
            
            return (
              <div
                key={plan.id}
                className={`relative bg-slate-900/50 border rounded-2xl p-6 transition-all ${
                  plan.popular 
                    ? 'border-amber-500 scale-105 shadow-2xl shadow-amber-500/20' 
                    : 'border-slate-800 hover:border-slate-700'
                }`}
              >
                {plan.popular && (
                  <div className="absolute -top-3 left-1/2 -translate-x-1/2 bg-gradient-to-r from-amber-500 to-orange-500 px-4 py-1 rounded-full text-sm font-bold text-white">
                    En PopÃ¼ler
                  </div>
                )}
                
                <div className="text-center mb-6">
                  <h3 className="text-xl font-bold text-white">{plan.name}</h3>
                  <div className="mt-4">
                    <span className="text-4xl font-black text-white">
                      {displayPrice === 0 ? 'Ãœcretsiz' : `â‚º${displayPrice}`}
                    </span>
                    {plan.price > 0 && (
                      <span className="text-slate-400 ml-2">
                        /{billingPeriod === 'yearly' ? 'yÄ±l' : 'ay'}
                      </span>
                    )}
                  </div>
                </div>

                <ul className="space-y-3 mb-6">
                  {plan.features.map((feature, index) => (
                    <li key={index} className="flex items-center gap-2 text-sm text-slate-300">
                      <span className="text-emerald-400">âœ“</span>
                      {feature}
                    </li>
                  ))}
                </ul>

                <button
                  onClick={() => handleSubscribe(plan.id)}
                  className={`w-full py-3 rounded-xl font-bold transition-all ${
                    plan.price === 0
                      ? 'bg-slate-800 text-slate-400 cursor-default'
                      : plan.popular
                        ? 'bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white'
                        : 'bg-slate-800 hover:bg-slate-700 text-white'
                  }`}
                  disabled={plan.price === 0}
                >
                  {plan.price === 0 ? 'Mevcut Plan' : 'Abone Ol'}
                </button>
              </div>
            );
          })}
        </div>

        {/* Features Grid */}
        <div>
          <h2 className="text-2xl font-bold text-white text-center mb-8">
            Premium Ã–zellikleri
          </h2>
          
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
            {PREMIUM_FEATURES.map((feature, index) => (
              <div
                key={index}
                className="bg-slate-900/50 border border-slate-800 rounded-xl p-6 hover:border-amber-500/50 transition-colors"
              >
                <span className="text-3xl">{feature.icon}</span>
                <h3 className="font-bold text-white mt-3">{feature.title}</h3>
                <p className="text-sm text-slate-400 mt-1">{feature.description}</p>
              </div>
            ))}
          </div>
        </div>

        {/* Stats */}
        <div className="bg-gradient-to-r from-amber-500/10 to-orange-500/10 border border-amber-500/30 rounded-2xl p-8">
          <div className="grid grid-cols-2 md:grid-cols-4 gap-6 text-center">
            {[
              { value: '10,000+', label: 'Premium Ãœye' },
              { value: '%89', label: 'Daha YÃ¼ksek DoÄŸruluk' },
              { value: '50+', label: 'AI Modeli' },
              { value: '24/7', label: 'Destek' },
            ].map((stat, index) => (
              <div key={index}>
                <div className="text-3xl font-black text-amber-400">{stat.value}</div>
                <div className="text-sm text-slate-400 mt-1">{stat.label}</div>
              </div>
            ))}
          </div>
        </div>

        {/* FAQ */}
        <div>
          <h2 className="text-2xl font-bold text-white text-center mb-8">
            SÄ±k Sorulan Sorular
          </h2>
          
          <div className="space-y-4 max-w-3xl mx-auto">
            {[
              {
                q: 'Premium Ã¼yelik nasÄ±l Ã§alÄ±ÅŸÄ±r?',
                a: 'Premium Ã¼yelik satÄ±n aldÄ±ÄŸÄ±nÄ±zda, tÃ¼m premium Ã¶zelliklere anÄ±nda eriÅŸim kazanÄ±rsÄ±nÄ±z. ÃœyeliÄŸiniz otomatik olarak yenilenir.'
              },
              {
                q: 'Ä°stediÄŸim zaman iptal edebilir miyim?',
                a: 'Evet, Ã¼yeliÄŸinizi istediÄŸiniz zaman iptal edebilirsiniz. Ä°ptal ettiÄŸinizde, mevcut dÃ¶nemin sonuna kadar premium Ã¶zelliklere eriÅŸiminiz devam eder.'
              },
              {
                q: 'AI Tahmin AsistanÄ± ne kadar doÄŸru?',
                a: 'AI modelimiz, tarihsel veriler ve form analizleri ile %89 doÄŸruluk oranÄ±na sahiptir. Ancak futbol her zaman sÃ¼rprizlere aÃ§Ä±ktÄ±r!'
              },
              {
                q: 'Ã–zel rozetler nasÄ±l kazanÄ±lÄ±r?',
                a: 'Premium Ã¼ye olduÄŸunuzda otomatik olarak Ã¶zel Premium rozeti alÄ±rsÄ±nÄ±z. AyrÄ±ca premium gÃ¶revleri tamamlayarak ek rozetler kazanabilirsiniz.'
              },
            ].map((faq, index) => (
              <details
                key={index}
                className="bg-slate-900/50 border border-slate-800 rounded-xl group"
              >
                <summary className="px-6 py-4 cursor-pointer font-medium text-white flex items-center justify-between">
                  {faq.q}
                  <span className="text-slate-500 group-open:rotate-180 transition-transform">â–¼</span>
                </summary>
                <div className="px-6 pb-4 text-slate-400 text-sm">
                  {faq.a}
                </div>
              </details>
            ))}
          </div>
        </div>

        {/* CTA */}
        <div className="text-center">
          <h2 className="text-2xl font-bold text-white mb-4">
            Hala DÃ¼ÅŸÃ¼nÃ¼yor musun?
          </h2>
          <p className="text-slate-400 mb-6">
            7 gÃ¼nlÃ¼k Ã¼cretsiz deneme ile tÃ¼m Ã¶zellikleri keÅŸfet!
          </p>
          <button className="px-8 py-4 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 rounded-xl font-bold text-lg transition-all">
            ğŸš€ Ãœcretsiz Denemeyi BaÅŸlat
          </button>
        </div>

        {/* Guarantee */}
        <div className="flex items-center justify-center gap-4 py-6 border-t border-slate-800">
          <span className="text-2xl">ğŸ”’</span>
          <div>
            <div className="font-medium text-white">30 GÃ¼n Para Ä°ade Garantisi</div>
            <div className="text-sm text-slate-400">Memnun kalmazsan, paranÄ± iade ederiz</div>
          </div>
        </div>
      </div>
    </main>
  );
}

```

## File: app\profile\page.tsx
```
"use client";

import { useRouter } from "next/navigation";
import { useAuth } from "../context/AuthContext";
import { useGameState, ACHIEVEMENTS, getLevelTitle, getXPForNextLevel } from "../utils/gameState";
import { LEVEL_THRESHOLDS } from "../types";
import { Card, CardHeader, CardTitle, CardContent } from "../components/ui/Card";
import { Button } from "../components/ui/Button";
import { Badge } from "../components/ui/Badge";
import { Skeleton } from "../components/ui/Skeleton";
import { motion } from "framer-motion";
import { LogOut, Trophy, Zap, Target, TrendingUp, Settings as SettingsIcon, Heart, Home, Edit2 } from "lucide-react";
import { cn } from "@/lib/utils";

export default function ProfilePage() {
    const router = useRouter();
    const { user, loading: authLoading, signOut } = useAuth();
    const { gameState, toggleSound, setFavoriteTeam } = useGameState();

    function getXPProgress(state: typeof gameState) {
        const currentLevelXP = LEVEL_THRESHOLDS[state.level - 1] || 0;
        const nextLevelXP = getXPForNextLevel(state.level);
        const progress = state.xp - currentLevelXP;
        const required = nextLevelXP - currentLevelXP;
        return { progress, required, percentage: (progress / required) * 100 };
    }

    const { progress, required, percentage } = getXPProgress(gameState);
    const accuracy = gameState.stats.totalPredictions > 0
        ? Math.round((gameState.stats.correctPredictions / gameState.stats.totalPredictions) * 100)
        : 0;

    const allAchievements = Object.values(ACHIEVEMENTS);
    const unlockedCount = gameState.achievements.length;

    const handleSignOut = async () => {
        await signOut();
        router.push('/login');
    };

    if (authLoading) {
        return (
            <main className="min-h-screen bg-background flex items-center justify-center">
                <div className="flex flex-col items-center gap-4">
                    <Zap className="w-12 h-12 text-primary animate-pulse shadow-glow-primary" />
                    <span className="text-xs font-black uppercase tracking-widest text-text-muted">Profil YÃ¼kleniyor</span>
                </div>
            </main>
        );
    }

    return (
        <main className="min-h-screen bg-background text-text-primary p-4 sm:p-6 lg:p-8 animate-in fade-in duration-500">
            <div className="max-w-2xl mx-auto space-y-6">

                {/* Profile Header Block */}
                <motion.div
                    initial={{ opacity: 0, y: 20 }}
                    animate={{ opacity: 1, y: 0 }}
                >
                    <Card className="relative overflow-hidden border-border-main/50 bg-surface-primary/50 shadow-premium-lg">
                        <div className="absolute top-0 right-0 w-48 h-48 bg-primary/10 blur-[64px] -z-10" />
                        <CardContent className="p-6">
                            <div className="flex flex-col sm:flex-row items-center sm:items-start gap-6">
                                {/* Large Avatar/Level Badge */}
                                <div className="relative group">
                                    <div className="w-24 h-24 rounded-3xl bg-gradient-to-br from-primary via-primary-dark to-black flex flex-col items-center justify-center shadow-glow-primary transition-transform duration-500 group-hover:rotate-3">
                                        <span className="text-[10px] font-black text-white/50 uppercase tracking-tighter -mb-1">LVL</span>
                                        <span className="text-4xl font-black text-white italic">{gameState.level}</span>
                                    </div>
                                    <div className="absolute -bottom-2 -right-2">
                                        <Badge variant="success" className="h-6 w-6 rounded-full flex items-center justify-center p-0 border-2 border-surface-primary ring-2 ring-emerald-500/20">
                                            <TrendingUp className="w-3.5 h-3.5" />
                                        </Badge>
                                    </div>
                                </div>

                                {/* User Meta Info */}
                                <div className="flex-1 text-center sm:text-left space-y-2">
                                    <div className="flex flex-col sm:flex-row sm:items-center gap-2">
                                        <h1 className="text-2xl font-black tracking-tight text-text-primary uppercase italic">
                                            {user?.user_metadata?.name || 'Voleybol Tutkunu'}
                                        </h1>
                                        <Badge variant="outline" className="text-[10px] font-black tracking-widest text-primary border-primary/20 bg-primary/5 self-center sm:self-auto italic">
                                            {getLevelTitle(gameState.level)}
                                        </Badge>
                                    </div>
                                    <p className="text-sm text-text-secondary font-medium">
                                        {user?.email || 'Anonim Hesap'}
                                    </p>

                                    {/* XP Progress Bar */}
                                    <div className="pt-2">
                                        <div className="flex justify-between items-end mb-1.5">
                                            <span className="text-[10px] font-black text-text-muted uppercase tracking-widest">TecrÃ¼be (XP)</span>
                                            <span className="text-[10px] font-black text-text-primary">{gameState.xp.toLocaleString()} / {required.toLocaleString()}</span>
                                        </div>
                                        <div className="h-2 bg-surface-secondary/50 rounded-full overflow-hidden border border-border-subtle p-0.5">
                                            <motion.div
                                                initial={{ width: 0 }}
                                                animate={{ width: `${Math.min(percentage, 100)}%` }}
                                                className="h-full bg-gradient-to-r from-primary to-primary-light rounded-full shadow-glow-primary"
                                            />
                                        </div>
                                    </div>
                                </div>

                                {/* Actions */}
                                <div className="flex flex-col gap-2 w-full sm:w-auto">
                                    {user && (
                                        <Button
                                            variant="outline"
                                            size="sm"
                                            className="h-9 font-black uppercase text-[10px] tracking-widest border-rose-500/30 text-rose-500 hover:bg-rose-500 hover:text-white"
                                            onClick={handleSignOut}
                                            leftIcon={<LogOut className="w-3 h-3" />}
                                        >
                                            Ã‡IKIÅ YAP
                                        </Button>
                                    )}
                                    <Button
                                        variant="secondary"
                                        size="sm"
                                        className="h-9 font-black uppercase text-[10px] tracking-widest"
                                        onClick={() => router.push('/ayarlar')}
                                        leftIcon={<SettingsIcon className="w-3 h-3" />}
                                    >
                                        AYARLAR
                                    </Button>
                                </div>
                            </div>
                        </CardContent>
                    </Card>
                </motion.div>

                {/* Primary Stats Grid */}
                <motion.div
                    className="grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4"
                    initial={{ opacity: 0, y: 20 }}
                    animate={{ opacity: 1, y: 0 }}
                    transition={{ delay: 0.1 }}
                >
                    <StatMini icon={<Trophy className="w-4 h-4" />} value={gameState.stats.totalPredictions} label="Toplam Tahmin" />
                    <StatMini icon={<Target className="w-4 h-4" />} value={gameState.stats.correctPredictions} label="DoÄŸru Skor" />
                    <StatMini icon={<TrendingUp className="w-4 h-4" />} value={`${accuracy}%`} label="BaÅŸarÄ± OranÄ±" />
                    <StatMini icon={<Zap className="w-4 h-4" />} value={gameState.stats.bestStreak} label="En Ä°yi Seri" />
                </motion.div>

                {/* Favorite Team & Shared Space */}
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                    {gameState.favoriteTeam && (
                        <motion.div initial={{ opacity: 0, x: -20 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.2 }}>
                            <Card className="bg-primary/5 border-primary/20 overflow-hidden group">
                                <CardContent className="p-4 flex items-center justify-between">
                                    <div className="flex items-center gap-3">
                                        <div className="w-10 h-10 rounded-xl bg-primary/20 flex items-center justify-center">
                                            <Heart className="w-5 h-5 text-primary fill-current" />
                                        </div>
                                        <div>
                                            <p className="text-[10px] font-black text-primary uppercase tracking-widest">Favori TakÄ±m</p>
                                            <p className="text-lg font-black text-text-primary italic uppercase tracking-tighter">{gameState.favoriteTeam}</p>
                                        </div>
                                    </div>
                                    <Button
                                        variant="ghost"
                                        size="icon"
                                        className="h-8 w-8 text-text-muted hover:text-rose-500"
                                        onClick={() => setFavoriteTeam(null)}
                                    >
                                        <Edit2 className="w-4 h-4" />
                                    </Button>
                                </CardContent>
                            </Card>
                        </motion.div>
                    )}

                    <motion.div initial={{ opacity: 0, x: 20 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.3 }}>
                        <Card className="bg-surface-secondary/20 border-border-main/50">
                            <CardContent className="p-4 flex items-center justify-between">
                                <div className="flex items-center gap-3">
                                    <div className="w-10 h-10 rounded-xl bg-surface-secondary/50 flex items-center justify-center">
                                        <Zap className="w-5 h-5 text-amber-500" />
                                    </div>
                                    <div>
                                        <p className="text-[10px] font-black text-text-muted uppercase tracking-widest">Ses Efektleri</p>
                                        <p className="text-sm font-black text-text-primary uppercase">{gameState.soundEnabled ? 'Aktif' : 'Pasif'}</p>
                                    </div>
                                </div>
                                <button
                                    onClick={toggleSound}
                                    className={cn(
                                        "w-10 h-5 rounded-full transition-all relative border border-border-subtle",
                                        gameState.soundEnabled ? "bg-primary shadow-glow-primary" : "bg-surface-dark"
                                    )}
                                    aria-label="Ses Efektlerini DeÄŸiÅŸtir"
                                >
                                    <motion.div
                                        layout
                                        className="w-3.5 h-3.5 bg-white rounded-full absolute top-0.5"
                                        animate={{ x: gameState.soundEnabled ? 20 : 2 }}
                                    />
                                </button>
                            </CardContent>
                        </Card>
                    </motion.div>
                </div>

                {/* Achievements Showcase */}
                <motion.div
                    initial={{ opacity: 0, y: 20 }}
                    animate={{ opacity: 1, y: 0 }}
                    transition={{ delay: 0.4 }}
                >
                    <Card className="bg-surface-primary border-border-main/50 overflow-hidden shadow-2xl">
                        <CardHeader className="bg-surface-secondary/30 p-4 border-b border-border-main flex-row justify-between items-center space-y-0">
                            <CardTitle className="text-xs font-black uppercase tracking-[0.2em] flex items-center gap-2">
                                <Trophy className="w-4 h-4 text-primary" />
                                BaÅŸarÄ± BaÅŸarÄ±mlarÄ±
                            </CardTitle>
                            <Badge variant="secondary" className="px-2 py-0 h-5 text-[10px] font-black">
                                {unlockedCount}/{allAchievements.length}
                            </Badge>
                        </CardHeader>
                        <CardContent className="p-4">
                            <div className="grid grid-cols-4 sm:grid-cols-6 gap-3">
                                {allAchievements.map((achievement, idx) => {
                                    const isUnlocked = gameState.achievements.some(a => a.id === achievement.id);
                                    return (
                                        <motion.div
                                            key={achievement.id}
                                            initial={{ opacity: 0, scale: 0.8 }}
                                            animate={{ opacity: 1, scale: 1 }}
                                            transition={{ delay: 0.4 + (idx * 0.05) }}
                                            className={cn(
                                                "relative flex flex-col items-center justify-center p-3 rounded-2xl border transition-all aspect-square",
                                                isUnlocked
                                                    ? "bg-gradient-to-br from-primary/10 to-primary/5 border-primary/20 shadow-premium-sm"
                                                    : "bg-surface-dark/50 border-border-subtle opacity-30 grayscale"
                                            )}
                                            title={`${achievement.name}: ${achievement.description}`}
                                        >
                                            <span className="text-2xl mb-1">{achievement.icon}</span>
                                            <div className="text-[8px] font-black text-center truncate w-full uppercase tracking-tighter text-text-primary px-1">
                                                {achievement.name}
                                            </div>
                                            {isUnlocked && (
                                                <div className="absolute -top-1 -right-1">
                                                    <div className="w-4 h-4 bg-primary rounded-full flex items-center justify-center shadow-glow-primary">
                                                        <Zap className="w-2 h-2 text-white fill-current" />
                                                    </div>
                                                </div>
                                            )}
                                        </motion.div>
                                    );
                                })}
                            </div>
                        </CardContent>
                    </Card>
                </motion.div>

                {/* Footer Navigation */}
                <div className="flex items-center justify-center gap-4 py-8">
                    <Button
                        variant="ghost"
                        size="sm"
                        onClick={() => router.push('/anasayfa')}
                        className="text-text-muted hover:text-text-primary font-black uppercase text-[10px] tracking-widest"
                        leftIcon={<Home className="w-4 h-4" />}
                    >
                        Ana Sayfa
                    </Button>
                </div>

            </div>
        </main>
    );
}

function StatMini({ icon, value, label }: { icon: React.ReactNode; value: string | number; label: string }) {
    return (
        <Card className="bg-surface-primary border-border-main/50 p-4 flex flex-col items-center justify-center gap-1 group hover:border-primary/30 transition-all duration-300">
            <div className="w-8 h-8 rounded-xl bg-surface-secondary/50 flex items-center justify-center text-primary transition-transform group-hover:scale-110 group-hover:bg-primary/10">
                {icon}
            </div>
            <div className="text-xl font-black text-text-primary italic tabular-nums mt-1">{value}</div>
            <div className="text-[9px] font-black text-text-muted uppercase tracking-[0.1em]">{label}</div>
        </Card>
    );
}


```

## File: app\providers\QueryProvider.tsx
```
"use client";

import { QueryClient, QueryClientProvider } from "@tanstack/react-query";
import { ReactNode, useState } from "react";

export function QueryProvider({ children }: { children: ReactNode }) {
    const [queryClient] = useState(() => new QueryClient({
        defaultOptions: {
            queries: {
                staleTime: 1000 * 60 * 10, // 10 minutes - data doesn't change frequently
                gcTime: 1000 * 60 * 30, // 30 minutes cache time (formerly cacheTime)
                refetchOnWindowFocus: false,
                refetchOnMount: false,
                refetchOnReconnect: false,
                retry: 1, // Only retry once on failure
                retryDelay: 1000,
            },
        },
    }));

    return (
        <QueryClientProvider client={queryClient}>
            {children}
        </QueryClientProvider>
    );
}

```

# Project Application Context - Part 14

## File: app\quests\page.tsx
```
"use client";

import { useState, useMemo } from "react";
import { useQuests } from "../context/QuestsContext";
import { useAuth } from "../context/AuthContext";
import { useGameState } from "../utils/gameState";
import { BADGE_RARITY_COLORS, Badge } from "../types";
import Link from "next/link";

export default function QuestsPage() {
  const { user } = useAuth();
  const { gameState } = useGameState();
  const { 
    dailyQuests, 
    weeklyChallenge, 
    streakData, 
    badges,
    unlockedBadges,
    claimQuestReward,
    useStreakFreeze,
    isLoading 
  } = useQuests();
  
  const [activeTab, setActiveTab] = useState<'quests' | 'badges' | 'streak'>('quests');
  const [showRewardModal, setShowRewardModal] = useState<{ xp: number; coins: number } | null>(null);

  // Calculate streak status
  const streakStatus = useMemo(() => {
    if (!streakData.lastPredictionDate) return 'inactive';
    
    const lastDate = new Date(streakData.lastPredictionDate);
    const today = new Date();
    const diffDays = Math.floor((today.getTime() - lastDate.getTime()) / (1000 * 60 * 60 * 24));
    
    if (diffDays === 0) return 'active';
    if (diffDays === 1) return 'at_risk';
    return 'broken';
  }, [streakData.lastPredictionDate]);

  const handleClaimReward = async (questId: string) => {
    const reward = await claimQuestReward(questId);
    if (reward) {
      setShowRewardModal(reward);
      setTimeout(() => setShowRewardModal(null), 3000);
    }
  };

  if (!user) {
    return (
      <div className="min-h-screen bg-slate-950 flex items-center justify-center">
        <div className="text-center">
          <p className="text-slate-400 mb-4">Bu sayfayÄ± gÃ¶rÃ¼ntÃ¼lemek iÃ§in giriÅŸ yapmalÄ±sÄ±nÄ±z.</p>
          <Link href="/" className="text-emerald-400 hover:underline">GiriÅŸ Yap</Link>
        </div>
      </div>
    );
  }

  return (
    <main className="min-h-screen bg-slate-950 text-slate-100">
      {/* Header with Streak */}
      <div className="bg-gradient-to-r from-orange-600 to-red-600 px-4 py-6">
        <div className="max-w-4xl mx-auto">
          <div className="flex items-center justify-between">
            <div>
              <h1 className="text-2xl font-bold text-white">GÃ¶revler & BaÅŸarÄ±mlar</h1>
              <p className="text-white/70 text-sm mt-1">
                GÃ¼nlÃ¼k gÃ¶revleri tamamla, XP kazan!
              </p>
            </div>
            
            {/* Streak Display */}
            <div className="text-center">
              <div className={`text-4xl font-black ${
                streakStatus === 'active' ? 'text-white' : 
                streakStatus === 'at_risk' ? 'text-amber-300' : 'text-slate-300'
              }`}>
                {streakData.currentStreak}ğŸ”¥
              </div>
              <div className="text-xs text-white/70">GÃ¼nlÃ¼k Seri</div>
            </div>
          </div>
        </div>
      </div>

      {/* Tabs */}
      <div className="max-w-4xl mx-auto px-4">
        <div className="flex gap-2 py-4 border-b border-slate-800">
          {[
            { key: 'quests', label: 'GÃ¼nlÃ¼k GÃ¶revler', icon: 'ğŸ“‹' },
            { key: 'badges', label: 'Rozetler', icon: 'ğŸ–ï¸' },
            { key: 'streak', label: 'Seri', icon: 'ğŸ”¥' },
          ].map(tab => (
            <button
              key={tab.key}
              onClick={() => setActiveTab(tab.key as typeof activeTab)}
              className={`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium transition-all ${
                activeTab === tab.key
                  ? 'bg-white/10 text-white'
                  : 'text-slate-400 hover:text-white hover:bg-white/5'
              }`}
            >
              <span>{tab.icon}</span>
              <span>{tab.label}</span>
            </button>
          ))}
        </div>

        {/* Content */}
        <div className="py-6">
          {/* Daily Quests */}
          {activeTab === 'quests' && (
            <div className="space-y-4">
              {/* Daily Quest Progress */}
              <div className="bg-slate-900/50 border border-slate-800 rounded-xl p-4">
                <div className="flex items-center justify-between mb-3">
                  <h3 className="font-bold text-white">GÃ¼nlÃ¼k Ä°lerleme</h3>
                  <span className="text-sm text-slate-400">
                    {dailyQuests.filter(q => q.completed).length}/{dailyQuests.length} tamamlandÄ±
                  </span>
                </div>
                <div className="h-2 bg-slate-800 rounded-full overflow-hidden">
                  <div 
                    className="h-full bg-gradient-to-r from-orange-500 to-red-500 transition-all duration-500"
                    style={{ width: `${(dailyQuests.filter(q => q.completed).length / dailyQuests.length) * 100}%` }}
                  />
                </div>
              </div>

              {/* Quest Cards */}
              <div className="space-y-3">
                {dailyQuests.map(quest => (
                  <div
                    key={quest.id}
                    className={`bg-slate-900/50 border rounded-xl p-4 transition-all ${
                      quest.completed 
                        ? quest.claimed 
                          ? 'border-slate-700 opacity-60' 
                          : 'border-emerald-500/50 bg-emerald-500/10'
                        : 'border-slate-800'
                    }`}
                  >
                    <div className="flex items-center gap-4">
                      <div className="text-3xl">{quest.icon}</div>
                      <div className="flex-1">
                        <h3 className="font-bold text-white">{quest.title}</h3>
                        <p className="text-sm text-slate-400">{quest.description}</p>
                        
                        {/* Progress Bar */}
                        <div className="mt-2">
                          <div className="flex items-center justify-between text-xs text-slate-500 mb-1">
                            <span>{quest.progress}/{quest.target}</span>
                            <span>{Math.round((quest.progress / quest.target) * 100)}%</span>
                          </div>
                          <div className="h-1.5 bg-slate-800 rounded-full overflow-hidden">
                            <div 
                              className={`h-full transition-all duration-300 ${
                                quest.completed ? 'bg-emerald-500' : 'bg-orange-500'
                              }`}
                              style={{ width: `${Math.min((quest.progress / quest.target) * 100, 100)}%` }}
                            />
                          </div>
                        </div>
                      </div>
                      
                      {/* Rewards */}
                      <div className="text-right">
                        <div className="flex items-center gap-2 text-sm">
                          <span className="text-amber-400">+{quest.xpReward} XP</span>
                          <span className="text-yellow-400">+{quest.coinReward} ğŸª™</span>
                        </div>
                        
                        {quest.completed && !quest.claimed && (
                          <button
                            onClick={() => handleClaimReward(quest.id)}
                            className="mt-2 px-4 py-1.5 bg-emerald-600 hover:bg-emerald-700 rounded-lg text-sm font-medium transition-colors"
                          >
                            Ã–dÃ¼lÃ¼ Al
                          </button>
                        )}
                        
                        {quest.claimed && (
                          <span className="text-xs text-slate-500">âœ“ AlÄ±ndÄ±</span>
                        )}
                      </div>
                    </div>
                  </div>
                ))}
              </div>

              {/* Weekly Challenge */}
              {weeklyChallenge && (
                <div className="mt-8">
                  <h2 className="text-lg font-bold text-white mb-4">ğŸ† HaftalÄ±k Meydan Okuma</h2>
                  <div className="bg-gradient-to-br from-purple-900/50 to-pink-900/50 border border-purple-500/30 rounded-xl p-6">
                    <div className="flex items-start gap-4">
                      <div className="text-4xl">{weeklyChallenge.icon}</div>
                      <div className="flex-1">
                        <h3 className="text-xl font-bold text-white">{weeklyChallenge.title}</h3>
                        <p className="text-slate-300 mt-1">{weeklyChallenge.description}</p>
                        
                        <div className="mt-4">
                          <div className="flex items-center justify-between text-sm text-slate-400 mb-2">
                            <span>{weeklyChallenge.progress}/{weeklyChallenge.target}</span>
                            <span>{weeklyChallenge.participants} katÄ±lÄ±mcÄ±</span>
                          </div>
                          <div className="h-2 bg-slate-800 rounded-full overflow-hidden">
                            <div 
                              className="h-full bg-gradient-to-r from-purple-500 to-pink-500"
                              style={{ width: `${(weeklyChallenge.progress / weeklyChallenge.target) * 100}%` }}
                            />
                          </div>
                        </div>
                        
                        <div className="mt-4 flex items-center gap-4">
                          <span className="text-amber-400 font-bold">+{weeklyChallenge.xpReward} XP</span>
                          {weeklyChallenge.badgeReward && (
                            <span className="text-purple-400">ğŸ–ï¸ Ã–zel Rozet</span>
                          )}
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              )}
            </div>
          )}

          {/* Badges */}
          {activeTab === 'badges' && (
            <div className="space-y-6">
              {/* Unlocked Badges */}
              <div>
                <h2 className="text-lg font-bold text-white mb-4">
                  KazanÄ±lan Rozetler ({unlockedBadges.length})
                </h2>
                {unlockedBadges.length === 0 ? (
                  <div className="text-center py-8 bg-slate-900/50 border border-slate-800 rounded-xl">
                    <div className="text-5xl mb-4">ğŸ–ï¸</div>
                    <p className="text-slate-400">HenÃ¼z rozet kazanmadÄ±nÄ±z</p>
                    <p className="text-sm text-slate-500 mt-2">GÃ¶revleri tamamlayarak rozetler kazanÄ±n!</p>
                  </div>
                ) : (
                  <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                    {unlockedBadges.map(badge => (
                      <BadgeCard key={badge.id} badge={badge} unlocked />
                    ))}
                  </div>
                )}
              </div>

              {/* All Badges */}
              <div>
                <h2 className="text-lg font-bold text-white mb-4">
                  TÃ¼m Rozetler ({badges.length})
                </h2>
                <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                  {badges.map(badge => {
                    const isUnlocked = unlockedBadges.some(b => b.id === badge.id);
                    return (
                      <BadgeCard 
                        key={badge.id} 
                        badge={badge} 
                        unlocked={isUnlocked}
                      />
                    );
                  })}
                </div>
              </div>
            </div>
          )}

          {/* Streak */}
          {activeTab === 'streak' && (
            <div className="space-y-6">
              {/* Current Streak */}
              <div className="bg-gradient-to-br from-orange-900/50 to-red-900/50 border border-orange-500/30 rounded-xl p-8 text-center">
                <div className="text-6xl font-black text-white mb-2">
                  {streakData.currentStreak}
                </div>
                <div className="text-2xl mb-4">ğŸ”¥</div>
                <p className="text-slate-300">GÃ¼nlÃ¼k Seri</p>
                
                {streakStatus === 'at_risk' && (
                  <div className="mt-4 p-3 bg-amber-500/20 border border-amber-500/30 rounded-lg">
                    <p className="text-amber-300 text-sm">
                      âš ï¸ Seriniz risk altÄ±nda! BugÃ¼n tahmin yaparak koruyun.
                    </p>
                  </div>
                )}
                
                {streakStatus === 'broken' && (
                  <div className="mt-4 p-3 bg-red-500/20 border border-red-500/30 rounded-lg">
                    <p className="text-red-300 text-sm">
                      âŒ Seriniz kÄ±rÄ±ldÄ±. Yeni bir seri baÅŸlatÄ±n!
                    </p>
                  </div>
                )}
              </div>

              {/* Stats Grid */}
              <div className="grid grid-cols-2 gap-4">
                <div className="bg-slate-900/50 border border-slate-800 rounded-xl p-4 text-center">
                  <div className="text-3xl font-bold text-amber-400">{streakData.longestStreak}</div>
                  <p className="text-sm text-slate-400 mt-1">En Uzun Seri</p>
                </div>
                <div className="bg-slate-900/50 border border-slate-800 rounded-xl p-4 text-center">
                  <div className="text-3xl font-bold text-cyan-400">{streakData.streakFreezeAvailable}</div>
                  <p className="text-sm text-slate-400 mt-1">Dondurma HakkÄ±</p>
                </div>
              </div>

              {/* Streak Freeze */}
              {streakData.streakFreezeAvailable > 0 && streakStatus === 'at_risk' && (
                <div className="bg-slate-900/50 border border-slate-800 rounded-xl p-4">
                  <div className="flex items-center justify-between">
                    <div>
                      <h3 className="font-bold text-white">â„ï¸ Seri Dondurma</h3>
                      <p className="text-sm text-slate-400">BugÃ¼n oynayamazsanÄ±z serinizi koruyun</p>
                    </div>
                    <button
                      onClick={useStreakFreeze}
                      className="px-4 py-2 bg-cyan-600 hover:bg-cyan-700 rounded-lg text-sm font-medium transition-colors"
                    >
                      Kullan
                    </button>
                  </div>
                </div>
              )}

              {/* Streak History */}
              {streakData.streakHistory.length > 0 && (
                <div>
                  <h3 className="font-bold text-white mb-4">Son 7 GÃ¼n</h3>
                  <div className="flex gap-2">
                    {streakData.streakHistory.slice(0, 7).map((entry, index) => (
                      <div
                        key={index}
                        className={`flex-1 text-center p-3 rounded-xl ${
                          entry.predictionsCount > 0
                            ? 'bg-emerald-500/20 border border-emerald-500/30'
                            : 'bg-slate-800/50 border border-slate-700'
                        }`}
                      >
                        <div className="text-lg">
                          {entry.predictionsCount > 0 ? 'âœ…' : 'âŒ'}
                        </div>
                        <div className="text-xs text-slate-400 mt-1">
                          {new Date(entry.date).toLocaleDateString('tr-TR', { weekday: 'short' })}
                        </div>
                      </div>
                    ))}
                  </div>
                </div>
              )}
            </div>
          )}
        </div>
      </div>

      {/* Reward Modal */}
      {showRewardModal && (
        <div className="fixed inset-0 bg-black/70 flex items-center justify-center z-50">
          <div className="bg-slate-900 border border-slate-700 rounded-2xl p-8 text-center animate-bounce-in">
            <div className="text-5xl mb-4">ğŸ‰</div>
            <h2 className="text-2xl font-bold text-white mb-4">Ã–dÃ¼l KazandÄ±nÄ±z!</h2>
            <div className="flex items-center justify-center gap-6">
              <div className="text-amber-400 text-xl font-bold">+{showRewardModal.xp} XP</div>
              <div className="text-yellow-400 text-xl font-bold">+{showRewardModal.coins} ğŸª™</div>
            </div>
          </div>
        </div>
      )}
    </main>
  );
}

// Badge Card Component
function BadgeCard({ badge, unlocked }: { badge: Badge; unlocked: boolean }) {
  return (
    <div 
      className={`relative bg-slate-900/50 border rounded-xl p-4 text-center transition-all ${
        unlocked 
          ? 'border-slate-700 hover:border-slate-600' 
          : 'border-slate-800 opacity-50 grayscale'
      }`}
    >
      <div className="text-4xl mb-2">{badge.icon}</div>
      <h3 className={`font-bold text-sm ${unlocked ? 'text-white' : 'text-slate-500'}`}>
        {badge.name}
      </h3>
      <p className="text-xs text-slate-500 mt-1">{badge.description}</p>
      
      {/* Rarity indicator */}
      <div className={`mt-3 text-xs font-medium px-2 py-0.5 rounded-full bg-gradient-to-r ${BADGE_RARITY_COLORS[badge.rarity]} text-white inline-block`}>
        {badge.rarity.toUpperCase()}
      </div>
      
      {/* Progress bar for locked badges */}
      {!unlocked && badge.progress !== undefined && badge.target !== undefined && (
        <div className="mt-2">
          <div className="h-1 bg-slate-800 rounded-full overflow-hidden">
            <div 
              className="h-full bg-slate-600"
              style={{ width: `${(badge.progress / badge.target) * 100}%` }}
            />
          </div>
          <p className="text-xs text-slate-600 mt-1">{badge.progress}/{badge.target}</p>
        </div>
      )}
      
      {unlocked && badge.unlockedAt && (
        <p className="text-xs text-slate-600 mt-2">
          {new Date(badge.unlockedAt).toLocaleDateString('tr-TR')}
        </p>
      )}
    </div>
  );
}

```

## File: app\register\layout.tsx
```
import { Metadata } from "next";

export const metadata: Metadata = {
    title: "KayÄ±t Ol",
    description: "VolleySimulator'a Ã¼cretsiz kayÄ±t olun. Voleybol maÃ§ tahminleri yapÄ±n, puan kazanÄ±n ve diÄŸer taraftarlarla yarÄ±ÅŸÄ±n.",
    openGraph: {
        title: "KayÄ±t Ol | VolleySimulator",
        description: "VolleySimulator'a Ã¼cretsiz kayÄ±t olun ve tahmin oyununa katÄ±lÄ±n.",
    },
    robots: {
        index: false,
        follow: true,
    },
};

export default function RegisterLayout({
    children,
}: {
    children: React.ReactNode;
}) {
    return children;
}

```

## File: app\register\page.tsx
```
"use client";

import { useState } from "react";
import Link from "next/link";
import { useRouter } from "next/navigation";
import { useAuth } from "../context/AuthContext";
import { validators, sanitize } from "../utils/validation";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Label } from "@/components/ui/label";
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card";
import { Alert, AlertDescription } from "@/components/ui/alert";
import { Separator } from "@/components/ui/separator";
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from "@/components/ui/select";
import { Badge } from "@/components/ui/badge";
import { Loader2, ArrowRight, ArrowLeft, AlertCircle, Gamepad2 } from "lucide-react";

export default function RegisterPage() {
    const router = useRouter();
    const { signUp, signInWithGoogle, user } = useAuth();

    const [formData, setFormData] = useState({
        name: "",
        email: "",
        password: "",
        confirmPassword: "",
        favoriteTeam: ""
    });
    const [isLoading, setIsLoading] = useState(false);
    const [error, setError] = useState("");
    const [step, setStep] = useState(1);

    // Redirect if already logged in
    if (user) {
        router.push('/profile');
        return null;
    }

    const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {
        setFormData({ ...formData, [e.target.name]: e.target.value });
    };

    const handleSubmit = async (e: React.FormEvent) => {
        e.preventDefault();

        if (step === 1) {
            // Use validation utilities
            const nameError = validators.string.required(formData.name, "Ad gerekli");
            const emailError = validators.string.required(formData.email, "E-posta gerekli")
                || validators.string.email(formData.email, "GeÃ§erli bir e-posta girin");

            if (nameError || emailError) {
                setError(nameError || emailError || "");
                return;
            }
            // Sanitize inputs
            setFormData(prev => ({
                ...prev,
                name: sanitize.normalizeWhitespace(prev.name),
                email: prev.email.trim().toLowerCase()
            }));
            setError("");
            setStep(2);
            return;
        }

        if (formData.password !== formData.confirmPassword) {
            setError("Åifreler eÅŸleÅŸmiyor");
            return;
        }

        if (formData.password.length < 6) {
            setError("Åifre en az 6 karakter olmalÄ±");
            return;
        }

        setIsLoading(true);
        setError("");

        const { error } = await signUp(formData.email, formData.password, {
            name: formData.name
        });

        if (error) {
            setError(error.message === "User already registered"
                ? "Bu e-posta zaten kayÄ±tlÄ±"
                : error.message
            );
            setIsLoading(false);
        } else {
            // Save favorite team to localStorage for now
            if (formData.favoriteTeam) {
                localStorage.setItem('favoriteTeam', formData.favoriteTeam);
            }
            router.push('/profile');
        }
    };

    return (
        <main className="min-h-screen bg-background text-foreground flex items-center justify-center p-4">
            <div className="w-full max-w-md">
                {/* Header */}
                <div className="text-center mb-8">
                    <Link href="/" className="inline-block mb-4">
                        <span className="text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-emerald-400 to-teal-200">
                            VolleySimulator
                        </span>
                    </Link>
                    <h1 className="text-3xl font-black">KayÄ±t Ol</h1>
                    <p className="text-muted-foreground text-sm mt-2">Tahmin oyununa katÄ±l ve XP kazan!</p>
                </div>

                {/* Progress Steps */}
                <div className="flex items-center justify-center gap-4 mb-6">
                    <div className={`flex items-center gap-2 ${step >= 1 ? 'text-primary' : 'text-muted-foreground'}`}>
                        <div className={`w-8 h-8 rounded-full flex items-center justify-center font-bold ${step >= 1 ? 'bg-primary text-primary-foreground' : 'bg-muted'}`}>
                            1
                        </div>
                        <span className="text-sm font-medium hidden sm:inline">Bilgiler</span>
                    </div>
                    <div className={`w-12 h-0.5 ${step >= 2 ? 'bg-primary' : 'bg-muted'}`} />
                    <div className={`flex items-center gap-2 ${step >= 2 ? 'text-primary' : 'text-muted-foreground'}`}>
                        <div className={`w-8 h-8 rounded-full flex items-center justify-center font-bold ${step >= 2 ? 'bg-primary text-primary-foreground' : 'bg-muted'}`}>
                            2
                        </div>
                        <span className="text-sm font-medium hidden sm:inline">Åifre</span>
                    </div>
                </div>

                {/* Register Form */}
                <Card>
                    <CardContent className="pt-6">
                        <form onSubmit={handleSubmit} className="space-y-4">
                            {error && (
                                <Alert variant="destructive">
                                    <AlertCircle className="h-4 w-4" />
                                    <AlertDescription>{error}</AlertDescription>
                                </Alert>
                            )}

                            {step === 1 ? (
                                <>
                                    <div className="space-y-2">
                                        <Label htmlFor="name">KullanÄ±cÄ± AdÄ±</Label>
                                        <Input
                                            id="name"
                                            type="text"
                                            name="name"
                                            value={formData.name}
                                            onChange={handleChange}
                                            placeholder="Takma adÄ±n"
                                            required
                                        />
                                    </div>

                                    <div className="space-y-2">
                                        <Label htmlFor="email">E-posta</Label>
                                        <Input
                                            id="email"
                                            type="email"
                                            name="email"
                                            value={formData.email}
                                            onChange={handleChange}
                                            placeholder="ornek@email.com"
                                            required
                                        />
                                    </div>

                                    <div className="space-y-2">
                                        <Label>Favori TakÄ±m (Opsiyonel)</Label>
                                        <Select
                                            value={formData.favoriteTeam}
                                            onValueChange={(value) => setFormData({ ...formData, favoriteTeam: value })}
                                        >
                                            <SelectTrigger>
                                                <SelectValue placeholder="TakÄ±m seÃ§..." />
                                            </SelectTrigger>
                                            <SelectContent>
                                                <SelectItem value="FenerbahÃ§e Medicana">FenerbahÃ§e Medicana</SelectItem>
                                                <SelectItem value="VakÄ±fBank">VakÄ±fBank</SelectItem>
                                                <SelectItem value="EczacÄ±baÅŸÄ± Dynavit">EczacÄ±baÅŸÄ± Dynavit</SelectItem>
                                                <SelectItem value="THY">THY</SelectItem>
                                                <SelectItem value="Galatasaray">Galatasaray</SelectItem>
                                            </SelectContent>
                                        </Select>
                                        <p className="text-xs text-amber-500">+20% XP bonus favori takÄ±mÄ±n maÃ§larÄ±nda!</p>
                                    </div>
                                </>
                            ) : (
                                <>
                                    <div className="space-y-2">
                                        <Label htmlFor="password">Åifre</Label>
                                        <Input
                                            id="password"
                                            type="password"
                                            name="password"
                                            value={formData.password}
                                            onChange={handleChange}
                                            placeholder="En az 6 karakter"
                                            required
                                            minLength={6}
                                        />
                                    </div>

                                    <div className="space-y-2">
                                        <Label htmlFor="confirmPassword">Åifre Tekrar</Label>
                                        <Input
                                            id="confirmPassword"
                                            type="password"
                                            name="confirmPassword"
                                            value={formData.confirmPassword}
                                            onChange={handleChange}
                                            placeholder="Åifreyi tekrar gir"
                                            required
                                        />
                                    </div>

                                    <div className="bg-muted rounded-lg p-4">
                                        <div className="text-xs text-muted-foreground mb-2">KayÄ±t olduÄŸunda kazanacaklarÄ±n:</div>
                                        <div className="flex flex-wrap gap-2">
                                            <Badge variant="secondary" className="bg-amber-500/20 text-amber-400">+50 XP</Badge>
                                            <Badge variant="secondary" className="bg-emerald-500/20 text-emerald-400">ğŸ¯ Ä°lk AdÄ±m Rozeti</Badge>
                                        </div>
                                    </div>
                                </>
                            )}

                            <div className="flex gap-3">
                                {step === 2 && (
                                    <Button
                                        type="button"
                                        variant="outline"
                                        onClick={() => setStep(1)}
                                        className="flex-1"
                                    >
                                        <ArrowLeft className="mr-2 h-4 w-4" />
                                        Geri
                                    </Button>
                                )}
                                <Button
                                    type="submit"
                                    disabled={isLoading}
                                    className="flex-1 bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-500 hover:to-teal-500"
                                >
                                    {isLoading ? (
                                        <>
                                            <Loader2 className="mr-2 h-4 w-4 animate-spin" />
                                            KayÄ±t yapÄ±lÄ±yor...
                                        </>
                                    ) : step === 1 ? (
                                        <>
                                            Devam Et
                                            <ArrowRight className="ml-2 h-4 w-4" />
                                        </>
                                    ) : (
                                        <>
                                            <Gamepad2 className="mr-2 h-4 w-4" />
                                            KayÄ±t Ol
                                        </>
                                    )}
                                </Button>
                            </div>
                        </form>
                    </CardContent>
                </Card>

                {/* Divider */}
                <div className="relative my-6">
                    <Separator />
                    <span className="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 bg-background px-4 text-muted-foreground text-sm">
                        veya
                    </span>
                </div>

                {/* Google Sign Up */}
                <Button
                    type="button"
                    variant="outline"
                    onClick={signInWithGoogle}
                    className="w-full"
                >
                    <svg className="w-5 h-5 mr-2" viewBox="0 0 24 24">
                        <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" />
                        <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" />
                        <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" />
                        <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" />
                    </svg>
                    Google ile KayÄ±t Ol
                </Button>

                {/* Login Link */}
                <p className="text-center mt-6 text-muted-foreground">
                    Zaten hesabÄ±n var mÄ±?{" "}
                    <Link href="/login" className="text-primary font-bold hover:underline">
                        GiriÅŸ Yap
                    </Link>
                </p>
            </div>
        </main>
    );
}

```

## File: app\scenario-standings\page.tsx
```
"use client";

import { useEffect, useState } from "react";
import { TeamStats } from "../types";
import Link from "next/link";
import { calculateGroupStandings, applyOverridesToTeams } from "../utils/playoffUtils";


export default function ScenarioStandingsPage() {
    const [loading, setLoading] = useState(true);
    const [allTeams, setAllTeams] = useState<TeamStats[]>([]);
    const [groups, setGroups] = useState<string[]>([]);
    const [scenarios, setScenarios] = useState<any>({});

    useEffect(() => {
        fetchData();
        // Load overrides correctly
        const saved = localStorage.getItem('playoffScenarios'); // Actually this might be wrong key.
        // Let's check how GroupPage saves it.
        // In GroupPage it saves to `playoffScenarios`? No, let's check group page.
        // GroupPage saves to: localStorage.setItem(`group_matches_${groupId}`, ...);
        // Wait, the user wants "Oyundan gelen puan durumu". 
        // This implies we need to read ALL `group_matches_X` keys.
    }, []);

    async function fetchData() {
        try {
            setLoading(true);
            const res = await fetch("/api/scrape");
            if (!res.ok) throw new Error("Veri Ã§ekilemedi");
            const data = await res.json();
            setAllTeams(data.teams);

            const uniqueGroups = [...new Set(data.teams.map((t: TeamStats) => t.groupName))].sort((a: any, b: any) => {
                const numA = parseInt(a.match(/\d+/)?.[0] || "0");
                const numB = parseInt(b.match(/\d+/)?.[0] || "0");
                return numA - numB;
            });
            setGroups(uniqueGroups as string[]);

            // Load all scenarios
            const savedScenarios = localStorage.getItem('groupScenarios');
            if (savedScenarios) {
                try {
                    setScenarios(JSON.parse(savedScenarios));
                } catch (e) {
                    console.error("Failed to parse scenarios", e);
                }
            }

        } catch (err) {
            console.error(err);
        } finally {
            setLoading(false);
        }
    }

    // Calculate simulated standings for all groups
    const teamsByGroup = groups.reduce((acc, groupName) => {
        const originalGroupTeams = allTeams.filter(t => t.groupName === groupName);
        const groupOverrides = scenarios[groupName] || [];

        // Apply Logic
        // We need a way to verify if applyOverridesToTeams works with just Match objects or the full logic.
        // Looking at GroupPage, it does:
        // const newTeams = applyOverridesToTeams(originalTeams, overrides);
        // So we can perform the simulation here!

        const simulatedTeams = applyOverridesToTeams(originalGroupTeams, groupOverrides);

        acc[groupName] = simulatedTeams.sort((a: TeamStats, b: TeamStats) => b.points - a.points || b.wins - a.wins || (b.setsWon - b.setsLost) - (a.setsWon - a.setsLost));
        return acc;
    }, {} as Record<string, TeamStats[]>);

    if (loading) {
        return (
            <div className="h-[calc(100vh-64px)] flex items-center justify-center text-slate-400">
                <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-500"></div>
            </div>
        )
    }

    return (
        <main className="min-h-screen bg-slate-950 text-slate-100 p-2 sm:p-4 font-sans">
            <div className="max-w-7xl mx-auto flex flex-col gap-4">

                {/* Header */}
                <div className="flex flex-col gap-1 px-1">
                    <h1 className="font-bold text-white text-lg tracking-tight leading-none hidden sm:block">Senaryo Puan Durumu</h1>
                    <p className="text-[10px] text-slate-400 hidden sm:block">YaptÄ±ÄŸÄ±nÄ±z maÃ§ tahminlerine gÃ¶re oluÅŸan puan durumu</p>
                </div>

                {/* Global Grid */}
                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
                    {groups.map(groupName => {
                        const groupTeams = teamsByGroup[groupName] || [];
                        return (
                            <div key={groupName} className="bg-slate-900 border border-slate-800 rounded-lg overflow-hidden flex flex-col h-full">
                                {/* Header */}
                                <div className="bg-slate-800/50 px-3 py-2 border-b border-slate-800 flex justify-between items-center">
                                    <h3 className="font-bold text-slate-200">{groupName}. Grup</h3>
                                    <span className="text-[10px] text-emerald-400 bg-emerald-500/10 px-2 py-0.5 rounded border border-emerald-500/20">
                                        SimÃ¼lasyon
                                    </span>
                                </div>

                                {/* Table */}
                                <div className="p-2 space-y-0.5 flex-1">
                                    <div className="flex text-[9px] text-slate-500 px-2 pb-1 border-b border-slate-800/50 uppercase tracking-wider font-semibold">
                                        <span className="w-4">#</span>
                                        <span className="flex-1">TakÄ±m</span>
                                        <span className="w-6 text-center">O</span>
                                        <span className="w-6 text-center text-slate-300 font-bold">P</span>
                                    </div>
                                    {groupTeams.map((team, idx) => {
                                        const isRelegation = idx >= groupTeams.length - 2;
                                        const isPromotion = idx < 2;
                                        return (
                                            <div key={team.name} className={`flex items-center text-xs py-1.5 px-2 rounded ${isPromotion ? 'bg-emerald-500/10' : isRelegation ? 'bg-rose-500/10' : ''}`}>
                                                <span className={`w-4 text-[10px] font-bold ${isPromotion ? 'text-emerald-400' : isRelegation ? 'text-rose-500' : 'text-slate-600'}`}>
                                                    {idx + 1}
                                                </span>
                                                <span className={`flex-1 truncate pr-2 ${isPromotion ? 'text-slate-200 font-medium' : isRelegation ? 'text-rose-200/80' : 'text-slate-400'}`} title={team.name}>
                                                    {team.name}
                                                </span>
                                                <span className="w-6 text-center text-[10px] text-slate-500 font-mono">{team.played}</span>
                                                <span className={`w-6 text-center font-bold relative ${isPromotion ? 'text-white' : isRelegation ? 'text-rose-200' : 'text-slate-500'}`}>
                                                    {team.points}
                                                </span>
                                            </div>
                                        )
                                    })}
                                </div>
                            </div>
                        )
                    })}
                </div>
            </div>
        </main>
    );
}

```

## File: app\simulation\page.tsx
```
"use client";

import { useState, useMemo } from "react";
import { useAuth } from "../context/AuthContext";
import { useMatchSimulation, getSimulationState } from "../hooks/useMatchSimulation";
import Link from "next/link";

// Sample teams for simulation
const SAMPLE_TEAMS = [
  "FENERBAHÃ‡E MEDICANA",
  "ECZACIBAÅI DYNAVÄ°T",
  "VAKIFBANK",
  "GALATASARAY DAIKIN",
  "THY",
  "NÄ°LÃœFER BELEDÄ°YESPOR",
  "BEÅÄ°KTAÅ",
  "ARAS KARGO",
];

export default function SimulationPage() {
  const { user } = useAuth();
  const { 
    simulation, 
    isSimulating, 
    isPlaying,
    currentSet,
    currentPoint,
    progress,
    startSimulation,
    play,
    pause,
    reset,
    skipToEnd,
    setSpeed,
  } = useMatchSimulation({ autoPlay: false });
  
  const [homeTeam, setHomeTeam] = useState(SAMPLE_TEAMS[0]);
  const [awayTeam, setAwayTeam] = useState(SAMPLE_TEAMS[1]);
  const [playbackSpeed, setPlaybackSpeed] = useState(1);

  const handleSpeedChange = (speed: number) => {
    setPlaybackSpeed(speed);
    setSpeed(speed);
  };

  const simulationState = useMemo(() => {
    if (!simulation) return null;
    return getSimulationState(simulation, currentSet, currentPoint);
  }, [simulation, currentSet, currentPoint]);

  return (
    <main className="min-h-screen bg-slate-950 text-slate-100">
      {/* Header */}
      <div className="bg-gradient-to-r from-violet-600 to-purple-600 px-4 py-6">
        <div className="max-w-4xl mx-auto">
          <h1 className="text-2xl font-bold text-white">MaÃ§ SimÃ¼lasyonu</h1>
          <p className="text-white/70 text-sm mt-1">
            TakÄ±mlarÄ± seÃ§ ve maÃ§Ä±n nasÄ±l oynanabileceÄŸini izle
          </p>
        </div>
      </div>

      <div className="max-w-4xl mx-auto px-4 py-6 space-y-6">
        {/* Team Selection */}
        {!simulation && (
          <div className="bg-slate-900/50 border border-slate-800 rounded-xl p-6">
            <h2 className="font-bold text-white mb-4">TakÄ±mlarÄ± SeÃ§</h2>
            
            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
              {/* Home Team */}
              <div>
                <label className="block text-sm text-slate-400 mb-2">Ev Sahibi</label>
                <select
                  value={homeTeam}
                  onChange={(e) => setHomeTeam(e.target.value)}
                  className="w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-violet-500"
                >
                  {SAMPLE_TEAMS.map(team => (
                    <option key={team} value={team} disabled={team === awayTeam}>
                      {team}
                    </option>
                  ))}
                </select>
              </div>

              {/* Away Team */}
              <div>
                <label className="block text-sm text-slate-400 mb-2">Deplasman</label>
                <select
                  value={awayTeam}
                  onChange={(e) => setAwayTeam(e.target.value)}
                  className="w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-violet-500"
                >
                  {SAMPLE_TEAMS.map(team => (
                    <option key={team} value={team} disabled={team === homeTeam}>
                      {team}
                    </option>
                  ))}
                </select>
              </div>
            </div>

            <button
              onClick={() => startSimulation(homeTeam, awayTeam)}
              disabled={isSimulating}
              className="w-full mt-6 px-6 py-4 bg-gradient-to-r from-violet-600 to-purple-600 hover:from-violet-700 hover:to-purple-700 disabled:opacity-50 rounded-xl font-bold text-lg transition-all"
            >
              {isSimulating ? 'SimÃ¼lasyon HazÄ±rlanÄ±yor...' : 'ğŸ® SimÃ¼lasyonu BaÅŸlat'}
            </button>
          </div>
        )}

        {/* Simulation Display */}
        {simulation && simulationState && (
          <>
            {/* Scoreboard */}
            <div className="bg-gradient-to-br from-slate-900 to-slate-800 border border-slate-700 rounded-2xl p-8">
              <div className="flex items-center justify-between">
                {/* Home Team */}
                <div className="flex-1 text-center">
                  <div className="w-24 h-24 mx-auto bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center text-4xl mb-4 shadow-lg">
                    ğŸ
                  </div>
                  <h3 className="font-bold text-white text-xl">{simulation.homeTeam}</h3>
                </div>

                {/* Score */}
                <div className="px-12 text-center">
                  <div className="text-6xl font-black text-white mb-4">
                    {simulationState.setScore.home} - {simulationState.setScore.away}
                  </div>
                  <div className="text-sm text-slate-400">Set Skoru</div>
                  
                  {!simulationState.isComplete && (
                    <div className="mt-6 bg-violet-500/20 border border-violet-500/30 rounded-xl px-8 py-4">
                      <div className="text-3xl font-bold text-white">
                        {simulationState.currentSetScore.home} - {simulationState.currentSetScore.away}
                      </div>
                      <div className="text-sm text-violet-400 mt-1">
                        {currentSet + 1}. Set
                      </div>
                    </div>
                  )}

                  {simulationState.isComplete && (
                    <div className="mt-6 bg-emerald-500/20 border border-emerald-500/30 rounded-xl px-8 py-4">
                      <div className="text-lg font-bold text-emerald-400">
                        ğŸ† {simulation.winner} KazandÄ±!
                      </div>
                    </div>
                  )}
                </div>

                {/* Away Team */}
                <div className="flex-1 text-center">
                  <div className="w-24 h-24 mx-auto bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl flex items-center justify-center text-4xl mb-4 shadow-lg">
                    ğŸ
                  </div>
                  <h3 className="font-bold text-white text-xl">{simulation.awayTeam}</h3>
                </div>
              </div>

              {/* Last Point Animation */}
              {simulationState.lastPoint && !simulationState.isComplete && (
                <div className="mt-6 text-center">
                  <div className={`inline-flex items-center gap-2 px-4 py-2 rounded-full text-sm ${
                    simulationState.lastPoint.scorer === 'home'
                      ? 'bg-blue-500/20 text-blue-400'
                      : 'bg-orange-500/20 text-orange-400'
                  }`}>
                    {getPointTypeIcon(simulationState.lastPoint.type)}
                    <span>
                      {simulationState.lastPoint.scorer === 'home' ? simulation.homeTeam : simulation.awayTeam}
                      {' - '}
                      {getPointTypeText(simulationState.lastPoint.type)}
                    </span>
                  </div>
                </div>
              )}
            </div>

            {/* Progress Bar */}
            <div className="bg-slate-900/50 border border-slate-800 rounded-xl p-4">
              <div className="h-2 bg-slate-800 rounded-full overflow-hidden">
                <div 
                  className="h-full bg-gradient-to-r from-violet-500 to-purple-500 transition-all duration-100"
                  style={{ width: `${progress}%` }}
                />
              </div>
              <div className="flex items-center justify-between mt-2 text-xs text-slate-500">
                <span>BaÅŸlangÄ±Ã§</span>
                <span>BitiÅŸ</span>
              </div>
            </div>

            {/* Controls */}
            <div className="bg-slate-900/50 border border-slate-800 rounded-xl p-4">
              <div className="flex items-center justify-center gap-4">
                <button
                  onClick={reset}
                  className="p-3 bg-slate-800 hover:bg-slate-700 rounded-xl transition-colors"
                  title="BaÅŸa Sar"
                >
                  â®ï¸
                </button>
                
                <button
                  onClick={isPlaying ? pause : play}
                  className="p-4 bg-violet-600 hover:bg-violet-700 rounded-xl transition-colors"
                >
                  {isPlaying ? 'â¸ï¸' : 'â–¶ï¸'}
                </button>
                
                <button
                  onClick={skipToEnd}
                  className="p-3 bg-slate-800 hover:bg-slate-700 rounded-xl transition-colors"
                  title="Sonuca Atla"
                >
                  â­ï¸
                </button>
              </div>

              {/* Speed Control */}
              <div className="flex items-center justify-center gap-2 mt-4">
                <span className="text-xs text-slate-500">HÄ±z:</span>
                {[0.5, 1, 2, 4].map(speed => (
                  <button
                    key={speed}
                    onClick={() => handleSpeedChange(speed)}
                    className={`px-3 py-1 rounded-lg text-xs font-medium transition-colors ${
                      playbackSpeed === speed
                        ? 'bg-violet-600 text-white'
                        : 'bg-slate-800 text-slate-400 hover:text-white'
                    }`}
                  >
                    {speed}x
                  </button>
                ))}
              </div>
            </div>

            {/* Set Details */}
            <div className="bg-slate-900/50 border border-slate-800 rounded-xl p-6">
              <h3 className="font-bold text-white mb-4">Set DetaylarÄ±</h3>
              <div className="grid grid-cols-5 gap-4">
                {simulation.simulatedSets.map((set, index) => {
                  const isCurrentSet = index === currentSet && !simulationState.isComplete;
                  const isPastSet = index < currentSet || simulationState.isComplete;
                  
                  return (
                    <div 
                      key={index}
                      className={`text-center p-4 rounded-xl border transition-all ${
                        isCurrentSet 
                          ? 'bg-violet-500/20 border-violet-500/50 animate-pulse'
                          : isPastSet
                            ? set.winner === 'home'
                              ? 'bg-blue-500/20 border-blue-500/30'
                              : 'bg-orange-500/20 border-orange-500/30'
                            : 'bg-slate-800/50 border-slate-700'
                      }`}
                    >
                      <div className="text-xs text-slate-400 mb-2">{index + 1}. Set</div>
                      <div className={`text-xl font-bold ${
                        isPastSet 
                          ? 'text-white' 
                          : isCurrentSet 
                            ? 'text-violet-400'
                            : 'text-slate-600'
                      }`}>
                        {isPastSet 
                          ? `${set.homePoints}-${set.awayPoints}`
                          : isCurrentSet
                            ? `${simulationState.currentSetScore.home}-${simulationState.currentSetScore.away}`
                            : '-'
                        }
                      </div>
                    </div>
                  );
                })}
              </div>
            </div>

            {/* Key Moments */}
            {simulation.keyMoments.length > 0 && (
              <div className="bg-slate-900/50 border border-slate-800 rounded-xl p-6">
                <h3 className="font-bold text-white mb-4">Ã–nemli Anlar</h3>
                <div className="space-y-3">
                  {simulation.keyMoments.map((moment, index) => (
                    <div 
                      key={index}
                      className={`flex items-center gap-3 p-3 rounded-lg ${
                        moment.type === 'match_point'
                          ? 'bg-emerald-500/20 border border-emerald-500/30'
                          : 'bg-slate-800/50'
                      }`}
                    >
                      <span className="text-xl">
                        {moment.type === 'match_point' ? 'ğŸ†' : 
                         moment.type === 'set_point' ? 'ğŸ“' : 'âš¡'}
                      </span>
                      <span className={
                        moment.type === 'match_point' ? 'text-emerald-400' : 'text-slate-300'
                      }>
                        {moment.description}
                      </span>
                    </div>
                  ))}
                </div>
              </div>
            )}

            {/* New Simulation Button */}
            <button
              onClick={() => {
                reset();
                startSimulation(homeTeam, awayTeam);
              }}
              className="w-full px-6 py-3 bg-slate-800 hover:bg-slate-700 rounded-xl font-medium transition-colors"
            >
              ğŸ”„ Yeni SimÃ¼lasyon
            </button>
          </>
        )}
      </div>
    </main>
  );
}

function getPointTypeIcon(type: string): string {
  switch (type) {
    case 'attack': return 'ğŸ’¥';
    case 'block': return 'ğŸ›¡ï¸';
    case 'ace': return 'ğŸ¯';
    case 'error': return 'âŒ';
    default: return 'ğŸ';
  }
}

function getPointTypeText(type: string): string {
  switch (type) {
    case 'attack': return 'HÃ¼cum SayÄ±sÄ±';
    case 'block': return 'Blok SayÄ±sÄ±';
    case 'ace': return 'As Servis';
    case 'error': return 'Rakip Hata';
    default: return 'SayÄ±';
  }
}

```

## File: app\stats\page.tsx
```
import { Metadata } from "next";
import { getLeagueData } from "../utils/serverData";
import StatsClient from "./StatsClient";

export const metadata: Metadata = {
    title: "Genel Ä°statistikler",
    description: "TÃ¼m liglerin birleÅŸik istatistikleri. Sultanlar Ligi, 1. Lig, 2. Lig ve CEV turnuvalarÄ± takÄ±m performans analizleri.",
    openGraph: {
        title: "Genel Ä°statistikler | VolleySimulator",
        description: "TÃ¼m liglerin birleÅŸik istatistikleri ve takÄ±m performans analizleri.",
    },
};

export default async function StatsPage() {
    const [lig1, lig2, vsl, cev] = await Promise.all([
        getLeagueData("1lig"),
        getLeagueData("2lig"),
        getLeagueData("vsl"),
        getLeagueData("cev-cl")
    ]);

    // Combine all teams for global stats
    const allTeams = [
        ...lig1.teams,
        ...lig2.teams,
        ...vsl.teams,
        ...cev.teams
    ];

    return (
        <StatsClient initialTeams={allTeams} />
    );
}

```

## File: app\stats\StatsClient.tsx
```
"use client";

import { useMemo } from "react";
import { TeamStats } from "../types";

import TeamAvatar from "../components/TeamAvatar";

interface StatsClientProps {
    initialTeams: TeamStats[];
}

export default function StatsClient({ initialTeams }: StatsClientProps) {
    const teamsWithStats = useMemo(() => initialTeams.map(t => ({
        ...t,
        losses: t.played - t.wins,
        winRate: t.played > 0 ? Math.round((t.wins / t.played) * 100) : 0
    })), [initialTeams]);

    const leastLosses = useMemo(() => [...teamsWithStats].sort((a, b) => a.losses - b.losses || b.wins - a.wins).slice(0, 5), [teamsWithStats]);
    const mostLosses = useMemo(() => [...teamsWithStats].sort((a, b) => b.losses - a.losses || a.wins - b.wins).slice(0, 5), [teamsWithStats]);
    const mostSets = useMemo(() => [...teamsWithStats].sort((a, b) => b.setsWon - a.setsWon).slice(0, 5), [teamsWithStats]);
    const mostPoints = useMemo(() => [...teamsWithStats].sort((a, b) => b.points - a.points).slice(0, 5), [teamsWithStats]);
    const leastSetsLost = useMemo(() => [...teamsWithStats].sort((a, b) => a.setsLost - b.setsLost || b.wins - a.wins).slice(0, 5), [teamsWithStats]);
    const bestWinRate = useMemo(() => [...teamsWithStats].filter(t => t.played >= 5).sort((a, b) => b.winRate - a.winRate).slice(0, 5), [teamsWithStats]);

    // Summary stats
    const totalTeams = initialTeams.length;
    const totalMatches = Math.floor(initialTeams.reduce((acc, t) => acc + t.played, 0) / 2);
    const avgPoints = totalTeams > 0 ? Math.round(initialTeams.reduce((acc, t) => acc + t.points, 0) / totalTeams) : 0;

    return (
        <main className="min-h-screen bg-slate-950 text-slate-100 p-4 font-sans">
            <div className="max-w-7xl mx-auto space-y-8 pt-4">
                <div className="flex flex-col gap-1">
                    <h1 className="font-bold text-white text-lg tracking-tight leading-none hidden sm:block">Ä°statistikler</h1>
                    <p className="text-[10px] text-slate-400 hidden sm:block">Global Ä°statistik Merkezi</p>
                </div>

                <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div className="bg-gradient-to-br from-emerald-600/20 to-emerald-900/20 backdrop-blur-sm border border-emerald-500/20 rounded-2xl p-4 text-center">
                        <div className="text-3xl font-black text-emerald-400">{totalTeams}</div>
                        <div className="text-xs text-slate-400 uppercase tracking-wider mt-1">TakÄ±m</div>
                    </div>
                    <div className="bg-gradient-to-br from-blue-600/20 to-blue-900/20 backdrop-blur-sm border border-blue-500/20 rounded-2xl p-4 text-center">
                        <div className="text-3xl font-black text-blue-400">{totalMatches}</div>
                        <div className="text-xs text-slate-400 uppercase tracking-wider mt-1">MaÃ§</div>
                    </div>
                    <div className="bg-gradient-to-br from-amber-600/20 to-amber-900/20 backdrop-blur-sm border border-amber-500/20 rounded-2xl p-4 text-center">
                        <div className="text-3xl font-black text-amber-400">{avgPoints}</div>
                        <div className="text-xs text-slate-400 uppercase tracking-wider mt-1">Ort. Puan</div>
                    </div>
                    <div className="bg-gradient-to-br from-purple-600/20 to-purple-900/20 backdrop-blur-sm border border-purple-500/20 rounded-2xl p-4 text-center">
                        <div className="text-3xl font-black text-purple-400">11</div>
                        <div className="text-xs text-slate-400 uppercase tracking-wider mt-1">Grup</div>
                    </div>
                </div>

                <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-6 pb-8">
                    <StatCard
                        title="En Ã‡ok Puan"
                        icon="ğŸ’"
                        teams={mostPoints}
                        statKey="points"
                        color="bg-amber-500"
                        gradient="bg-gradient-to-r from-amber-600 to-orange-600"
                        suffix="P"
                    />
                    <StatCard
                        title="En YÃ¼ksek Galibiyet %"
                        icon="ğŸ“ˆ"
                        teams={bestWinRate}
                        statKey="winRate"
                        color="bg-teal-500"
                        gradient="bg-gradient-to-r from-teal-600 to-emerald-600"
                        suffix="%"
                    />
                    <StatCard
                        title="En Ã‡ok Set Alan"
                        icon="ğŸ"
                        teams={mostSets}
                        statKey="setsWon"
                        color="bg-purple-500"
                        gradient="bg-gradient-to-r from-purple-600 to-pink-600"
                        suffix="Set"
                    />
                    <StatCard
                        title="En Az MaÄŸlubiyet"
                        icon="ğŸ›¡ï¸"
                        teams={leastLosses}
                        statKey="losses"
                        color="bg-emerald-500"
                        gradient="bg-gradient-to-r from-emerald-600 to-cyan-600"
                        suffix="M"
                    />
                    <StatCard
                        title="En Az Set Veren"
                        icon="ğŸ§±"
                        teams={leastSetsLost}
                        statKey="setsLost"
                        color="bg-rose-500"
                        gradient="bg-gradient-to-r from-rose-600 to-red-600"
                        suffix="Set"
                    />
                    <StatCard
                        title="En Ã‡ok MaÄŸlubiyet"
                        icon="ğŸ“‰"
                        teams={mostLosses}
                        statKey="losses"
                        color="bg-slate-500"
                        gradient="bg-gradient-to-r from-slate-600 to-slate-700"
                        suffix="M"
                    />
                </div>
            </div>
        </main>
    );
}

// Helper types for StatCard
type TeamWithStats = TeamStats & {
    losses: number;
    winRate: number;
};

const StatCard = ({ title, icon, teams, statKey, color, gradient, suffix = "" }: {
    title: string; icon: string;
    teams: TeamWithStats[];
    statKey: 'losses' | 'wins' | 'setsWon' | 'setsLost' | 'points' | 'winRate';
    color: string;
    gradient: string;
    suffix?: string;
}) => {
    const maxValue = Math.max(...teams.map(t => Number(t[statKey])), 1);

    return (
        <div className="bg-slate-950/50 backdrop-blur-md rounded-xl border border-slate-800/60 overflow-hidden hover:border-slate-700/80 transition-all duration-300 group shadow-lg hover:shadow-xl">
            <div className={`${gradient} px-3 py-2.5 border-b border-white/10 relative overflow-hidden`}>
                {/* Gloss effect */}
                <div className="absolute inset-0 bg-white/5 opacity-0 group-hover:opacity-100 transition-opacity"></div>
                <div className="flex items-center justify-between relative z-10">
                    <h3 className="font-bold text-white text-xs uppercase tracking-wider flex items-center gap-2">
                        <span className="text-base">{icon}</span> {title}
                    </h3>
                    <span className="text-[10px] font-bold text-white/80 bg-black/20 px-2 py-0.5 rounded-full backdrop-blur-sm border border-white/10">TOP 5</span>
                </div>
            </div>

            <div className="p-2 space-y-1.5">
                {teams.map((t, idx) => (
                    <div
                        key={t.name}
                        className={`flex items-center gap-2.5 p-1.5 rounded-lg transition-all ${idx === 0 ? 'bg-gradient-to-r from-white/5 to-transparent border border-white/10' : 'hover:bg-white/5'
                            }`}
                    >
                        <div className={`w-5 h-5 rounded flex items-center justify-center font-bold text-[10px] shadow-sm ${idx === 0 ? 'bg-amber-400 text-amber-950' :
                            idx === 1 ? 'bg-slate-300 text-slate-800' :
                                idx === 2 ? 'bg-amber-700 text-amber-100' :
                                    'bg-slate-800 text-slate-500'
                            }`}>
                            {idx + 1}
                        </div>
                        <TeamAvatar name={t.name} size="xs" />

                        <div className="flex-1 min-w-0">
                            <span className={`text-xs font-bold truncate block ${idx === 0 ? 'text-white' : 'text-slate-300'}`} title={t.name}>
                                {t.name}
                            </span>
                        </div>

                        <div className="flex items-center gap-2 w-20 justify-end">
                            <div className="h-1 bg-slate-800/50 rounded-full overflow-hidden flex-1 max-w-[40px]">
                                <div className={`h-full ${color} opacity-80`} style={{ '--stat-width': `${Math.min((Number(t[statKey]) / maxValue) * 100, 100)}%`, width: 'var(--stat-width)' } as any}></div>
                            </div>
                            <span className={`text-xs font-bold min-w-[30px] text-right ${idx === 0 ? 'text-white' : 'text-slate-400'}`}>
                                {t[statKey]}{suffix}
                            </span>
                        </div>
                    </div>
                ))}
            </div>
        </div>
    );
};

```

## File: app\stats\advanced\page.tsx
```
"use client";

import { useState, useMemo } from "react";
import { useAdvancedStats } from "@/app/hooks/useAdvancedStats";
import { TeamFormDisplay, HeadToHeadDisplay } from "@/app/components/TeamFormDisplay";

const LEAGUES = [
  { id: 'vsl', name: 'Sultanlar Ligi', icon: 'ğŸ‘‘' },
  { id: '1lig', name: '1. Lig', icon: 'ğŸ¥ˆ' },
  { id: '2lig', name: '2. Lig', icon: 'ğŸ¥‰' },
  { id: 'cev-cl', name: 'CEV ÅL', icon: 'ğŸŒŸ' },
];

const SAMPLE_TEAMS: Record<string, string[]> = {
  vsl: [
    "FENERBAHÃ‡E MEDICANA", "ECZACIBAÅI DYNAVÄ°T", "VAKIFBANK", "GALATASARAY DAIKIN",
    "THY", "NÄ°LÃœFER BELEDÄ°YESPOR", "BEÅÄ°KTAÅ", "ARAS KARGO",
    "KUZEYBORUÄ°STANBUL", "SIGORTA SHOP", "PTT", "TOKAT BELEDÄ°YE PLEVNE"
  ],
  '1lig': ["BURSA BÃœYÃœKÅEHIR", "AYDIN B.ÅEHÄ°R BEL", "MERSÄ°N", "KARAYOLLARI"],
  '2lig': ["SAKARYA", "MUÄLA", "Ä°ZMÄ°R", "ESKÄ°ÅEHÄ°R"],
  'cev-cl': ["VAKIFBANK", "ECZACIBAÅI", "FENERBAHÃ‡E", "IMOCO VOLLEY"],
};

export default function AdvancedStatsPage() {
  const [selectedLeague, setSelectedLeague] = useState('vsl');
  const [selectedTeam1, setSelectedTeam1] = useState('');
  const [selectedTeam2, setSelectedTeam2] = useState('');
  const [activeTab, setActiveTab] = useState<'rankings' | 'compare' | 'trends'>('rankings');

  // Mock data for teams and matches
  const mockTeams = (SAMPLE_TEAMS[selectedLeague] || []).map((name) => ({
    name,
    played: 10,
    wins: 7,
    points: 21,
    setsWon: 25,
    setsLost: 15,
  }));

  const mockMatches = [
    { homeTeam: SAMPLE_TEAMS[selectedLeague]?.[0] || '', awayTeam: SAMPLE_TEAMS[selectedLeague]?.[1] || '', homeScore: 3, awayScore: 1, date: '2024-01-01' },
    { homeTeam: SAMPLE_TEAMS[selectedLeague]?.[1] || '', awayTeam: SAMPLE_TEAMS[selectedLeague]?.[2] || '', homeScore: 2, awayScore: 3, date: '2024-01-02' },
  ];

  const {
    getHeadToHead,
    getTeamForm,
    getTopPerformers,
    compareTeams,
  } = useAdvancedStats(mockTeams, mockMatches);

  const teams = SAMPLE_TEAMS[selectedLeague] || [];
  const topPerformers = useMemo(() => {
    const stats = getTopPerformers('points', 5);
    return stats.map(stat => {
      const form = getTeamForm(stat.teamName);
      return {
        ...stat,
        winPercentage: Math.round(form.winRate),
        trend: form.trend === 'improving' ? 'up' : form.trend === 'declining' ? 'down' : 'stable'
      };
    });
  }, [selectedLeague, getTopPerformers, getTeamForm]);

  const team1Form = selectedTeam1 ? getTeamForm(selectedTeam1) : null;
  const team2Form = selectedTeam2 ? getTeamForm(selectedTeam2) : null;
  const h2hStats = selectedTeam1 && selectedTeam2
    ? getHeadToHead(selectedTeam1, selectedTeam2)
    : null;
  const comparison = selectedTeam1 && selectedTeam2
    ? compareTeams(selectedTeam1, selectedTeam2)
    : null;

  return (
    <main className="min-h-screen bg-slate-950 text-slate-100">
      {/* Header */}
      <div className="bg-gradient-to-r from-blue-600 to-cyan-600 px-4 py-6">
        <div className="max-w-5xl mx-auto">
          <h1 className="text-2xl font-bold text-white">GeliÅŸmiÅŸ Ä°statistikler</h1>
          <p className="text-white/70 text-sm mt-1">
            TakÄ±m formlarÄ±, karÅŸÄ±laÅŸma geÃ§miÅŸleri ve detaylÄ± analizler
          </p>
        </div>
      </div>

      <div className="max-w-5xl mx-auto px-4 py-6 space-y-6">
        {/* League Selector */}
        <div className="flex gap-2 overflow-x-auto pb-2">
          {LEAGUES.map(league => (
            <button
              key={league.id}
              onClick={() => {
                setSelectedLeague(league.id);
                setSelectedTeam1('');
                setSelectedTeam2('');
              }}
              className={`flex items-center gap-2 px-4 py-2 rounded-xl font-medium whitespace-nowrap transition-colors ${selectedLeague === league.id
                ? 'bg-blue-600 text-white'
                : 'bg-slate-800 text-slate-400 hover:text-white'
                }`}
            >
              <span>{league.icon}</span>
              <span>{league.name}</span>
            </button>
          ))}
        </div>

        {/* Tabs */}
        <div className="flex gap-2 border-b border-slate-800 pb-4">
          {[
            { key: 'rankings', label: 'GÃ¼Ã§ SÄ±ralamasÄ±', icon: 'ğŸ“Š' },
            { key: 'compare', label: 'TakÄ±m KarÅŸÄ±laÅŸtÄ±r', icon: 'âš”ï¸' },
            { key: 'trends', label: 'Trendler', icon: 'ğŸ“ˆ' },
          ].map(tab => (
            <button
              key={tab.key}
              onClick={() => setActiveTab(tab.key as typeof activeTab)}
              className={`flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition-colors ${activeTab === tab.key
                ? 'bg-white/10 text-white'
                : 'text-slate-400 hover:text-white'
                }`}
            >
              <span>{tab.icon}</span>
              <span>{tab.label}</span>
            </button>
          ))}
        </div>

        {/* Rankings Tab */}
        {activeTab === 'rankings' && (
          <div className="space-y-4">
            <h2 className="text-lg font-bold text-white">ELO GÃ¼Ã§ SÄ±ralamasÄ±</h2>

            <div className="bg-slate-900/50 border border-slate-800 rounded-xl overflow-hidden">
              <table className="w-full">
                <thead>
                  <tr className="bg-slate-800/50">
                    <th className="px-4 py-3 text-left text-xs font-medium text-slate-400">#</th>
                    <th className="px-4 py-3 text-left text-xs font-medium text-slate-400">TakÄ±m</th>
                    <th className="px-4 py-3 text-center text-xs font-medium text-slate-400">ELO</th>
                    <th className="px-4 py-3 text-center text-xs font-medium text-slate-400">Form</th>
                    <th className="px-4 py-3 text-center text-xs font-medium text-slate-400">Kazanma %</th>
                    <th className="px-4 py-3 text-center text-xs font-medium text-slate-400">Trend</th>
                  </tr>
                </thead>
                <tbody className="divide-y divide-slate-800">
                  {topPerformers.map((team, index) => (
                    <tr key={team.teamName} className="hover:bg-slate-800/30 transition-colors">
                      <td className="px-4 py-3">
                        <span className={`w-6 h-6 rounded flex items-center justify-center text-sm font-bold ${index === 0 ? 'bg-amber-500 text-slate-900' :
                          index === 1 ? 'bg-slate-400 text-slate-900' :
                            index === 2 ? 'bg-amber-700 text-white' :
                              'bg-slate-700 text-slate-300'
                          }`}>
                          {index + 1}
                        </span>
                      </td>
                      <td className="px-4 py-3">
                        <span className="font-medium text-white">{team.teamName}</span>
                      </td>
                      <td className="px-4 py-3 text-center">
                        <span className="font-bold text-cyan-400">{team.points}</span>
                      </td>
                      <td className="px-4 py-3 text-center">
                        <div className="flex justify-center gap-1">
                          {team.last10?.slice(0, 5).map((result, i) => (
                            <span
                              key={i}
                              className={`w-5 h-5 rounded text-xs flex items-center justify-center font-bold ${result === 'W' ? 'bg-emerald-500/30 text-emerald-400' :
                                'bg-red-500/30 text-red-400'
                                }`}
                            >
                              {result === 'W' ? 'G' : 'M'}
                            </span>
                          ))}
                        </div>
                      </td>
                      <td className="px-4 py-3 text-center">
                        <span className={`font-medium ${team.winPercentage >= 70 ? 'text-emerald-400' :
                          team.winPercentage >= 50 ? 'text-amber-400' :
                            'text-red-400'
                          }`}>
                          %{team.winPercentage}
                        </span>
                      </td>
                      <td className="px-4 py-3 text-center">
                        <span className={
                          team.trend === 'up' ? 'text-emerald-400' :
                            team.trend === 'down' ? 'text-red-400' :
                              'text-slate-400'
                        }>
                          {team.trend === 'up' ? 'â†‘' : team.trend === 'down' ? 'â†“' : 'âˆ’'}
                        </span>
                      </td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          </div>
        )}

        {/* Compare Tab */}
        {activeTab === 'compare' && (
          <div className="space-y-6">
            <h2 className="text-lg font-bold text-white">TakÄ±m KarÅŸÄ±laÅŸtÄ±r</h2>

            {/* Team Selectors */}
            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label htmlFor="team1-select" className="block text-sm text-slate-400 mb-2">1. TakÄ±m</label>
                <select
                  id="team1-select"
                  value={selectedTeam1}
                  onChange={(e) => setSelectedTeam1(e.target.value)}
                  className="w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-blue-500"
                >
                  <option value="">TakÄ±m SeÃ§</option>
                  {teams.map(team => (
                    <option key={team} value={team} disabled={team === selectedTeam2}>
                      {team}
                    </option>
                  ))}
                </select>
              </div>

              <div>
                <label htmlFor="team2-select" className="block text-sm text-slate-400 mb-2">2. TakÄ±m</label>
                <select
                  id="team2-select"
                  value={selectedTeam2}
                  onChange={(e) => setSelectedTeam2(e.target.value)}
                  className="w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-blue-500"
                >
                  <option value="">TakÄ±m SeÃ§</option>
                  {teams.map(team => (
                    <option key={team} value={team} disabled={team === selectedTeam1}>
                      {team}
                    </option>
                  ))}
                </select>
              </div>
            </div>

            {/* Comparison Results */}
            {selectedTeam1 && selectedTeam2 && (
              <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                {/* Team Forms */}
                {team1Form && <TeamFormDisplay form={team1Form} teamName={selectedTeam1} />}
                {team2Form && <TeamFormDisplay form={team2Form} teamName={selectedTeam2} />}

                {/* Head to Head */}
                {h2hStats && (
                  <div className="md:col-span-2">
                    <HeadToHeadDisplay
                      stats={h2hStats}
                      homeTeam={selectedTeam1}
                      awayTeam={selectedTeam2}
                    />
                  </div>
                )}

                {/* Comparison Stats */}
                {comparison && (
                  <div className="md:col-span-2 bg-slate-900/50 border border-slate-800 rounded-xl p-6">
                    <h3 className="font-bold text-white mb-4">KarÅŸÄ±laÅŸtÄ±rma</h3>
                    <div className="grid grid-cols-3 gap-4">
                      {Object.entries(comparison.comparison || {}).map(([category, data]) => (
                        <div key={category} className="text-center">
                          <div className="text-xs text-slate-500 mb-2">{category}</div>
                          <div className="flex items-center justify-center gap-2">
                            <span className={`font-bold ${(data as { team1: number; team2: number }).team1 > (data as { team1: number; team2: number }).team2 ? 'text-blue-400' : 'text-slate-400'
                              }`}>
                              {(data as { team1: number; team2: number }).team1}
                            </span>
                            <span className="text-slate-600">vs</span>
                            <span className={`font-bold ${(data as { team1: number; team2: number }).team2 > (data as { team1: number; team2: number }).team1 ? 'text-orange-400' : 'text-slate-400'
                              }`}>
                              {(data as { team1: number; team2: number }).team2}
                            </span>
                          </div>
                        </div>
                      ))}
                    </div>
                  </div>
                )}
              </div>
            )}
          </div>
        )}

        {/* Trends Tab */}
        {activeTab === 'trends' && (
          <div className="space-y-6">
            <h2 className="text-lg font-bold text-white">Sezon Trendleri</h2>

            {/* Hot & Cold Teams */}
            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
              {/* Hot Teams */}
              <div className="bg-gradient-to-br from-emerald-500/10 to-green-500/10 border border-emerald-500/30 rounded-xl p-6">
                <h3 className="flex items-center gap-2 font-bold text-emerald-400 mb-4">
                  <span>ğŸ”¥</span> Formda TakÄ±mlar
                </h3>
                <div className="space-y-3">
                  {topPerformers.filter(t => t.trend === 'up').slice(0, 3).map(team => (
                    <div key={team.teamName} className="flex items-center justify-between bg-slate-900/50 rounded-lg p-3">
                      <span className="text-white font-medium">{team.teamName}</span>
                      <span className="text-emerald-400 font-bold">â†‘ {team.winPercentage}%</span>
                    </div>
                  ))}
                </div>
              </div>

              {/* Cold Teams */}
              <div className="bg-gradient-to-br from-red-500/10 to-orange-500/10 border border-red-500/30 rounded-xl p-6">
                <h3 className="flex items-center gap-2 font-bold text-red-400 mb-4">
                  <span>â„ï¸</span> Form DÃ¼ÅŸÃ¼ÅŸÃ¼nde
                </h3>
                <div className="space-y-3">
                  {topPerformers.filter(t => t.trend === 'down').slice(0, 3).map(team => (
                    <div key={team.teamName} className="flex items-center justify-between bg-slate-900/50 rounded-lg p-3">
                      <span className="text-white font-medium">{team.teamName}</span>
                      <span className="text-red-400 font-bold">â†“ {team.winPercentage}%</span>
                    </div>
                  ))}
                </div>
              </div>
            </div>

            {/* Season Stats Overview */}
            <div className="bg-slate-900/50 border border-slate-800 rounded-xl p-6">
              <h3 className="font-bold text-white mb-4">Sezon Ä°statistikleri</h3>
              <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                {[
                  { label: 'Toplam MaÃ§', value: '156', icon: 'ğŸ' },
                  { label: 'Toplam Set', value: '589', icon: 'ğŸ“Š' },
                  { label: 'Ort. Set/MaÃ§', value: '3.78', icon: 'ğŸ“ˆ' },
                  { label: 'Tie-break', value: '42', icon: 'âš¡' },
                ].map(stat => (
                  <div key={stat.label} className="bg-slate-800/50 rounded-lg p-4 text-center">
                    <span className="text-2xl">{stat.icon}</span>
                    <div className="text-2xl font-bold text-white mt-2">{stat.value}</div>
                    <div className="text-xs text-slate-500">{stat.label}</div>
                  </div>
                ))}
              </div>
            </div>
          </div>
        )}
      </div>
    </main>
  );
}

```

## File: app\styles\tokens.ts
```
/**
 * Design Tokens for VolleySimulator
 * These tokens centralize our design system values and reference existing CSS variables.
 */

export const colors = {
    primary: {
        50: '#ecfdf5',
        100: '#d1fae5',
        200: '#a7f3d0',
        300: '#6ee7b7',
        400: '#34d399',
        500: 'var(--color-primary)', // #10b981
        600: 'var(--color-primary-dark)', // #059669
        700: '#047857',
        800: '#065f46',
        900: '#064e3b',
        950: '#022c22',
    },
    accent: {
        50: '#fffbeb',
        100: '#fef3c7',
        200: '#fde68a',
        300: '#fcd34d',
        400: '#fbbf24',
        500: 'var(--color-accent)', // #f59e0b
        600: 'var(--color-accent-dark)', // #d97706
        700: '#b45309',
        800: '#92400e',
        900: '#78350f',
        950: '#451a03',
    },
    slate: {
        50: '#f8fafc',
        100: '#f1f5f9',
        200: '#e2e8f0',
        300: '#cbd5e1',
        400: '#94a3b8',
        500: '#64748b',
        600: '#475569',
        700: '#334155',
        800: '#1e293b',
        900: '#0f172a',
        950: '#020617',
    },
    // Semantic aliases
    background: 'var(--background)',
    foreground: 'var(--foreground)',
    surface: {
        primary: 'var(--surface-primary)',
        secondary: 'var(--surface-secondary)',
        dark: 'var(--surface-dark)',
        glass: 'var(--surface-glass)',
    },
    text: {
        primary: 'var(--text-primary)',
        secondary: 'var(--text-secondary)',
        muted: 'var(--text-muted)',
    },
    border: {
        main: 'var(--border-color)',
        subtle: 'var(--border-subtle)',
    }
};

export const spacing = {
    none: '0',
    xs: '0.25rem',   // 4px
    sm: '0.5rem',    // 8px
    md: '1rem',      // 16px
    lg: '1.5rem',    // 24px
    xl: '2rem',      // 32px
    '2xl': '3rem',   // 48px
    '3xl': '4rem',   // 64px
};

export const radius = {
    none: '0',
    sm: 'calc(var(--radius) - 4px)',
    md: 'calc(var(--radius) - 2px)',
    lg: 'var(--radius)',
    xl: 'calc(var(--radius) + 4px)',
    full: '9999px',
};

export const typography = {
    fonts: {
        sans: 'var(--font-geist-sans)',
        mono: 'var(--font-geist-mono)',
    },
    sizes: {
        xs: '0.75rem',
        sm: '0.875rem',
        base: '1rem',
        lg: '1.125rem',
        xl: '1.25rem',
        '2xl': '1.5rem',
        '3xl': '1.875rem',
        '4xl': '2.25rem',
    },
    weights: {
        normal: '400',
        medium: '500',
        semibold: '600',
        bold: '700',
    }
};

export const animations = {
    durations: {
        fast: '150ms',
        normal: '250ms',
        slow: '400ms',
    },
    easings: {
        default: 'cubic-bezier(0.4, 0, 0.2, 1)',
        in: 'cubic-bezier(0.4, 0, 1, 1)',
        out: 'cubic-bezier(0, 0, 0.2, 1)',
        inOut: 'cubic-bezier(0.4, 0, 0.2, 1)',
    }
};

```

## File: app\takimlar\[teamSlug]\page.tsx
```
import { Metadata } from "next";
import TeamProfileClient from "./TeamProfileClient";

const BASE_URL = process.env.NEXT_PUBLIC_SITE_URL || 'https://volleysimulator.com';

interface TeamPageProps {
    params: Promise<{
        teamSlug: string;
    }>;
}

export async function generateMetadata({ params }: TeamPageProps): Promise<Metadata> {
    const { teamSlug } = await params;
    const teamName = decodeURIComponent(teamSlug).replace(/-/g, ' ');
    const formattedName = teamName.split(' ').map(word => 
        word.charAt(0).toUpperCase() + word.slice(1).toLowerCase()
    ).join(' ');

    return {
        title: `${formattedName} - TakÄ±m Profili`,
        description: `${formattedName} voleybol takÄ±mÄ± - MaÃ§ fikstÃ¼rÃ¼, puan durumu, istatistikler ve turnuva bilgileri. VolleySimulator'da takÄ±mÄ± takip edin.`,
        openGraph: {
            title: `${formattedName} - TakÄ±m Profili | VolleySimulator`,
            description: `${formattedName} voleybol takÄ±mÄ± - MaÃ§ fikstÃ¼rÃ¼, puan durumu, istatistikler ve turnuva bilgileri.`,
            url: `${BASE_URL}/takimlar/${teamSlug}`,
            type: "profile",
        },
        twitter: {
            card: "summary",
            title: `${formattedName} - TakÄ±m Profili`,
            description: `${formattedName} voleybol takÄ±mÄ± - MaÃ§ fikstÃ¼rÃ¼, puan durumu, istatistikler ve turnuva bilgileri.`,
        },
        alternates: {
            canonical: `${BASE_URL}/takimlar/${teamSlug}`,
        },
    };
}

export default async function TeamPage({ params }: TeamPageProps) {
    const { teamSlug } = await params;

    return <TeamProfileClient teamSlug={teamSlug} />;
}

```

# Project Application Context - Part 15

## File: app\takimlar\[teamSlug]\TeamProfileClient.tsx
```
"use client";

import { useState, useEffect } from "react";
import Link from "next/link";
import TeamAvatar from "../../components/TeamAvatar";
import { Match, TeamStats } from "../../types";

interface TeamProfileClientProps {
    teamSlug: string;
}

interface LeagueData {
    league: string;
    leagueName: string;
    shortName: string;
    group?: string;
    standings: TeamStats[];
    fixtures: Match[];
    color: string;
}

// Turkish character normalization
const normalizeTurkish = (str: string): string => {
    const map: Record<string, string> = {
        'ÅŸ': 's', 'Å': 's', 'ÄŸ': 'g', 'Ä': 'g',
        'Ã¼': 'u', 'Ãœ': 'u', 'Ã¶': 'o', 'Ã–': 'o',
        'Ã§': 'c', 'Ã‡': 'c', 'Ä±': 'i', 'Ä°': 'i',
    };
    return str.split('').map(char => map[char] || char).join('').toLowerCase();
};

// Strict match - only exact team, not sub-teams
const matchesTeamExact = (name1: string, name2: string): boolean => {
    const n1 = normalizeTurkish(name1).replace(/\s+/g, '');
    const n2 = normalizeTurkish(name2).replace(/\s+/g, '');
    return n1 === n2 || n1.includes(n2) || n2.includes(n1);
};

const LEAGUE_CONFIG: Record<string, { name: string; short: string; color: string }> = {
    'vsl': { name: 'Vodafone Sultanlar Ligi', short: 'VSL', color: 'rose' },
    '1lig': { name: 'Arabica Coffee House 1. Lig', short: '1. Lig', color: 'amber' },
    '2lig': { name: 'KadÄ±nlar 2. Lig', short: '2. Lig', color: 'emerald' },
    'cev-cl': { name: 'CEV Åampiyonlar Ligi', short: 'CEV CL', color: 'blue' }
};

export default function TeamProfileClient({ teamSlug }: TeamProfileClientProps) {
    const [loading, setLoading] = useState(true);
    const [teamName, setTeamName] = useState<string>("");
    const [leagueData, setLeagueData] = useState<LeagueData[]>([]);

    useEffect(() => {
        const decoded = decodeURIComponent(teamSlug)
            .split('-')
            .map(word => word.charAt(0).toUpperCase() + word.slice(1))
            .join(' ');
        setTeamName(decoded);
    }, [teamSlug]);

    useEffect(() => {
        async function fetchData() {
            if (!teamName) return;
            setLoading(true);

            try {
                const leagues = ['vsl', '1lig', '2lig', 'cev-cl'];
                const results: LeagueData[] = [];

                for (const league of leagues) {
                    try {
                        const res = await fetch(`/api/${league}`);
                        if (!res.ok) continue;
                        const data = await res.json();

                        const hasTeam = data.teams?.some((team: TeamStats) =>
                            matchesTeamExact(team.name, teamName)
                        );

                        if (hasTeam || data.fixture?.some((m: Match) =>
                            matchesTeamExact(m.homeTeam || '', teamName) ||
                            matchesTeamExact(m.awayTeam || '', teamName)
                        )) {
                            const config = LEAGUE_CONFIG[league];
                            results.push({
                                league,
                                leagueName: config.name,
                                shortName: config.short,
                                color: config.color,
                                standings: data.teams || [],
                                fixtures: data.fixture || [],
                            });
                        }
                    } catch { /* Skip */ }
                }

                setLeagueData(results);
            } finally {
                setLoading(false);
            }
        }
        fetchData();
    }, [teamName]);

    // Get primary league stats
    const primaryLeague = leagueData[0];
    const teamStats = primaryLeague?.standings.find(t => matchesTeamExact(t.name, teamName));
    const actualTeamName = teamStats?.name || teamName;

    // Group matches by league
    const getMatchesByLeague = (played: boolean) => {
        return leagueData.map(ld => {
            const matches = ld.fixtures
                .filter(m =>
                    matchesTeamExact(m.homeTeam || '', teamName) ||
                    matchesTeamExact(m.awayTeam || '', teamName)
                )
                .filter(m => played
                    ? (m.homeScore !== undefined && m.awayScore !== undefined)
                    : (m.homeScore === undefined || m.awayScore === undefined)
                )
                .slice(played ? -3 : 0, played ? undefined : 3);

            return { ...ld, matches };
        }).filter(ld => ld.matches.length > 0);
    };

    const pastByLeague = getMatchesByLeague(true);
    const upcomingByLeague = getMatchesByLeague(false);

    if (loading) {
        return (
            <main className="min-h-screen bg-slate-950 pt-16 pb-20">
                <div className="max-w-3xl mx-auto px-3 py-6">
                    <div className="animate-pulse space-y-4">
                        <div className="h-24 bg-slate-900 rounded-2xl"></div>
                        <div className="h-16 bg-slate-900 rounded-xl"></div>
                        <div className="h-32 bg-slate-900 rounded-xl"></div>
                    </div>
                </div>
            </main>
        );
    }

    return (
        <main className="min-h-screen bg-slate-950 pt-16 pb-20">
            <div className="max-w-3xl mx-auto px-3 py-4 space-y-3">

                {/* Compact Hero */}
                <div className="bg-gradient-to-r from-slate-900 via-slate-800 to-slate-900 border border-slate-700/50 rounded-2xl p-4">
                    <div className="flex items-center gap-4">
                        <div className="relative shrink-0">
                            <div className="absolute inset-0 bg-gradient-to-br from-emerald-500/30 to-cyan-500/30 blur-lg rounded-full"></div>
                            <TeamAvatar name={actualTeamName} size="lg" />
                        </div>
                        <div className="flex-1 min-w-0">
                            <h1 className="text-xl font-black text-white truncate mb-1">
                                {actualTeamName}
                            </h1>
                            <div className="flex flex-wrap gap-1.5">
                                {leagueData.map(ld => (
                                    <span
                                        key={ld.league}
                                        className={`px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider rounded-full
                                            bg-${ld.color}-500/20 text-${ld.color}-400 border border-${ld.color}-500/30`}
                                    >
                                        {ld.shortName}
                                    </span>
                                ))}
                            </div>
                        </div>
                        <Link
                            href="/ligler"
                            className="text-slate-500 hover:text-white text-xs shrink-0"
                        >
                            âœ•
                        </Link>
                    </div>
                </div>

                {/* Stats Row */}
                {teamStats && (
                    <div className="grid grid-cols-4 gap-2">
                        <StatBox value={teamStats.points} label="Puan" color="amber" />
                        <StatBox value={teamStats.wins} label="Galibiyet" color="emerald" />
                        <StatBox value={teamStats.played - teamStats.wins} label="MaÄŸlubiyet" color="rose" />
                        <StatBox value={`${teamStats.setsWon}/${teamStats.setsLost}`} label="Set" color="cyan" />
                    </div>
                )}

                {/* Standing Position */}
                {primaryLeague && teamStats && (
                    <div className="bg-slate-900/60 border border-slate-800 rounded-xl p-3">
                        <div className="flex items-center justify-between">
                            <div className="flex items-center gap-2">
                                <span className="text-lg">ğŸ†</span>
                                <span className="text-sm text-slate-400">{primaryLeague.leagueName}</span>
                            </div>
                            <div className="flex items-center gap-2">
                                {(() => {
                                    const rank = primaryLeague.standings.findIndex(t =>
                                        matchesTeamExact(t.name, teamName)
                                    ) + 1;
                                    return (
                                        <span className={`text-lg font-black ${rank === 1 ? 'text-amber-400' :
                                            rank <= 4 ? 'text-emerald-400' :
                                                'text-slate-400'
                                            }`}>
                                            {rank}. sÄ±ra
                                        </span>
                                    );
                                })()}
                                <Link
                                    href={`/${primaryLeague.league}/tahminoyunu`}
                                    className="text-xs text-emerald-400 hover:underline"
                                >
                                    GÃ¶rÃ¼ntÃ¼le â†’
                                </Link>
                            </div>
                        </div>
                    </div>
                )}

                {/* Past Matches - Grouped by League */}
                {pastByLeague.length > 0 && (
                    <div className="bg-slate-900/60 border border-slate-800 rounded-xl overflow-hidden">
                        <div className="px-3 py-2 border-b border-slate-800 flex items-center gap-2">
                            <span>ğŸ“…</span>
                            <span className="text-sm font-bold text-white">Son MaÃ§lar</span>
                        </div>
                        <div className="divide-y divide-slate-800/50">
                            {pastByLeague.map(ld => (
                                <div key={ld.league}>
                                    <div className={`px-3 py-1.5 bg-${ld.color}-500/10 border-l-2 border-${ld.color}-500`}>
                                        <span className={`text-[10px] font-bold text-${ld.color}-400 uppercase tracking-wider`}>
                                            {ld.shortName}
                                        </span>
                                    </div>
                                    {ld.matches.map((match, idx) => (
                                        <CompactMatchRow
                                            key={idx}
                                            match={match}
                                            teamName={teamName}
                                        />
                                    ))}
                                </div>
                            ))}
                        </div>
                    </div>
                )}

                {/* Upcoming Matches - Grouped by League */}
                {upcomingByLeague.length > 0 && (
                    <div className="bg-slate-900/60 border border-slate-800 rounded-xl overflow-hidden">
                        <div className="px-3 py-2 border-b border-slate-800 flex items-center gap-2">
                            <span>â³</span>
                            <span className="text-sm font-bold text-white">Gelecek MaÃ§lar</span>
                        </div>
                        <div className="divide-y divide-slate-800/50">
                            {upcomingByLeague.map(ld => (
                                <div key={ld.league}>
                                    <div className={`px-3 py-1.5 bg-${ld.color}-500/10 border-l-2 border-${ld.color}-500`}>
                                        <span className={`text-[10px] font-bold text-${ld.color}-400 uppercase tracking-wider`}>
                                            {ld.shortName}
                                        </span>
                                    </div>
                                    {ld.matches.map((match, idx) => (
                                        <CompactMatchRow
                                            key={idx}
                                            match={match}
                                            teamName={teamName}
                                            isPending
                                        />
                                    ))}
                                </div>
                            ))}
                        </div>
                    </div>
                )}

                {/* Other Leagues */}
                {leagueData.length > 1 && (
                    <div className="bg-slate-900/60 border border-slate-800 rounded-xl p-3">
                        <div className="text-xs text-slate-500 mb-2">DiÄŸer Turnuvalar</div>
                        <div className="flex flex-wrap gap-2">
                            {leagueData.slice(1).map(ld => {
                                const rank = ld.standings.findIndex(t =>
                                    matchesTeamExact(t.name, teamName)
                                ) + 1;
                                return (
                                    <Link
                                        key={ld.league}
                                        href={`/${ld.league}/tahminoyunu`}
                                        className={`flex items-center gap-2 px-3 py-1.5 rounded-lg
                                            bg-${ld.color}-500/10 border border-${ld.color}-500/30 hover:bg-${ld.color}-500/20 transition-colors`}
                                    >
                                        <span className={`text-xs font-bold text-${ld.color}-400`}>{ld.shortName}</span>
                                        {rank > 0 && (
                                            <span className="text-[10px] text-slate-400">{rank}.</span>
                                        )}
                                    </Link>
                                );
                            })}
                        </div>
                    </div>
                )}

                {/* Empty State */}
                {leagueData.length === 0 && (
                    <div className="text-center py-12">
                        <div className="text-5xl mb-3">ğŸ”</div>
                        <h2 className="text-lg font-bold text-white mb-1">TakÄ±m BulunamadÄ±</h2>
                        <p className="text-sm text-slate-400 mb-4">
                            &quot;{teamName}&quot; aktif liglerde bulunamadÄ±.
                        </p>
                        <Link
                            href="/ligler"
                            className="inline-flex items-center gap-2 px-4 py-2 bg-emerald-600 text-white text-sm rounded-lg hover:bg-emerald-700"
                        >
                            Liglere GÃ¶z At
                        </Link>
                    </div>
                )}
            </div>
        </main>
    );
}

// Compact stat box
function StatBox({ value, label, color }: { value: string | number; label: string; color: string }) {
    return (
        <div className={`bg-${color}-500/10 border border-${color}-500/20 rounded-xl p-2 text-center`}>
            <div className={`text-lg font-black text-${color}-400`}>{value}</div>
            <div className="text-[9px] text-slate-500 uppercase tracking-wider">{label}</div>
        </div>
    );
}

// Compact match row
function CompactMatchRow({ match, teamName, isPending = false }: {
    match: Match;
    teamName: string;
    isPending?: boolean;
}) {
    const isHome = matchesTeamExact(match.homeTeam || '', teamName);
    const opponent = isHome ? match.awayTeam : match.homeTeam;
    const won = !isPending && (
        (isHome && (match.homeScore || 0) > (match.awayScore || 0)) ||
        (!isHome && (match.awayScore || 0) > (match.homeScore || 0))
    );

    return (
        <div className="flex items-center gap-2 px-3 py-2 hover:bg-slate-800/30">
            <TeamAvatar name={opponent || ''} size="xs" />
            <div className="flex-1 min-w-0">
                <span className="text-xs text-slate-300 truncate block">{opponent}</span>
                <span className="text-[10px] text-slate-500">{isHome ? 'Ev Sahibi' : 'Deplasman'}</span>
            </div>
            {isPending ? (
                <span className="text-[10px] text-slate-500">{match.matchDate || 'TBD'}</span>
            ) : (
                <div className={`text-xs font-bold px-2 py-0.5 rounded ${won ? 'bg-emerald-500/20 text-emerald-400' : 'bg-rose-500/20 text-rose-400'
                    }`}>
                    {isHome ? `${match.homeScore}-${match.awayScore}` : `${match.awayScore}-${match.homeScore}`}
                </div>
            )}
        </div>
    );
}

```

## File: app\tournament-predictions\page.tsx
```
"use client";

import { useState } from "react";
import { useAuth } from "../context/AuthContext";
import Link from "next/link";

interface TournamentPrediction {
  id: string;
  tournament: string;
  seasonPredictions: {
    champion: string;
    runnerUp: string;
    thirdPlace: string;
    relegated: string[];
    topScorer: string;
  };
  playoffPredictions?: {
    semifinal1: { home: string; away: string; winner: string };
    semifinal2: { home: string; away: string; winner: string };
    final: { home: string; away: string; winner: string };
    thirdPlace: { home: string; away: string; winner: string };
  };
  createdAt: string;
  locked: boolean;
}

const LEAGUES = [
  { id: 'vsl', name: 'Sultanlar Ligi', icon: 'ğŸ‘‘', color: 'from-amber-600 to-orange-600' },
  { id: '1lig', name: '1. Lig', icon: 'ğŸ¥ˆ', color: 'from-slate-500 to-slate-600' },
  { id: '2lig', name: '2. Lig', icon: 'ğŸ¥‰', color: 'from-amber-700 to-amber-800' },
  { id: 'cev-cl', name: 'CEV Åampiyonlar Ligi', icon: 'ğŸŒŸ', color: 'from-blue-600 to-indigo-600' },
];

const SAMPLE_TEAMS: Record<string, string[]> = {
  vsl: [
    "FENERBAHÃ‡E MEDICANA", "ECZACIBAÅI DYNAVÄ°T", "VAKIFBANK", "GALATASARAY DAIKIN",
    "THY", "NÄ°LÃœFER BELEDÄ°YESPOR", "BEÅÄ°KTAÅ", "ARAS KARGO",
    "KUZEYBORUÄ°STANBUL", "SIGORTA SHOP", "PTT", "TOKAT BELEDÄ°YE PLEVNE"
  ],
  '1lig': [
    "BURSA BÃœYÃœKÅEHIR", "AYDIN B.ÅEHÄ°R BEL", "MERSÄ°N", "KARAYOLLARI",
    "Ã‡ANKAYA ÃœNÄ°V", "GAZÄ°ANTEP", "AKDENÄ°Z ÃœNÄ°", "ANTALYA 07"
  ],
  '2lig': [
    "SAKARYA", "MUÄLA", "Ä°ZMÄ°R", "ESKÄ°ÅEHÄ°R",
    "KONYA", "TRABZON", "ADANA", "BURSA"
  ],
  'cev-cl': [
    "VAKIFBANK", "ECZACIBAÅI", "FENERBAHÃ‡E", "IMOCO VOLLEY",
    "VERO VOLLEY", "MARITZA PLOVDIV", "DEVELOPRES", "PROSTEJOV"
  ]
};

export default function TournamentPredictionsPage() {
  const { user } = useAuth();
  const [selectedLeague, setSelectedLeague] = useState<string | null>(null);
  const [predictions, setPredictions] = useState<Record<string, TournamentPrediction>>({});
  const [activeTab, setActiveTab] = useState<'season' | 'playoff'>('season');
  
  // Form state
  const [champion, setChampion] = useState("");
  const [runnerUp, setRunnerUp] = useState("");
  const [thirdPlace, setThirdPlace] = useState("");
  const [relegated, setRelegated] = useState<string[]>([]);
  const [topScorer, setTopScorer] = useState("");

  const handleSavePrediction = () => {
    if (!selectedLeague || !champion || !runnerUp || !thirdPlace) return;
    
    const newPrediction: TournamentPrediction = {
      id: `${selectedLeague}-${Date.now()}`,
      tournament: selectedLeague,
      seasonPredictions: {
        champion,
        runnerUp,
        thirdPlace,
        relegated,
        topScorer,
      },
      createdAt: new Date().toISOString(),
      locked: false,
    };
    
    setPredictions(prev => ({
      ...prev,
      [selectedLeague]: newPrediction
    }));
    
    // Reset form
    setChampion("");
    setRunnerUp("");
    setThirdPlace("");
    setRelegated([]);
    setTopScorer("");
    setSelectedLeague(null);
  };

  const toggleRelegated = (team: string) => {
    setRelegated(prev => 
      prev.includes(team) 
        ? prev.filter(t => t !== team)
        : prev.length < 2 ? [...prev, team] : prev
    );
  };

  if (!user) {
    return (
      <div className="min-h-screen bg-slate-950 flex items-center justify-center">
        <div className="text-center">
          <p className="text-slate-400 mb-4">Bu sayfayÄ± gÃ¶rÃ¼ntÃ¼lemek iÃ§in giriÅŸ yapmalÄ±sÄ±nÄ±z.</p>
          <Link href="/" className="text-emerald-400 hover:underline">GiriÅŸ Yap</Link>
        </div>
      </div>
    );
  }

  return (
    <main className="min-h-screen bg-slate-950 text-slate-100">
      {/* Header */}
      <div className="bg-gradient-to-r from-emerald-600 to-teal-600 px-4 py-6">
        <div className="max-w-4xl mx-auto">
          <h1 className="text-2xl font-bold text-white">Turnuva Tahminleri</h1>
          <p className="text-white/70 text-sm mt-1">
            Sezon sonu tahminlerini yap ve bÃ¼yÃ¼k Ã¶dÃ¼ller kazan!
          </p>
        </div>
      </div>

      <div className="max-w-4xl mx-auto px-4 py-6 space-y-6">
        {/* Info Card */}
        <div className="bg-gradient-to-r from-emerald-500/10 to-teal-500/10 border border-emerald-500/30 rounded-xl p-4">
          <div className="flex items-start gap-3">
            <span className="text-2xl">ğŸ’¡</span>
            <div>
              <h3 className="font-bold text-white">NasÄ±l Ã‡alÄ±ÅŸÄ±r?</h3>
              <p className="text-sm text-slate-300 mt-1">
                Her lig iÃ§in sezon sonu tahminlerini yap. Åampiyon, ikincilik, Ã¼Ã§Ã¼ncÃ¼lÃ¼k ve kÃ¼me dÃ¼ÅŸecek takÄ±mlarÄ± tahmin et. 
                Playoff aÅŸamasÄ±na geÃ§ildiÄŸinde playoff tahminleri de yapabilirsin. DoÄŸru tahminler iÃ§in yÃ¼ksek puanlar kazan!
              </p>
            </div>
          </div>
        </div>

        {/* League Selection */}
        {!selectedLeague ? (
          <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
            {LEAGUES.map(league => {
              const hasPrediction = predictions[league.id];
              return (
                <button
                  key={league.id}
                  onClick={() => setSelectedLeague(league.id)}
                  className={`relative bg-gradient-to-br ${league.color} rounded-2xl p-6 text-left transition-all hover:scale-[1.02] active:scale-[0.98]`}
                >
                  <div className="flex items-start justify-between">
                    <div>
                      <span className="text-4xl">{league.icon}</span>
                      <h3 className="font-bold text-white text-xl mt-3">{league.name}</h3>
                    </div>
                    {hasPrediction && (
                      <span className="bg-white/20 px-2 py-1 rounded-lg text-xs font-medium">
                        âœ“ Tahmin YapÄ±ldÄ±
                      </span>
                    )}
                  </div>
                  
                  {hasPrediction ? (
                    <div className="mt-4 space-y-1 text-sm text-white/80">
                      <p>ğŸ¥‡ {hasPrediction.seasonPredictions.champion}</p>
                      <p>ğŸ¥ˆ {hasPrediction.seasonPredictions.runnerUp}</p>
                      <p>ğŸ¥‰ {hasPrediction.seasonPredictions.thirdPlace}</p>
                    </div>
                  ) : (
                    <p className="mt-4 text-white/70 text-sm">
                      HenÃ¼z tahmin yapÄ±lmadÄ±
                    </p>
                  )}
                  
                  <div className="absolute bottom-4 right-4 text-white/50 text-2xl">â†’</div>
                </button>
              );
            })}
          </div>
        ) : (
          <div className="space-y-6">
            {/* Back Button */}
            <button
              onClick={() => setSelectedLeague(null)}
              className="flex items-center gap-2 text-slate-400 hover:text-white transition-colors"
            >
              â† Geri DÃ¶n
            </button>

            {/* Selected League Header */}
            <div className={`bg-gradient-to-r ${LEAGUES.find(l => l.id === selectedLeague)?.color} rounded-xl p-6`}>
              <div className="flex items-center gap-4">
                <span className="text-4xl">{LEAGUES.find(l => l.id === selectedLeague)?.icon}</span>
                <div>
                  <h2 className="text-2xl font-bold text-white">
                    {LEAGUES.find(l => l.id === selectedLeague)?.name}
                  </h2>
                  <p className="text-white/70">2024-2025 Sezonu Tahminleri</p>
                </div>
              </div>
            </div>

            {/* Tabs */}
            <div className="flex gap-2">
              <button
                onClick={() => setActiveTab('season')}
                className={`px-4 py-2 rounded-xl font-medium transition-colors ${
                  activeTab === 'season'
                    ? 'bg-emerald-600 text-white'
                    : 'bg-slate-800 text-slate-400 hover:text-white'
                }`}
              >
                ğŸ“Š Sezon Sonu
              </button>
              <button
                onClick={() => setActiveTab('playoff')}
                className={`px-4 py-2 rounded-xl font-medium transition-colors ${
                  activeTab === 'playoff'
                    ? 'bg-emerald-600 text-white'
                    : 'bg-slate-800 text-slate-400 hover:text-white'
                }`}
              >
                ğŸ† Playoff
              </button>
            </div>

            {/* Season Predictions */}
            {activeTab === 'season' && (
              <div className="space-y-6">
                {/* Champion */}
                <div className="bg-slate-900/50 border border-slate-800 rounded-xl p-6">
                  <h3 className="flex items-center gap-2 font-bold text-white mb-4">
                    <span className="text-2xl">ğŸ¥‡</span> Åampiyon
                    <span className="ml-auto text-emerald-400 text-sm">+500 puan</span>
                  </h3>
                  <div className="grid grid-cols-2 md:grid-cols-4 gap-2">
                    {SAMPLE_TEAMS[selectedLeague]?.map(team => (
                      <button
                        key={team}
                        onClick={() => setChampion(team)}
                        disabled={team === runnerUp || team === thirdPlace || relegated.includes(team)}
                        className={`px-3 py-2 rounded-lg text-sm font-medium transition-all ${
                          champion === team
                            ? 'bg-amber-500 text-white scale-105'
                            : team === runnerUp || team === thirdPlace || relegated.includes(team)
                              ? 'bg-slate-800/50 text-slate-600 cursor-not-allowed'
                              : 'bg-slate-800 text-slate-300 hover:bg-slate-700'
                        }`}
                      >
                        {team}
                      </button>
                    ))}
                  </div>
                </div>

                {/* Runner Up */}
                <div className="bg-slate-900/50 border border-slate-800 rounded-xl p-6">
                  <h3 className="flex items-center gap-2 font-bold text-white mb-4">
                    <span className="text-2xl">ğŸ¥ˆ</span> Ä°kinci
                    <span className="ml-auto text-emerald-400 text-sm">+300 puan</span>
                  </h3>
                  <div className="grid grid-cols-2 md:grid-cols-4 gap-2">
                    {SAMPLE_TEAMS[selectedLeague]?.map(team => (
                      <button
                        key={team}
                        onClick={() => setRunnerUp(team)}
                        disabled={team === champion || team === thirdPlace || relegated.includes(team)}
                        className={`px-3 py-2 rounded-lg text-sm font-medium transition-all ${
                          runnerUp === team
                            ? 'bg-slate-400 text-slate-900 scale-105'
                            : team === champion || team === thirdPlace || relegated.includes(team)
                              ? 'bg-slate-800/50 text-slate-600 cursor-not-allowed'
                              : 'bg-slate-800 text-slate-300 hover:bg-slate-700'
                        }`}
                      >
                        {team}
                      </button>
                    ))}
                  </div>
                </div>

                {/* Third Place */}
                <div className="bg-slate-900/50 border border-slate-800 rounded-xl p-6">
                  <h3 className="flex items-center gap-2 font-bold text-white mb-4">
                    <span className="text-2xl">ğŸ¥‰</span> ÃœÃ§Ã¼ncÃ¼
                    <span className="ml-auto text-emerald-400 text-sm">+200 puan</span>
                  </h3>
                  <div className="grid grid-cols-2 md:grid-cols-4 gap-2">
                    {SAMPLE_TEAMS[selectedLeague]?.map(team => (
                      <button
                        key={team}
                        onClick={() => setThirdPlace(team)}
                        disabled={team === champion || team === runnerUp || relegated.includes(team)}
                        className={`px-3 py-2 rounded-lg text-sm font-medium transition-all ${
                          thirdPlace === team
                            ? 'bg-amber-700 text-white scale-105'
                            : team === champion || team === runnerUp || relegated.includes(team)
                              ? 'bg-slate-800/50 text-slate-600 cursor-not-allowed'
                              : 'bg-slate-800 text-slate-300 hover:bg-slate-700'
                        }`}
                      >
                        {team}
                      </button>
                    ))}
                  </div>
                </div>

                {/* Relegated Teams */}
                <div className="bg-slate-900/50 border border-slate-800 rounded-xl p-6">
                  <h3 className="flex items-center gap-2 font-bold text-white mb-4">
                    <span className="text-2xl">â¬‡ï¸</span> KÃ¼me DÃ¼ÅŸecekler (2 takÄ±m seÃ§)
                    <span className="ml-auto text-emerald-400 text-sm">+150 puan</span>
                  </h3>
                  <div className="grid grid-cols-2 md:grid-cols-4 gap-2">
                    {SAMPLE_TEAMS[selectedLeague]?.map(team => (
                      <button
                        key={team}
                        onClick={() => toggleRelegated(team)}
                        disabled={team === champion || team === runnerUp || team === thirdPlace}
                        className={`px-3 py-2 rounded-lg text-sm font-medium transition-all ${
                          relegated.includes(team)
                            ? 'bg-red-500 text-white scale-105'
                            : team === champion || team === runnerUp || team === thirdPlace
                              ? 'bg-slate-800/50 text-slate-600 cursor-not-allowed'
                              : 'bg-slate-800 text-slate-300 hover:bg-slate-700'
                        }`}
                      >
                        {team}
                      </button>
                    ))}
                  </div>
                </div>

                {/* Top Scorer */}
                <div className="bg-slate-900/50 border border-slate-800 rounded-xl p-6">
                  <h3 className="flex items-center gap-2 font-bold text-white mb-4">
                    <span className="text-2xl">â­</span> Gol KralÄ±
                    <span className="ml-auto text-emerald-400 text-sm">+100 puan</span>
                  </h3>
                  <input
                    type="text"
                    value={topScorer}
                    onChange={(e) => setTopScorer(e.target.value)}
                    placeholder="Oyuncu adÄ± girin..."
                    className="w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500"
                  />
                </div>

                {/* Save Button */}
                <button
                  onClick={handleSavePrediction}
                  disabled={!champion || !runnerUp || !thirdPlace}
                  className="w-full py-4 bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-700 hover:to-teal-700 disabled:opacity-50 disabled:cursor-not-allowed rounded-xl font-bold text-lg transition-all"
                >
                  ğŸ’¾ Tahmini Kaydet
                </button>
              </div>
            )}

            {/* Playoff Predictions */}
            {activeTab === 'playoff' && (
              <div className="space-y-6">
                <div className="bg-amber-500/10 border border-amber-500/30 rounded-xl p-4">
                  <div className="flex items-center gap-3">
                    <span className="text-2xl">ğŸ”’</span>
                    <div>
                      <h3 className="font-bold text-amber-400">Playoff HenÃ¼z BaÅŸlamadÄ±</h3>
                      <p className="text-sm text-slate-400 mt-1">
                        Playoff eÅŸleÅŸmeleri belli olduÄŸunda burada tahmin yapabileceksiniz.
                      </p>
                    </div>
                  </div>
                </div>

                {/* Playoff Bracket Preview */}
                <div className="bg-slate-900/50 border border-slate-800 rounded-xl p-6">
                  <h3 className="font-bold text-white mb-6">Playoff ÅemasÄ±</h3>
                  
                  <div className="flex items-center justify-center gap-8">
                    {/* Semifinals */}
                    <div className="space-y-4">
                      <div className="text-xs text-slate-500 text-center mb-2">YarÄ± Final</div>
                      <div className="bg-slate-800 rounded-lg p-3 w-40">
                        <div className="text-sm text-slate-400 border-b border-slate-700 pb-2 mb-2">---</div>
                        <div className="text-sm text-slate-400">---</div>
                      </div>
                      <div className="bg-slate-800 rounded-lg p-3 w-40">
                        <div className="text-sm text-slate-400 border-b border-slate-700 pb-2 mb-2">---</div>
                        <div className="text-sm text-slate-400">---</div>
                      </div>
                    </div>

                    {/* Arrow */}
                    <div className="text-slate-600 text-2xl">â†’</div>

                    {/* Final */}
                    <div className="space-y-4">
                      <div className="text-xs text-slate-500 text-center mb-2">Final</div>
                      <div className="bg-gradient-to-r from-amber-500/20 to-orange-500/20 border border-amber-500/30 rounded-lg p-3 w-40">
                        <div className="text-sm text-slate-400 border-b border-amber-500/30 pb-2 mb-2">---</div>
                        <div className="text-sm text-slate-400">---</div>
                      </div>
                      <div className="bg-slate-800 rounded-lg p-3 w-40">
                        <div className="text-xs text-slate-500 text-center">3. lÃ¼k MaÃ§Ä±</div>
                      </div>
                    </div>

                    {/* Arrow */}
                    <div className="text-slate-600 text-2xl">â†’</div>

                    {/* Champion */}
                    <div className="text-center">
                      <div className="text-xs text-slate-500 mb-2">Åampiyon</div>
                      <div className="w-20 h-20 bg-gradient-to-br from-amber-500 to-orange-500 rounded-xl flex items-center justify-center">
                        <span className="text-3xl">ğŸ†</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            )}
          </div>
        )}

        {/* Point Values Info */}
        <div className="bg-slate-900/50 border border-slate-800 rounded-xl p-6">
          <h3 className="font-bold text-white mb-4">Puan DeÄŸerleri</h3>
          <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
            {[
              { label: 'Åampiyon', points: 500, icon: 'ğŸ¥‡' },
              { label: 'Ä°kinci', points: 300, icon: 'ğŸ¥ˆ' },
              { label: 'ÃœÃ§Ã¼ncÃ¼', points: 200, icon: 'ğŸ¥‰' },
              { label: 'KÃ¼me DÃ¼ÅŸen', points: 150, icon: 'â¬‡ï¸' },
              { label: 'Gol KralÄ±', points: 100, icon: 'â­' },
              { label: 'YarÄ± Final', points: 100, icon: 'ğŸŸï¸' },
              { label: 'Final', points: 200, icon: 'ğŸ†' },
              { label: 'Tam Ä°sabet', points: 1000, icon: 'ğŸ¯' },
            ].map(item => (
              <div key={item.label} className="bg-slate-800/50 rounded-lg p-3 text-center">
                <span className="text-2xl">{item.icon}</span>
                <div className="text-sm text-slate-400 mt-1">{item.label}</div>
                <div className="text-emerald-400 font-bold">+{item.points}</div>
              </div>
            ))}
          </div>
        </div>
      </div>
    </main>
  );
}

```

## File: app\utils\apiValidation.ts
```
import { z } from 'zod';
import { NextRequest, NextResponse } from 'next/server';

// Validation schemas for API routes
export const ScoreSchema = z.string()
    .regex(/^[0-3]-[0-3]$/, 'GeÃ§erli skor formatÄ±: "X-Y" (Ã¶rn: "3-0")');

export const PredictionSchema = z.object({
    matchId: z.string().min(1),
    score: ScoreSchema,
    leagueId: z.string().min(1),
});

export const LeagueIdSchema = z.enum([
    'vsl',
    '1lig',
    '2lig',
    'cev-cl',
    'cev-cup',
    'cev-challenge',
    'tvf'
]);

/**
 * Validate JSON body with Zod schema
 * @param req - NextRequest
 * @param schema - Zod schema
 * @returns Validated data or error response
 */
export async function validateBody<T>(
    req: NextRequest,
    schema: z.ZodSchema<T>
): Promise<{ success: true; data: T } | { success: false; error: string }> {
    try {
        const body = await req.json();
        const validated = schema.parse(body);
        return { success: true, data: validated as T };
    } catch (error) {
        if (error instanceof z.ZodError) {
            const message = error.errors.map(e => `${e.path.join('.')}: ${e.message}`).join(', ');
            return { success: false, error: message };
        }
        return { success: false, error: 'Invalid request body' };
    }
}

/**
 * Create error response
 */
export function errorResponse(message: string, status: number = 400) {
    return NextResponse.json({ error: message }, { status });
}

/**
 * Create success response
 */
export function successResponse<T>(data: T, status: number = 200) {
    return NextResponse.json(data, { status });
}

/**
 * Validate if a score string is a valid volleyball score
 */
export function isValidScore(score: string): boolean {
    const result = ScoreSchema.safeParse(score);
    if (!result.success) return false;

    const [home, away] = score.split('-').map(Number);
    // Valid volleyball scores: one team must have 3, other must have 0-2
    return (home === 3 && away >= 0 && away <= 2) || (away === 3 && home >= 0 && home <= 2);
}

/**
 * Validate score format
 */
export function validateScore(score: unknown): { valid: boolean; error?: string } {
    const result = ScoreSchema.safeParse(score);
    if (!result.success) {
        return { valid: false, error: result.error.errors[0]?.message || 'Invalid score' };
    }
    if (!isValidScore(score as string)) {
        return { valid: false, error: 'Invalid volleyball score (one team must win 3 sets)' };
    }
    return { valid: true };
}

/**
 * Validate match ID format
 */
export function validateMatchId(matchId: unknown): { valid: boolean; error?: string } {
    if (typeof matchId !== 'string' || matchId.length === 0) {
        return { valid: false, error: 'Match ID is required' };
    }
    return { valid: true };
}

```

## File: app\utils\calculatorUtils.ts
```
import { Match, MatchOutcome, TeamStats } from "../types";

export const SCORES = ['3-0', '3-1', '3-2', '2-3', '1-3', '0-3'];

export function getOutcomeFromScore(score: string): MatchOutcome | null {
    const [h, a] = score.split('-').map(Number);
    if (isNaN(h) || isNaN(a)) return null;

    if (h === 3) {
        if (a === 0 || a === 1) return { homeSets: 3, awaySets: a, homePoints: 3, awayPoints: 0, homeWin: true };
        if (a === 2) return { homeSets: 3, awaySets: 2, homePoints: 2, awayPoints: 1, homeWin: true };
    }
    if (a === 3) {
        if (h === 0 || h === 1) return { homeSets: h, awaySets: 3, homePoints: 0, awayPoints: 3, homeWin: false };
        if (h === 2) return { homeSets: 2, awaySets: 3, homePoints: 1, awayPoints: 2, homeWin: false };
    }
    return null;
}

export function sortStandings(teams: TeamStats[]): TeamStats[] {
    return [...teams].sort((a, b) => {
        // 1. Wins (most wins first)
        if (b.wins !== a.wins) return b.wins - a.wins;
        // 2. Points
        if (b.points !== a.points) return b.points - a.points;
        // 3. Set Average (ratio)
        const setAvgB = (b.setsWon === 0 && b.setsLost === 0) ? 0 : (b.setsWon / (b.setsLost || 1));
        const setAvgA = (a.setsWon === 0 && a.setsLost === 0) ? 0 : (a.setsWon / (a.setsLost || 1));
        return setAvgB - setAvgA;
    });
}

export const normalizeTeamName = (name: string) => {
    return name
        .replace(/Ä°/g, 'I')
        .replace(/Ä±/g, 'I')
        .replace(/Å/g, 'S')
        .replace(/ÅŸ/g, 'S')
        .replace(/Ä/g, 'G')
        .replace(/ÄŸ/g, 'G')
        .replace(/Ãœ/g, 'U')
        .replace(/Ã¼/g, 'U')
        .replace(/Ã–/g, 'O')
        .replace(/Ã¶/g, 'O')
        .replace(/Ã‡/g, 'C')
        .replace(/Ã§/g, 'C')
        .replace(/i/g, 'I')
        .toUpperCase()
        .replace(/\s+/g, '')
        .replace(/[^A-Z0-9]/g, '')
        .trim();
};

export function calculateLiveStandings(
    initialTeams: TeamStats[],
    matches: Match[],
    overrides: Record<string, string> // matchId -> "3-0"
): TeamStats[] {
    // Deep clone teams to simulate changes, indexed by normalized name
    const teamsMap = new Map<string, TeamStats>();
    initialTeams.forEach(t => {
        const key = normalizeTeamName(t.name);
        teamsMap.set(key, { ...t });
    });

    matches.forEach(m => {
        // Normalize match team names for lookup
        const homeKey = normalizeTeamName(m.homeTeam);
        const awayKey = normalizeTeamName(m.awayTeam);

        // Check for override with both separator formats for compatibility
        const matchId1 = `${m.homeTeam}|||${m.awayTeam}`;
        const matchId2 = `${m.homeTeam}-${m.awayTeam}`;
        const overriddenScore = overrides[matchId1] || overrides[matchId2];

        if (overriddenScore && !m.isPlayed) {
            const outcome = getOutcomeFromScore(overriddenScore);
            if (outcome) {
                const home = teamsMap.get(homeKey);
                const away = teamsMap.get(awayKey);

                if (home && away) {
                    home.played += 1;
                    home.points += outcome.homePoints;
                    home.setsWon += outcome.homeSets;
                    home.setsLost += outcome.awaySets;
                    if (outcome.homeWin) home.wins += 1;

                    away.played += 1;
                    away.points += outcome.awayPoints;
                    away.setsWon += outcome.awaySets;
                    away.setsLost += outcome.homeSets;
                    if (!outcome.homeWin) away.wins += 1;
                }
            }
        }
    });

    return sortStandings(Array.from(teamsMap.values()));
}

```

## File: app\utils\eloCalculator.ts
```
import { Match, TeamStats } from "../types";

export function calculateElo(teams: TeamStats[], matches: Match[]): Map<string, number> {
    const ratings = new Map<string, number>();
    
    // Initialize all teams with 1200
    teams.forEach(t => ratings.set(t.name, 1200));

    // Sort matches by date if possible to ensure chronological order calculation
    // Assuming matches are roughly in order or we want to process played matches
    const playedMatches = matches.filter(m => m.isPlayed && m.resultScore).sort((a, b) => {
        // Simple date sort if available
        if (a.matchDate && b.matchDate) return a.matchDate.localeCompare(b.matchDate);
        return 0;
    });

    playedMatches.forEach(m => {
        const homeName = m.homeTeam;
        const awayName = m.awayTeam;
        
        const homeRating = ratings.get(homeName) || 1200;
        const awayRating = ratings.get(awayName) || 1200;
        
        const [hSets, aSets] = (m.resultScore || '0-0').split('-').map(Number);
        
        // Skip invalid scores
        if (isNaN(hSets) || isNaN(aSets)) return;

        // Determine actual score (1 for win, 0 for loss)
        // Advanced: We could use 0.9 for 3-2 wins etc, but standard Elo is 1/0
        const actualHome = hSets > aSets ? 1 : 0;
        const actualAway = 1 - actualHome;

        // K-Factor - using 32 as standard for many sports
        const K = 32;

        // Expected score
        // Ea = 1 / (1 + 10 ^ ((Rb - Ra) / 400))
        const expectedHome = 1 / (1 + Math.pow(10, (awayRating - homeRating) / 400));
        const expectedAway = 1 / (1 + Math.pow(10, (homeRating - awayRating) / 400));

        // Margin of victory Multiplier (Optional but good for Volleyball 3-0 vs 3-2)
        // Multiplier = ln(abs(PD) + 1) * (2.2 / ((ELOW - ELOL) * 0.001 + 2.2))
        // Simplified multiplier: 
        // 3-0: 1.5x
        // 3-1: 1.25x
        // 3-2: 1.0x
        let multiplier = 1;
        const setDiff = Math.abs(hSets - aSets);
        if (setDiff === 3) multiplier = 1.3; // Dominant win
        else if (setDiff === 2) multiplier = 1.1; // Solid win
        else multiplier = 1.0; // Tie-break win

        // Update ratings
        const newHomeRating = homeRating + K * multiplier * (actualHome - expectedHome);
        const newAwayRating = awayRating + K * multiplier * (actualAway - expectedAway);

        ratings.set(homeName, newHomeRating);
        ratings.set(awayName, newAwayRating);
    });

    return ratings;
}

```

## File: app\utils\gameState.ts
```
"use client";

import { useState, useEffect, useCallback } from 'react';
import {
    GameState,
    Achievement,
    AchievementId,
    Quest,
    QuestId,
    LEVEL_THRESHOLDS,
    LEVEL_TITLES
} from '../types';

// ============================================
// ACHIEVEMENT DEFINITIONS
// ============================================
export const ACHIEVEMENTS: Record<AchievementId, Omit<Achievement, 'unlockedAt'>> = {
    first_prediction: {
        id: 'first_prediction',
        name: 'Ä°lk AdÄ±m',
        description: 'Ä°lk tahminini yaptÄ±n!',
        icon: 'ğŸ¯',
        xpReward: 50
    },
    streak_3: {
        id: 'streak_3',
        name: '3\'lÃ¼ Seri',
        description: '3 maÃ§ Ã¼st Ã¼ste doÄŸru tahmin',
        icon: 'ğŸ”¥',
        xpReward: 100
    },
    streak_5: {
        id: 'streak_5',
        name: '5\'li Seri',
        description: '5 maÃ§ Ã¼st Ã¼ste doÄŸru tahmin',
        icon: 'ğŸ’¥',
        xpReward: 200
    },
    champion_predictor: {
        id: 'champion_predictor',
        name: 'Åampiyon Tahmincisi',
        description: 'Sezon ÅŸampiyonunu doÄŸru tahmin ettin',
        icon: 'ğŸ†',
        xpReward: 500
    },
    perfect_week: {
        id: 'perfect_week',
        name: 'MÃ¼kemmel Hafta',
        description: 'Bir haftada 5/5 doÄŸru tahmin',
        icon: 'ğŸ’¯',
        xpReward: 300
    },
    underdog_hero: {
        id: 'underdog_hero',
        name: 'Underdog KahramanÄ±',
        description: 'SÃ¼rpriz bir sonucu doÄŸru tahmin ettin',
        icon: 'ğŸ¦¸',
        xpReward: 150
    },
    game_addict: {
        id: 'game_addict',
        name: 'Oyun BaÄŸÄ±mlÄ±sÄ±',
        description: '50+ tahmin yaptÄ±n',
        icon: 'ğŸ®',
        xpReward: 250
    },
    loyal_fan: {
        id: 'loyal_fan',
        name: 'SadÄ±k Taraftar',
        description: 'Favori takÄ±m seÃ§tin ve 10 maÃ§Ä±nÄ± tahmin ettin',
        icon: 'â¤ï¸',
        xpReward: 150
    }
};

// ============================================
// INITIAL STATE
// ============================================
const getInitialGameState = (): GameState => ({
    xp: 0,
    level: 1,
    favoriteTeam: null,
    achievements: [],
    quests: [],
    stats: {
        totalPredictions: 0,
        correctPredictions: 0,
        currentStreak: 0,
        bestStreak: 0,
        predictedChampions: []
    },
    soundEnabled: true,
    lastActiveDate: new Date().toISOString().split('T')[0]
});

// ============================================
// HELPER FUNCTIONS
// ============================================
export function calculateLevel(xp: number): number {
    for (let i = LEVEL_THRESHOLDS.length - 1; i >= 0; i--) {
        if (xp >= LEVEL_THRESHOLDS[i]) {
            return i + 1;
        }
    }
    return 1;
}

export function getXPForNextLevel(level: number): number {
    if (level >= LEVEL_THRESHOLDS.length) {
        return LEVEL_THRESHOLDS[LEVEL_THRESHOLDS.length - 1] + 3000 * (level - LEVEL_THRESHOLDS.length + 1);
    }
    return LEVEL_THRESHOLDS[level] || LEVEL_THRESHOLDS[LEVEL_THRESHOLDS.length - 1];
}

export function getLevelTitle(level: number): string {
    const titles = Object.entries(LEVEL_TITLES)
        .map(([lvl, title]) => ({ level: parseInt(lvl), title }))
        .sort((a, b) => b.level - a.level);

    for (const { level: reqLevel, title } of titles) {
        if (level >= reqLevel) return title;
    }
    return 'Ã‡aylak';
}

// ============================================
// GAME STATE HOOK
// ============================================
const STORAGE_KEY = 'volleySimGameState';

export function useGameState() {
    const [gameState, setGameState] = useState<GameState>(getInitialGameState);
    const [isLoaded, setIsLoaded] = useState(false);
    const [showLevelUp, setShowLevelUp] = useState(false);

    // Load from localStorage on mount
    useEffect(() => {
        const loadState = () => {
            try {
                const saved = localStorage.getItem(STORAGE_KEY);
                if (saved) {
                    const parsed = JSON.parse(saved);
                    setGameState(prev => ({ ...prev, ...parsed }));
                }
            } catch (e) {
                console.error('Failed to load game state:', e);
            }
            setIsLoaded(true);
        };

        Promise.resolve().then(loadState);
    }, []);

    // Save to localStorage on change
    useEffect(() => {
        if (isLoaded) {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(gameState));
        }
    }, [gameState, isLoaded]);

    // Add XP
    const addXP = useCallback((amount: number) => {
        setGameState(prev => {
            const newXP = prev.xp + amount;
            const newLevel = calculateLevel(newXP);
            if (newLevel > prev.level) {
                setShowLevelUp(true);
            }
            return {
                ...prev,
                xp: newXP,
                level: newLevel
            };
        });
    }, []);

    // Record prediction
    const recordPrediction = useCallback((isCorrect: boolean) => {
        setGameState(prev => {
            const newStats = { ...prev.stats };
            newStats.totalPredictions++;

            if (isCorrect) {
                newStats.correctPredictions++;
                newStats.currentStreak++;
                if (newStats.currentStreak > newStats.bestStreak) {
                    newStats.bestStreak = newStats.currentStreak;
                }
            } else {
                newStats.currentStreak = 0;
            }

            return { ...prev, stats: newStats };
        });
    }, []);

    // Unlock achievement
    const unlockAchievement = useCallback((id: AchievementId): boolean => {
        let wasUnlocked = false;

        setGameState(prev => {
            // Check if already unlocked
            if (prev.achievements.some(a => a.id === id)) {
                return prev;
            }

            const achievementDef = ACHIEVEMENTS[id];
            if (!achievementDef) return prev;

            const newAchievement: Achievement = {
                ...achievementDef,
                unlockedAt: new Date().toISOString()
            };

            wasUnlocked = true;
            const newXP = prev.xp + achievementDef.xpReward;

            return {
                ...prev,
                xp: newXP,
                level: calculateLevel(newXP),
                achievements: [...prev.achievements, newAchievement]
            };
        });

        return wasUnlocked;
    }, []);

    // Set favorite team
    const setFavoriteTeam = useCallback((teamName: string | null) => {
        setGameState(prev => ({ ...prev, favoriteTeam: teamName }));
    }, []);

    // Toggle sound
    const toggleSound = useCallback(() => {
        setGameState(prev => ({ ...prev, soundEnabled: !prev.soundEnabled }));
    }, []);

    // Check if achievement is unlocked
    const hasAchievement = useCallback((id: AchievementId): boolean => {
        return gameState.achievements.some(a => a.id === id);
    }, [gameState.achievements]);

    return {
        gameState,
        isLoaded,
        showLevelUp,
        clearLevelUp: () => setShowLevelUp(false),
        addXP,
        recordPrediction,
        unlockAchievement,
        setFavoriteTeam,
        toggleSound,
        hasAchievement,
        getLevelTitle: () => getLevelTitle(gameState.level),
        getXPProgress: () => {
            const currentLevelXP = LEVEL_THRESHOLDS[gameState.level - 1] || 0;
            const nextLevelXP = getXPForNextLevel(gameState.level);
            const progress = gameState.xp - currentLevelXP;
            const required = nextLevelXP - currentLevelXP;
            return { progress, required, percentage: (progress / required) * 100 };
        }
    };
}

```

## File: app\utils\index.ts
```
// Utility functions barrel export
export * from './apiValidation';
export * from './rateLimit';
export * from './validation';
export * from './performance';

// Re-export commonly used utilities
export { calculateLiveStandings, normalizeTeamName } from './calculatorUtils';
export { createClient } from './supabase';
export { generateTeamSlug, getTeamNameFromSlug, registerTeamSlug, isSlugRegistered } from './teamSlug';

```

## File: app\utils\performance.ts
```
/**
 * Performance utilities for throttling, debouncing, and optimization
 */

type AnyFunction = (...args: never[]) => void;

/**
 * Throttle function execution to at most once per wait period
 */
export function throttle<T extends AnyFunction>(
    func: T,
    wait: number
): T & { cancel: () => void } {
    let timeout: NodeJS.Timeout | null = null;
    let lastArgs: Parameters<T> | null = null;
    let lastCallTime = 0;

    const throttled = function (this: unknown, ...args: Parameters<T>) {
        const now = Date.now();
        const remaining = wait - (now - lastCallTime);

        if (remaining <= 0 || remaining > wait) {
            if (timeout) {
                clearTimeout(timeout);
                timeout = null;
            }
            lastCallTime = now;
            func.apply(this, args);
        } else {
            lastArgs = args;
            if (!timeout) {
                timeout = setTimeout(() => {
                    lastCallTime = Date.now();
                    timeout = null;
                    if (lastArgs) {
                        func.apply(this, lastArgs);
                        lastArgs = null;
                    }
                }, remaining);
            }
        }
    } as T & { cancel: () => void };

    throttled.cancel = () => {
        if (timeout) {
            clearTimeout(timeout);
            timeout = null;
        }
        lastArgs = null;
    };

    return throttled;
}

/**
 * Debounce function execution until after wait period has elapsed since last call
 */
export function debounce<T extends AnyFunction>(
    func: T,
    wait: number,
    options: { leading?: boolean } = {}
): T & { cancel: () => void } {
    let timeout: NodeJS.Timeout | null = null;
    let lastArgs: Parameters<T> | null = null;

    const debounced = function (this: unknown, ...args: Parameters<T>) {
        lastArgs = args;

        if (options.leading && !timeout) {
            func.apply(this, args);
        }

        if (timeout) {
            clearTimeout(timeout);
        }

        timeout = setTimeout(() => {
            timeout = null;
            if (!options.leading && lastArgs) {
                func.apply(this, lastArgs);
            }
            lastArgs = null;
        }, wait);
    } as T & { cancel: () => void };

    debounced.cancel = () => {
        if (timeout) {
            clearTimeout(timeout);
            timeout = null;
        }
        lastArgs = null;
    };

    return debounced;
}

/**
 * Request animation frame based throttle for scroll/resize handlers
 */
export function rafThrottle<T extends AnyFunction>(
    func: T
): T & { cancel: () => void } {
    let rafId: number | null = null;
    let lastArgs: Parameters<T> | null = null;

    const throttled = function (this: unknown, ...args: Parameters<T>) {
        lastArgs = args;

        if (rafId === null) {
            rafId = requestAnimationFrame(() => {
                rafId = null;
                if (lastArgs) {
                    func.apply(this, lastArgs);
                }
            });
        }
    } as T & { cancel: () => void };

    throttled.cancel = () => {
        if (rafId !== null) {
            cancelAnimationFrame(rafId);
            rafId = null;
        }
        lastArgs = null;
    };

    return throttled;
}

type AnyReturnFunction = (...args: never[]) => unknown;

/**
 * Memoize function results based on arguments
 */
export function memoize<T extends AnyReturnFunction>(
    func: T,
    keyResolver?: (...args: Parameters<T>) => string
): T {
    const cache = new Map<string, unknown>();

    return function (this: unknown, ...args: Parameters<T>) {
        const key = keyResolver ? keyResolver(...args) : JSON.stringify(args);

        if (cache.has(key)) {
            return cache.get(key) as ReturnType<T>;
        }

        const result = func.apply(this, args) as ReturnType<T>;
        cache.set(key, result);
        return result;
    } as T;
}

```

## File: app\utils\playoffUtils.ts
```
import { Match, TeamStats, MatchOverride } from "../types";
import { normalizeTeamName } from "./calculatorUtils";
import { calculateElo } from "./eloCalculator";

export interface PlayoffTeam extends TeamStats {
    elo: number;
    sourceGroup: string;
    position: string;
    initialSeed?: number; // 0-3 for 1st-4th
    scenarioWins?: number;
    scenarioLosses?: number;
    scenarioPlayed?: number;
    scenarioPoints?: number;
    scenarioSetsWon?: number;
    scenarioSetsLost?: number;
}

export interface PlayoffGroup {
    groupName: string;
    teams: PlayoffTeam[];
}

export const SCORES = ['3-0', '3-1', '3-2', '2-3', '1-3', '0-3'];

export interface PlayoffMatch {
    id: string; // e.g., "quarter-A-Team1-Team2"
    homeTeam: string;
    awayTeam: string;
    date: string;
    stage: 'quarter' | 'semi' | 'final';
}

export interface GroupStanding {
    groupName: string;
    first: TeamStats | null;
    second: TeamStats | null;
    teams: TeamStats[]; // Full sorted list for flexible selection (e.g. 1. Lig needs Top 4)
}

// Calculate regular season standings to find 1st and 2nd of each group
export function calculateGroupStandings(teams: TeamStats[]): GroupStanding[] {
    const groups: Record<string, TeamStats[]> = {};
    teams.forEach(t => {
        const gName = t.groupName || "Unknown";
        if (!groups[gName]) groups[gName] = [];
        groups[gName].push(t);
    });

    const standings: GroupStanding[] = [];
    Object.keys(groups).sort().forEach(gName => {
        const sorted = groups[gName].sort((a, b) => b.points - a.points); // Simply points for now
        standings.push({
            groupName: gName,
            first: sorted[0] || null,
            second: sorted[1] || null,
            teams: sorted
        });
    });
    return standings;
}

// Generate Quarter Final Groups (A-H)
export function generateQuarterGroups(standings: GroupStanding[], fixture: Match[]): PlayoffGroup[] {
    const allTeams = standings.flatMap(s => [s.first, s.second].filter(Boolean)) as TeamStats[];
    // Calculate Elo for seeding
    const eloMap = calculateElo(allTeams, fixture);
    const ratings = Object.fromEntries(eloMap);


    const playoffGroupDefs = [
        { name: "A", teamDefs: [{ group: 1, position: 1 }, { group: 16, position: 1 }, { group: 8, position: 2 }, { group: 9, position: 2 }] },
        { name: "B", teamDefs: [{ group: 2, position: 1 }, { group: 15, position: 1 }, { group: 7, position: 2 }, { group: 10, position: 2 }] },
        { name: "C", teamDefs: [{ group: 3, position: 1 }, { group: 14, position: 1 }, { group: 6, position: 2 }, { group: 11, position: 2 }] },
        { name: "D", teamDefs: [{ group: 4, position: 1 }, { group: 13, position: 1 }, { group: 5, position: 2 }, { group: 12, position: 2 }] },
        { name: "E", teamDefs: [{ group: 5, position: 1 }, { group: 12, position: 1 }, { group: 4, position: 2 }, { group: 13, position: 2 }] },
        { name: "F", teamDefs: [{ group: 6, position: 1 }, { group: 11, position: 1 }, { group: 3, position: 2 }, { group: 14, position: 2 }] },
        { name: "G", teamDefs: [{ group: 7, position: 1 }, { group: 10, position: 1 }, { group: 2, position: 2 }, { group: 15, position: 2 }] },
        { name: "H", teamDefs: [{ group: 8, position: 1 }, { group: 9, position: 1 }, { group: 1, position: 2 }, { group: 16, position: 2 }] },
    ];

    const getTeam = (def: { group: number; position: number }): PlayoffTeam | null => {
        const grp = standings.find(s => parseInt(s.groupName.match(/\d+/)?.[0] || "0") === def.group);
        const team = def.position === 1 ? grp?.first : grp?.second;
        if (!team) return null;
        return {
            ...team,
            elo: ratings[team.name] || 1200,
            sourceGroup: `${def.group}. GR`,
            position: `${def.position}.`
        };
    };

    return playoffGroupDefs.map(pg => {
        const teams = pg.teamDefs.map(getTeam).filter(Boolean) as PlayoffTeam[];
        // Assign initial seeds based on the definition order (assuming definitions are ordered 1-4seeds)
        // Actually, teamDefs is just an array. We need to set initialSeed 0..3
        teams.forEach((t, i) => { if (t) t.initialSeed = i; });
        return { groupName: pg.name, teams };
    });
}

// Generate Semi Final Groups (A-D)
export function generateSemiGroups(quarterGroups: PlayoffGroup[]): PlayoffGroup[] {
    const semiDefs = [
        { name: "A", sources: [{ grp: "A", pos: 1 }, { grp: "E", pos: 1 }, { grp: "D", pos: 2 }, { grp: "H", pos: 2 }] },
        { name: "B", sources: [{ grp: "B", pos: 1 }, { grp: "F", pos: 1 }, { grp: "C", pos: 2 }, { grp: "G", pos: 2 }] },
        { name: "C", sources: [{ grp: "C", pos: 1 }, { grp: "G", pos: 1 }, { grp: "B", pos: 2 }, { grp: "F", pos: 2 }] },
        { name: "D", sources: [{ grp: "D", pos: 1 }, { grp: "H", pos: 1 }, { grp: "A", pos: 2 }, { grp: "E", pos: 2 }] },
    ];

    const getTeam = (grpName: string, position: number): PlayoffTeam | null => {
        const qGroup = quarterGroups.find(g => g.groupName === grpName);
        if (!qGroup) return null;
        // IMPORTANT: The caller is responsible for ensuring quarterGroups are sorted by standings!
        const team = qGroup.teams[position - 1];
        if (!team) return null;
        return { ...team, sourceGroup: `Ã‡F ${grpName}`, position: `${position}.` };
    };

    return semiDefs.map(sd => {
        const teams = sd.sources.map(s => getTeam(s.grp, s.pos)).filter(Boolean) as PlayoffTeam[];
        // Sort removed: Respect definition order for fixture generation
        return { groupName: sd.name, teams };
    });
}

// Generate Final Groups (1-2)
export function generateFinalGroups(semiGroups: PlayoffGroup[]): PlayoffGroup[] {
    const finalDefs = [
        { name: "1", sources: [{ grp: "A", pos: 1 }, { grp: "C", pos: 1 }, { grp: "B", pos: 2 }, { grp: "D", pos: 2 }] },
        { name: "2", sources: [{ grp: "B", pos: 1 }, { grp: "D", pos: 1 }, { grp: "A", pos: 2 }, { grp: "C", pos: 2 }] },
    ];

    const getTeam = (grpName: string, position: number): PlayoffTeam | null => {
        const sGroup = semiGroups.find(g => g.groupName === grpName);
        if (!sGroup) return null;
        const team = sGroup.teams[position - 1];
        if (!team) return null;
        return { ...team, sourceGroup: `YF ${grpName}`, position: `${position}.` };
    };

    return finalDefs.map(fd => {
        const teams = fd.sources.map(s => getTeam(s.grp, s.pos)).filter(Boolean) as PlayoffTeam[];
        // Sort removed: Respect definition order for fixture generation
        return { groupName: fd.name, teams };
    });
}

// ----------------------------------------------------------------------
// 1. LIG SPECIAL LOGIC
// ----------------------------------------------------------------------

// 1. Lig Semi-Finals (I. Group, II. Group)
// I. GRUP: A1, B4, A3, B2
// II. GRUP: B1, A4, B3, A2
export function generate1LigSemiGroups(standings: GroupStanding[]): PlayoffGroup[] {
    const getTeam = (groupName: string, pos: number): PlayoffTeam | null => {
        const grp = standings.find(s => s.groupName === groupName);
        if (!grp || !grp.teams || !grp.teams[pos - 1]) return null;
        const team = grp.teams[pos - 1];
        return { ...team, elo: 1200 + team.points, sourceGroup: `${groupName.charAt(0)}.${pos}`, position: `${pos}.` };
    };

    const semiDefs = [
        { name: "I", sources: [{ grp: "A. Grup", pos: 1 }, { grp: "B. Grup", pos: 4 }, { grp: "A. Grup", pos: 3 }, { grp: "B. Grup", pos: 2 }] },
        { name: "II", sources: [{ grp: "B. Grup", pos: 1 }, { grp: "A. Grup", pos: 4 }, { grp: "B. Grup", pos: 3 }, { grp: "A. Grup", pos: 2 }] },
    ];

    return semiDefs.map(sd => {
        const teams = sd.sources.map(s => getTeam(s.grp, s.pos)).filter(Boolean) as PlayoffTeam[];
        return { groupName: sd.name, teams };
    });
}

// 1. Lig Final (One Group of 4)
// Sources: I. Group 1st, I. Group 2nd, II. Group 1st, II. Group 2nd
export function generate1LigFinalGroups(semiGroups: PlayoffGroup[]): PlayoffGroup[] {
    const getTeam = (grpName: string, position: number): PlayoffTeam | null => {
        const sGroup = semiGroups.find(g => g.groupName === grpName);
        if (!sGroup || !sGroup.teams[position - 1]) return null;
        const team = sGroup.teams[position - 1];
        return { ...team, sourceGroup: `${grpName}. Grup`, position: `${position}.` };
    };

    const finalSources = [
        { grp: "I", pos: 1 },
        { grp: "I", pos: 2 },
        { grp: "II", pos: 1 },
        { grp: "II", pos: 2 }
    ];

    const teams = finalSources.map(s => getTeam(s.grp, s.pos)).filter(Boolean) as PlayoffTeam[];
    return [{ groupName: "Final", teams }];
}

export function generateGroupFixture(groups: PlayoffGroup[], stage: 'quarter' | 'semi' | 'final'): PlayoffMatch[] {
    const matches: PlayoffMatch[] = [];

    groups.forEach(group => {
        // Use initialSeed if available to find the "original" 1st, 2nd, 3rd, 4th team of the group
        // If not available (old data?), fall back to current index, but that's risky if sorted.
        // We will sort by initialSeed to be safe.
        const sorted = [...group.teams].sort((a, b) => (a.initialSeed ?? 0) - (b.initialSeed ?? 0));

        // Ensure we have 4 teams for standard fixture
        // If < 4, we might skip matches. 
        if (sorted.length !== 4) return;

        const [t1, t2, t3, t4] = sorted;

        // Custom seeding/pairing logic 1-4, 2-3
        // Day 1
        matches.push({ id: `${stage}-${group.groupName}-${t1.name}-${t4.name}`, homeTeam: t1.name, awayTeam: t4.name, date: 'Gï¿½n 1', stage });
        matches.push({ id: `${stage}-${group.groupName}-${t2.name}-${t3.name}`, homeTeam: t2.name, awayTeam: t3.name, date: 'Gï¿½n 1', stage });
        // Day 2
        matches.push({ id: `${stage}-${group.groupName}-${t4.name}-${t2.name}`, homeTeam: t4.name, awayTeam: t2.name, date: 'Gï¿½n 2', stage });
        matches.push({ id: `${stage}-${group.groupName}-${t3.name}-${t1.name}`, homeTeam: t3.name, awayTeam: t1.name, date: 'Gï¿½n 2', stage });
        // Day 3
        matches.push({ id: `${stage}-${group.groupName}-${t3.name}-${t4.name}`, homeTeam: t3.name, awayTeam: t4.name, date: 'Gï¿½n 3', stage });
        matches.push({ id: `${stage}-${group.groupName}-${t1.name}-${t2.name}`, homeTeam: t1.name, awayTeam: t2.name, date: 'Gï¿½n 3', stage });
    });

    return matches;
}

// Apply Overrides and Calculate Standings for Playoff Groups
export function applyOverridesToGroups(
    groups: PlayoffGroup[],
    overrides: Record<string, string>,
    stage: string
): PlayoffGroup[] {
    // Generate authoritative fixture to validate overrides
    const validMatches = generateGroupFixture(groups, stage as 'quarter' | 'semi' | 'final');
    const validMatchIds = new Set(validMatches.map(m => m.id));

    return groups.map(group => {
        const teamPoints: Record<string, { wins: number; lost: number; points: number; setsWon: number; setsLost: number; played: number }> = {};

        group.teams.forEach(t => {
            teamPoints[normalizeTeamName(t.name)] = { wins: 0, lost: 0, points: 0, setsWon: 0, setsLost: 0, played: 0 };
        });

        // Loop through all overrides to find matches for this group
        Object.entries(overrides).forEach(([matchId, score]) => {
            // Strict Validation: Ignore any override not in the current valid fixture
            if (!validMatchIds.has(matchId)) return;

            if (!matchId.startsWith(`${stage}-${group.groupName}-`)) return;

            const parts = matchId.split('-');
            const homeTeam = parts[2];
            const awayTeam = parts[3];

            // Normalize names for lookup
            const hKey = normalizeTeamName(homeTeam);
            const aKey = normalizeTeamName(awayTeam);

            if (!teamPoints[hKey] || !teamPoints[aKey]) return;

            const [hSets, aSets] = score.split('-').map(Number);
            const homeWin = hSets > aSets;

            teamPoints[hKey].setsWon += hSets;
            teamPoints[hKey].setsLost += aSets;
            teamPoints[hKey].played += 1;

            teamPoints[aKey].setsWon += aSets;
            teamPoints[aKey].setsLost += hSets;
            teamPoints[aKey].played += 1;

            if (homeWin) {
                teamPoints[hKey].wins++;
                teamPoints[aKey].lost++;
                teamPoints[hKey].points += hSets === 3 && aSets <= 1 ? 3 : 2;
                if (aSets === 2) teamPoints[aKey].points += 1;
            } else {
                teamPoints[aKey].wins++;
                teamPoints[hKey].lost++;
                teamPoints[aKey].points += aSets === 3 && hSets <= 1 ? 3 : 2;
                if (hSets === 2) teamPoints[hKey].points += 1;
            }
        });

        // Update team stats from calculated points
        const updatedTeams = group.teams.map(t => {
            const tKey = normalizeTeamName(t.name);
            return {
                ...t,
                scenarioWins: teamPoints[tKey]?.wins || 0,
                scenarioLosses: teamPoints[tKey]?.lost || 0,
                scenarioPlayed: teamPoints[tKey]?.played || 0,
                scenarioPoints: teamPoints[tKey]?.points || 0,
                scenarioSetsWon: teamPoints[tKey]?.setsWon || 0,
                scenarioSetsLost: teamPoints[tKey]?.setsLost || 0,
            };
        });

        updatedTeams.sort((a, b) => {
            // 1. Total Wins (Galibiyet Sayï¿½sï¿½)
            if ((b.scenarioWins || 0) !== (a.scenarioWins || 0)) return (b.scenarioWins || 0) - (a.scenarioWins || 0);

            // 2. Total Points (Puan)
            if ((b.scenarioPoints || 0) !== (a.scenarioPoints || 0)) return (b.scenarioPoints || 0) - (a.scenarioPoints || 0);

            // 3. Set Ratio (Set Averajï¿½)
            // Calculate ratios - handle 0 division safely
            const getRatio = (won: number, lost: number) => {
                if (lost === 0 && won === 0) return 0; // No games played -> 0 ratio
                if (lost === 0) return 10000; // Infinite ratio (played but never lost set)
                return won / lost;
            };

            const ratioA = getRatio(a.scenarioSetsWon || 0, a.scenarioSetsLost || 0);
            const ratioB = getRatio(b.scenarioSetsWon || 0, b.scenarioSetsLost || 0);

            if (Math.abs(ratioB - ratioA) > 0.0001) return ratioB - ratioA;

            // Fallback to Elo if everything else is tied (Initial state or perfect tie)
            return (b.elo || 0) - (a.elo || 0);
        });

        return { ...group, teams: updatedTeams };
    });
}
// Apply Overrides and Calculate Standings for a linear list of Teams (e.g. Regular Season Group)
export function applyOverridesToTeams(
    teams: TeamStats[],
    overrides: MatchOverride[]
): TeamStats[] {
    // If overrides is empty, return teams as is
    if (!overrides || !Array.isArray(overrides) || overrides.length === 0) {
        return teams;
    }

    const teamPoints: Record<string, { wins: number; lost: number; points: number; setsWon: number; setsLost: number; played: number }> = {};

    // Initialize with existing stats
    teams.forEach(t => {
        teamPoints[t.name] = {
            wins: t.wins,
            lost: t.played - t.wins,
            points: t.points,
            setsWon: t.setsWon,
            setsLost: t.setsLost,
            played: t.played
        };
    });

    // Apply Overrides
    // Expecting overrides to be an array of objects like { home: string, away: string, homeScore: number, awayScore: number }
    // Or simpler if coming from localStorage

    // Assuming the user wants to add 'extra' matches or simulate unplayed matches.
    // However, the `scenarios` from `localStorage` in `GroupPage` are stored as a list of modified Match objects.

    overrides.forEach((match: MatchOverride) => {
        // We only care if the match has a score
        if (!match.homeScore && match.homeScore !== 0) return;

        const homeTeam = match.homeTeam;
        const awayTeam = match.awayTeam;
        const hSets = Number(match.homeScore);
        const aSets = Number(match.awayScore);

        if (!teamPoints[homeTeam] || !teamPoints[awayTeam]) return;

        // Check if this match was already "played" in real life?
        // For simplicity in this "Scenario Page", we might be double counting if we are not careful.
        // But the prompt said "Oyundan gelen puan durumu". usually means "Standings derived from the game inputs".
        // Use case: The user enters predictions for *future* matches.
        // So we should strictly ADD these to the current stats.

        const homeWin = hSets > aSets;

        teamPoints[homeTeam].setsWon += hSets;
        teamPoints[homeTeam].setsLost += aSets;
        teamPoints[homeTeam].played += 1;

        teamPoints[awayTeam].setsWon += aSets;
        teamPoints[awayTeam].setsLost += hSets;
        teamPoints[awayTeam].played += 1;

        if (homeWin) {
            teamPoints[homeTeam].wins++;
            teamPoints[awayTeam].lost++;
            teamPoints[homeTeam].points += hSets === 3 && aSets <= 1 ? 3 : 2;
            if (aSets === 2) teamPoints[awayTeam].points += 1;
        } else {
            teamPoints[awayTeam].wins++;
            teamPoints[homeTeam].lost++;
            teamPoints[awayTeam].points += aSets === 3 && hSets <= 1 ? 3 : 2;
            if (hSets === 2) teamPoints[homeTeam].points += 1;
        }
    });

    return teams.map(t => ({
        ...t,
        wins: teamPoints[t.name]?.wins || t.wins,
        // losses isn't on TeamStats directly, logic handles it via played - wins
        points: teamPoints[t.name]?.points || t.points,
        setsWon: teamPoints[t.name]?.setsWon || t.setsWon,
        setsLost: teamPoints[t.name]?.setsLost || t.setsLost,
        played: teamPoints[t.name]?.played || t.played,
    }));
}

```

## File: app\utils\rateLimit.ts
```
import { NextRequest, NextResponse } from 'next/server';

interface RateLimitConfig {
    requests: number;
    windowMs: number; // in milliseconds
}

const rateLimits = new Map<string, { count: number; resetTime: number }>();

/**
 * Simple in-memory rate limiter
 * For production, use external service like Upstash Redis
 */
export function createRateLimiter(config: RateLimitConfig) {
    return function rateLimit(req: NextRequest): NextResponse | null {
        const identifier = req.headers.get('x-forwarded-for') || req.headers.get('x-real-ip') || 'anonymous';
        const key = `${identifier}:${req.nextUrl.pathname}`;
        const now = Date.now();

        const limit = rateLimits.get(key);

        if (!limit || now > limit.resetTime) {
            // New window or expired
            rateLimits.set(key, {
                count: 1,
                resetTime: now + config.windowMs
            });
            return null; // Allow
        }

        if (limit.count >= config.requests) {
            return NextResponse.json(
                { error: 'Ã‡ok fazla istek. LÃ¼tfen daha sonra tekrar deneyin.' },
                {
                    status: 429,
                    headers: {
                        'Retry-After': String(Math.ceil((limit.resetTime - now) / 1000))
                    }
                }
            );
        }

        limit.count++;
        return null; // Allow
    };
}

/**
 * API route rate limiting middleware
 * Usage in API routes:
 * 
 * const rateLimiter = createRateLimiter({ requests: 10, windowMs: 60000 });
 * 
 * export async function POST(req) {
 *     const limitResponse = rateLimiter(req);
 *     if (limitResponse) return limitResponse;
 *     
 *     // ... rest of handler
 * }
 */

// Auto-cleanup interval reference
let cleanupInterval: NodeJS.Timeout | null = null;

/**
 * Cleanup old entries periodically
 * Automatically starts on first rateLimiter use
 */
export function startRateLimitCleanup(intervalMs = 60000) {
    // Prevent multiple intervals
    if (cleanupInterval) return;

    cleanupInterval = setInterval(() => {
        const now = Date.now();
        for (const [key, limit] of rateLimits.entries()) {
            if (now > limit.resetTime) {
                rateLimits.delete(key);
            }
        }
    }, intervalMs);

    // Don't block Node.js from exiting
    if (cleanupInterval.unref) {
        cleanupInterval.unref();
    }
}

// Auto-start cleanup when module is loaded
// Auto-start cleanup when module is loaded
if (typeof window === 'undefined') {
    startRateLimitCleanup();
}

// Export a direct check function for use in middleware
export async function checkRateLimit(identifier: string, limit: number, windowMs: number): Promise<{ success: boolean; retryAfter?: number }> {
    const key = `${identifier}`;
    const now = Date.now();
    const entry = rateLimits.get(key);

    if (!entry || now > entry.resetTime) {
        rateLimits.set(key, {
            count: 1,
            resetTime: now + windowMs
        });
        return { success: true };
    }

    if (entry.count >= limit) {
        return {
            success: false,
            retryAfter: Math.ceil((entry.resetTime - now) / 1000)
        };
    }

    entry.count++;
    return { success: true };
}


```

## File: app\utils\scenarioUtils.ts
```
import { TeamStats } from "../types";

export interface TeamDiff {
    name: string;
    rankDiff: number;   // e.g. +2 (rose 2 spots), -1 (fell 1 spot)
    pointDiff: number;  // e.g. +3 points
    winDiff: number;
}

export function compareStandings(baseStandings: TeamStats[], targetStandings: TeamStats[]): TeamDiff[] {
    const baseMap = new Map<string, { rank: number, stats: TeamStats }>();
    baseStandings.forEach((t, i) => baseMap.set(t.name, { rank: i + 1, stats: t }));

    const diffs: TeamDiff[] = [];

    targetStandings.forEach((t, i) => {
        const currentRank = i + 1;
        const base = baseMap.get(t.name);

        if (base) {
            // Rank Diff: oldRank - newRank. 
            // If old was 5 and new is 3, diff is 5-3 = 2 (Positive means improvement)
            const rankDiff = base.rank - currentRank;
            const pointDiff = t.points - base.stats.points;
            const winDiff = t.wins - base.stats.wins;

            diffs.push({
                name: t.name,
                rankDiff,
                pointDiff,
                winDiff
            });
        }
    });

    return diffs;
}

```

## File: app\utils\serverData.ts
```
import fs from 'fs';
import path from 'path';
import { TeamStats, Match } from '../types';
import { createServiceRoleClient } from './supabase-server';
import { getOutcomeFromScore, sortStandings } from './calculatorUtils';

export interface LeagueData {
    teams: TeamStats[];
    fixture: Match[];
}

export async function getLeagueData(league: string): Promise<LeagueData> {
    try {
        const filePath = path.join(process.cwd(), 'data', `${league}-data.json`);
        if (!fs.existsSync(filePath)) {
            console.error(`Data file not found: ${filePath}`);
            return { teams: [], fixture: [] };
        }

        const content = fs.readFileSync(filePath, 'utf8');
        const data = JSON.parse(content);

        // Filter out withdrawn teams (ligden Ã§ekilen takÄ±mlar)
        // Filter out withdrawn teams (ligden Ã§ekilen takÄ±mlar)
        if (league === '1lig') {
            const withdrawnTeams = ['Edremit Bld. AltÄ±noluk', 'Ä°zmirspor'];
            if (data.teams) {
                data.teams = data.teams.filter((t: TeamStats) => !withdrawnTeams.includes(t.name));
            }
            const filterMatches = (matches: Match[]) => matches.filter((m: Match) =>
                !withdrawnTeams.includes(m.homeTeam) && !withdrawnTeams.includes(m.awayTeam)
            );
            if (data.fixture) data.fixture = filterMatches(data.fixture);
            if (data.matches) data.matches = filterMatches(data.matches);
        }

        // Rename CEV CL teams
        if (league === 'cev-cl') {
            const teamNameMapping: Record<string, string> = {
                'VakifBank ISTANBUL': 'VAKIFBANK',
                'FenerbahÃ§e Medicana ISTANBUL': 'FENERBAHÃ‡E MEDICANA',
                'Eczacibasi ISTANBUL': 'ECZACIBAÅI DYNAVÄ°T',
                'ANKARA Zeren Spor KulÃ¼bÃ¼': 'ZEREN SPOR'
            };

            const renameTeam = (name: string) => teamNameMapping[name] || name;

            if (data.teams) {
                data.teams = data.teams.map((t: TeamStats) => ({
                    ...t,
                    name: renameTeam(t.name)
                }));
            }

            const renameMatches = (matches: Match[]) => matches.map((m: Match) => ({
                ...m,
                homeTeam: renameTeam(m.homeTeam),
                awayTeam: renameTeam(m.awayTeam)
            }));

            if (data.fixture) data.fixture = renameMatches(data.fixture);
            if (data.matches) data.matches = renameMatches(data.matches);
        }

        // Normalize fixture data
        let fixture = (data.fixture || data.matches || []).map((m: Match & { date?: string }) => ({
            ...m,
            matchDate: m.matchDate || m.date
        }));

        // 2. Fetch database overrides (Admin verified results)
        try {
            const supabase = createServiceRoleClient();

            // Map league names to match how they are stored in DB (Sultanlar Ligi vs vsl)
            const leagueDbMap: Record<string, string> = {
                'vsl': 'Sultanlar Ligi',
                '1lig': '1. Lig',
                '2lig': '2. Lig',
                'cev-cl': 'Åampiyonlar Ligi'
            };

            const dbLeagueName = leagueDbMap[league] || league;

            const { data: dbResults } = await supabase
                .from('match_results')
                .select('*')
                .eq('league', dbLeagueName)
                .eq('is_verified', true);

            if (dbResults && dbResults.length > 0) {
                // console.log(`[getLeagueData] Found ${dbResults.length} database overrides for ${league}`);

                // Create a map for easy lookup
                const overridesMap = new Map();
                // We use homeTeam-awayTeam or other consistent key
                dbResults.forEach(res => {
                    const key = `${res.home_team}-${res.away_team}`;
                    overridesMap.set(key, res.result_score);
                });

                // Apply overrides to fixture
                let statsChanged = false;
                fixture = fixture.map((m: Match) => {
                    const key = `${m.homeTeam}-${m.awayTeam}`;
                    if (overridesMap.has(key)) {
                        const newScore = overridesMap.get(key);
                        if (m.resultScore !== newScore) {
                            statsChanged = true;
                            return {
                                ...m,
                                isPlayed: true,
                                resultScore: newScore
                            };
                        }
                    }
                    return m;
                });

                // 3. Recalculate standings if overrides applied
                if (statsChanged) {
                    // Start from scratch for correctness
                    const newTeams: Record<string, TeamStats> = {};
                    (data.teams || []).forEach((t: TeamStats) => {
                        newTeams[t.name] = { ...t, played: 0, wins: 0, points: 0, setsWon: 0, setsLost: 0 };
                    });

                    fixture.forEach((m: Match) => {
                        if (m.isPlayed && m.resultScore) {
                            const outcome = getOutcomeFromScore(m.resultScore);
                            if (outcome && newTeams[m.homeTeam] && newTeams[m.awayTeam]) {
                                const h = newTeams[m.homeTeam];
                                const a = newTeams[m.awayTeam];

                                h.played++;
                                h.points += outcome.homePoints;
                                h.setsWon += outcome.homeSets;
                                h.setsLost += outcome.awaySets;
                                if (outcome.homeWin) h.wins++;

                                a.played++;
                                a.points += outcome.awayPoints;
                                a.setsWon += outcome.awaySets;
                                a.setsLost += outcome.homeSets;
                                if (!outcome.homeWin) a.wins++;
                            }
                        }
                    });

                    // Update teams and sort (preserve group structure if possible, though calculateStandings might need to know groups)
                    // For now, let's just return the recalculated list sorted
                    const finalTeams = sortStandings(Object.values(newTeams));
                    return { teams: finalTeams, fixture };
                }
            }
        } catch (dbError) {
            console.error(`[getLeagueData] Database override fetch failed for ${league}:`, dbError);
            // Fallback to JSON only
        }

        // console.log(`[getLeagueData] Returning ${data.teams?.length} teams for ${league} (Fallback/Normal)`);
        return {
            teams: data.teams || [],
            fixture: fixture
        };
    } catch (error) {
        console.error(`Error reading ${league} data:`, error);
        return { teams: [], fixture: [] };
    }
}

```

## File: app\utils\sounds.ts
```
// Sound effect utilities for gamification
"use client";

// Sound file paths
const SOUNDS = {
    click: '/sounds/click.mp3',
    scoreSelect: '/sounds/score-select.mp3',
    achievement: '/sounds/achievement.mp3',
    levelUp: '/sounds/levelup.mp3',
    victory: '/sounds/victory.mp3',
} as const;

type SoundName = keyof typeof SOUNDS;

// Audio cache to prevent reloading
const audioCache: Map<SoundName, HTMLAudioElement> = new Map();

// Check if sound is enabled from localStorage
function isSoundEnabled(): boolean {
    if (typeof window === 'undefined') return true;
    try {
        const state = localStorage.getItem('volleySimGameState');
        if (state) {
            const parsed = JSON.parse(state);
            return parsed.soundEnabled !== false;
        }
    } catch {
        return true;
    }
    return true;
}

// Preload all sounds
export function preloadSounds(): void {
    if (typeof window === 'undefined') return;

    Object.entries(SOUNDS).forEach(([name, path]) => {
        const audio = new Audio(path);
        audio.preload = 'auto';
        audio.volume = 0.5;
        audioCache.set(name as SoundName, audio);
    });
}

// Play a sound effect
export function playSound(name: SoundName, volume = 0.5): void {
    if (typeof window === 'undefined') return;
    if (!isSoundEnabled()) return;

    try {
        // Get cached audio or create new
        let audio = audioCache.get(name);

        if (!audio) {
            const path = SOUNDS[name];
            if (!path) return;
            audio = new Audio(path);
            audioCache.set(name, audio);
        }

        // Clone to allow overlapping sounds
        const clone = audio.cloneNode() as HTMLAudioElement;
        clone.volume = volume;
        clone.play().catch(() => {
            // Silently fail if autoplay is blocked
        });
    } catch {
        // Silently fail
    }
}

// Specific sound functions for convenience
export const sounds = {
    click: () => playSound('click', 0.3),
    scoreSelect: () => playSound('scoreSelect', 0.4),
    achievement: () => playSound('achievement', 0.6),
    levelUp: () => playSound('levelUp', 0.7),
    victory: () => playSound('victory', 0.5),
};

```

## File: app\utils\supabase-server.ts
```
import { createServerClient, type CookieOptions } from '@supabase/ssr';
import { createClient } from '@supabase/supabase-js';
import { cookies } from 'next/headers';

export async function createServerSupabaseClient() {
    const cookieStore = await cookies();

    return createServerClient(
        process.env.NEXT_PUBLIC_SUPABASE_URL!,
        process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,
        {
            cookies: {
                get(name: string) {
                    return cookieStore.get(name)?.value;
                },
                set(name: string, value: string, options: CookieOptions) {
                    try {
                        cookieStore.set({ name, value, ...options });
                    } catch (error) {
                        // Handle errors in server components
                    }
                },
                remove(name: string, options: CookieOptions) {
                    try {
                        cookieStore.set({ name, value: '', ...options });
                    } catch (error) {
                        // Handle errors in server components
                    }
                },
            },
        }
    );
}

// Service role client for admin operations (bypasses RLS)
// Service role client for admin operations (bypasses RLS)
export function createServiceRoleClient() {
    const url = process.env.NEXT_PUBLIC_SUPABASE_URL;
    const key = process.env.SUPABASE_SERVICE_ROLE_KEY;

    if (!url || !key) {
        throw new Error('Supabase environment variables (NEXT_PUBLIC_SUPABASE_URL, SUPABASE_SERVICE_ROLE_KEY) are missing.');
    }

    return createClient(url, key, {
        auth: {
            autoRefreshToken: false,
            persistSession: false
        }
    }
    );
}

```

## File: app\utils\supabase.ts
```
import { createBrowserClient } from '@supabase/ssr';
import type { SupabaseClient } from '@supabase/supabase-js';

// Check if Supabase is properly configured
const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;
const supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;

export const isSupabaseConfigured = !!(supabaseUrl && supabaseAnonKey);

let supabaseClient: SupabaseClient | null = null;

export function createClient(): SupabaseClient | null {
    // Only create client in browser environment
    if (typeof window === 'undefined') {
        return null;
    }

    if (!isSupabaseConfigured) {
        return null;
    }

    if (!supabaseClient) {
        supabaseClient = createBrowserClient(supabaseUrl!, supabaseAnonKey!);
    }

    return supabaseClient;
}

```

## File: app\utils\team-themes.ts
```
export interface TeamTheme {
    primary: string;
    secondary: string;
    accent: string;
    logo?: string;
}

export const TEAM_THEMES: Record<string, TeamTheme> = {
    "VakÄ±fBank": {
        primary: "#ffcc00", // Gold
        secondary: "#000000", // Black
        accent: "#ffdd44"
    },
    "EczacÄ±baÅŸÄ± Dynavit": {
        primary: "#ff6600", // Orange
        secondary: "#ffffff",
        accent: "#ff8844"
    },
    "FenerbahÃ§e Medicana": {
        primary: "#003366", // Navy
        secondary: "#ffed00", // Yellow
        accent: "#004488"
    },
    "TÃ¼rk Hava YollarÄ±": {
        primary: "#cc0000", // Red
        secondary: "#ffffff",
        accent: "#ee0000"
    },
    "Galatasaray Daikin": {
        primary: "#800000", // Maroon
        secondary: "#ffcc00", // Gold
        accent: "#a00000"
    },
    "Kuzeyboru": {
        primary: "#000000",
        secondary: "#ffffff",
        accent: "#333333"
    },
    "Zeren Spor": {
        primary: "#004488",
        secondary: "#ffffff",
        accent: "#0066aa"
    },
    "AydÄ±n B.Å.B.": {
        primary: "#003399",
        secondary: "#ffffff",
        accent: "#0055bb"
    },
    "Aras Kargo": {
        primary: "#ee3322",
        secondary: "#ffffff",
        accent: "#ff4433"
    },
    "BeÅŸiktaÅŸ": {
        primary: "#000000",
        secondary: "#ffffff",
        accent: "#333333"
    },
    "NilÃ¼fer Bld.": {
        primary: "#0066ff",
        secondary: "#ffffff",
        accent: "#3388ff"
    },
    "Sigorta Shop": {
        primary: "#ff0066",
        secondary: "#ffffff",
        accent: "#ff3388"
    },
    "SarÄ±yer Bld.": {
        primary: "#22aa44",
        secondary: "#ffffff",
        accent: "#33bb55"
    },
    "BahÃ§elievler Bld.": {
        primary: "#0088cc",
        secondary: "#ffffff",
        accent: "#22aacc"
    }
};

export const DEFAULT_THEME: TeamTheme = {
    primary: "#10b981", // Emerald
    secondary: "#0f172a", // Slate 900
    accent: "#34d399"
};

export function getTeamTheme(teamName: string | null): TeamTheme {
    if (!teamName) return DEFAULT_THEME;
    return TEAM_THEMES[teamName] || DEFAULT_THEME;
}

```

## File: app\utils\teamIds.ts (SKIPPED - TOO LARGE)

## File: app\utils\teamSlug.ts
```
/**
 * Team Slug Utility
 * Generates URL-safe slugs from team names and provides reverse lookup
 */

// Turkish character normalization map
const turkishCharMap: Record<string, string> = {
    'ÅŸ': 's', 'Å': 'S',
    'ÄŸ': 'g', 'Ä': 'G',
    'Ã¼': 'u', 'Ãœ': 'U',
    'Ã¶': 'o', 'Ã–': 'O',
    'Ã§': 'c', 'Ã‡': 'C',
    'Ä±': 'i', 'Ä°': 'I',
};

// Store for reverse lookup (populated as teams are encountered)
const slugToNameMap = new Map<string, string>();

/**
 * Normalize Turkish characters to ASCII equivalents
 */
function normalizeTurkish(str: string): string {
    return str.split('').map(char => turkishCharMap[char] || char).join('');
}

/**
 * Generate a URL-safe slug from a team name
 * Example: "FenerbahÃ§e Medicana" -> "fenerbahce-medicana"
 */
export function generateTeamSlug(teamName: string): string {
    const normalized = normalizeTurkish(teamName);
    const slug = normalized
        .toLowerCase()
        .trim()
        .replace(/[^a-z0-9\s-]/g, '') // Remove special characters except spaces and hyphens
        .replace(/\s+/g, '-')          // Replace spaces with hyphens
        .replace(/-+/g, '-')           // Remove consecutive hyphens
        .replace(/^-|-$/g, '');        // Remove leading/trailing hyphens

    // Store for reverse lookup
    slugToNameMap.set(slug, teamName);

    return slug;
}

/**
 * Get the original team name from a slug
 * Returns null if the slug hasn't been registered
 */
export function getTeamNameFromSlug(slug: string): string | null {
    return slugToNameMap.get(slug) || null;
}

/**
 * Register a team name for reverse lookup without generating a new slug
 * Useful for pre-populating the map with known teams
 */
export function registerTeamSlug(teamName: string): void {
    generateTeamSlug(teamName);
}

/**
 * Check if a slug is registered
 */
export function isSlugRegistered(slug: string): boolean {
    return slugToNameMap.has(slug);
}

```

## File: app\utils\useFetch.ts
```
"use client";

import { useCallback, useState } from "react";

interface FetchOptions extends RequestInit {
    retries?: number;
    retryDelay?: number;
}

interface UseFetchReturn<T> {
    data: T | null;
    error: string | null;
    loading: boolean;
    execute: (url: string, options?: FetchOptions) => Promise<T | null>;
    retry: () => Promise<T | null>;
}

/**
 * Custom hook for data fetching with automatic retry and error handling.
 * 
 * @example
 * const { data, error, loading, execute, retry } = useFetch<TeamStats[]>();
 * 
 * useEffect(() => {
 *   execute('/api/scrape');
 * }, []);
 */
export function useFetch<T>(): UseFetchReturn<T> {
    const [data, setData] = useState<T | null>(null);
    const [error, setError] = useState<string | null>(null);
    const [loading, setLoading] = useState(false);
    const [lastRequest, setLastRequest] = useState<{ url: string; options?: FetchOptions } | null>(null);

    const execute = useCallback(async (url: string, options?: FetchOptions): Promise<T | null> => {
        const { retries = 3, retryDelay = 1000, ...fetchOptions } = options || {};

        setLoading(true);
        setError(null);
        setLastRequest({ url, options });

        let lastError: Error | null = null;

        const apiUrl = process.env.NEXT_PUBLIC_API_URL;
        const fullUrl = (apiUrl && url.startsWith('/api'))
            ? url.replace('/api', apiUrl)
            : url;

        for (let attempt = 0; attempt <= retries; attempt++) {
            try {
                const response = await fetch(fullUrl, fetchOptions);

                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }

                const result = await response.json();
                setData(result);
                setLoading(false);
                return result;
            } catch (err) {
                lastError = err instanceof Error ? err : new Error(String(err));

                if (attempt < retries) {
                    // Wait before retrying
                    await new Promise(resolve => setTimeout(resolve, retryDelay * (attempt + 1)));
                }
            }
        }

        // All retries failed
        const errorMessage = lastError?.message || "Bilinmeyen hata";
        setError(errorMessage);
        setLoading(false);
        return null;
    }, []);

    const retry = useCallback(async (): Promise<T | null> => {
        if (!lastRequest) return null;
        return execute(lastRequest.url, lastRequest.options);
    }, [lastRequest, execute]);

    return { data, error, loading, execute, retry };
}

/**
 * Simple fetch wrapper with retry logic.
 * For use outside of React components.
 */
export async function fetchWithRetry<T>(
    url: string,
    options?: FetchOptions
): Promise<{ data: T | null; error: string | null }> {
    const { retries = 3, retryDelay = 1000, ...fetchOptions } = options || {};

    let lastError: Error | null = null;

    const apiUrl = process.env.NEXT_PUBLIC_API_URL;
    const fullUrl = (apiUrl && url.startsWith('/api'))
        ? url.replace('/api', apiUrl)
        : url;

    for (let attempt = 0; attempt <= retries; attempt++) {
        try {
            const response = await fetch(fullUrl, fetchOptions);

            if (!response.ok) {
                throw new Error(`HTTP ${response.status}: ${response.statusText}`);
            }

            const data = await response.json();
            return { data, error: null };
        } catch (err) {
            lastError = err instanceof Error ? err : new Error(String(err));

            if (attempt < retries) {
                await new Promise(resolve => setTimeout(resolve, retryDelay * (attempt + 1)));
            }
        }
    }

    return { data: null, error: lastError?.message || "Bilinmeyen hata" };
}

```

# Project Application Context - Part 16

## File: app\utils\validation.ts
```
/**
 * Validation utilities using simple schema-based validation
 * Lightweight alternative to Zod for basic validation needs
 */

// ============================================
// VALIDATION RESULT TYPES
// ============================================

export interface ValidationResult<T> {
    success: boolean;
    data?: T;
    errors?: string[];
}

// ============================================
// BASIC VALIDATORS
// ============================================

export const validators = {
    // String validators
    string: {
        required: (value: unknown, message = 'Bu alan zorunludur'): string | null => {
            if (typeof value !== 'string' || value.trim() === '') return message;
            return null;
        },
        minLength: (min: number) => (value: string, message = `En az ${min} karakter olmalÄ±`): string | null => {
            if (value.length < min) return message;
            return null;
        },
        maxLength: (max: number) => (value: string, message = `En fazla ${max} karakter olmalÄ±`): string | null => {
            if (value.length > max) return message;
            return null;
        },
        email: (value: string, message = 'GeÃ§erli bir e-posta adresi girin'): string | null => {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(value)) return message;
            return null;
        },
        pattern: (regex: RegExp, message: string) => (value: string): string | null => {
            if (!regex.test(value)) return message;
            return null;
        }
    },

    // Number validators
    number: {
        required: (value: unknown, message = 'Bu alan zorunludur'): string | null => {
            if (typeof value !== 'number' || isNaN(value)) return message;
            return null;
        },
        min: (min: number) => (value: number, message = `DeÄŸer en az ${min} olmalÄ±`): string | null => {
            if (value < min) return message;
            return null;
        },
        max: (max: number) => (value: number, message = `DeÄŸer en fazla ${max} olmalÄ±`): string | null => {
            if (value > max) return message;
            return null;
        },
        integer: (value: number, message = 'Tam sayÄ± olmalÄ±'): string | null => {
            if (!Number.isInteger(value)) return message;
            return null;
        }
    },

    // Score validators (volleyball specific)
    score: {
        valid: (value: string, message = 'GeÃ§erli bir skor girin (Ã¶rn: 3-0, 3-1, 3-2, 2-3, 1-3, 0-3)'): string | null => {
            const validScores = ['3-0', '3-1', '3-2', '2-3', '1-3', '0-3'];
            if (!validScores.includes(value)) return message;
            return null;
        }
    }
};

// ============================================
// SCHEMA-BASED VALIDATION
// ============================================

type ValidatorFn = (value: unknown, message?: string) => string | null;

interface FieldSchema {
    validators: ValidatorFn[];
}

interface Schema {
    [field: string]: FieldSchema;
}

export function validate<T extends Record<string, unknown>>(
    data: T,
    schema: Schema
): ValidationResult<T> {
    const errors: string[] = [];

    for (const [field, fieldSchema] of Object.entries(schema)) {
        const value = data[field];

        for (const validator of fieldSchema.validators) {
            const error = validator(value);
            if (error) {
                errors.push(`${field}: ${error}`);
                break; // Stop on first error for this field
            }
        }
    }

    if (errors.length > 0) {
        return { success: false, errors };
    }

    return { success: true, data };
}

// ============================================
// COMMON SCHEMAS
// ============================================

export const schemas = {
    prediction: {
        score: {
            validators: [
                validators.string.required,
                validators.score.valid
            ]
        }
    },

    user: {
        email: {
            validators: [
                validators.string.required,
                validators.string.email
            ]
        },
        password: {
            validators: [
                validators.string.required,
                validators.string.minLength(6)
            ]
        },
        name: {
            validators: [
                validators.string.required,
                validators.string.minLength(2),
                validators.string.maxLength(50)
            ]
        }
    }
};

// ============================================
// SANITIZATION
// ============================================

export const sanitize = {
    // Remove HTML tags
    stripHtml: (input: string): string => {
        return input.replace(/<[^>]*>/g, '');
    },

    // Escape special characters
    escapeHtml: (input: string): string => {
        const escapeMap: Record<string, string> = {
            '&': '&amp;',
            '<': '&lt;',
            '>': '&gt;',
            '"': '&quot;',
            "'": '&#39;'
        };
        return input.replace(/[&<>"']/g, char => escapeMap[char]);
    },

    // Trim and normalize whitespace
    normalizeWhitespace: (input: string): string => {
        return input.trim().replace(/\s+/g, ' ');
    },

    // Remove non-alphanumeric characters
    alphanumericOnly: (input: string): string => {
        return input.replace(/[^a-zA-Z0-9\s]/g, '');
    },

    // Sanitize for safe display
    forDisplay: (input: string): string => {
        return sanitize.escapeHtml(sanitize.normalizeWhitespace(input));
    }
};

export default { validators, validate, schemas, sanitize };

```

## File: app\vsl\gunceldurum\page.tsx
```
import { Metadata } from "next";
import { getLeagueData } from "../../utils/serverData";
import VSLDetailedClient from "./VSLDetailedClient";

export const metadata: Metadata = {
    title: "Sultanlar Ligi GÃ¼ncel Durum",
    description: "Vodafone Sultanlar Ligi puan durumu, fikstÃ¼r ve maÃ§ sonuÃ§larÄ±. 2025-2026 sezonu gÃ¼ncel sÄ±ralama tablosu.",
    openGraph: {
        title: "Sultanlar Ligi GÃ¼ncel Durum | VolleySimulator",
        description: "Sultanlar Ligi puan durumu ve fikstÃ¼r bilgileri.",
    },
};

export default async function VSLDetailedPage() {
    const { teams, fixture } = await getLeagueData("vsl");

    return (
        <VSLDetailedClient
            initialTeams={teams}
            initialMatches={fixture}
        />
    );
}

```

## File: app\vsl\gunceldurum\VSLDetailedClient.tsx
```
"use client";

import { useMemo } from "react";
import { TeamStats, Match } from "../../types";

import StandingsTable from "../../components/Calculator/StandingsTable";
import { sortStandings } from "../../utils/calculatorUtils";
import TeamAvatar from "@/app/components/TeamAvatar";
import LeagueActionBar from "../../components/LeagueTemplate/LeagueActionBar";
import { LEAGUE_CONFIGS } from "../../components/LeagueTemplate/types";

interface VSLDetailedClientProps {
    initialTeams: TeamStats[];
    initialMatches: Match[];
}

export default function VSLDetailedClient({ initialTeams, initialMatches }: VSLDetailedClientProps) {
    const groupName = "Vodafone Sultanlar Ligi";

    const teams = useMemo(() => sortStandings(initialTeams), [initialTeams]);
    const matches = useMemo(() => initialMatches.map((m: Match & { date?: string }) => ({
        ...m,
        matchDate: m.date || m.matchDate
    })), [initialMatches]);

    const playedCount = matches.filter(m => m.isPlayed).length;
    const totalCount = matches.length;
    const completionRate = totalCount > 0 ? Math.round((playedCount / totalCount) * 100) : 0;

    const dayNames = ['PAZAR', 'PAZARTESÄ°', 'SALI', 'Ã‡ARÅAMBA', 'PERÅEMBE', 'CUMA', 'CUMARTESÄ°'];

    const formatDate = (dateStr?: string) => {
        if (!dateStr || dateStr.trim() === '') return { formatted: 'TARÄ°H BELÄ°RSÄ°Z', sortKey: '9999-99-99' };
        try {
            const date = new Date(dateStr);
            if (isNaN(date.getTime())) return { formatted: 'TARÄ°H BELÄ°RSÄ°Z', sortKey: '9999-99-99' };
            const day = String(date.getDate()).padStart(2, '0');
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const year = date.getFullYear();
            const dayName = dayNames[date.getDay()];
            return { formatted: `${day}/${month}/${year} ${dayName}`, sortKey: dateStr };
        } catch {
            return { formatted: 'TARÄ°H BELÄ°RSÄ°Z', sortKey: '9999-99-99' };
        }
    };

    const groupedMatches = useMemo(() => {
        const matchesByDate: Record<string, { formatted: string; matches: Match[] }> = {};
        const upcomingMatches = matches.filter(m => !m.isPlayed);

        upcomingMatches.forEach(match => {
            const { formatted, sortKey } = formatDate(match.matchDate);
            if (!matchesByDate[sortKey]) {
                matchesByDate[sortKey] = { formatted, matches: [] };
            }
            matchesByDate[sortKey].matches.push(match);
        });

        const sortedDates = Object.keys(matchesByDate).sort();
        return sortedDates.reduce((acc, dateKey) => {
            acc[matchesByDate[dateKey].formatted] = matchesByDate[dateKey].matches;
            return acc;
        }, {} as Record<string, Match[]>);
    }, [matches]);

    return (
        <main className="min-h-screen bg-slate-950 text-slate-100 p-0 sm:p-2 font-sans overflow-hidden">
            <div className="max-w-7xl mx-auto space-y-1 h-full flex flex-col">
                <div className="space-y-3 bg-slate-900/40 p-3 rounded-2xl border border-slate-800/60 backdrop-blur-sm animate-in fade-in slide-in-from-bottom-4 duration-300">
                    {/* Action Bar using LeagueTemplate */}
                    <LeagueActionBar
                        config={LEAGUE_CONFIGS.vsl}
                        title={LEAGUE_CONFIGS.vsl.name}
                        subtitle="2025-2026 Sezonu Puan Durumu"
                        progress={completionRate}
                        progressLabel={`%${completionRate}`}
                    >
                        {/* Leader Badge */}
                        <div className="hidden sm:flex bg-slate-950/50 px-3 py-1.5 rounded-lg border border-slate-800 text-center flex-col justify-center h-full min-h-[32px]">
                            <div className="text-[9px] font-bold text-slate-500 uppercase leading-none mb-0.5">Lider</div>
                            <div className="text-xs font-bold text-white truncate max-w-[100px] leading-none">{teams[0]?.name}</div>
                        </div>
                        {/* Live Badge */}
                        <div className="px-3 h-8 bg-emerald-950/50 rounded-lg border border-emerald-800/50 flex items-center gap-2">
                            <div className="w-2 h-2 bg-emerald-500 rounded-full animate-pulse"></div>
                            <span className="text-[10px] font-bold text-emerald-400 uppercase hidden sm:inline">Otomatik GÃ¼ncelleme</span>
                            <span className="text-[10px] font-bold text-emerald-400 uppercase sm:hidden">CANLI</span>
                        </div>
                    </LeagueActionBar>

                    <div className="grid grid-cols-1 lg:grid-cols-3 gap-2 h-full">
                        <div className="lg:col-span-2 space-y-1 flex flex-col h-full">
                            <h3 className="text-xs font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2 px-1">
                                <span>ğŸ“‹</span> Puan Durumu
                            </h3>
                            <div className="bg-slate-950/40 rounded-xl overflow-hidden border border-slate-800/50 flex-1 max-h-[calc(100vh-200px)]">
                                <StandingsTable
                                    teams={teams}
                                    playoffSpots={4}
                                    secondaryPlayoffSpots={4}
                                    relegationSpots={2}
                                    compact={true}
                                />
                            </div>
                        </div>

                        <div className="space-y-4 flex flex-col h-full">
                            <h3 className="text-xs font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2 px-1">
                                <span>ğŸ“…</span> Gelecek MaÃ§lar
                            </h3>
                            <div className="bg-slate-950/40 rounded-xl overflow-hidden border border-slate-800/50 flex-1 relative flex flex-col">
                                <div className="overflow-y-auto p-2 space-y-2 flex-1 custom-scrollbar">
                                    {Object.keys(groupedMatches).length === 0 ? (
                                        <div className="flex flex-col items-center justify-center h-full text-slate-500 text-xs italic">
                                            MaÃ§ bulunamadÄ± veya sezon tamamlandÄ±.
                                        </div>
                                    ) : (
                                        <div className="space-y-2">
                                            {Object.entries(groupedMatches).map(([date, matches], dateIdx) => (
                                                <div key={date} className={dateIdx > 0 ? 'mt-3' : ''}>
                                                    <div className="sticky top-0 bg-slate-950/90 backdrop-blur-sm py-1.5 px-3 rounded-lg border border-slate-800 flex items-center justify-between z-10 mb-2 shadow-sm">
                                                        <span className="text-[10px] font-bold text-indigo-400 uppercase tracking-wide flex items-center gap-2">
                                                            <span>ğŸ“…</span> {date}
                                                        </span>
                                                        <span className="text-[9px] text-slate-400 bg-slate-800/50 px-2 py-0.5 rounded">{matches.length} maÃ§</span>
                                                    </div>
                                                    <div className="px-1 space-y-2">
                                                        {matches.map(match => {
                                                            const homeRank = teams.findIndex(t => t.name === match.homeTeam) + 1;
                                                            const awayRank = teams.findIndex(t => t.name === match.awayTeam) + 1;

                                                            // Determine importance (simplified logic closer to FixtureList)
                                                            let borderColor = 'border-slate-800/50';
                                                            let importanceColor = null;

                                                            // Top 4 clash
                                                            if (homeRank <= 4 && awayRank <= 4 && homeRank > 0 && awayRank > 0) {
                                                                borderColor = 'border-emerald-700/30';
                                                                importanceColor = 'from-emerald-600/80 to-emerald-500/60 text-emerald-100';
                                                            }
                                                            // Relegation clash (Assuming 14 teams)
                                                            else if (homeRank >= 13 && awayRank >= 13) {
                                                                borderColor = 'border-rose-700/30';
                                                                importanceColor = 'from-rose-600/80 to-rose-500/60 text-rose-100';
                                                            }

                                                            return (
                                                                <div key={match.id || `${match.homeTeam}-${match.awayTeam}`} className={`bg-slate-900 border ${borderColor} rounded-lg p-2.5 shadow-sm hover:border-slate-700 transition-all group relative overflow-hidden`}>

                                                                    {importanceColor && (
                                                                        <div className={`absolute top-0 inset-x-0 h-0.5 bg-gradient-to-r ${importanceColor.split(' ')[0]}`}></div>
                                                                    )}

                                                                    {/* Time Badge */}
                                                                    <div className="flex justify-center -mt-1 mb-2">
                                                                        <span className="text-[9px] font-mono bg-slate-950/80 px-2 py-0.5 rounded text-slate-400 border border-slate-800/50 shadow-sm">
                                                                            {match.matchTime && match.matchTime !== '00:00' ? match.matchTime : '--:--'}
                                                                        </span>
                                                                    </div>

                                                                    <div className="flex items-center justify-between gap-2">
                                                                        <div className="flex-1 flex items-center justify-end gap-2 overflow-hidden">
                                                                            {homeRank > 0 && homeRank <= 4 && (
                                                                                <span className="text-[9px] font-bold text-emerald-500 bg-emerald-950/30 px-1 py-0.5 rounded hidden sm:inline-block">{homeRank}.</span>
                                                                            )}
                                                                            <div className="text-[11px] font-bold text-slate-200 truncate group-hover:text-white transition-colors text-right leading-tight">{match.homeTeam}</div>
                                                                            <TeamAvatar name={match.homeTeam} size="xs" />
                                                                        </div>

                                                                        <div className="mx-1 shrink-0">
                                                                            {match.isPlayed ? (
                                                                                <div className="px-2.5 py-1 bg-slate-950 rounded text-[11px] font-mono font-bold text-slate-200 border border-slate-800 shadow-inner tracking-wider">
                                                                                    {match.homeScore}-{match.awayScore}
                                                                                </div>
                                                                            ) : (
                                                                                <div className="text-[10px] text-slate-600 font-mono font-bold">vs</div>
                                                                            )}
                                                                        </div>

                                                                        <div className="flex-1 flex items-center justify-start gap-2 overflow-hidden">
                                                                            <TeamAvatar name={match.awayTeam} size="xs" />
                                                                            <div className="text-[11px] font-bold text-slate-200 truncate group-hover:text-white transition-colors text-left leading-tight">{match.awayTeam}</div>
                                                                            {awayRank > 0 && awayRank <= 4 && (
                                                                                <span className="text-[9px] font-bold text-emerald-500 bg-emerald-950/30 px-1 py-0.5 rounded hidden sm:inline-block">{awayRank}.</span>
                                                                            )}
                                                                        </div>
                                                                    </div>

                                                                    <div className="mt-2 pt-1.5 border-t border-slate-800/50 flex justify-between items-center opacity-60 group-hover:opacity-100 transition-opacity">
                                                                        <div className="flex items-center gap-1 text-[9px] text-slate-500">
                                                                            <span>ğŸ“</span>
                                                                            <span className="truncate max-w-[150px]">{match.venue || 'Salon BelirtilmemiÅŸ'}</span>
                                                                        </div>
                                                                        {!match.isPlayed && (
                                                                            <div className="text-[9px] text-indigo-400 font-medium">YakÄ±nda</div>
                                                                        )}
                                                                        {match.isPlayed && (
                                                                            <div className="text-[9px] text-emerald-500 font-medium">Bitti</div>
                                                                        )}
                                                                    </div>
                                                                </div>
                                                            );
                                                        })}
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    )}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    );
}

```

## File: app\vsl\playoffs\page.tsx
```
import { Metadata } from "next";
import { getLeagueData } from "../../utils/serverData";
import VSLPlayoffsClient from "./VSLPlayoffsClient";

export const metadata: Metadata = {
    title: "Sultanlar Ligi Playoff SimÃ¼lasyonu",
    description: "Vodafone Sultanlar Ligi playoff simÃ¼lasyonu. Ã‡eyrek final, yarÄ± final ve final eÅŸleÅŸmelerini simÃ¼le edin.",
    openGraph: {
        title: "Sultanlar Ligi Playoff SimÃ¼lasyonu | VolleySimulator",
        description: "Sultanlar Ligi playoff eÅŸleÅŸmelerini simÃ¼le edin.",
    },
};

export default async function PlayoffsVSLPage() {
    const { teams, fixture } = await getLeagueData("vsl");

    return (
        <VSLPlayoffsClient initialTeams={teams} initialMatches={fixture} />
    );
}

```

## File: app\vsl\playoffs\VSLPlayoffsClient.tsx
```
"use client";

import { useEffect, useState, useMemo } from "react";
import { TeamStats, Match } from "../../types";
import Link from "next/link";
import { calculateLiveStandings } from "../../utils/calculatorUtils";

import TeamAvatar from "../../components/TeamAvatar";

interface VSLPlayoffsClientProps {
    initialTeams: TeamStats[];
    initialMatches: Match[];
}

export default function VSLPlayoffsClient({ initialTeams, initialMatches }: VSLPlayoffsClientProps) {
    const [groupOverrides, setGroupOverrides] = useState<Record<string, string>>({});
    const [playoffOverrides, setPlayoffOverrides] = useState<Record<string, string>>({});
    const [isLoaded, setIsLoaded] = useState(false);

    // Tab states
    const [activeTab1_4, setActiveTab1_4] = useState<'semi' | 'final' | '3rd'>('semi');
    const [activeTab5_8, setActiveTab5_8] = useState<'semi' | 'final' | '7th'>('semi');

    useEffect(() => {
        const savedPlayoff = localStorage.getItem('vslPlayoffScenarios');
        if (savedPlayoff) {
            try {
                setPlayoffOverrides(JSON.parse(savedPlayoff));
            } catch (e) { console.error(e); }
        }

        const savedGroup = localStorage.getItem('vslGroupScenarios');
        if (savedGroup) {
            try {
                setGroupOverrides(JSON.parse(savedGroup));
            } catch (e) { console.error(e); }
        }

        setIsLoaded(true);
    }, []);

    const teams = useMemo(() => {
        return calculateLiveStandings(initialTeams, initialMatches, groupOverrides);
    }, [initialTeams, initialMatches, groupOverrides]);

    useEffect(() => {
        if (isLoaded) {
            localStorage.setItem('vslPlayoffScenarios', JSON.stringify(playoffOverrides));
        }
    }, [playoffOverrides, isLoaded]);

    const remainingMatchesCount = useMemo(() => {
        let remaining = initialMatches.filter((m: Match) => !m.isPlayed).length;
        remaining = Math.max(0, remaining - Object.keys(groupOverrides).length);
        return remaining;
    }, [initialMatches, groupOverrides]);

    const isGroupsComplete = remainingMatchesCount === 0;

    const top4 = useMemo(() => teams.slice(0, 4), [teams]);
    const teams5to8 = useMemo(() => teams.slice(4, 8), [teams]);

    const handleScoreChange = (matchId: string, score: string) => {
        const newOverrides = { ...playoffOverrides };
        if (score) {
            newOverrides[matchId] = score;
        } else {
            delete newOverrides[matchId];
        }
        setPlayoffOverrides(newOverrides);
    };

    const calculateSeriesResult = (matchId: string, homeTeam: string | null, awayTeam: string | null, seriesLength: 3 | 5) => {
        if (!homeTeam || !awayTeam) return { winner: null, loser: null, homeWins: 0, awayWins: 0 };

        let homeWins = 0;
        let awayWins = 0;
        const requiredWins = seriesLength === 3 ? 2 : 3;

        for (let i = 1; i <= seriesLength; i++) {
            const score = playoffOverrides[`${matchId}-m${i}`];
            if (score) {
                const [h, a] = score.split('-').map(Number);
                if (h > a) homeWins++;
                else if (a > h) awayWins++;
            }
        }

        let winner = null;
        let loser = null;

        if (homeWins >= requiredWins) {
            winner = homeTeam;
            loser = awayTeam;
        } else if (awayWins >= requiredWins) {
            winner = awayTeam;
            loser = homeTeam;
        }

        return { winner, loser, homeWins, awayWins };
    };

    const renderBracketMatch = (matchId: string, homeTeam: string | null, awayTeam: string | null, label: string, seriesType: 5 | 3 = 5) => {
        const result = calculateSeriesResult(matchId, homeTeam, awayTeam, seriesType);
        const homeSeriesWin = result.winner === homeTeam;
        const awaySeriesWin = result.winner === awayTeam;

        const matchInputs = [];
        for (let i = 1; i <= seriesType; i++) {
            let isHigherSeedHome = true;
            if (i === 1) isHigherSeedHome = false;
            if (i === 4) isHigherSeedHome = false;

            const matchHomeTeam = isHigherSeedHome ? homeTeam : awayTeam;
            const matchAwayTeam = isHigherSeedHome ? awayTeam : homeTeam;

            matchInputs.push(
                <div key={i} className="flex flex-col gap-1 mb-2">
                    <label htmlFor={`score-select-${matchId}-${i}`} className="text-xs text-slate-500 uppercase font-bold pl-1 block">
                        {i}. MaÃ§: {matchHomeTeam || 'Ev'} vs {matchAwayTeam || 'Deplasman'}
                    </label>
                    <select
                        id={`score-select-${matchId}-${i}`}
                        value={playoffOverrides[`${matchId}-m${i}`] || ''}
                        onChange={(e) => handleScoreChange(`${matchId}-m${i}`, e.target.value)}
                        className="w-full p-2 bg-slate-900 border border-slate-700/50 rounded text-xs text-white focus:border-rose-500 transition-colors"
                    >
                        <option value="">OynanmadÄ±</option>
                        <option value="3-0">3-0</option>
                        <option value="3-1">3-1</option>
                        <option value="3-2">3-2</option>
                        <option value="2-3">2-3</option>
                        <option value="1-3">1-3</option>
                        <option value="0-3">0-3</option>
                    </select>
                </div>
            );
        }

        return (
            <div className="bg-slate-800 rounded-lg p-3 border border-slate-700 space-y-3 min-w-[240px]">
                <div className="flex justify-between items-center border-b border-slate-700/50 pb-2">
                    <div className="text-xs text-rose-400 font-bold uppercase tracking-wider">{label}</div>
                    <div className="text-xs font-bold text-slate-400 bg-slate-900 px-2 py-0.5 rounded">
                        Seri: {result.homeWins}-{result.awayWins}
                    </div>
                </div>

                <div className={`flex items-center justify-between p-2 rounded transition-colors ${homeSeriesWin ? 'bg-emerald-500/20 border border-emerald-500/30' : 'bg-slate-900/30'}`}>
                    <div className="flex items-center gap-2 flex-1 min-w-0">
                        <TeamAvatar name={homeTeam || ''} size="xs" />
                        <span className={`text-sm truncate ${homeSeriesWin ? 'text-emerald-400 font-bold' : 'text-slate-300'}`}>
                            {homeTeam || 'TBD (Ãœst SÄ±ra)'}
                        </span>
                    </div>
                    {homeSeriesWin && <span className="text-xs text-emerald-400">ğŸ†</span>}
                </div>

                <div className={`flex items-center justify-between p-2 rounded transition-colors ${awaySeriesWin ? 'bg-emerald-500/20 border border-emerald-500/30' : 'bg-slate-900/30'}`}>
                    <div className="flex items-center gap-2 flex-1 min-w-0">
                        <TeamAvatar name={awayTeam || ''} size="xs" />
                        <span className={`text-sm truncate ${awaySeriesWin ? 'text-emerald-400 font-bold' : 'text-slate-300'}`}>
                            {awayTeam || 'TBD (Alt SÄ±ra)'}
                        </span>
                    </div>
                    {awaySeriesWin && <span className="text-xs text-emerald-400">ğŸ†</span>}
                </div>

                {homeTeam && awayTeam && (
                    <div className="bg-slate-900/50 p-2 rounded border border-slate-800 mt-2">
                        <div className="text-xs text-slate-500 mb-2 font-bold text-center border-b border-slate-700 pb-1">MAÃ‡ SKORLARI</div>
                        <div className="grid grid-cols-2 gap-2">
                            {matchInputs}
                        </div>
                    </div>
                )}
            </div>
        );
    };

    const getWinner = (matchId: string, homeTeam: string | null, awayTeam: string | null, seriesLength: 3 | 5 = 3): string | null => {
        return calculateSeriesResult(matchId, homeTeam, awayTeam, seriesLength).winner;
    };

    const getLoser = (matchId: string, homeTeam: string | null, awayTeam: string | null, seriesLength: 3 | 5 = 3): string | null => {
        return calculateSeriesResult(matchId, homeTeam, awayTeam, seriesLength).loser;
    };

    const semi1Home = top4[0]?.name || null;
    const semi1Away = top4[3]?.name || null;
    const semi2Home = top4[1]?.name || null;
    const semi2Away = top4[2]?.name || null;

    const semi1Winner = getWinner('vsl-semi-1', semi1Home, semi1Away, 3);
    const semi1Loser = getLoser('vsl-semi-1', semi1Home, semi1Away, 3);
    const semi2Winner = getWinner('vsl-semi-2', semi2Home, semi2Away, 3);
    const semi2Loser = getLoser('vsl-semi-2', semi2Home, semi2Away, 3);

    const finalWinner = getWinner('vsl-final', semi1Winner, semi2Winner, 5);
    const finalLoser = getLoser('vsl-final', semi1Winner, semi2Winner, 5);

    const thirdPlaceWinner = getWinner('vsl-3rd', semi1Loser, semi2Loser, 3);
    const thirdPlaceLoser = getLoser('vsl-3rd', semi1Loser, semi2Loser, 3);

    const semi58_1Home = teams5to8[0]?.name || null;
    const semi58_1Away = teams5to8[3]?.name || null;
    const semi58_2Home = teams5to8[1]?.name || null;
    const semi58_2Away = teams5to8[2]?.name || null;

    const semi58_1Winner = getWinner('vsl-58-semi-1', semi58_1Home, semi58_1Away, 3);
    const semi58_1Loser = getLoser('vsl-58-semi-1', semi58_1Home, semi58_1Away, 3);
    const semi58_2Winner = getWinner('vsl-58-semi-2', semi58_2Home, semi58_2Away, 3);
    const semi58_2Loser = getLoser('vsl-58-semi-2', semi58_2Home, semi58_2Away, 3);

    const fifthPlaceWinner = getWinner('vsl-58-final', semi58_1Winner, semi58_2Winner, 3);
    const fifthPlaceLoser = getLoser('vsl-58-final', semi58_1Winner, semi58_2Winner, 3);
    const seventhPlaceWinner = getWinner('vsl-58-7th', semi58_1Loser, semi58_2Loser, 3);
    const seventhPlaceLoser = getLoser('vsl-58-7th', semi58_1Loser, semi58_2Loser, 3);

    const allPlayoffsComplete = Boolean(
        finalWinner && finalLoser &&
        thirdPlaceWinner && thirdPlaceLoser &&
        fifthPlaceWinner && fifthPlaceLoser &&
        seventhPlaceWinner && seventhPlaceLoser
    );

    const finalStandings = allPlayoffsComplete ? [
        { rank: 1, team: finalWinner, badge: 'ğŸ†', color: 'text-amber-400', bgColor: 'bg-amber-500/20', borderColor: 'border-amber-500/30' },
        { rank: 2, team: finalLoser, badge: 'ğŸ¥ˆ', color: 'text-amber-300', bgColor: 'bg-amber-500/10', borderColor: 'border-amber-500/20' },
        { rank: 3, team: thirdPlaceWinner, badge: 'ğŸ¥‰', color: 'text-amber-200', bgColor: 'bg-amber-500/10', borderColor: 'border-amber-500/20' },
        { rank: 4, team: thirdPlaceLoser, badge: '', color: 'text-blue-400', bgColor: 'bg-blue-500/10', borderColor: 'border-blue-500/20' },
        { rank: 5, team: fifthPlaceWinner, badge: '', color: 'text-emerald-400', bgColor: 'bg-emerald-500/10', borderColor: 'border-emerald-500/20' },
        { rank: 6, team: fifthPlaceLoser, badge: '', color: 'text-purple-400', bgColor: 'bg-purple-500/10', borderColor: 'border-purple-500/20' },
        { rank: 7, team: seventhPlaceWinner, badge: '', color: 'text-slate-400', bgColor: 'bg-slate-800/50', borderColor: 'border-slate-700/50' },
        { rank: 8, team: seventhPlaceLoser, badge: '', color: 'text-slate-400', bgColor: 'bg-slate-800/50', borderColor: 'border-slate-700/50' },
    ] : [];

    return (
        <main className="min-h-screen bg-slate-950 text-slate-100 p-4 md:p-8 font-sans">
            <div className="max-w-7xl mx-auto space-y-8">
                <div className="flex flex-col gap-1">
                    <h1 className="font-bold text-white text-lg tracking-tight leading-none hidden sm:block">Sultanlar Ligi Play-Off</h1>
                    <p className="text-[10px] text-slate-400 hidden sm:block">Åampiyonluk ve sÄ±ralama mÃ¼cadelesi 2025-2026</p>
                </div>

                {!isGroupsComplete && (
                    <div className="bg-rose-500/10 border border-rose-500/20 text-rose-200 p-4 rounded-lg flex items-center gap-3">
                        <span className="text-2xl">âš ï¸</span>
                        <div>
                            <p className="font-bold text-sm">Lig EtabÄ± HenÃ¼z TamamlanmadÄ±</p>
                            <p className="text-xs opacity-70">
                                Play-Off senaryolarÄ± mevcut sÄ±ralamaya gÃ¶re hesaplanmaktadÄ±r.
                                Kesin sonuÃ§lar iÃ§in Ã¶nce lig maÃ§larÄ±nÄ± tamamlayÄ±n.
                            </p>
                        </div>
                    </div>
                )}

                <div className="relative">
                    {!isGroupsComplete && (
                        <div className="absolute inset-0 bg-slate-950/80 backdrop-blur-sm z-20 flex flex-col items-center justify-start pt-16 rounded-xl">
                            <div className="text-6xl mb-4">ğŸ”’</div>
                            <h2 className="text-xl font-bold text-white mb-2">Play-Off Kilitli</h2>
                            <p className="text-slate-400 text-sm text-center max-w-md mb-4">
                                Play-Off senaryolarÄ±nÄ± dÃ¼zenleyebilmek iÃ§in Ã¶nce tÃ¼m lig maÃ§larÄ±nÄ± tahmin etmeniz gerekmektedir.
                            </p>
                            <p className="text-rose-400 font-medium">
                                {remainingMatchesCount} maÃ§ eksik
                            </p>
                            <Link href="/vsl/tahminoyunu" className="mt-4 px-4 py-2 bg-rose-700 hover:bg-rose-600 text-white font-bold rounded-lg transition-colors">
                                Tahminleri Tamamla â†’
                            </Link>
                        </div>
                    )}

                    <div className={`${!isGroupsComplete ? 'opacity-30 pointer-events-none select-none' : ''} space-y-12`}>
                        <div className="bg-gradient-to-br from-rose-900/30 to-slate-900/50 border border-rose-500/20 rounded-xl p-6">
                            <h2 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
                                <span className="w-3 h-3 rounded-full bg-rose-500"></span>
                                Play-Off 1. Etap (1-4)
                                <span className="text-xs text-rose-400 ml-auto">Åampiyonluk MÃ¼cadelesi</span>
                            </h2>

                            <div className="flex gap-2 border-b border-rose-500/20 mb-6 overflow-x-auto pb-2">
                                <button
                                    onClick={() => setActiveTab1_4('semi')}
                                    className={`px-4 py-2 text-sm font-bold rounded-t-lg transition-colors whitespace-nowrap ${activeTab1_4 === 'semi' ? 'bg-rose-700 text-white' : 'text-slate-400 hover:text-white hover:bg-slate-800'}`}
                                >
                                    YarÄ± Final
                                </button>
                                <button
                                    onClick={() => setActiveTab1_4('final')}
                                    className={`px-4 py-2 text-sm font-bold rounded-t-lg transition-colors whitespace-nowrap ${activeTab1_4 === 'final' ? 'bg-amber-700 text-white' : 'text-slate-400 hover:text-white hover:bg-slate-800'}`}
                                >
                                    Final
                                </button>
                                <button
                                    onClick={() => setActiveTab1_4('3rd')}
                                    className={`px-4 py-2 text-sm font-bold rounded-t-lg transition-colors whitespace-nowrap ${activeTab1_4 === '3rd' ? 'bg-slate-700 text-white' : 'text-slate-400 hover:text-white hover:bg-slate-800'}`}
                                >
                                    3.lÃ¼k MaÃ§Ä±
                                </button>
                            </div>

                            <div className="min-h-[300px]">
                                {activeTab1_4 === 'semi' && (
                                    <div className="space-y-6">
                                        <div className="text-xs font-bold text-slate-400 uppercase tracking-wider mb-2">YarÄ± Final (3 MaÃ§ Ãœzerinden)</div>
                                        <div className="grid md:grid-cols-2 gap-6">
                                            {renderBracketMatch('vsl-semi-1', semi1Home, semi1Away, '1. vs 4. (YarÄ± Final 1)', 3)}
                                            {renderBracketMatch('vsl-semi-2', semi2Home, semi2Away, '2. vs 3. (YarÄ± Final 2)', 3)}
                                        </div>
                                    </div>
                                )}

                                {activeTab1_4 === 'final' && (
                                    <div className="space-y-6">
                                        <div className="text-xs font-bold text-amber-400 uppercase tracking-wider mb-2">Åampiyonluk Finali (5 MaÃ§ Ãœzerinden)</div>
                                        <div className="max-w-md">
                                            {renderBracketMatch('vsl-final', semi1Winner, semi2Winner, 'FÄ°NAL', 5)}
                                        </div>

                                        {finalWinner && (
                                            <div className="bg-gradient-to-r from-amber-500/20 to-amber-600/10 border border-amber-500/30 rounded-lg p-6 text-center max-w-md animate-in fade-in zoom-in duration-500">
                                                <div className="text-5xl mb-2">ğŸ†</div>
                                                <div className="text-sm text-amber-400 uppercase tracking-wider font-bold">2025-2026 Åampiyonu</div>
                                                <div className="text-3xl font-black text-white mt-1">{finalWinner}</div>
                                            </div>
                                        )}
                                    </div>
                                )}

                                {activeTab1_4 === '3rd' && (
                                    <div className="space-y-6">
                                        <div className="text-xs font-bold text-slate-400 uppercase tracking-wider mb-2">3.lÃ¼k MÃ¼cadelesi (3 MaÃ§ Ãœzerinden)</div>
                                        <div className="max-w-md">
                                            {renderBracketMatch('vsl-3rd', semi1Loser, semi2Loser, '3.lÃ¼k MaÃ§Ä±', 3)}
                                        </div>

                                        {thirdPlaceWinner && (
                                            <div className="bg-slate-800/50 border border-slate-600/30 rounded-lg p-4 text-center max-w-md">
                                                <div className="text-2xl mb-1">ğŸ¥‰</div>
                                                <div className="text-xs text-slate-400">3. SÄ±ra</div>
                                                <div className="text-xl font-bold text-white">{thirdPlaceWinner}</div>
                                            </div>
                                        )}
                                    </div>
                                )}
                            </div>
                        </div>

                        <div className="bg-gradient-to-br from-amber-900/30 to-slate-900/50 border border-amber-500/20 rounded-xl p-6">
                            <h2 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
                                <span className="w-3 h-3 rounded-full bg-amber-500"></span>
                                Play-Off 2. Etap (5-8)
                                <span className="text-xs text-amber-400 ml-auto">SÄ±ralama MÃ¼cadelesi</span>
                            </h2>

                            <div className="flex gap-2 border-b border-amber-500/20 mb-6 overflow-x-auto pb-2">
                                <button
                                    onClick={() => setActiveTab5_8('semi')}
                                    className={`px-4 py-2 text-sm font-bold rounded-t-lg transition-colors whitespace-nowrap ${activeTab5_8 === 'semi' ? 'bg-amber-700 text-white' : 'text-slate-400 hover:text-white hover:bg-slate-800'}`}
                                >
                                    YarÄ± Final
                                </button>
                                <button
                                    onClick={() => setActiveTab5_8('final')}
                                    className={`px-4 py-2 text-sm font-bold rounded-t-lg transition-colors whitespace-nowrap ${activeTab5_8 === 'final' ? 'bg-emerald-700 text-white' : 'text-slate-400 hover:text-white hover:bg-slate-800'}`}
                                >
                                    5.lik MaÃ§Ä±
                                </button>
                                <button
                                    onClick={() => setActiveTab5_8('7th')}
                                    className={`px-4 py-2 text-sm font-bold rounded-t-lg transition-colors whitespace-nowrap ${activeTab5_8 === '7th' ? 'bg-slate-700 text-white' : 'text-slate-400 hover:text-white hover:bg-slate-800'}`}
                                >
                                    7.lik MaÃ§Ä±
                                </button>
                            </div>

                            <div className="min-h-[300px]">
                                {activeTab5_8 === 'semi' && (
                                    <div className="space-y-6">
                                        <div className="text-xs font-bold text-slate-400 uppercase tracking-wider mb-2">YarÄ± Final (3 MaÃ§ Ãœzerinden)</div>
                                        <div className="grid md:grid-cols-2 gap-6">
                                            {renderBracketMatch('vsl-58-semi-1', semi58_1Home, semi58_1Away, '5. vs 8.', 3)}
                                            {renderBracketMatch('vsl-58-semi-2', semi58_2Home, semi58_2Away, '6. vs 7.', 3)}
                                        </div>
                                    </div>
                                )}

                                {activeTab5_8 === 'final' && (
                                    <div className="space-y-6">
                                        <div className="text-xs font-bold text-emerald-400 uppercase tracking-wider mb-2">5.lik MÃ¼cadelesi (3 MaÃ§ Ãœzerinden)</div>
                                        <div className="max-w-md">
                                            {renderBracketMatch('vsl-58-final', semi58_1Winner, semi58_2Winner, '5.lik MaÃ§Ä±', 3)}
                                        </div>
                                    </div>
                                )}

                                {activeTab5_8 === '7th' && (
                                    <div className="space-y-6">
                                        <div className="text-xs font-bold text-slate-400 uppercase tracking-wider mb-2">7.lik MÃ¼cadelesi (3 MaÃ§ Ãœzerinden)</div>
                                        <div className="max-w-md">
                                            {renderBracketMatch('vsl-58-7th', semi58_1Loser, semi58_2Loser, '7.lik MaÃ§Ä±', 3)}
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>

                        {allPlayoffsComplete && (
                            <div className="bg-gradient-to-br from-amber-900/20 via-slate-900/50 to-emerald-900/20 border border-amber-500/30 rounded-xl p-6 animate-in fade-in slide-in-from-bottom-4 duration-500">
                                <h2 className="text-xl font-bold text-white mb-6 flex items-center gap-3">
                                    <span className="text-3xl">ğŸ…</span>
                                    <div>
                                        <div>Final SÄ±ralamasÄ±</div>
                                        <div className="text-xs font-normal text-slate-400">2025-2026 Sultanlar Ligi</div>
                                    </div>
                                </h2>

                                <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3">
                                    {finalStandings.map((item) => (
                                        <div
                                            key={item.rank}
                                            className={`${item.bgColor} ${item.borderColor} border rounded-xl p-4 flex items-center gap-3 transition-all hover:scale-[1.02]`}
                                        >
                                            <div className={`text-3xl font-black ${item.color} min-w-[40px] text-center`}>
                                                {item.badge || `${item.rank}.`}
                                            </div>
                                            <div className="flex-1 min-w-0">
                                                <div className="text-xs text-slate-500 uppercase tracking-wider">
                                                    {item.rank}. SÄ±ra
                                                </div>
                                                <div className={`font-bold truncate ${item.color}`}>
                                                    {item.team}
                                                </div>
                                            </div>
                                            {item.rank <= 3 && (
                                                <TeamAvatar name={item.team || ''} size="sm" />
                                            )}
                                        </div>
                                    ))}
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            </div>
        </main>
    );
}

```

## File: app\vsl\stats\page.tsx
```
import { Metadata } from "next";
import { getLeagueData } from "../../utils/serverData";
import VSLStatsClient from "./VSLStatsClient";

export const metadata: Metadata = {
    title: "Sultanlar Ligi Ä°statistikler",
    description: "Vodafone Sultanlar Ligi takÄ±m istatistikleri, performans analizleri ve karÅŸÄ±laÅŸtÄ±rmalarÄ±. 2025-2026 sezonu detaylÄ± veriler.",
    openGraph: {
        title: "Sultanlar Ligi Ä°statistikler | VolleySimulator",
        description: "Sultanlar Ligi takÄ±m istatistikleri ve performans analizleri.",
    },
};

export default async function VSLStatsPage() {
    const { teams, fixture } = await getLeagueData("vsl");

    return (
        <VSLStatsClient initialTeams={teams} initialMatches={fixture} />
    );
}

```

## File: app\vsl\stats\VSLStatsClient.tsx
```
"use client";

import { TeamStats, Match } from "../../types";
import StatsTemplate from "../../components/LeagueTemplate/StatsTemplate";
import { LEAGUE_CONFIGS } from "../../components/LeagueTemplate/types";

interface VSLStatsClientProps {
    initialTeams: TeamStats[];
    initialMatches: Match[];
}

export default function VSLStatsClient({ initialTeams, initialMatches }: VSLStatsClientProps) {
    return (
        <StatsTemplate
            config={LEAGUE_CONFIGS.vsl}
            initialTeams={initialTeams}
            initialMatches={initialMatches}
        />
    );
}

```

## File: app\vsl\tahminoyunu\loading.tsx
```
import { SkeletonTable } from "../../components/Skeleton";

export default function VSLCalculatorLoading() {
    return (
        <main className="min-h-screen bg-slate-950 text-slate-100 p-2 sm:p-4 font-sans pb-20 sm:pb-4">
            <div className="w-full max-w-[1600px] mx-auto flex flex-col h-[calc(100vh-2rem)] gap-4">
                {/* Header skeleton */}
                <div className="bg-slate-900/50 rounded-xl border border-slate-800 p-4">
                    <div className="flex items-center justify-between flex-wrap gap-4">
                        <div className="flex items-center gap-4">
                            <div className="h-8 w-48 bg-slate-800 rounded animate-pulse" />
                            <div className="h-6 w-32 bg-slate-800/50 rounded animate-pulse" />
                        </div>
                        <div className="flex items-center gap-2">
                            <div className="h-8 w-20 bg-slate-800 rounded animate-pulse" />
                            <div className="h-8 w-20 bg-slate-800 rounded animate-pulse" />
                        </div>
                    </div>
                    {/* Progress bar skeleton */}
                    <div className="mt-4 h-2 w-full bg-slate-800 rounded-full animate-pulse" />
                </div>

                {/* Content grid skeleton */}
                <div className="flex-1 grid grid-cols-1 lg:grid-cols-12 gap-4 min-h-0 overflow-hidden">
                    <div className="lg:col-span-7">
                        <SkeletonTable rows={12} columns={8} />
                    </div>
                    <div className="lg:col-span-5">
                        <div className="bg-slate-900/50 rounded-xl border border-slate-800 p-4 space-y-4">
                            <div className="h-6 w-32 bg-slate-800 rounded animate-pulse" />
                            {[...Array(8)].map((_, i) => (
                                <div key={i} className="flex items-center justify-between p-3 bg-slate-800/30 rounded-lg">
                                    <div className="flex items-center gap-2">
                                        <div className="w-6 h-6 bg-slate-700 rounded-full animate-pulse" />
                                        <div className="h-4 w-24 bg-slate-700 rounded animate-pulse" />
                                    </div>
                                    <div className="h-6 w-16 bg-slate-700 rounded animate-pulse" />
                                    <div className="flex items-center gap-2">
                                        <div className="h-4 w-24 bg-slate-700 rounded animate-pulse" />
                                        <div className="w-6 h-6 bg-slate-700 rounded-full animate-pulse" />
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                </div>
            </div>
        </main>
    );
}

```

## File: app\vsl\tahminoyunu\page.tsx
```
import { Suspense } from "react";
import { Metadata } from "next";
import { getLeagueData } from "../../utils/serverData";
import VSLCalculatorClient from "./VSLCalculatorClient";
import ErrorBoundary from "../../components/ErrorBoundary";
import { SkeletonPage } from "../../components/Skeleton";

export const metadata: Metadata = {
    title: "Vodafone Sultanlar Ligi Tahmin Oyunu",
    description: "Sultanlar Ligi maÃ§ sonuÃ§larÄ±nÄ± tahmin edin, puan kazanÄ±n ve liderlik tablosunda yerinizi alÄ±n. 2025-2026 sezonu.",
    openGraph: {
        title: "Vodafone Sultanlar Ligi Tahmin Oyunu",
        description: "Sultanlar Ligi maÃ§ sonuÃ§larÄ±nÄ± tahmin edin, puan kazanÄ±n ve liderlik tablosunda yerinizi alÄ±n.",
    },
};

export default async function VSLTahminOyunuPage() {
    const { teams, fixture } = await getLeagueData("vsl");

    return (
        <ErrorBoundary>
            <Suspense fallback={<SkeletonPage />}>
                <VSLCalculatorClient
                    initialTeams={teams}
                    initialMatches={fixture}
                />
            </Suspense>
        </ErrorBoundary>
    );
}

```

## File: app\vsl\tahminoyunu\VSLCalculatorClient.tsx
```
import { TeamStats, Match } from "../../types";
import CalculatorTemplate from "../../components/LeagueTemplate/CalculatorTemplate";
import { LEAGUE_CONFIGS } from "../../components/LeagueTemplate/types";

interface VSLCalculatorClientProps {
    initialTeams: TeamStats[];
    initialMatches: Match[];
}

export default function VSLCalculatorClient({ initialTeams, initialMatches }: VSLCalculatorClientProps) {
    return (
        <CalculatorTemplate
            config={LEAGUE_CONFIGS.vsl}
            initialTeams={initialTeams}
            initialMatches={initialMatches}
        />
    );
}

```

## File: components\ui\accordion.tsx
```
"use client"

import * as React from "react"
import * as AccordionPrimitive from "@radix-ui/react-accordion"
import { ChevronDown } from "lucide-react"

import { cn } from "@/lib/utils"

const Accordion = AccordionPrimitive.Root

const AccordionItem = React.forwardRef<
  React.ElementRef<typeof AccordionPrimitive.Item>,
  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>
>(({ className, ...props }, ref) => (
  <AccordionPrimitive.Item
    ref={ref}
    className={cn("border-b", className)}
    {...props}
  />
))
AccordionItem.displayName = "AccordionItem"

const AccordionTrigger = React.forwardRef<
  React.ElementRef<typeof AccordionPrimitive.Trigger>,
  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>
>(({ className, children, ...props }, ref) => (
  <AccordionPrimitive.Header className="flex">
    <AccordionPrimitive.Trigger
      ref={ref}
      className={cn(
        "flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline text-left [&[data-state=open]>svg]:rotate-180",
        className
      )}
      {...props}
    >
      {children}
      <ChevronDown className="h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200" />
    </AccordionPrimitive.Trigger>
  </AccordionPrimitive.Header>
))
AccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName

const AccordionContent = React.forwardRef<
  React.ElementRef<typeof AccordionPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>
>(({ className, children, ...props }, ref) => (
  <AccordionPrimitive.Content
    ref={ref}
    className="overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down"
    {...props}
  >
    <div className={cn("pb-4 pt-0", className)}>{children}</div>
  </AccordionPrimitive.Content>
))
AccordionContent.displayName = AccordionPrimitive.Content.displayName

export { Accordion, AccordionItem, AccordionTrigger, AccordionContent }

```

## File: components\ui\alert.tsx
```
import * as React from "react"
import { cva, type VariantProps } from "class-variance-authority"

import { cn } from "@/lib/utils"

const alertVariants = cva(
  "relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",
  {
    variants: {
      variant: {
        default: "bg-background text-foreground",
        destructive:
          "border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive",
      },
    },
    defaultVariants: {
      variant: "default",
    },
  }
)

const Alert = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>
>(({ className, variant, ...props }, ref) => (
  <div
    ref={ref}
    role="alert"
    className={cn(alertVariants({ variant }), className)}
    {...props}
  />
))
Alert.displayName = "Alert"

const AlertTitle = React.forwardRef<
  HTMLParagraphElement,
  React.HTMLAttributes<HTMLHeadingElement>
>(({ className, ...props }, ref) => (
  <h5
    ref={ref}
    className={cn("mb-1 font-medium leading-none tracking-tight", className)}
    {...props}
  />
))
AlertTitle.displayName = "AlertTitle"

const AlertDescription = React.forwardRef<
  HTMLParagraphElement,
  React.HTMLAttributes<HTMLParagraphElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn("text-sm [&_p]:leading-relaxed", className)}
    {...props}
  />
))
AlertDescription.displayName = "AlertDescription"

export { Alert, AlertTitle, AlertDescription }

```

## File: components\ui\avatar.tsx
```
"use client"

import * as React from "react"
import * as AvatarPrimitive from "@radix-ui/react-avatar"

import { cn } from "@/lib/utils"

const Avatar = React.forwardRef<
  React.ElementRef<typeof AvatarPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>
>(({ className, ...props }, ref) => (
  <AvatarPrimitive.Root
    ref={ref}
    className={cn(
      "relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",
      className
    )}
    {...props}
  />
))
Avatar.displayName = AvatarPrimitive.Root.displayName

const AvatarImage = React.forwardRef<
  React.ElementRef<typeof AvatarPrimitive.Image>,
  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>
>(({ className, ...props }, ref) => (
  <AvatarPrimitive.Image
    ref={ref}
    className={cn("aspect-square h-full w-full", className)}
    {...props}
  />
))
AvatarImage.displayName = AvatarPrimitive.Image.displayName

const AvatarFallback = React.forwardRef<
  React.ElementRef<typeof AvatarPrimitive.Fallback>,
  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>
>(({ className, ...props }, ref) => (
  <AvatarPrimitive.Fallback
    ref={ref}
    className={cn(
      "flex h-full w-full items-center justify-center rounded-full bg-muted",
      className
    )}
    {...props}
  />
))
AvatarFallback.displayName = AvatarPrimitive.Fallback.displayName

export { Avatar, AvatarImage, AvatarFallback }

```

## File: components\ui\badge.tsx
```
import * as React from "react"
import { cva, type VariantProps } from "class-variance-authority"

import { cn } from "@/lib/utils"

const badgeVariants = cva(
  "inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",
  {
    variants: {
      variant: {
        default:
          "border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",
        secondary:
          "border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",
        destructive:
          "border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",
        outline: "text-foreground",
      },
    },
    defaultVariants: {
      variant: "default",
    },
  }
)

export interface BadgeProps
  extends React.HTMLAttributes<HTMLDivElement>,
    VariantProps<typeof badgeVariants> {}

function Badge({ className, variant, ...props }: BadgeProps) {
  return (
    <div className={cn(badgeVariants({ variant }), className)} {...props} />
  )
}

export { Badge, badgeVariants }

```

## File: components\ui\button.tsx
```
import * as React from "react"
import { Slot } from "@radix-ui/react-slot"
import { cva, type VariantProps } from "class-variance-authority"

import { cn } from "@/lib/utils"

const buttonVariants = cva(
  "inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",
  {
    variants: {
      variant: {
        default:
          "bg-primary text-primary-foreground shadow hover:bg-primary/90",
        destructive:
          "bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",
        outline:
          "border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",
        secondary:
          "bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",
        ghost: "hover:bg-accent hover:text-accent-foreground",
        link: "text-primary underline-offset-4 hover:underline",
      },
      size: {
        default: "h-9 px-4 py-2",
        sm: "h-8 rounded-md px-3 text-xs",
        lg: "h-10 rounded-md px-8",
        icon: "h-9 w-9",
      },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
    },
  }
)

export interface ButtonProps
  extends React.ButtonHTMLAttributes<HTMLButtonElement>,
    VariantProps<typeof buttonVariants> {
  asChild?: boolean
}

const Button = React.forwardRef<HTMLButtonElement, ButtonProps>(
  ({ className, variant, size, asChild = false, ...props }, ref) => {
    const Comp = asChild ? Slot : "button"
    return (
      <Comp
        className={cn(buttonVariants({ variant, size, className }))}
        ref={ref}
        {...props}
      />
    )
  }
)
Button.displayName = "Button"

export { Button, buttonVariants }

```

## File: components\ui\card.tsx
```
import * as React from "react"

import { cn } from "@/lib/utils"

const Card = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn(
      "rounded-xl border bg-card text-card-foreground shadow",
      className
    )}
    {...props}
  />
))
Card.displayName = "Card"

const CardHeader = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn("flex flex-col space-y-1.5 p-6", className)}
    {...props}
  />
))
CardHeader.displayName = "CardHeader"

const CardTitle = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn("font-semibold leading-none tracking-tight", className)}
    {...props}
  />
))
CardTitle.displayName = "CardTitle"

const CardDescription = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn("text-sm text-muted-foreground", className)}
    {...props}
  />
))
CardDescription.displayName = "CardDescription"

const CardContent = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div ref={ref} className={cn("p-6 pt-0", className)} {...props} />
))
CardContent.displayName = "CardContent"

const CardFooter = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn("flex items-center p-6 pt-0", className)}
    {...props}
  />
))
CardFooter.displayName = "CardFooter"

export { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }

```

## File: components\ui\checkbox.tsx
```
"use client"

import * as React from "react"
import * as CheckboxPrimitive from "@radix-ui/react-checkbox"
import { Check } from "lucide-react"

import { cn } from "@/lib/utils"

const Checkbox = React.forwardRef<
  React.ElementRef<typeof CheckboxPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>
>(({ className, ...props }, ref) => (
  <CheckboxPrimitive.Root
    ref={ref}
    className={cn(
      "grid place-content-center peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",
      className
    )}
    {...props}
  >
    <CheckboxPrimitive.Indicator
      className={cn("grid place-content-center text-current")}
    >
      <Check className="h-4 w-4" />
    </CheckboxPrimitive.Indicator>
  </CheckboxPrimitive.Root>
))
Checkbox.displayName = CheckboxPrimitive.Root.displayName

export { Checkbox }

```

## File: components\ui\collapsible.tsx
```
"use client"

import * as CollapsiblePrimitive from "@radix-ui/react-collapsible"

const Collapsible = CollapsiblePrimitive.Root

const CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger

const CollapsibleContent = CollapsiblePrimitive.CollapsibleContent

export { Collapsible, CollapsibleTrigger, CollapsibleContent }

```

## File: components\ui\command.tsx
```
"use client"

import * as React from "react"
import { type DialogProps } from "@radix-ui/react-dialog"
import { Command as CommandPrimitive } from "cmdk"
import { Search } from "lucide-react"

import { cn } from "@/lib/utils"
import { Dialog, DialogContent } from "@/components/ui/dialog"

const Command = React.forwardRef<
  React.ElementRef<typeof CommandPrimitive>,
  React.ComponentPropsWithoutRef<typeof CommandPrimitive>
>(({ className, ...props }, ref) => (
  <CommandPrimitive
    ref={ref}
    className={cn(
      "flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",
      className
    )}
    {...props}
  />
))
Command.displayName = CommandPrimitive.displayName

const CommandDialog = ({ children, ...props }: DialogProps) => {
  return (
    <Dialog {...props}>
      <DialogContent className="overflow-hidden p-0">
        <Command className="[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5">
          {children}
        </Command>
      </DialogContent>
    </Dialog>
  )
}

const CommandInput = React.forwardRef<
  React.ElementRef<typeof CommandPrimitive.Input>,
  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>
>(({ className, ...props }, ref) => (
  <div className="flex items-center border-b px-3" cmdk-input-wrapper="">
    <Search className="mr-2 h-4 w-4 shrink-0 opacity-50" />
    <CommandPrimitive.Input
      ref={ref}
      className={cn(
        "flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",
        className
      )}
      {...props}
    />
  </div>
))

CommandInput.displayName = CommandPrimitive.Input.displayName

const CommandList = React.forwardRef<
  React.ElementRef<typeof CommandPrimitive.List>,
  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>
>(({ className, ...props }, ref) => (
  <CommandPrimitive.List
    ref={ref}
    className={cn("max-h-[300px] overflow-y-auto overflow-x-hidden", className)}
    {...props}
  />
))

CommandList.displayName = CommandPrimitive.List.displayName

const CommandEmpty = React.forwardRef<
  React.ElementRef<typeof CommandPrimitive.Empty>,
  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>
>((props, ref) => (
  <CommandPrimitive.Empty
    ref={ref}
    className="py-6 text-center text-sm"
    {...props}
  />
))

CommandEmpty.displayName = CommandPrimitive.Empty.displayName

const CommandGroup = React.forwardRef<
  React.ElementRef<typeof CommandPrimitive.Group>,
  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>
>(({ className, ...props }, ref) => (
  <CommandPrimitive.Group
    ref={ref}
    className={cn(
      "overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",
      className
    )}
    {...props}
  />
))

CommandGroup.displayName = CommandPrimitive.Group.displayName

const CommandSeparator = React.forwardRef<
  React.ElementRef<typeof CommandPrimitive.Separator>,
  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>
>(({ className, ...props }, ref) => (
  <CommandPrimitive.Separator
    ref={ref}
    className={cn("-mx-1 h-px bg-border", className)}
    {...props}
  />
))
CommandSeparator.displayName = CommandPrimitive.Separator.displayName

const CommandItem = React.forwardRef<
  React.ElementRef<typeof CommandPrimitive.Item>,
  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>
>(({ className, ...props }, ref) => (
  <CommandPrimitive.Item
    ref={ref}
    className={cn(
      "relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",
      className
    )}
    {...props}
  />
))

CommandItem.displayName = CommandPrimitive.Item.displayName

const CommandShortcut = ({
  className,
  ...props
}: React.HTMLAttributes<HTMLSpanElement>) => {
  return (
    <span
      className={cn(
        "ml-auto text-xs tracking-widest text-muted-foreground",
        className
      )}
      {...props}
    />
  )
}
CommandShortcut.displayName = "CommandShortcut"

export {
  Command,
  CommandDialog,
  CommandInput,
  CommandList,
  CommandEmpty,
  CommandGroup,
  CommandItem,
  CommandShortcut,
  CommandSeparator,
}

```

## File: components\ui\dialog.tsx
```
"use client"

import * as React from "react"
import * as DialogPrimitive from "@radix-ui/react-dialog"
import { X } from "lucide-react"

import { cn } from "@/lib/utils"

const Dialog = DialogPrimitive.Root

const DialogTrigger = DialogPrimitive.Trigger

const DialogPortal = DialogPrimitive.Portal

const DialogClose = DialogPrimitive.Close

const DialogOverlay = React.forwardRef<
  React.ElementRef<typeof DialogPrimitive.Overlay>,
  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>
>(({ className, ...props }, ref) => (
  <DialogPrimitive.Overlay
    ref={ref}
    className={cn(
      "fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",
      className
    )}
    {...props}
  />
))
DialogOverlay.displayName = DialogPrimitive.Overlay.displayName

const DialogContent = React.forwardRef<
  React.ElementRef<typeof DialogPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>
>(({ className, children, ...props }, ref) => (
  <DialogPortal>
    <DialogOverlay />
    <DialogPrimitive.Content
      ref={ref}
      className={cn(
        "fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",
        className
      )}
      {...props}
    >
      {children}
      <DialogPrimitive.Close className="absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground">
        <X className="h-4 w-4" />
        <span className="sr-only">Close</span>
      </DialogPrimitive.Close>
    </DialogPrimitive.Content>
  </DialogPortal>
))
DialogContent.displayName = DialogPrimitive.Content.displayName

const DialogHeader = ({
  className,
  ...props
}: React.HTMLAttributes<HTMLDivElement>) => (
  <div
    className={cn(
      "flex flex-col space-y-1.5 text-center sm:text-left",
      className
    )}
    {...props}
  />
)
DialogHeader.displayName = "DialogHeader"

const DialogFooter = ({
  className,
  ...props
}: React.HTMLAttributes<HTMLDivElement>) => (
  <div
    className={cn(
      "flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",
      className
    )}
    {...props}
  />
)
DialogFooter.displayName = "DialogFooter"

const DialogTitle = React.forwardRef<
  React.ElementRef<typeof DialogPrimitive.Title>,
  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>
>(({ className, ...props }, ref) => (
  <DialogPrimitive.Title
    ref={ref}
    className={cn(
      "text-lg font-semibold leading-none tracking-tight",
      className
    )}
    {...props}
  />
))
DialogTitle.displayName = DialogPrimitive.Title.displayName

const DialogDescription = React.forwardRef<
  React.ElementRef<typeof DialogPrimitive.Description>,
  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>
>(({ className, ...props }, ref) => (
  <DialogPrimitive.Description
    ref={ref}
    className={cn("text-sm text-muted-foreground", className)}
    {...props}
  />
))
DialogDescription.displayName = DialogPrimitive.Description.displayName

export {
  Dialog,
  DialogPortal,
  DialogOverlay,
  DialogTrigger,
  DialogClose,
  DialogContent,
  DialogHeader,
  DialogFooter,
  DialogTitle,
  DialogDescription,
}

```

## File: components\ui\dropdown-menu.tsx
```
"use client"

import * as React from "react"
import * as DropdownMenuPrimitive from "@radix-ui/react-dropdown-menu"
import { Check, ChevronRight, Circle } from "lucide-react"

import { cn } from "@/lib/utils"

const DropdownMenu = DropdownMenuPrimitive.Root

const DropdownMenuTrigger = DropdownMenuPrimitive.Trigger

const DropdownMenuGroup = DropdownMenuPrimitive.Group

const DropdownMenuPortal = DropdownMenuPrimitive.Portal

const DropdownMenuSub = DropdownMenuPrimitive.Sub

const DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup

const DropdownMenuSubTrigger = React.forwardRef<
  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,
  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {
    inset?: boolean
  }
>(({ className, inset, children, ...props }, ref) => (
  <DropdownMenuPrimitive.SubTrigger
    ref={ref}
    className={cn(
      "flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",
      inset && "pl-8",
      className
    )}
    {...props}
  >
    {children}
    <ChevronRight className="ml-auto" />
  </DropdownMenuPrimitive.SubTrigger>
))
DropdownMenuSubTrigger.displayName =
  DropdownMenuPrimitive.SubTrigger.displayName

const DropdownMenuSubContent = React.forwardRef<
  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,
  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>
>(({ className, ...props }, ref) => (
  <DropdownMenuPrimitive.SubContent
    ref={ref}
    className={cn(
      "z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",
      className
    )}
    {...props}
  />
))
DropdownMenuSubContent.displayName =
  DropdownMenuPrimitive.SubContent.displayName

const DropdownMenuContent = React.forwardRef<
  React.ElementRef<typeof DropdownMenuPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>
>(({ className, sideOffset = 4, ...props }, ref) => (
  <DropdownMenuPrimitive.Portal>
    <DropdownMenuPrimitive.Content
      ref={ref}
      sideOffset={sideOffset}
      className={cn(
        "z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md",
        "data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",
        className
      )}
      {...props}
    />
  </DropdownMenuPrimitive.Portal>
))
DropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName

const DropdownMenuItem = React.forwardRef<
  React.ElementRef<typeof DropdownMenuPrimitive.Item>,
  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {
    inset?: boolean
  }
>(({ className, inset, ...props }, ref) => (
  <DropdownMenuPrimitive.Item
    ref={ref}
    className={cn(
      "relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",
      inset && "pl-8",
      className
    )}
    {...props}
  />
))
DropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName

const DropdownMenuCheckboxItem = React.forwardRef<
  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,
  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>
>(({ className, children, checked, ...props }, ref) => (
  <DropdownMenuPrimitive.CheckboxItem
    ref={ref}
    className={cn(
      "relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",
      className
    )}
    checked={checked}
    {...props}
  >
    <span className="absolute left-2 flex h-3.5 w-3.5 items-center justify-center">
      <DropdownMenuPrimitive.ItemIndicator>
        <Check className="h-4 w-4" />
      </DropdownMenuPrimitive.ItemIndicator>
    </span>
    {children}
  </DropdownMenuPrimitive.CheckboxItem>
))
DropdownMenuCheckboxItem.displayName =
  DropdownMenuPrimitive.CheckboxItem.displayName

const DropdownMenuRadioItem = React.forwardRef<
  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,
  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>
>(({ className, children, ...props }, ref) => (
  <DropdownMenuPrimitive.RadioItem
    ref={ref}
    className={cn(
      "relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",
      className
    )}
    {...props}
  >
    <span className="absolute left-2 flex h-3.5 w-3.5 items-center justify-center">
      <DropdownMenuPrimitive.ItemIndicator>
        <Circle className="h-2 w-2 fill-current" />
      </DropdownMenuPrimitive.ItemIndicator>
    </span>
    {children}
  </DropdownMenuPrimitive.RadioItem>
))
DropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName

const DropdownMenuLabel = React.forwardRef<
  React.ElementRef<typeof DropdownMenuPrimitive.Label>,
  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {
    inset?: boolean
  }
>(({ className, inset, ...props }, ref) => (
  <DropdownMenuPrimitive.Label
    ref={ref}
    className={cn(
      "px-2 py-1.5 text-sm font-semibold",
      inset && "pl-8",
      className
    )}
    {...props}
  />
))
DropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName

const DropdownMenuSeparator = React.forwardRef<
  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,
  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>
>(({ className, ...props }, ref) => (
  <DropdownMenuPrimitive.Separator
    ref={ref}
    className={cn("-mx-1 my-1 h-px bg-muted", className)}
    {...props}
  />
))
DropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName

const DropdownMenuShortcut = ({
  className,
  ...props
}: React.HTMLAttributes<HTMLSpanElement>) => {
  return (
    <span
      className={cn("ml-auto text-xs tracking-widest opacity-60", className)}
      {...props}
    />
  )
}
DropdownMenuShortcut.displayName = "DropdownMenuShortcut"

export {
  DropdownMenu,
  DropdownMenuTrigger,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuCheckboxItem,
  DropdownMenuRadioItem,
  DropdownMenuLabel,
  DropdownMenuSeparator,
  DropdownMenuShortcut,
  DropdownMenuGroup,
  DropdownMenuPortal,
  DropdownMenuSub,
  DropdownMenuSubContent,
  DropdownMenuSubTrigger,
  DropdownMenuRadioGroup,
}

```

## File: components\ui\input.tsx
```
import * as React from "react"

import { cn } from "@/lib/utils"

const Input = React.forwardRef<HTMLInputElement, React.ComponentProps<"input">>(
  ({ className, type, ...props }, ref) => {
    return (
      <input
        type={type}
        className={cn(
          "flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",
          className
        )}
        ref={ref}
        {...props}
      />
    )
  }
)
Input.displayName = "Input"

export { Input }

```

## File: components\ui\label.tsx
```
"use client"

import * as React from "react"
import * as LabelPrimitive from "@radix-ui/react-label"
import { cva, type VariantProps } from "class-variance-authority"

import { cn } from "@/lib/utils"

const labelVariants = cva(
  "text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"
)

const Label = React.forwardRef<
  React.ElementRef<typeof LabelPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &
    VariantProps<typeof labelVariants>
>(({ className, ...props }, ref) => (
  <LabelPrimitive.Root
    ref={ref}
    className={cn(labelVariants(), className)}
    {...props}
  />
))
Label.displayName = LabelPrimitive.Root.displayName

export { Label }

```

## File: components\ui\navigation-menu.tsx
```
import * as React from "react"
import * as NavigationMenuPrimitive from "@radix-ui/react-navigation-menu"
import { cva } from "class-variance-authority"
import { ChevronDown } from "lucide-react"

import { cn } from "@/lib/utils"

const NavigationMenu = React.forwardRef<
  React.ElementRef<typeof NavigationMenuPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>
>(({ className, children, ...props }, ref) => (
  <NavigationMenuPrimitive.Root
    ref={ref}
    className={cn(
      "relative z-10 flex max-w-max flex-1 items-center justify-center",
      className
    )}
    {...props}
  >
    {children}
    <NavigationMenuViewport />
  </NavigationMenuPrimitive.Root>
))
NavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName

const NavigationMenuList = React.forwardRef<
  React.ElementRef<typeof NavigationMenuPrimitive.List>,
  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>
>(({ className, ...props }, ref) => (
  <NavigationMenuPrimitive.List
    ref={ref}
    className={cn(
      "group flex flex-1 list-none items-center justify-center space-x-1",
      className
    )}
    {...props}
  />
))
NavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName

const NavigationMenuItem = NavigationMenuPrimitive.Item

const navigationMenuTriggerStyle = cva(
  "group inline-flex h-9 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent"
)

const NavigationMenuTrigger = React.forwardRef<
  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,
  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>
>(({ className, children, ...props }, ref) => (
  <NavigationMenuPrimitive.Trigger
    ref={ref}
    className={cn(navigationMenuTriggerStyle(), "group", className)}
    {...props}
  >
    {children}{" "}
    <ChevronDown
      className="relative top-[1px] ml-1 h-3 w-3 transition duration-300 group-data-[state=open]:rotate-180"
      aria-hidden="true"
    />
  </NavigationMenuPrimitive.Trigger>
))
NavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName

const NavigationMenuContent = React.forwardRef<
  React.ElementRef<typeof NavigationMenuPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>
>(({ className, ...props }, ref) => (
  <NavigationMenuPrimitive.Content
    ref={ref}
    className={cn(
      "left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto ",
      className
    )}
    {...props}
  />
))
NavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName

const NavigationMenuLink = NavigationMenuPrimitive.Link

const NavigationMenuViewport = React.forwardRef<
  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,
  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>
>(({ className, ...props }, ref) => (
  <div className={cn("absolute left-0 top-full flex justify-center")}>
    <NavigationMenuPrimitive.Viewport
      className={cn(
        "origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]",
        className
      )}
      ref={ref}
      {...props}
    />
  </div>
))
NavigationMenuViewport.displayName =
  NavigationMenuPrimitive.Viewport.displayName

const NavigationMenuIndicator = React.forwardRef<
  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,
  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>
>(({ className, ...props }, ref) => (
  <NavigationMenuPrimitive.Indicator
    ref={ref}
    className={cn(
      "top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in",
      className
    )}
    {...props}
  >
    <div className="relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md" />
  </NavigationMenuPrimitive.Indicator>
))
NavigationMenuIndicator.displayName =
  NavigationMenuPrimitive.Indicator.displayName

export {
  navigationMenuTriggerStyle,
  NavigationMenu,
  NavigationMenuList,
  NavigationMenuItem,
  NavigationMenuContent,
  NavigationMenuTrigger,
  NavigationMenuLink,
  NavigationMenuIndicator,
  NavigationMenuViewport,
}

```

## File: components\ui\popover.tsx
```
"use client"

import * as React from "react"
import * as PopoverPrimitive from "@radix-ui/react-popover"

import { cn } from "@/lib/utils"

const Popover = PopoverPrimitive.Root

const PopoverTrigger = PopoverPrimitive.Trigger

const PopoverAnchor = PopoverPrimitive.Anchor

const PopoverContent = React.forwardRef<
  React.ElementRef<typeof PopoverPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>
>(({ className, align = "center", sideOffset = 4, ...props }, ref) => (
  <PopoverPrimitive.Portal>
    <PopoverPrimitive.Content
      ref={ref}
      align={align}
      sideOffset={sideOffset}
      className={cn(
        "z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",
        className
      )}
      {...props}
    />
  </PopoverPrimitive.Portal>
))
PopoverContent.displayName = PopoverPrimitive.Content.displayName

export { Popover, PopoverTrigger, PopoverContent, PopoverAnchor }

```

## File: components\ui\progress.tsx
```
"use client"

import * as React from "react"
import * as ProgressPrimitive from "@radix-ui/react-progress"

import { cn } from "@/lib/utils"

const Progress = React.forwardRef<
  React.ElementRef<typeof ProgressPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>
>(({ className, value, ...props }, ref) => (
  <ProgressPrimitive.Root
    ref={ref}
    className={cn(
      "relative h-2 w-full overflow-hidden rounded-full bg-primary/20",
      className
    )}
    {...props}
  >
    <ProgressPrimitive.Indicator
      className="h-full w-full flex-1 bg-primary transition-all"
      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}
    />
  </ProgressPrimitive.Root>
))
Progress.displayName = ProgressPrimitive.Root.displayName

export { Progress }

```

## File: components\ui\radio-group.tsx
```
"use client"

import * as React from "react"
import * as RadioGroupPrimitive from "@radix-ui/react-radio-group"
import { Circle } from "lucide-react"

import { cn } from "@/lib/utils"

const RadioGroup = React.forwardRef<
  React.ElementRef<typeof RadioGroupPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>
>(({ className, ...props }, ref) => {
  return (
    <RadioGroupPrimitive.Root
      className={cn("grid gap-2", className)}
      {...props}
      ref={ref}
    />
  )
})
RadioGroup.displayName = RadioGroupPrimitive.Root.displayName

const RadioGroupItem = React.forwardRef<
  React.ElementRef<typeof RadioGroupPrimitive.Item>,
  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>
>(({ className, ...props }, ref) => {
  return (
    <RadioGroupPrimitive.Item
      ref={ref}
      className={cn(
        "aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",
        className
      )}
      {...props}
    >
      <RadioGroupPrimitive.Indicator className="flex items-center justify-center">
        <Circle className="h-3.5 w-3.5 fill-primary" />
      </RadioGroupPrimitive.Indicator>
    </RadioGroupPrimitive.Item>
  )
})
RadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName

export { RadioGroup, RadioGroupItem }

```

## File: components\ui\scroll-area.tsx
```
"use client"

import * as React from "react"
import * as ScrollAreaPrimitive from "@radix-ui/react-scroll-area"

import { cn } from "@/lib/utils"

const ScrollArea = React.forwardRef<
  React.ElementRef<typeof ScrollAreaPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>
>(({ className, children, ...props }, ref) => (
  <ScrollAreaPrimitive.Root
    ref={ref}
    className={cn("relative overflow-hidden", className)}
    {...props}
  >
    <ScrollAreaPrimitive.Viewport className="h-full w-full rounded-[inherit]">
      {children}
    </ScrollAreaPrimitive.Viewport>
    <ScrollBar />
    <ScrollAreaPrimitive.Corner />
  </ScrollAreaPrimitive.Root>
))
ScrollArea.displayName = ScrollAreaPrimitive.Root.displayName

const ScrollBar = React.forwardRef<
  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,
  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>
>(({ className, orientation = "vertical", ...props }, ref) => (
  <ScrollAreaPrimitive.ScrollAreaScrollbar
    ref={ref}
    orientation={orientation}
    className={cn(
      "flex touch-none select-none transition-colors",
      orientation === "vertical" &&
        "h-full w-2.5 border-l border-l-transparent p-[1px]",
      orientation === "horizontal" &&
        "h-2.5 flex-col border-t border-t-transparent p-[1px]",
      className
    )}
    {...props}
  >
    <ScrollAreaPrimitive.ScrollAreaThumb className="relative flex-1 rounded-full bg-border" />
  </ScrollAreaPrimitive.ScrollAreaScrollbar>
))
ScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName

export { ScrollArea, ScrollBar }

```

## File: components\ui\select.tsx
```
"use client"

import * as React from "react"
import * as SelectPrimitive from "@radix-ui/react-select"
import { Check, ChevronDown, ChevronUp } from "lucide-react"

import { cn } from "@/lib/utils"

const Select = SelectPrimitive.Root

const SelectGroup = SelectPrimitive.Group

const SelectValue = SelectPrimitive.Value

const SelectTrigger = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.Trigger>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>
>(({ className, children, ...props }, ref) => (
  <SelectPrimitive.Trigger
    ref={ref}
    className={cn(
      "flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",
      className
    )}
    {...props}
  >
    {children}
    <SelectPrimitive.Icon asChild>
      <ChevronDown className="h-4 w-4 opacity-50" />
    </SelectPrimitive.Icon>
  </SelectPrimitive.Trigger>
))
SelectTrigger.displayName = SelectPrimitive.Trigger.displayName

const SelectScrollUpButton = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>
>(({ className, ...props }, ref) => (
  <SelectPrimitive.ScrollUpButton
    ref={ref}
    className={cn(
      "flex cursor-default items-center justify-center py-1",
      className
    )}
    {...props}
  >
    <ChevronUp className="h-4 w-4" />
  </SelectPrimitive.ScrollUpButton>
))
SelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName

const SelectScrollDownButton = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>
>(({ className, ...props }, ref) => (
  <SelectPrimitive.ScrollDownButton
    ref={ref}
    className={cn(
      "flex cursor-default items-center justify-center py-1",
      className
    )}
    {...props}
  >
    <ChevronDown className="h-4 w-4" />
  </SelectPrimitive.ScrollDownButton>
))
SelectScrollDownButton.displayName =
  SelectPrimitive.ScrollDownButton.displayName

const SelectContent = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>
>(({ className, children, position = "popper", ...props }, ref) => (
  <SelectPrimitive.Portal>
    <SelectPrimitive.Content
      ref={ref}
      className={cn(
        "relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",
        position === "popper" &&
          "data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",
        className
      )}
      position={position}
      {...props}
    >
      <SelectScrollUpButton />
      <SelectPrimitive.Viewport
        className={cn(
          "p-1",
          position === "popper" &&
            "h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"
        )}
      >
        {children}
      </SelectPrimitive.Viewport>
      <SelectScrollDownButton />
    </SelectPrimitive.Content>
  </SelectPrimitive.Portal>
))
SelectContent.displayName = SelectPrimitive.Content.displayName

const SelectLabel = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.Label>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>
>(({ className, ...props }, ref) => (
  <SelectPrimitive.Label
    ref={ref}
    className={cn("px-2 py-1.5 text-sm font-semibold", className)}
    {...props}
  />
))
SelectLabel.displayName = SelectPrimitive.Label.displayName

const SelectItem = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.Item>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>
>(({ className, children, ...props }, ref) => (
  <SelectPrimitive.Item
    ref={ref}
    className={cn(
      "relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",
      className
    )}
    {...props}
  >
    <span className="absolute right-2 flex h-3.5 w-3.5 items-center justify-center">
      <SelectPrimitive.ItemIndicator>
        <Check className="h-4 w-4" />
      </SelectPrimitive.ItemIndicator>
    </span>
    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>
  </SelectPrimitive.Item>
))
SelectItem.displayName = SelectPrimitive.Item.displayName

const SelectSeparator = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.Separator>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>
>(({ className, ...props }, ref) => (
  <SelectPrimitive.Separator
    ref={ref}
    className={cn("-mx-1 my-1 h-px bg-muted", className)}
    {...props}
  />
))
SelectSeparator.displayName = SelectPrimitive.Separator.displayName

export {
  Select,
  SelectGroup,
  SelectValue,
  SelectTrigger,
  SelectContent,
  SelectLabel,
  SelectItem,
  SelectSeparator,
  SelectScrollUpButton,
  SelectScrollDownButton,
}

```

# Project Application Context - Part 17

## File: components\ui\separator.tsx
```
"use client"

import * as React from "react"
import * as SeparatorPrimitive from "@radix-ui/react-separator"

import { cn } from "@/lib/utils"

const Separator = React.forwardRef<
  React.ElementRef<typeof SeparatorPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>
>(
  (
    { className, orientation = "horizontal", decorative = true, ...props },
    ref
  ) => (
    <SeparatorPrimitive.Root
      ref={ref}
      decorative={decorative}
      orientation={orientation}
      className={cn(
        "shrink-0 bg-border",
        orientation === "horizontal" ? "h-[1px] w-full" : "h-full w-[1px]",
        className
      )}
      {...props}
    />
  )
)
Separator.displayName = SeparatorPrimitive.Root.displayName

export { Separator }

```

## File: components\ui\sheet.tsx
```
"use client"

import * as React from "react"
import * as SheetPrimitive from "@radix-ui/react-dialog"
import { cva, type VariantProps } from "class-variance-authority"
import { X } from "lucide-react"

import { cn } from "@/lib/utils"

const Sheet = SheetPrimitive.Root

const SheetTrigger = SheetPrimitive.Trigger

const SheetClose = SheetPrimitive.Close

const SheetPortal = SheetPrimitive.Portal

const SheetOverlay = React.forwardRef<
  React.ElementRef<typeof SheetPrimitive.Overlay>,
  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>
>(({ className, ...props }, ref) => (
  <SheetPrimitive.Overlay
    className={cn(
      "fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",
      className
    )}
    {...props}
    ref={ref}
  />
))
SheetOverlay.displayName = SheetPrimitive.Overlay.displayName

const sheetVariants = cva(
  "fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",
  {
    variants: {
      side: {
        top: "inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",
        bottom:
          "inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",
        left: "inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",
        right:
          "inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm",
      },
    },
    defaultVariants: {
      side: "right",
    },
  }
)

interface SheetContentProps
  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,
    VariantProps<typeof sheetVariants> {}

const SheetContent = React.forwardRef<
  React.ElementRef<typeof SheetPrimitive.Content>,
  SheetContentProps
>(({ side = "right", className, children, ...props }, ref) => (
  <SheetPortal>
    <SheetOverlay />
    <SheetPrimitive.Content
      ref={ref}
      className={cn(sheetVariants({ side }), className)}
      {...props}
    >
      <SheetPrimitive.Close className="absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary">
        <X className="h-4 w-4" />
        <span className="sr-only">Close</span>
      </SheetPrimitive.Close>
      {children}
    </SheetPrimitive.Content>
  </SheetPortal>
))
SheetContent.displayName = SheetPrimitive.Content.displayName

const SheetHeader = ({
  className,
  ...props
}: React.HTMLAttributes<HTMLDivElement>) => (
  <div
    className={cn(
      "flex flex-col space-y-2 text-center sm:text-left",
      className
    )}
    {...props}
  />
)
SheetHeader.displayName = "SheetHeader"

const SheetFooter = ({
  className,
  ...props
}: React.HTMLAttributes<HTMLDivElement>) => (
  <div
    className={cn(
      "flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",
      className
    )}
    {...props}
  />
)
SheetFooter.displayName = "SheetFooter"

const SheetTitle = React.forwardRef<
  React.ElementRef<typeof SheetPrimitive.Title>,
  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>
>(({ className, ...props }, ref) => (
  <SheetPrimitive.Title
    ref={ref}
    className={cn("text-lg font-semibold text-foreground", className)}
    {...props}
  />
))
SheetTitle.displayName = SheetPrimitive.Title.displayName

const SheetDescription = React.forwardRef<
  React.ElementRef<typeof SheetPrimitive.Description>,
  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>
>(({ className, ...props }, ref) => (
  <SheetPrimitive.Description
    ref={ref}
    className={cn("text-sm text-muted-foreground", className)}
    {...props}
  />
))
SheetDescription.displayName = SheetPrimitive.Description.displayName

export {
  Sheet,
  SheetPortal,
  SheetOverlay,
  SheetTrigger,
  SheetClose,
  SheetContent,
  SheetHeader,
  SheetFooter,
  SheetTitle,
  SheetDescription,
}

```

## File: components\ui\skeleton.tsx
```
import { cn } from "@/lib/utils"

function Skeleton({
  className,
  ...props
}: React.HTMLAttributes<HTMLDivElement>) {
  return (
    <div
      className={cn("animate-pulse rounded-md bg-primary/10", className)}
      {...props}
    />
  )
}

export { Skeleton }

```

## File: components\ui\slider.tsx
```
"use client"

import * as React from "react"
import * as SliderPrimitive from "@radix-ui/react-slider"

import { cn } from "@/lib/utils"

const Slider = React.forwardRef<
  React.ElementRef<typeof SliderPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>
>(({ className, ...props }, ref) => (
  <SliderPrimitive.Root
    ref={ref}
    className={cn(
      "relative flex w-full touch-none select-none items-center",
      className
    )}
    {...props}
  >
    <SliderPrimitive.Track className="relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20">
      <SliderPrimitive.Range className="absolute h-full bg-primary" />
    </SliderPrimitive.Track>
    <SliderPrimitive.Thumb className="block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50" />
  </SliderPrimitive.Root>
))
Slider.displayName = SliderPrimitive.Root.displayName

export { Slider }

```

## File: components\ui\sonner.tsx
```
"use client"

import { useTheme } from "next-themes"
import { Toaster as Sonner } from "sonner"

type ToasterProps = React.ComponentProps<typeof Sonner>

const Toaster = ({ ...props }: ToasterProps) => {
  const { theme = "system" } = useTheme()

  return (
    <Sonner
      theme={theme as ToasterProps["theme"]}
      className="toaster group"
      toastOptions={{
        classNames: {
          toast:
            "group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",
          description: "group-[.toast]:text-muted-foreground",
          actionButton:
            "group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",
          cancelButton:
            "group-[.toast]:bg-muted group-[.toast]:text-muted-foreground",
        },
      }}
      {...props}
    />
  )
}

export { Toaster }

```

## File: components\ui\switch.tsx
```
"use client"

import * as React from "react"
import * as SwitchPrimitives from "@radix-ui/react-switch"

import { cn } from "@/lib/utils"

const Switch = React.forwardRef<
  React.ElementRef<typeof SwitchPrimitives.Root>,
  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>
>(({ className, ...props }, ref) => (
  <SwitchPrimitives.Root
    className={cn(
      "peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",
      className
    )}
    {...props}
    ref={ref}
  >
    <SwitchPrimitives.Thumb
      className={cn(
        "pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0"
      )}
    />
  </SwitchPrimitives.Root>
))
Switch.displayName = SwitchPrimitives.Root.displayName

export { Switch }

```

## File: components\ui\table.tsx
```
import * as React from "react"

import { cn } from "@/lib/utils"

const Table = React.forwardRef<
  HTMLTableElement,
  React.HTMLAttributes<HTMLTableElement>
>(({ className, ...props }, ref) => (
  <div className="relative w-full overflow-auto">
    <table
      ref={ref}
      className={cn("w-full caption-bottom text-sm", className)}
      {...props}
    />
  </div>
))
Table.displayName = "Table"

const TableHeader = React.forwardRef<
  HTMLTableSectionElement,
  React.HTMLAttributes<HTMLTableSectionElement>
>(({ className, ...props }, ref) => (
  <thead ref={ref} className={cn("[&_tr]:border-b", className)} {...props} />
))
TableHeader.displayName = "TableHeader"

const TableBody = React.forwardRef<
  HTMLTableSectionElement,
  React.HTMLAttributes<HTMLTableSectionElement>
>(({ className, ...props }, ref) => (
  <tbody
    ref={ref}
    className={cn("[&_tr:last-child]:border-0", className)}
    {...props}
  />
))
TableBody.displayName = "TableBody"

const TableFooter = React.forwardRef<
  HTMLTableSectionElement,
  React.HTMLAttributes<HTMLTableSectionElement>
>(({ className, ...props }, ref) => (
  <tfoot
    ref={ref}
    className={cn(
      "border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",
      className
    )}
    {...props}
  />
))
TableFooter.displayName = "TableFooter"

const TableRow = React.forwardRef<
  HTMLTableRowElement,
  React.HTMLAttributes<HTMLTableRowElement>
>(({ className, ...props }, ref) => (
  <tr
    ref={ref}
    className={cn(
      "border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",
      className
    )}
    {...props}
  />
))
TableRow.displayName = "TableRow"

const TableHead = React.forwardRef<
  HTMLTableCellElement,
  React.ThHTMLAttributes<HTMLTableCellElement>
>(({ className, ...props }, ref) => (
  <th
    ref={ref}
    className={cn(
      "h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",
      className
    )}
    {...props}
  />
))
TableHead.displayName = "TableHead"

const TableCell = React.forwardRef<
  HTMLTableCellElement,
  React.TdHTMLAttributes<HTMLTableCellElement>
>(({ className, ...props }, ref) => (
  <td
    ref={ref}
    className={cn(
      "p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",
      className
    )}
    {...props}
  />
))
TableCell.displayName = "TableCell"

const TableCaption = React.forwardRef<
  HTMLTableCaptionElement,
  React.HTMLAttributes<HTMLTableCaptionElement>
>(({ className, ...props }, ref) => (
  <caption
    ref={ref}
    className={cn("mt-4 text-sm text-muted-foreground", className)}
    {...props}
  />
))
TableCaption.displayName = "TableCaption"

export {
  Table,
  TableHeader,
  TableBody,
  TableFooter,
  TableHead,
  TableRow,
  TableCell,
  TableCaption,
}

```

## File: components\ui\tabs.tsx
```
"use client"

import * as React from "react"
import * as TabsPrimitive from "@radix-ui/react-tabs"

import { cn } from "@/lib/utils"

const Tabs = TabsPrimitive.Root

const TabsList = React.forwardRef<
  React.ElementRef<typeof TabsPrimitive.List>,
  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>
>(({ className, ...props }, ref) => (
  <TabsPrimitive.List
    ref={ref}
    className={cn(
      "inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",
      className
    )}
    {...props}
  />
))
TabsList.displayName = TabsPrimitive.List.displayName

const TabsTrigger = React.forwardRef<
  React.ElementRef<typeof TabsPrimitive.Trigger>,
  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>
>(({ className, ...props }, ref) => (
  <TabsPrimitive.Trigger
    ref={ref}
    className={cn(
      "inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",
      className
    )}
    {...props}
  />
))
TabsTrigger.displayName = TabsPrimitive.Trigger.displayName

const TabsContent = React.forwardRef<
  React.ElementRef<typeof TabsPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>
>(({ className, ...props }, ref) => (
  <TabsPrimitive.Content
    ref={ref}
    className={cn(
      "mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",
      className
    )}
    {...props}
  />
))
TabsContent.displayName = TabsPrimitive.Content.displayName

export { Tabs, TabsList, TabsTrigger, TabsContent }

```

## File: components\ui\tooltip.tsx
```
"use client"

import * as React from "react"
import * as TooltipPrimitive from "@radix-ui/react-tooltip"

import { cn } from "@/lib/utils"

const TooltipProvider = TooltipPrimitive.Provider

const Tooltip = TooltipPrimitive.Root

const TooltipTrigger = TooltipPrimitive.Trigger

const TooltipContent = React.forwardRef<
  React.ElementRef<typeof TooltipPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>
>(({ className, sideOffset = 4, ...props }, ref) => (
  <TooltipPrimitive.Portal>
    <TooltipPrimitive.Content
      ref={ref}
      sideOffset={sideOffset}
      className={cn(
        "z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",
        className
      )}
      {...props}
    />
  </TooltipPrimitive.Portal>
))
TooltipContent.displayName = TooltipPrimitive.Content.displayName

export { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }

```

## File: lib\api-middleware.ts
```
import { NextRequest, NextResponse } from 'next/server';
import { createServerSupabaseClient } from '@/app/utils/supabase-server';
import { checkRateLimit } from '@/app/utils/rateLimit';

type ProtectedHandler = (
    req: NextRequest,
    session: { user: any },
    params?: any
) => Promise<NextResponse>;

interface AuthOptions {
    rateLimit?: {
        limit: number;
        windowMs: number;
    };
}

export async function withAuth(
    req: NextRequest,
    handler: ProtectedHandler,
    options: AuthOptions = {}
) {
    try {
        // 1. Rate Limiting
        const rateLimitConfig = options.rateLimit || { limit: 20, windowMs: 60 * 1000 };
        // Use IP or a simplified identifier if possible, for now falling back to simple check
        // In a real edge environment, get IP from headers
        const ip = req.headers.get('x-forwarded-for') || 'unknown';

        const rateLimitResult = await checkRateLimit(ip, rateLimitConfig.limit, rateLimitConfig.windowMs);
        if (!rateLimitResult.success) {
            return NextResponse.json(
                { error: 'Too many requests', retryAfter: rateLimitResult.retryAfter },
                { status: 429 }
            );
        }

        // 2. Authentication
        const supabase = await createServerSupabaseClient();
        const { data: { user }, error } = await supabase.auth.getUser();

        if (error || !user) {
            return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });
        }

        // 3. Handover to handler
        return handler(req, { user }, undefined); // params passed separately usually
    } catch (error) {
        console.error('API Middleware Error:', error);
        return NextResponse.json({ error: 'Internal Server Error' }, { status: 500 });
    }
}

```

## File: lib\error-tracking.ts
```
/**
 * Utility to track errors to the server
 */
export const trackError = async (error: Error, context: Record<string, any> = {}) => {
    // Log to console in development
    if (process.env.NODE_ENV === 'development') {
        console.error('[ErrorTracker]', error, context);
    }

    try {
        await fetch('/api/errors', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                message: error.message,
                stack: error.stack,
                context,
                timestamp: new Date().toISOString(),
                url: typeof window !== 'undefined' ? window.location.href : '',
                userAgent: typeof navigator !== 'undefined' ? navigator.userAgent : '',
            }),
        });
    } catch (loggingError) {
        // Fallback if logging fails
        console.error('Failed to report error:', loggingError);
    }
};

```

## File: lib\utils.ts
```
import { clsx, type ClassValue } from "clsx"
import { twMerge } from "tailwind-merge"

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs))
}

```

## File: public\manifest.json
```
{
    "name": "VolleySimulator",
    "short_name": "VolleySim",
    "description": "Voleybol Ligi Puan Durumu ve Play-Off SimÃ¼lasyonu",
    "start_url": "/",
    "display": "standalone",
    "orientation": "portrait",
    "background_color": "#0f172a",
    "theme_color": "#0f172a",
    "icons": [
        {
            "src": "/favicon.ico",
            "sizes": "64x64",
            "type": "image/x-icon"
        },
        {
            "src": "/logo.png",
            "sizes": "192x192",
            "type": "image/png"
        },
        {
            "src": "/logo.png",
            "sizes": "512x512",
            "type": "image/png"
        }
    ]
}
```

# Project Application Context - Part 2

## File: app\1lig\playoffs\OneLigPlayoffsClient.tsx
```
"use client";

import { useEffect, useState, useMemo } from "react";
import { TeamStats, Match } from "../../types";
import Link from "next/link";
import {
    PlayoffGroup,
    calculateGroupStandings,
    generate1LigSemiGroups,
    generate1LigFinalGroups,
    applyOverridesToGroups
} from "../../utils/playoffUtils";
import { calculateLiveStandings } from "../../utils/calculatorUtils";

import TeamAvatar from "../../components/TeamAvatar";

interface OneLigPlayoffsClientProps {
    initialTeams: TeamStats[];
    initialMatches: Match[];
}

export default function OneLigPlayoffsClient({ initialTeams, initialMatches }: OneLigPlayoffsClientProps) {
    const [groupOverrides, setGroupOverrides] = useState<Record<string, string>>({});
    const [playoffOverrides, setPlayoffOverrides] = useState<Record<string, string>>({});
    const [isLoaded, setIsLoaded] = useState(false);

    useEffect(() => {
        const loadSaved = () => {
            const savedPlayoff = localStorage.getItem('1ligPlayoffScenarios');
            if (savedPlayoff) {
                try {
                    setPlayoffOverrides(JSON.parse(savedPlayoff));
                } catch (e) { console.error(e); }
            }

            const savedGroup = localStorage.getItem('1ligGroupScenarios');
            if (savedGroup) {
                try {
                    const parsed = JSON.parse(savedGroup);
                    let flatOverrides: Record<string, string> = {};
                    Object.values(parsed).forEach((groupObj: any) => {
                        flatOverrides = { ...flatOverrides, ...groupObj };
                    });
                    setGroupOverrides(flatOverrides);
                } catch (e) { console.error(e); }
            }
            setIsLoaded(true);
        };

        Promise.resolve().then(loadSaved);
    }, []);

    const baseStandings = useMemo(() => {
        const calculatedTeams = calculateLiveStandings(initialTeams, initialMatches, groupOverrides);
        return calculateGroupStandings(calculatedTeams);
    }, [initialTeams, initialMatches, groupOverrides]);

    const semiGroups = useMemo(() => {
        const ss = generate1LigSemiGroups(baseStandings);
        return applyOverridesToGroups(ss, playoffOverrides, 'semi');
    }, [baseStandings, playoffOverrides]);

    const finalGroups = useMemo(() => {
        const fs = generate1LigFinalGroups(semiGroups);
        return applyOverridesToGroups(fs, playoffOverrides, 'final');
    }, [semiGroups, playoffOverrides]);

    const remainingMatchesCount = useMemo(() => {
        let remaining = initialMatches.filter((m: Match) => !m.isPlayed).length;
        remaining = Math.max(0, remaining - Object.keys(groupOverrides).length);
        return remaining;
    }, [initialMatches, groupOverrides]);

    const isGroupsComplete = remainingMatchesCount === 0;

    const renderStageGroups = (stage: string, groups: PlayoffGroup[], title: string, color: string) => {
        return (
            <div className="space-y-4">
                <h2 className="text-xl font-bold text-white flex items-center gap-2">
                    <span className={`w-3 h-3 rounded-full ${color}`}></span>
                    {title}
                </h2>
                <div className={`grid grid-cols-1 ${groups.length === 1 ? 'md:grid-cols-1 max-w-2xl' : 'md:grid-cols-2'} gap-4`}>
                    {groups.map(group => {
                        const groupPrefix = `${stage}-${group.groupName}-`;
                        const groupMatches = Object.keys(playoffOverrides).filter(k => k.startsWith(groupPrefix)).length;
                        const totalMatches = 6;
                        const isComplete = groupMatches >= totalMatches;

                        return (
                            <Link
                                key={group.groupName}
                                href={`/1lig/playoffs/${stage}/${group.groupName}`}
                                className="block bg-slate-900 border border-slate-800 rounded-lg overflow-hidden hover:border-slate-600 hover:shadow-lg transition-all group"
                            >
                                <div className={`h-2 ${color}/50`}></div>
                                <div className="p-4">
                                    <div className="flex justify-between items-center mb-2">
                                        <h3 className="font-bold text-white text-lg group-hover:text-emerald-400 transition-colors">
                                            {group.groupName === 'Final' ? 'Final Grubu' : `${group.groupName}. Grup`}
                                        </h3>
                                        {isComplete ? (
                                            <span className="text-xs bg-emerald-500/10 text-emerald-400 px-2 py-0.5 rounded border border-emerald-500/20">TamamlandÄ±</span>
                                        ) : (
                                            <span className="text-xs bg-slate-800 text-slate-400 px-2 py-0.5 rounded text-nowrap">{totalMatches - groupMatches} MaÃ§ Eksik</span>
                                        )}
                                    </div>
                                    <div className="space-y-0.5">
                                        <div className="flex items-center justify-between text-[10px] text-slate-500 px-2 pb-1 border-b border-slate-800/50">
                                            <span>#</span>
                                            <span className="flex-1 px-2">TakÄ±m</span>
                                            <span className="w-12 text-center text-[9px]">Kaynak</span>
                                            <span>P</span>
                                        </div>
                                        {group.teams.map((team, idx) => (
                                            <div key={team.name} className={`flex items-center justify-between text-xs py-1 px-2 rounded ${idx < 2 ? 'bg-emerald-500/5' : ''}`}>
                                                <div className="flex items-center gap-2 flex-1 min-w-0">
                                                    <span className={`w-3 text-center text-[10px] ${idx < 2 ? 'text-emerald-400 font-bold' : 'text-slate-500'}`}>{idx + 1}</span>
                                                    <TeamAvatar name={team.name} size="xs" />
                                                    <span className={`truncate ${idx < 2 ? 'text-slate-200 font-medium' : 'text-slate-400'}`}>{team.name}</span>
                                                </div>
                                                <span className="w-12 text-center text-[9px] text-slate-600 truncate px-1">
                                                    {team.sourceGroup}
                                                </span>
                                                <span className={`font-bold ml-2 w-4 text-center ${idx < 2 ? 'text-white' : 'text-slate-500'}`}>
                                                    {team.scenarioPoints ?? 0}
                                                </span>
                                            </div>
                                        ))}
                                    </div>
                                    <div className="mt-2 pt-2 border-t border-slate-800 text-[10px] text-slate-500 flex items-center gap-1">
                                        <span className={`w-2 h-2 rounded-full ${stage === 'final' ? 'bg-amber-500' : 'bg-emerald-500'}`}></span>
                                        <span>{stage === 'final' ? 'Sultanlar Ligi\'ne YÃ¼kselir' : 'Finale YÃ¼kselir'}</span>
                                    </div>
                                </div>
                            </Link>
                        );
                    })}
                </div>
            </div>
        );
    };

    return (
        <main className="min-h-screen bg-slate-950 text-slate-100 p-4 md:p-8 font-sans">
            <div className="max-w-7xl mx-auto space-y-8">
                <div className="flex flex-col gap-1">
                    <h1 className="font-bold text-white text-lg tracking-tight leading-none hidden sm:block">1. Lig Play-Off</h1>
                    <p className="text-[10px] text-slate-400 hidden sm:block">Sultanlar Ligi yÃ¼kselme mÃ¼cadelesi</p>
                </div>

                {!isGroupsComplete && (
                    <div className="bg-amber-500/10 border border-amber-500/20 text-amber-200 p-4 rounded-lg flex items-center gap-3">
                        <span className="text-2xl">âš ï¸</span>
                        <div>
                            <p className="font-bold text-sm">Grup MaÃ§larÄ± HenÃ¼z TamamlanmadÄ±</p>
                            <p className="text-xs opacity-70">
                                Play-Off senaryolarÄ± mevcut grup sÄ±ralamalarÄ±na gÃ¶re hesaplanmaktadÄ±r.
                                Kesin sonuÃ§lar iÃ§in Ã¶nce grup maÃ§larÄ±nÄ± tamamlayÄ±n.
                            </p>
                        </div>
                    </div>
                )}

                {(() => {
                    const finalGroup = finalGroups[0];
                    if (!finalGroup) return null;

                    const groupMatches = Object.keys(playoffOverrides).filter(k => k.startsWith(`final-${finalGroup.groupName}-`)).length;
                    const totalMatches = 6;

                    if (groupMatches < totalMatches) return null;

                    const promotedTeams = finalGroup.teams.slice(0, 2).map((t, i) => ({ ...t, rank: i + 1 }));

                    if (promotedTeams.length === 0) return null;

                    return (
                        <div className="bg-gradient-to-r from-emerald-900/50 via-slate-900 to-emerald-900/30 border border-emerald-500/30 rounded-xl p-6 relative overflow-hidden">
                            <h2 className="text-2xl font-bold text-white mb-6 flex items-center gap-2 relative z-10">
                                <span className="text-3xl">ğŸ‰</span>
                                <span className="bg-clip-text text-transparent bg-gradient-to-r from-emerald-400 to-teal-200">
                                    Sultanlar Ligi&apos;ne YÃ¼kselen TakÄ±mlar
                                </span>
                            </h2>

                            <div className="grid grid-cols-1 lg:grid-cols-2 gap-6 relative z-10">
                                <div className="flex flex-col gap-3">
                                    {promotedTeams.map((team, idx) => (
                                        <div key={idx} className={`flex items-center gap-3 p-3 rounded-lg border backdrop-blur-sm transition-transform hover:scale-[1.02] ${team.rank === 1 ? 'bg-amber-500/10 border-amber-500/40' : 'bg-slate-700/30 border-slate-600/50'}`}>
                                            <div className={`w-10 h-10 flex items-center justify-center rounded-full text-lg font-bold shadow-lg ${team.rank === 1 ? 'bg-gradient-to-b from-amber-300 to-amber-600 text-white' : 'bg-gradient-to-b from-slate-300 to-slate-500 text-white'}`}>
                                                {team.rank === 1 ? 'ğŸ¥‡' : 'ğŸ¥ˆ'}
                                            </div>
                                            <TeamAvatar name={team.name} size="md" />
                                            <div className="flex-1">
                                                <div className="font-bold text-white text-lg leading-tight">{team.name}</div>
                                                <div className={`text-xs ${team.rank === 1 ? 'text-amber-400' : 'text-slate-400'}`}>
                                                    1. Lig {team.rank === 1 ? 'Åampiyonu' : 'Ä°kincisi'}
                                                </div>
                                            </div>
                                            <div className={`text-2xl ${team.rank === 1 ? 'text-amber-400' : 'text-slate-500'}`}>
                                                {team.rank === 1 ? 'ğŸ‘‘' : 'â­'}
                                            </div>
                                        </div>
                                    ))}
                                </div>

                                <div className="flex flex-col items-center justify-center gap-4 bg-slate-800/30 rounded-xl p-6 border border-slate-700/50">
                                    <div className="text-8xl animate-bounce">ğŸ†</div>
                                    <div className="text-center">
                                        <div className="text-lg font-bold text-white mb-1">Turnuva TamamlandÄ±</div>
                                        <div className="text-sm text-slate-400">1. Lig Play-Off 2025-26</div>
                                    </div>
                                    <div className="text-xs text-slate-500 mt-2 text-center">
                                        ğŸŠ Tebrikler! Sultanlar Ligi&apos;ne yÃ¼kselmeye hak kazandÄ±nÄ±z!
                                    </div>
                                </div>
                            </div>
                        </div>
                    );
                })()}

                {isGroupsComplete ? (
                    (() => {
                        const semiMatchCount = Object.keys(playoffOverrides).filter(k => k.startsWith('semi-')).length;
                        const isSemiComplete = semiMatchCount >= 12;

                        return (
                            <div className="space-y-12">
                                {renderStageGroups('semi', semiGroups, 'YarÄ± Final GruplarÄ±', 'bg-blue-500')}

                                <div className="relative">
                                    {!isSemiComplete && (
                                        <div className="absolute inset-0 bg-slate-950/80 backdrop-blur-sm z-20 flex flex-col items-center justify-center rounded-xl py-8">
                                            <div className="text-4xl mb-2">ğŸ”’</div>
                                            <h3 className="text-lg font-bold text-white mb-1">Final Grubu Kilitli</h3>
                                            <p className="text-slate-400 text-xs text-center max-w-sm">
                                                Final grubunu aÃ§mak iÃ§in YarÄ± Final gruplarÄ±nÄ± tamamlayÄ±n.
                                            </p>
                                            <p className="text-blue-400 text-sm font-medium mt-2">
                                                {12 - semiMatchCount} / 12 maÃ§ eksik
                                            </p>
                                        </div>
                                    )}
                                    <div className={!isSemiComplete ? 'opacity-30 pointer-events-none select-none' : ''}>
                                        {renderStageGroups('final', finalGroups, 'Final Grubu', 'bg-emerald-500')}
                                    </div>
                                </div>
                            </div>
                        );
                    })()
                ) : (
                    <div className="relative">
                        <div className="absolute inset-0 bg-slate-950/80 backdrop-blur-sm z-20 flex flex-col items-center justify-start pt-16 rounded-xl">
                            <div className="text-6xl mb-4">ğŸ”’</div>
                            <h3 className="text-xl font-bold text-white mb-2">Play-Off Kilitli</h3>
                            <p className="text-slate-400 text-sm text-center max-w-md mb-4">
                                Play-Off senaryolarÄ±nÄ± dÃ¼zenleyebilmek iÃ§in Ã¶nce tÃ¼m grup maÃ§larÄ±nÄ± tahmin etmeniz gerekmektedir.
                            </p>
                            <p className="text-amber-400 font-medium">
                                {remainingMatchesCount} maÃ§ eksik
                            </p>
                            <Link href="/1lig/tahminoyunu" className="mt-4 px-4 py-2 bg-amber-600 hover:bg-amber-500 text-white font-bold rounded-lg transition-colors">
                                Tahminleri Tamamla â†’
                            </Link>
                        </div>
                        <div className="opacity-30 pointer-events-none select-none space-y-12">
                            {renderStageGroups('semi', semiGroups, 'YarÄ± Final GruplarÄ±', 'bg-blue-500')}
                            {renderStageGroups('final', finalGroups, 'Final Grubu', 'bg-emerald-500')}
                        </div>
                    </div>
                )}
            </div>
        </main>
    );
}

```

## File: app\1lig\playoffs\page.tsx
```
import { Metadata } from "next";
import { getLeagueData } from "../../utils/serverData";
import OneLigPlayoffsClient from "./OneLigPlayoffsClient";

export const metadata: Metadata = {
    title: "1. Lig Playoff SimÃ¼lasyonu",
    description: "1. Lig playoff simÃ¼lasyonu. Grup birincileri ve ikincileri arasÄ±ndaki eÅŸleÅŸmeleri simÃ¼le edin.",
    openGraph: {
        title: "1. Lig Playoff SimÃ¼lasyonu | VolleySimulator",
        description: "1. Lig playoff eÅŸleÅŸmelerini simÃ¼le edin.",
    },
};

export default async function Playoffs1LigPage() {
    const { teams, fixture } = await getLeagueData("1lig");

    return (
        <OneLigPlayoffsClient initialTeams={teams} initialMatches={fixture} />
    );
}

```

## File: app\1lig\playoffs\[stage]\[groupId]\page.tsx
```
"use client";

import { useEffect, useState } from "react";
import { useParams, useRouter } from "next/navigation";
import { Match, TeamStats } from "../../../../types";
import Link from "next/link";
import {
    GroupStanding,
    PlayoffGroup,
    PlayoffMatch,
    SCORES,
    calculateGroupStandings,
    generate1LigSemiGroups,
    generate1LigFinalGroups,
    generateGroupFixture,
    applyOverridesToGroups
} from "../../../../utils/playoffUtils";


export default function OneLigPlayoffGroupDetailPage() {
    const params = useParams();
    const router = useRouter();
    const stage = params.stage as 'semi' | 'final';
    const groupId = params.groupId as string;

    const [loading, setLoading] = useState(true);
    const [currentGroup, setCurrentGroup] = useState<PlayoffGroup | null>(null);
    const [groupFixture, setGroupFixture] = useState<PlayoffMatch[]>([]);
    const [overrides, setOverrides] = useState<Record<string, string>>({});
    const [originalFixture, setOriginalFixture] = useState<Match[]>([]);
    const [baseStandings, setBaseStandings] = useState<GroupStanding[]>([]);

    const [saveStatus, setSaveStatus] = useState<'saved' | 'saving' | 'idle'>('idle');
    const [isLoaded, setIsLoaded] = useState(false);
    const [predicting, setPredicting] = useState(false);
    const [initialRanks, setInitialRanks] = useState<Map<string, number>>(new Map());

    // 1. Load Overrides
    useEffect(() => {
        const saved = localStorage.getItem('1ligPlayoffScenarios');
        if (saved) {
            try {
                setOverrides(JSON.parse(saved));
            } catch (e) { console.error(e); }
        }
        setIsLoaded(true);
    }, []);

    // 2. Fetch Base Data
    useEffect(() => {
        async function fetchBaseData() {
            try {
                setLoading(true);
                const res = await fetch("/api/1lig");
                if (!res.ok) throw new Error("Veri Ã§ekilemedi");
                const data = await res.json();
                setOriginalFixture(data.fixture);
                // Important: Need to ensure calculateGroupStandings returns 'teams' array
                const standings = calculateGroupStandings(data.teams);
                setBaseStandings(standings);
            } catch (err) { console.error(err); }
            finally { setLoading(false); }
        }
        fetchBaseData();
    }, []);

    // 3. Auto-save
    useEffect(() => {
        if (!isLoaded) return;
        setSaveStatus('saving');
        const timer = setTimeout(() => {
            localStorage.setItem('1ligPlayoffScenarios', JSON.stringify(overrides));
            setSaveStatus('saved');
        }, 500);
        return () => clearTimeout(timer);
    }, [overrides, isLoaded]);

    // 4. Core Logic
    useEffect(() => {
        if (!originalFixture.length || !baseStandings.length) return;

        // 1. Lig Logic: Semi -> Final
        const semis = generate1LigSemiGroups(baseStandings);

        let targetGroups: PlayoffGroup[] = [];

        if (stage === 'semi') {
            targetGroups = semis;
        } else if (stage === 'final') {
            const updatedSemis = applyOverridesToGroups(semis, overrides, 'semi');
            targetGroups = generate1LigFinalGroups(updatedSemis);
        }

        const foundGroup = targetGroups.find(g => g.groupName === groupId);

        if (foundGroup) {
            const rankMap = new Map<string, number>();
            foundGroup.teams.forEach((t, i) => rankMap.set(t.name, i + 1));
            setInitialRanks(rankMap);

            const updatedGroupArray = applyOverridesToGroups([foundGroup], overrides, stage);
            setCurrentGroup(updatedGroupArray[0]);

            const fixture = generateGroupFixture([foundGroup], stage);
            setGroupFixture(fixture);
        }

    }, [baseStandings, originalFixture, overrides, stage, groupId]);

    function handleScoreSelect(matchId: string, score: string | null) {
        setOverrides(prev => {
            const next = { ...prev };
            if (score === null) delete next[matchId];
            else next[matchId] = score;
            return next;
        });
    }

    function predictGroupMatches() {
        if (!currentGroup) return;
        setPredicting(true);
        try {
            const predictions: Record<string, string> = {};
            const scores = ['3-0', '3-1', '3-2', '2-3', '1-3', '0-3'];
            groupFixture.forEach(match => {
                const randomScore = scores[Math.floor(Math.random() * scores.length)];
                predictions[match.id] = randomScore;
            });
            setOverrides(prev => ({ ...prev, ...predictions }));
        } finally { setPredicting(false); }
    }

    const stageInfo = stage === 'semi'
        ? { title: 'YarÄ± Final', color: 'from-blue-600 to-blue-500', text: 'text-blue-500', nextStage: 'Final' }
        : { title: 'Final', color: 'from-emerald-600 to-emerald-500', text: 'text-emerald-500', nextStage: 'Sultanlar Ligi' };

    const navGroups = stage === 'semi' ? ['I', 'II'] : ['Final'];

    if (loading) return <div className="h-screen flex items-center justify-center bg-slate-950"><div className="animate-spin rounded-full h-8 w-8 border-b-2 border-white"></div></div>;
    if (!currentGroup) return <div className="h-screen flex items-center justify-center bg-slate-950 text-white">Grup BulunamadÄ±</div>;

    return (
        <main className="h-screen overflow-hidden bg-slate-950 text-slate-100 flex flex-col p-2 sm:p-4 font-sans">
            <div className="w-full max-w-[1400px] mx-auto flex flex-col h-full gap-3">
                {/* Header */}
                <div className="flex flex-col sm:flex-row items-center justify-between bg-slate-900 border border-slate-800 rounded-lg p-2 gap-2 flex-shrink-0">
                    <div className="flex items-center gap-3 w-full sm:w-auto overflow-hidden">
                        <Link href="/1lig/playoffs" className="flex-shrink-0 p-1.5 bg-slate-800 hover:bg-slate-700 rounded transition-colors text-slate-400 hover:text-white text-xs flex items-center gap-1">
                            <span>â†</span> <span className="hidden sm:inline">Play-off Ana Sayfa</span>
                        </Link>
                        <div className="flex-1 min-w-0">
                            <h1 className="text-lg font-bold text-white tracking-tight truncate flex items-center gap-2">
                                <span className={`${stageInfo.text}`}>{stageInfo.title}</span>
                                <span className="text-slate-600">|</span>
                                <span>{currentGroup.groupName === 'Final' ? 'Final Grubu' : `${currentGroup.groupName}. Grup`}</span>
                            </h1>
                        </div>
                    </div>

                    <div className="flex items-center gap-2">
                        <div className="flex items-center gap-1 bg-slate-950/50 p-1 rounded-md">
                            {navGroups.map(gId => (
                                <Link
                                    key={gId}
                                    href={`/1lig/playoffs/${stage}/${gId}`}
                                    className={`px-2.5 py-1 text-xs font-bold rounded transition-all ${gId === groupId ? 'bg-gradient-to-r ' + stageInfo.color + ' text-white' : 'text-slate-500 hover:bg-slate-800'}`}
                                >
                                    {gId}
                                </Link>
                            ))}
                        </div>
                        <button onClick={() => {
                            const ids = groupFixture.map(m => m.id);
                            setOverrides(prev => { const n = { ...prev }; ids.forEach(id => delete n[id]); return n; });
                        }} className="px-2 py-1 bg-slate-800 text-rose-400 text-xs rounded hover:bg-rose-900/20">SÄ±fÄ±rla</button>
                    </div>
                </div>

                {/* Content */}
                <div className="grid lg:grid-cols-12 gap-3 flex-1 min-h-0">
                    {/* Standings */}
                    <div className="lg:col-span-5 flex flex-col h-full gap-3">
                        <div className="flex flex-col gap-0 min-h-0">
                            <div className={`bg-gradient-to-r ${stageInfo.color} px-3 py-1.5 rounded-t-lg shadow`}><h2 className="text-xs font-bold text-white text-center">PUAN DURUMU</h2></div>
                            <div className="bg-slate-900 border border-slate-800 rounded-b-lg overflow-x-auto">
                                <table className="w-full text-xs text-left table-fixed">
                                    <thead className="bg-slate-800 text-slate-400 uppercase text-[9px]">
                                        <tr>
                                            <th scope="col" className="px-1 py-2 w-6 text-center">#</th>
                                            <th scope="col" className="px-2 py-2 text-left w-auto">TakÄ±m</th>
                                            <th scope="col" className="px-1 py-1 text-center w-6">O</th>
                                            <th scope="col" className="px-1 py-1 text-center w-6">G</th>
                                            <th scope="col" className="px-1 py-1 text-center w-6">M</th>
                                            <th scope="col" className="px-1 py-1 text-center w-7 font-bold text-slate-200">P</th>
                                        </tr>
                                    </thead>
                                    <tbody className="divide-y divide-slate-800/50">
                                        {currentGroup.teams.map((team, idx) => {
                                            const isQualifying = idx < 2;
                                            return (
                                                <tr key={team.name} className={`hover:bg-slate-800/50 ${isQualifying ? 'bg-emerald-950/10' : ''}`}>
                                                    <td className={`px-1 py-1.5 text-center font-medium ${isQualifying ? 'text-emerald-400' : 'text-slate-500'}`}>{idx + 1}</td>
                                                    <td className="px-2 py-1.5">
                                                        <div className="font-semibold text-white text-xs truncate w-24 sm:w-auto">{team.name}</div>
                                                        <div className="text-[9px] text-slate-500">{team.sourceGroup}</div>
                                                    </td>
                                                    <td className="px-1 py-1.5 text-center text-slate-400">{team.scenarioPlayed}</td>
                                                    <td className="px-1 py-1.5 text-center text-emerald-400">{team.scenarioWins}</td>
                                                    <td className="px-1 py-1.5 text-center text-rose-400">{team.scenarioLosses}</td>
                                                    <td className="px-1 py-1.5 text-center font-bold text-white bg-slate-800/30 rounded">{team.scenarioPoints}</td>
                                                </tr>
                                            );
                                        })}
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        {/* Projection */}
                        <div className="bg-slate-900 border border-slate-800 rounded-lg p-3 flex-1">
                            <h3 className="text-xs font-bold text-slate-400 uppercase tracking-wide mb-3 text-center border-b border-slate-800/50 pb-2">ğŸ”® {stageInfo.nextStage} YolculuÄŸu</h3>
                            <div className="space-y-2">
                                <div className={`flex items-center gap-3 p-2 rounded-lg border ${stage === 'final' ? 'bg-amber-500/10 border-amber-500/30' : 'bg-emerald-950/10 border-emerald-900/30'}`}>
                                    <div className="w-6 h-6 flex items-center justify-center rounded text-xs font-bold bg-white/10">1</div>
                                    <div className="flex-1">
                                        <div className="text-xs font-bold text-white">{currentGroup.teams[0]?.name || '-'}</div>
                                        <div className="text-[10px] text-emerald-400">{stage === 'final' ? 'Sultanlar Ligi\'ne YÃ¼kselir ğŸ†' : 'Final Grubuna YÃ¼kselir'}</div>
                                    </div>
                                </div>
                                <div className={`flex items-center gap-3 p-2 rounded-lg border ${stage === 'final' ? 'bg-emerald-500/10 border-emerald-500/30' : 'bg-emerald-950/10 border-emerald-900/30'}`}>
                                    <div className="w-6 h-6 flex items-center justify-center rounded text-xs font-bold bg-white/10">2</div>
                                    <div className="flex-1">
                                        <div className="text-xs font-bold text-white">{currentGroup.teams[1]?.name || '-'}</div>
                                        <div className="text-[10px] text-emerald-400">{stage === 'final' ? 'Sultanlar Ligi\'ne YÃ¼kselir ğŸ†' : 'Final Grubuna YÃ¼kselir'}</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* Fixtures */}
                    <div className="lg:col-span-7 flex flex-col h-full gap-2 min-h-0">
                        <div className="flex items-center justify-between px-1">
                            <h2 className="text-xs font-semibold text-slate-400 uppercase tracking-wider">MaÃ§ FikstÃ¼rÃ¼</h2>
                            <button onClick={predictGroupMatches} disabled={predicting} className="px-2 py-1 bg-purple-600/20 text-purple-300 border border-purple-500/30 text-[10px] rounded hover:text-white transition-colors">
                                {predicting ? '...' : 'TÃ¼mÃ¼nÃ¼ Tahmin Et'}
                            </button>
                        </div>
                        <div className="flex-1 overflow-y-auto pr-1">
                            <div className="grid grid-cols-1 gap-2 pb-2">
                                {groupFixture.map((match, mIdx) => {
                                    const currentScore = overrides[match.id];
                                    return (
                                        <div key={match.id} className="bg-slate-900 border border-slate-800 rounded p-2 flex items-center gap-3">
                                            <div className="text-[9px] font-bold text-slate-600 w-4 text-center">{mIdx + 1}.</div>
                                            <div className="flex-1 flex flex-col gap-1.5">
                                                <div className="flex items-center justify-between text-[11px]">
                                                    <div className="w-[45%] text-right font-medium text-slate-300 truncate">{match.homeTeam}</div>
                                                    <div className="text-[9px] text-slate-600">v</div>
                                                    <div className="w-[45%] text-left font-medium text-slate-300 truncate">{match.awayTeam}</div>
                                                </div>
                                                <div className="flex justify-center gap-1">
                                                    {SCORES.map(score => {
                                                        const isSelected = currentScore === score;
                                                        const homeWin = parseInt(score.split('-')[0]) > parseInt(score.split('-')[1]);
                                                        return (
                                                            <button
                                                                key={score}
                                                                onClick={() => handleScoreSelect(match.id, isSelected ? null : score)}
                                                                className={`w-8 h-5 flex items-center justify-center rounded-[3px] text-[9px] font-bold border transition-all ${isSelected ? (homeWin ? 'bg-emerald-600 border-emerald-500 text-white' : 'bg-rose-600 border-rose-500 text-white') : 'bg-slate-950 border-slate-800 text-slate-500 hover:bg-slate-800'}`}
                                                            >
                                                                {score}
                                                            </button>
                                                        )
                                                    })}
                                                </div>
                                            </div>
                                        </div>
                                    )
                                })}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    );
}

```

## File: app\1lig\stats\OneLigStatsClient.tsx
```
"use client";

import { useState, useMemo } from "react";
import { TeamStats } from "../../types";

import TeamAvatar from "@/app/components/TeamAvatar";

interface OneLigStatsClientProps {
    initialTeams: TeamStats[];
}

interface ExtendedTeamStats extends TeamStats {
    losses: number;
    winRate: number;
    setRatioDisplay: string;
}

export default function OneLigStatsClient({ initialTeams }: OneLigStatsClientProps) {
    const [activeTab, setActiveTab] = useState("GENEL");

    const groups = useMemo(() => {
        return Array.from(new Set(initialTeams.map((t: TeamStats) => t.groupName))).sort() as string[];
    }, [initialTeams]);

    const filteredTeams = useMemo(() => activeTab === "GENEL"
        ? initialTeams
        : initialTeams.filter(t => t.groupName === activeTab), [initialTeams, activeTab]);

    const teamsWithStats = useMemo(() => filteredTeams.map(t => ({
        ...t,
        losses: (t.played || 0) - (t.wins || 0),
        winRate: (t.played || 0) > 0 ? Math.round(((t.wins || 0) / (t.played || 0)) * 100) : 0,
        setRatioDisplay: (t.setsLost || 0) > 0 ? ((t.setsWon || 0) / (t.setsLost || 0)).toFixed(2) : (t.setsWon || 0).toString()
    })), [filteredTeams]);

    const totalMatches = useMemo(() => teamsWithStats.reduce((sum, t) => sum + (t.played || 0), 0) / 2, [teamsWithStats]);
    const totalSets = useMemo(() => teamsWithStats.reduce((sum, t) => sum + (t.setsWon || 0), 0), [teamsWithStats]);
    const avgPointsPerTeam = useMemo(() => teamsWithStats.length > 0
        ? Math.round(teamsWithStats.reduce((sum, t) => sum + (t.points || 0), 0) / teamsWithStats.length)
        : 0, [teamsWithStats]);

    const leastLosses = useMemo(() => [...teamsWithStats].sort((a, b) => a.losses - b.losses || b.wins - a.wins).slice(0, 5), [teamsWithStats]);
    const mostLosses = useMemo(() => [...teamsWithStats].sort((a, b) => b.losses - a.losses || a.wins - b.wins).slice(0, 5), [teamsWithStats]);
    const mostSets = useMemo(() => [...teamsWithStats].sort((a, b) => b.setsWon - a.setsWon).slice(0, 5), [teamsWithStats]);
    const mostPoints = useMemo(() => [...teamsWithStats].sort((a, b) => b.points - a.points).slice(0, 5), [teamsWithStats]);
    const leastSetsLost = useMemo(() => [...teamsWithStats].sort((a, b) => a.setsLost - b.setsLost || b.wins - a.wins).slice(0, 5), [teamsWithStats]);
    const bestWinRate = useMemo(() => [...teamsWithStats].filter(t => (t.played || 0) >= 3).sort((a, b) => b.winRate - a.winRate).slice(0, 5), [teamsWithStats]);

    return (
        <main className="min-h-screen bg-slate-950 text-slate-100 p-2 sm:p-4 font-sans">
            <div className="max-w-7xl mx-auto space-y-4 sm:space-y-6">
                <div className="flex flex-col gap-1 px-1">
                    <h1 className="font-bold text-white text-lg tracking-tight leading-none hidden sm:block">1. Lig Ä°statistikleri</h1>
                    <p className="text-[10px] text-slate-400 hidden sm:block">KadÄ±nlar 1. Ligi Ä°statistik Merkezi</p>
                </div>

                <div className="flex bg-slate-900/50 p-1 rounded-xl border border-slate-800/50 overflow-x-auto">
                    <button
                        onClick={() => setActiveTab("GENEL")}
                        className={`px-4 py-2 rounded-lg text-xs font-bold transition-all whitespace-nowrap ${activeTab === "GENEL"
                            ? "bg-amber-500 text-white shadow-lg shadow-amber-500/20"
                            : "text-slate-400 hover:text-white hover:bg-slate-800"
                            }`}
                    >
                        GENEL Ä°STATÄ°STÄ°KLER
                    </button>
                    {groups.map(group => (
                        <button
                            key={group}
                            onClick={() => setActiveTab(group)}
                            className={`px-4 py-2 rounded-lg text-xs font-bold transition-all whitespace-nowrap ml-1 ${activeTab === group
                                ? "bg-amber-500 text-white shadow-lg shadow-amber-500/20"
                                : "text-slate-400 hover:text-white hover:bg-slate-800"
                                }`}
                        >
                            {group} Ä°STATÄ°STÄ°KLERÄ°
                        </button>
                    ))}
                </div>

                <div className="grid grid-cols-3 gap-2 sm:gap-4">
                    <div className="bg-gradient-to-br from-amber-600/20 to-amber-900/10 rounded-xl sm:rounded-2xl p-3 sm:p-4 border border-amber-600/30 text-center">
                        <div className="text-2xl sm:text-4xl font-bold text-amber-400">{Math.round(totalMatches)}</div>
                        <div className="text-[10px] sm:text-xs text-amber-400/70 uppercase tracking-wider mt-1">Toplam MaÃ§</div>
                    </div>
                    <div className="bg-gradient-to-br from-emerald-600/20 to-emerald-900/10 rounded-xl sm:rounded-2xl p-3 sm:p-4 border border-emerald-600/30 text-center">
                        <div className="text-2xl sm:text-4xl font-bold text-emerald-400">{totalSets}</div>
                        <div className="text-[10px] sm:text-xs text-emerald-400/70 uppercase tracking-wider mt-1">Toplam Set</div>
                    </div>
                    <div className="bg-gradient-to-br from-purple-600/20 to-purple-900/10 rounded-xl sm:rounded-2xl p-3 sm:p-4 border border-purple-600/30 text-center">
                        <div className="text-2xl sm:text-4xl font-bold text-purple-400">{avgPointsPerTeam}</div>
                        <div className="text-[10px] sm:text-xs text-purple-400/70 uppercase tracking-wider mt-1">Ort. Puan</div>
                    </div>
                </div>

                <div className="grid sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 pb-8">
                    <StatCard
                        title="En Ã‡ok Puan"
                        icon="ğŸ’"
                        teams={mostPoints}
                        statKey="points"
                        color="bg-amber-500"
                        gradient="bg-gradient-to-r from-amber-600 to-orange-600"
                        suffix="P"
                    />
                    <StatCard
                        title="En YÃ¼ksek Galibiyet"
                        icon="ğŸ“ˆ"
                        teams={bestWinRate}
                        statKey="winRate"
                        color="bg-teal-500"
                        gradient="bg-gradient-to-r from-teal-600 to-cyan-600"
                        suffix="%"
                    />
                    <StatCard
                        title="En Ã‡ok Set Alan"
                        icon="ğŸ"
                        teams={mostSets}
                        statKey="setsWon"
                        color="bg-purple-500"
                        gradient="bg-gradient-to-r from-purple-600 to-pink-600"
                    />
                    <StatCard
                        title="En Az MaÄŸlubiyet"
                        icon="ğŸ›¡ï¸"
                        teams={leastLosses}
                        statKey="losses"
                        color="bg-emerald-500"
                        gradient="bg-gradient-to-r from-emerald-600 to-green-600"
                        suffix="M"
                    />
                    <StatCard
                        title="En Az Set Veren"
                        icon="ğŸ§±"
                        teams={leastSetsLost}
                        statKey="setsLost"
                        color="bg-rose-500"
                        gradient="bg-gradient-to-r from-rose-600 to-red-600"
                    />
                    <StatCard
                        title="En Ã‡ok MaÄŸlubiyet"
                        icon="ğŸ“‰"
                        teams={mostLosses}
                        statKey="losses"
                        color="bg-slate-500"
                        gradient="bg-gradient-to-r from-slate-600 to-slate-700"
                        suffix="M"
                    />
                </div>
            </div>
        </main>
    );
}

// Extracted Component
const StatCard = ({ title, icon, teams, statKey, color, gradient, suffix = "" }: {
    title: string; icon: string;
    teams: ExtendedTeamStats[];
    statKey: 'losses' | 'wins' | 'setsWon' | 'setsLost' | 'points' | 'winRate';
    color: string;
    gradient: string;
    suffix?: string;
}) => {
    // Handling potential missing type issues gracefully
    const maxValue = Math.max(...teams.map(t => Number(t[statKey] || 0)), 1);

    return (
        <div className="bg-slate-950/50 backdrop-blur-md rounded-xl border border-slate-800/60 overflow-hidden hover:border-slate-700/80 transition-all duration-300 group shadow-md hover:shadow-lg">
            <div className={`${gradient} px-2.5 py-2 border-b border-white/10 relative overflow-hidden`}>
                <div className="absolute inset-0 bg-white/5 opacity-0 group-hover:opacity-100 transition-opacity"></div>
                <div className="flex items-center justify-between relative z-10">
                    <h3 className="font-bold text-white text-[11px] uppercase tracking-wider flex items-center gap-1.5">
                        <span className="text-sm">{icon}</span> {title}
                    </h3>
                    <span className="text-[9px] font-bold text-white/70 bg-black/20 px-1.5 py-0.5 rounded-full border border-white/10">TOP 5</span>
                </div>
            </div>

            <div className="p-1.5 space-y-1">
                {teams.map((t, idx) => (
                    <div
                        key={t.name}
                        className={`flex items-center gap-2 p-1.5 rounded-lg transition-all ${idx === 0 ? 'bg-gradient-to-r from-white/5 to-transparent border border-white/10' : 'hover:bg-white/5'
                            }`}
                    >
                        <div className={`w-5 h-5 rounded flex items-center justify-center font-bold text-[10px] shadow-sm ${idx === 0 ? 'bg-amber-400 text-amber-950' :
                            idx === 1 ? 'bg-slate-300 text-slate-800' :
                                idx === 2 ? 'bg-amber-700 text-amber-100' :
                                    'bg-slate-800 text-slate-500'
                            }`}>
                            {idx + 1}
                        </div>
                        <TeamAvatar name={t.name} size="xs" />

                        <div className="flex-1 min-w-0">
                            <span className={`text-[11px] font-bold truncate block ${idx === 0 ? 'text-white' : 'text-slate-300'}`} title={t.name}>
                                {t.name}
                            </span>
                            {t.groupName && (
                                <span className="text-[8px] text-slate-500 block leading-tight">{t.groupName}</span>
                            )}
                        </div>

                        <div className="flex items-center gap-1.5 w-16 justify-end">
                            <div className="h-1 bg-slate-800/50 rounded-full overflow-hidden flex-1 max-w-[30px]">
                                <div className={`h-full ${color} opacity-80`} style={{ '--stat-width': `${Math.min((Number(t[statKey] || 0) / maxValue) * 100, 100)}%`, width: 'var(--stat-width)' } as any}></div>
                            </div>
                            <span className={`text-[11px] font-bold min-w-[24px] text-right ${idx === 0 ? 'text-white' : 'text-slate-400'}`}>
                                {t[statKey]}{suffix}
                            </span>
                        </div>
                    </div>
                ))}
            </div>
        </div>
    );
};

```

## File: app\1lig\stats\page.tsx
```
import { Metadata } from "next";
import { getLeagueData } from "../../utils/serverData";
import OneLigStatsClient from "./OneLigStatsClient";

export const metadata: Metadata = {
    title: "1. Lig Ä°statistikler",
    description: "Arabica Coffee House 1. Lig takÄ±m istatistikleri ve performans analizleri. Grup bazlÄ± detaylÄ± veriler.",
    openGraph: {
        title: "1. Lig Ä°statistikler | VolleySimulator",
        description: "1. Lig takÄ±m istatistikleri ve performans analizleri.",
    },
};

export default async function OneLigStatsPage() {
    const { teams } = await getLeagueData("1lig");

    return (
        <OneLigStatsClient initialTeams={teams} />
    );
}

```

## File: app\1lig\tahminoyunu\loading.tsx
```
import { SkeletonTable } from "../../components/Skeleton";

export default function OneLigCalculatorLoading() {
    return (
        <main className="min-h-screen bg-slate-950 text-slate-100 p-2 sm:p-4 font-sans pb-20 sm:pb-4">
            <div className="w-full max-w-[1600px] mx-auto flex flex-col h-[calc(100vh-2rem)] gap-4">
                {/* Header skeleton */}
                <div className="bg-slate-900/50 rounded-xl border border-slate-800 p-4">
                    <div className="flex items-center justify-between flex-wrap gap-4">
                        <div className="flex items-center gap-4">
                            <div className="h-8 w-48 bg-slate-800 rounded animate-pulse" />
                            <div className="h-6 w-32 bg-slate-800/50 rounded animate-pulse" />
                        </div>
                        <div className="flex items-center gap-2">
                            <div className="h-8 w-20 bg-slate-800 rounded animate-pulse" />
                            <div className="h-8 w-20 bg-slate-800 rounded animate-pulse" />
                        </div>
                    </div>
                    <div className="mt-4 h-2 w-full bg-slate-800 rounded-full animate-pulse" />
                </div>

                {/* Content grid skeleton */}
                <div className="flex-1 grid grid-cols-1 lg:grid-cols-12 gap-4 min-h-0 overflow-hidden">
                    <div className="lg:col-span-7">
                        <SkeletonTable rows={12} columns={8} />
                    </div>
                    <div className="lg:col-span-5">
                        <div className="bg-slate-900/50 rounded-xl border border-slate-800 p-4 space-y-4">
                            <div className="h-6 w-32 bg-slate-800 rounded animate-pulse" />
                            {[...Array(8)].map((_, i) => (
                                <div key={i} className="flex items-center justify-between p-3 bg-slate-800/30 rounded-lg">
                                    <div className="flex items-center gap-2">
                                        <div className="w-6 h-6 bg-slate-700 rounded-full animate-pulse" />
                                        <div className="h-4 w-24 bg-slate-700 rounded animate-pulse" />
                                    </div>
                                    <div className="h-6 w-16 bg-slate-700 rounded animate-pulse" />
                                    <div className="flex items-center gap-2">
                                        <div className="h-4 w-24 bg-slate-700 rounded animate-pulse" />
                                        <div className="w-6 h-6 bg-slate-700 rounded-full animate-pulse" />
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                </div>
            </div>
        </main>
    );
}

```

## File: app\1lig\tahminoyunu\OneLigCalculatorClient.tsx
```
"use client";

import { useEffect, useState, useRef, useMemo } from "react";
import { useSearchParams } from "next/navigation";
import { TeamStats, Match, Achievement } from "../../types";

import { useToast, AchievementToast, AchievementsPanel } from "../../components";
import StandingsTable from "../../components/Calculator/StandingsTable";
import FixtureList from "../../components/Calculator/FixtureList";
import ShareButton from "../../components/ShareButton";
import { calculateLiveStandings } from "../../utils/calculatorUtils";
import { calculateElo } from "../../utils/eloCalculator";
import { useGameState, ACHIEVEMENTS } from "../../utils/gameState";
import { sounds } from "../../utils/sounds";

interface OneLigCalculatorClientProps {
    initialTeams: TeamStats[];
    initialMatches: Match[];
}

export default function OneLigCalculatorClient({ initialTeams, initialMatches }: OneLigCalculatorClientProps) {
    const { showToast, showUndoToast } = useToast();
    const searchParams = useSearchParams();
    const groupParam = searchParams.get("group");
    const standingsRef = useRef<HTMLDivElement>(null);

    // Normalize data
    const normalizedTeams = useMemo(() => initialTeams.map((t: any) => ({
        ...t,
        name: t.name.toLocaleUpperCase('tr-TR'),
        groupName: t.groupName.includes('A') ? 'A GRUBU' : 'B GRUBU'
    })), [initialTeams]);

    const normalizedMatches = useMemo(() => initialMatches.map((m: any) => ({
        ...m,
        homeTeam: m.homeTeam.toLocaleUpperCase('tr-TR'),
        awayTeam: m.awayTeam.toLocaleUpperCase('tr-TR'),
        matchDate: m.date || m.matchDate,
        groupName: m.groupName.includes('A') ? 'A GRUBU' : 'B GRUBU'
    })), [initialMatches]);

    // Data State
    const [allTeams] = useState<TeamStats[]>(normalizedTeams);
    const [allMatches] = useState<Match[]>(normalizedMatches);
    const groups = useMemo(() => [...new Set(normalizedTeams.map(t => t.groupName))].sort(), [normalizedTeams]);

    // UI State
    const [selectedGroup, setSelectedGroup] = useState<string>(groupParam && groups.includes(groupParam) ? groupParam : (groups[0] || "A GRUBU"));
    const [overrides, setOverrides] = useState<Record<string, string>>({});
    const [showAchievements, setShowAchievements] = useState(false);
    const [showAutoMenu, setShowAutoMenu] = useState(false);
    const [showResetMenu, setShowResetMenu] = useState(false);
    const [newAchievement, setNewAchievement] = useState<Achievement | null>(null);

    // Game State
    const { gameState, addXP, recordPrediction, unlockAchievement, hasAchievement } = useGameState();

    // Load saved scenarios on mount
    useEffect(() => {
        const saved = localStorage.getItem('1ligGroupScenarios');
        if (saved) {
            try {
                const parsed = JSON.parse(saved);
                let flatOverrides: Record<string, string> = {};
                Object.values(parsed).forEach((groupObj: any) => {
                    flatOverrides = { ...flatOverrides, ...groupObj };
                });
                setOverrides(flatOverrides);
            } catch (e) { console.error(e); }
        }
    }, []);

    const handleScoreChange = (matchId: string, score: string) => {
        const newOverrides = { ...overrides };
        const wasNew = !overrides[matchId];

        if (score) {
            newOverrides[matchId] = score;
            if (wasNew) {
                addXP(10);
                sounds.scoreSelect();
                if (!hasAchievement('first_prediction')) {
                    const wasUnlocked = unlockAchievement('first_prediction');
                    if (wasUnlocked) {
                        setNewAchievement(ACHIEVEMENTS.first_prediction as Achievement);
                        sounds.achievement();
                    }
                }
                if (gameState.stats.totalPredictions >= 49 && !hasAchievement('game_addict')) {
                    const wasUnlocked = unlockAchievement('game_addict');
                    if (wasUnlocked) {
                        setNewAchievement(ACHIEVEMENTS.game_addict as Achievement);
                        sounds.achievement();
                    }
                }
                recordPrediction(true);
            }
        } else {
            delete newOverrides[matchId];
        }
        setOverrides(newOverrides);
    };

    // Persist overrides to localStorage
    useEffect(() => {
        if (!selectedGroup) return;
        const saved = localStorage.getItem('1ligGroupScenarios');
        const globalObj = saved ? JSON.parse(saved) : {};
        const newGlobalObj = { ...globalObj };
        groups.forEach(g => {
            const groupMatches = allMatches.filter(m => m.groupName === g);
            const groupOverrides: Record<string, string> = {};
            groupMatches.forEach(m => {
                const id = `${m.homeTeam}-${m.awayTeam}`;
                if (overrides[id]) groupOverrides[id] = overrides[id];
            });
            newGlobalObj[g] = groupOverrides;
        });
        localStorage.setItem('1ligGroupScenarios', JSON.stringify(newGlobalObj));
    }, [overrides, groups, allMatches, selectedGroup]);

    const activeGroup = selectedGroup || groups[0];

    const activeTeams = useMemo(() =>
        allTeams.filter(t => t.groupName === activeGroup),
        [allTeams, activeGroup]
    );

    const activeMatches = useMemo(() =>
        allMatches.filter(m => m.groupName === activeGroup),
        [allMatches, activeGroup]
    );

    const handleResetGroup = () => {
        if (!confirm(`${activeGroup} grubundaki tahminleriniz silinecek. Emin misiniz?`)) return;
        const newOverrides = { ...overrides };
        const groupMatches = allMatches.filter(m => m.groupName === activeGroup);
        groupMatches.forEach(m => {
            const id = `${m.homeTeam}-${m.awayTeam}`;
            delete newOverrides[id];
        });
        setOverrides(newOverrides);
        showToast(`${activeGroup} tahminleri sÄ±fÄ±rlandÄ±`, "success");
    };

    const handleResetAll = () => {
        const previousOverrides = { ...overrides };
        setOverrides({});
        localStorage.removeItem('1ligGroupScenarios');
        showUndoToast("TÃ¼m 1. Lig tahminleri sÄ±fÄ±rlandÄ±", () => {
            setOverrides(previousOverrides);
            localStorage.setItem('1ligGroupScenarios', JSON.stringify(previousOverrides));
        });
    };

    // Memoize standings calculations
    const initialStandings = useMemo(() =>
        calculateLiveStandings(activeTeams, activeMatches, {}),
        [activeTeams, activeMatches]
    );

    const initialRanks = useMemo(() => {
        const ranks = new Map<string, number>();
        initialStandings.forEach((team, idx) => ranks.set(team.name, idx + 1));
        return ranks;
    }, [initialStandings]);

    const liveStandings = useMemo(() =>
        calculateLiveStandings(activeTeams, activeMatches, overrides),
        [activeTeams, activeMatches, overrides]
    );

    const currentRanks = useMemo(() => {
        const ranks = new Map<string, number>();
        liveStandings.forEach((team, idx) => ranks.set(team.name, idx + 1));
        return ranks;
    }, [liveStandings]);

    // Export / Import Handlers
    const handleSaveAllScenarios = () => {
        try {
            const exportData = {
                league: '1. Lig',
                groupScenarios: JSON.parse(localStorage.getItem('1ligGroupScenarios') || '{}'),
                date: new Date().toISOString()
            };
            const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(exportData, null, 2));
            const a = document.createElement('a');
            a.href = dataStr;
            a.download = `1lig-tahmin-${new Date().toLocaleDateString('tr-TR')}.json`;
            a.click();
            showToast("1. Lig senaryosu indirildi", "success");
        } catch (e) { console.error(e); }
    };

    const handleScrollToNextMatch = () => {
        const nextMatch = activeMatches.find(m => !m.isPlayed && !overrides[`${m.homeTeam}-${m.awayTeam}`]);
        if (nextMatch) {
            const id = `match-${nextMatch.homeTeam}-${nextMatch.awayTeam}`;
            const el = document.getElementById(id);
            if (el) {
                el.scrollIntoView({ behavior: 'smooth', block: 'center' });
                el.classList.add('ring-2', 'ring-amber-500');
                setTimeout(() => el.classList.remove('ring-2', 'ring-amber-500'), 2000);
            }
        }
    };

    const handleImportAllScenarios = (e: React.ChangeEvent<HTMLInputElement>) => {
        const file = e.target.files?.[0];
        if (!file) return;
        const reader = new FileReader();
        reader.onload = (evt) => {
            try {
                const json = JSON.parse(evt.target?.result as string);
                if (json.groupScenarios) {
                    const convertedScenarios: Record<string, Record<string, string>> = {};
                    for (const [groupName, groupData] of Object.entries(json.groupScenarios)) {
                        convertedScenarios[groupName] = {};
                        for (const [matchKey, score] of Object.entries(groupData as Record<string, string>)) {
                            const newKey = matchKey.includes('|||') ? matchKey.replace('|||', '-') : matchKey;
                            convertedScenarios[groupName][newKey] = score;
                        }
                    }
                    localStorage.setItem('1ligGroupScenarios', JSON.stringify(convertedScenarios));
                    let flat: Record<string, string> = {};
                    Object.values(convertedScenarios).forEach((obj: any) => flat = { ...flat, ...obj });
                    setOverrides(flat);
                }
                showToast("1. Lig senaryosu yÃ¼klendi", "success");
            } catch (err) { console.error(err); }
        }
        reader.readAsText(file);
        e.target.value = '';
    }

    // Auto Simulation Logic
    const handleSimulateSmart = () => {
        if (!confirm(`${activeGroup} grubu iÃ§in oynanmamÄ±ÅŸ maÃ§lar gÃ¼ncel gÃ¼Ã§ dengelerine gÃ¶re doldurulacak. OnaylÄ±yor musunuz?`)) return;
        const newOverrides = { ...overrides };
        let count = 0;
        const eloRatings = calculateElo(activeTeams, activeMatches.filter(m => m.isPlayed));
        activeMatches.forEach(match => {
            if (match.isPlayed || newOverrides[`${match.homeTeam}-${match.awayTeam}`]) return;
            const homeElo = eloRatings.get(match.homeTeam) || 1200;
            const awayElo = eloRatings.get(match.awayTeam) || 1200;
            const winProb = 1 / (1 + Math.pow(10, (awayElo - homeElo) / 400));
            const randomFactor = (Math.random() * 0.15) - 0.075;
            const finalProb = winProb + randomFactor;
            let score = "0-0";
            if (finalProb > 0.60) score = "3-0";
            else if (finalProb > 0.55) score = "3-1";
            else if (finalProb > 0.50) score = "3-2";
            else if (finalProb > 0.45) score = "2-3";
            else if (finalProb > 0.40) score = "1-3";
            else score = "0-3";
            newOverrides[`${match.homeTeam}-${match.awayTeam}`] = score;
            count++;
        });
        setOverrides(newOverrides);
        if (count > 0) {
            sounds.levelUp();
            showToast(`${count} maÃ§ gÃ¼Ã§ dengelerine gÃ¶re tahmin edildi! ğŸ§ `, "success");
            addXP(count * 2);
        }
    };

    const handleSimulateRandom = () => {
        if (!confirm(`${activeGroup} grubu iÃ§in oynanmamÄ±ÅŸ maÃ§lar RASTGELE skorlarla doldurulacak. OnaylÄ±yor musunuz?`)) return;
        const newOverrides = { ...overrides };
        let count = 0;
        const scores = ["3-0", "3-1", "3-2", "2-3", "1-3", "0-3"];
        activeMatches.forEach(match => {
            if (match.isPlayed || newOverrides[`${match.homeTeam}-${match.awayTeam}`]) return;
            const randomScore = scores[Math.floor(Math.random() * scores.length)];
            newOverrides[`${match.homeTeam}-${match.awayTeam}`] = randomScore;
            count++;
        });
        setOverrides(newOverrides);
        if (count > 0) {
            sounds.levelUp();
            showToast(`${count} maÃ§ rastgele tahmin edildi! ğŸ²`, "success");
            addXP(count * 2);
        }
    };

    return (
        <main className="min-h-screen bg-slate-950 text-slate-100 p-1 sm:p-2 font-sans">
            <div className="w-full max-w-7xl mx-auto flex flex-col h-full gap-2">
                <div className="flex flex-col sm:flex-row items-center justify-between gap-3 p-2 bg-slate-900/40 rounded-xl border border-slate-800">
                    <div className="flex flex-col sm:flex-row items-center gap-4 w-full sm:w-auto">
                        <div className="text-center sm:text-left">
                            <h1 className="font-bold text-white text-lg tracking-tight leading-none hidden sm:block">Arabica Coffee House</h1>
                            <p className="text-[10px] text-slate-400 hidden sm:block">KadÄ±nlar Voleybol 1.Ligi</p>
                        </div>
                        <div className="flex gap-2 items-center w-full sm:w-auto">
                            <span className="text-[10px] font-bold text-slate-500 uppercase tracking-widest hidden sm:inline whitespace-nowrap">GRUP:</span>
                            <select
                                value={activeGroup}
                                onChange={(e) => setSelectedGroup(e.target.value)}
                                title="Grup SeÃ§in"
                                className="appearance-none bg-slate-800 hover:bg-slate-700 text-white text-xs font-bold rounded-lg px-4 py-2 border border-slate-700 focus:border-amber-500 focus:ring-1 focus:ring-amber-500 transition-all outline-none cursor-pointer min-w-[120px]"
                            >
                                {groups.map(groupName => (
                                    <option key={groupName} value={groupName} className="bg-slate-900">
                                        {groupName}
                                    </option>
                                ))}
                            </select>
                        </div>
                    </div>

                    <div className="flex items-center gap-2 w-full sm:w-auto pb-1 sm:pb-0 justify-between sm:justify-end flex-wrap sm:flex-nowrap">
                        <div className="flex items-center gap-2 shrink-0">
                            <div className="relative">
                                <button
                                    onClick={() => setShowAutoMenu(!showAutoMenu)}
                                    className={`px-3 py-1.5 bg-amber-600 hover:bg-amber-500 text-white text-xs font-bold rounded-lg transition-all flex items-center gap-1 shadow-lg shadow-amber-500/20 ${showAutoMenu ? 'ring-2 ring-amber-400' : ''}`}
                                >
                                    <span>âš¡</span>
                                    <span className="hidden sm:inline">Otomatik</span>
                                    <span className="text-[8px] ml-0.5">â–¼</span>
                                </button>
                                {showAutoMenu && (
                                    <>
                                        <div className="fixed inset-0 z-40" onClick={() => setShowAutoMenu(false)}></div>
                                        <div className="absolute top-full left-0 sm:left-auto sm:right-0 mt-2 w-48 bg-slate-900 border border-slate-700 rounded-xl shadow-xl overflow-hidden z-50 animate-in fade-in slide-in-from-top-2 duration-200">
                                            <button
                                                onClick={() => { handleSimulateSmart(); setShowAutoMenu(false); }}
                                                className="w-full text-left px-4 py-3 hover:bg-slate-800 transition-colors flex items-center gap-3 border-b border-slate-800"
                                            >
                                                <div className="w-8 h-8 rounded-full bg-indigo-500/20 text-indigo-400 flex items-center justify-center text-lg">ğŸ§ </div>
                                                <div>
                                                    <div className="text-xs font-bold text-white">GÃ¼Ã§ Dengelerine GÃ¶re</div>
                                                    <div className="text-[9px] text-slate-400">TakÄ±m gÃ¼Ã§lerine gÃ¶re gerÃ§ekÃ§i tahmin</div>
                                                </div>
                                            </button>
                                            <button
                                                onClick={() => { handleSimulateRandom(); setShowAutoMenu(false); }}
                                                className="w-full text-left px-4 py-3 hover:bg-slate-800 transition-colors flex items-center gap-3"
                                            >
                                                <div className="w-8 h-8 rounded-full bg-fuchsia-500/20 text-fuchsia-400 flex items-center justify-center text-lg">ğŸ²</div>
                                                <div>
                                                    <div className="text-xs font-bold text-white">Rastgele DaÄŸÄ±t</div>
                                                    <div className="text-[9px] text-slate-400">Tamamen ÅŸansa dayalÄ± sonuÃ§lar</div>
                                                </div>
                                            </button>
                                        </div>
                                    </>
                                )}
                            </div>

                            <input
                                type="file"
                                accept=".json"
                                onChange={handleImportAllScenarios}
                                className="hidden"
                                id="import-upload-1lig"
                            />
                            <label
                                htmlFor="import-upload-1lig"
                                className="px-3 py-1.5 bg-blue-600 hover:bg-blue-500 text-white text-xs font-bold rounded-lg transition-all cursor-pointer flex items-center gap-1"
                                title="Senaryo YÃ¼kle"
                            >
                                <span className="hidden sm:inline">YÃ¼kle</span>
                            </label>
                            <button
                                onClick={handleSaveAllScenarios}
                                className="px-3 py-1.5 bg-emerald-700 hover:bg-emerald-600 text-white text-xs font-bold rounded-lg transition-all flex items-center gap-1"
                                title="Senaryoyu Kaydet"
                            >
                                <span className="hidden sm:inline">Kaydet</span>
                            </button>
                        </div>
                        <div className="w-px h-4 bg-slate-700 hidden sm:block shrink-0"></div>
                        <div className="flex items-center gap-2 shrink-0">
                            <button
                                onClick={handleScrollToNextMatch}
                                className="px-3 py-1.5 bg-slate-800 hover:bg-slate-700 text-slate-400 hover:text-white text-xs font-bold rounded-lg transition-all border border-slate-700 flex items-center gap-1"
                                title="Son kaldÄ±ÄŸÄ±m maÃ§a git"
                            >
                                <span className="hidden sm:inline">KaldÄ±ÄŸÄ±m Yer</span>
                            </button>
                            <div className="relative">
                                <button
                                    onClick={() => setShowResetMenu(!showResetMenu)}
                                    className={`px-3 py-1.5 bg-slate-800 hover:bg-rose-900/50 text-slate-400 hover:text-rose-400 text-xs font-bold rounded-lg transition-all border border-slate-700 flex items-center gap-1 ${showResetMenu ? 'ring-2 ring-rose-500/50' : ''}`}
                                >
                                    <span className="hidden sm:inline">SÄ±fÄ±rla</span>
                                    <span className="text-[8px] ml-0.5">â–¼</span>
                                </button>
                                {showResetMenu && (
                                    <>
                                        <div className="fixed inset-0 z-40" onClick={() => setShowResetMenu(false)}></div>
                                        <div className="absolute top-full right-0 mt-2 w-48 bg-slate-900 border border-slate-700 rounded-xl shadow-xl overflow-hidden z-50 animate-in fade-in slide-in-from-top-2 duration-200">
                                            <button
                                                onClick={() => { handleResetGroup(); setShowResetMenu(false); }}
                                                className="w-full text-left px-4 py-3 hover:bg-slate-800 transition-colors flex items-center gap-3 border-b border-slate-800"
                                            >
                                                <div>
                                                    <div className="text-xs font-bold text-white">Bu Grubu SÄ±fÄ±rla</div>
                                                    <div className="text-[9px] text-slate-400">Sadece {activeGroup} silinir</div>
                                                </div>
                                            </button>
                                            <button
                                                onClick={() => { handleResetAll(); setShowResetMenu(false); }}
                                                className="w-full text-left px-4 py-3 hover:bg-rose-900/20 transition-colors flex items-center gap-3 group"
                                            >
                                                <div>
                                                    <div className="text-xs font-bold text-rose-400 group-hover:text-rose-300">TÃ¼mÃ¼nÃ¼ SÄ±fÄ±rla</div>
                                                    <div className="text-[9px] text-rose-500/70 group-hover:text-rose-400/70">BÃ¼tÃ¼n tahminler silinir</div>
                                                </div>
                                            </button>
                                        </div>
                                    </>
                                )}
                            </div>
                            <ShareButton
                                targetRef={standingsRef}
                                championName={liveStandings[0]?.name}
                            />
                        </div>
                    </div>
                </div>

                <div className="grid grid-cols-1 lg:grid-cols-2 gap-4">
                    <div className="flex flex-col gap-4 relative">
                        <div ref={standingsRef} className="sticky top-14 z-10 max-h-[calc(100vh-120px)] overflow-auto custom-scrollbar">
                            <StandingsTable
                                teams={liveStandings}
                                playoffSpots={4}
                                relegationSpots={activeGroup.includes('B') ? 2 : 0}
                                initialRanks={initialRanks}
                                compact={true}
                            />
                        </div>
                    </div>
                    <div className="flex flex-col">
                        <FixtureList
                            matches={activeMatches}
                            overrides={overrides}
                            onScoreChange={handleScoreChange}
                            teamRanks={currentRanks}
                            totalTeams={activeTeams.length}
                            relegationSpots={activeGroup.includes('B') ? 2 : 0}
                        />
                    </div>
                </div>
            </div>

            {newAchievement && (
                <AchievementToast
                    achievement={newAchievement}
                    onClose={() => setNewAchievement(null)}
                />
            )}
            <AchievementsPanel
                isOpen={showAchievements}
                onClose={() => setShowAchievements(false)}
            />
        </main>
    );
}

```

## File: app\1lig\tahminoyunu\page.tsx
```
import { Suspense } from "react";
import { Metadata } from "next";
import { getLeagueData } from "../../utils/serverData";
import OneLigCalculatorClient from "./OneLigCalculatorClient";
import ErrorBoundary from "../../components/ErrorBoundary";
import { SkeletonPage } from "../../components/Skeleton";

export const metadata: Metadata = {
    title: "1. Lig Tahmin Oyunu",
    description: "Arabica Coffee House 1. Lig maÃ§ sonuÃ§larÄ±nÄ± tahmin edin. Grup A ve Grup B takÄ±mlarÄ±nÄ±n maÃ§larÄ±nÄ± tahmin ederek puan kazanÄ±n.",
    openGraph: {
        title: "1. Lig Tahmin Oyunu | VolleySimulator",
        description: "1. Lig maÃ§ sonuÃ§larÄ±nÄ± tahmin edin ve liderlik tablosunda yerinizi alÄ±n.",
    },
};

export default async function OneLigTahminOyunuPage() {
    const { teams, fixture } = await getLeagueData("1lig");

    return (
        <ErrorBoundary>
            <Suspense fallback={<SkeletonPage />}>
                <OneLigCalculatorClient
                    initialTeams={teams}
                    initialMatches={fixture}
                />
            </Suspense>
        </ErrorBoundary>
    );
}

```

## File: app\2lig\group\[groupId]\page.tsx (SKIPPED - TOO LARGE)

## File: app\2lig\gunceldurum\page.tsx
```
import { Metadata } from "next";
import { getLeagueData } from "../../utils/serverData";
import TwoLigDetailedGroupsClient from "./TwoLigDetailedGroupsClient";

export const metadata: Metadata = {
    title: "2. Lig GÃ¼ncel Durum",
    description: "KadÄ±nlar 2. Lig puan durumu, 5 grup sÄ±ralamalarÄ± ve maÃ§ sonuÃ§larÄ±. GÃ¼ncel tablo ve fikstÃ¼r.",
    openGraph: {
        title: "2. Lig GÃ¼ncel Durum | VolleySimulator",
        description: "2. Lig grup sÄ±ralamalarÄ± ve puan durumu.",
    },
};

export default async function TwoLigDetailedGroupsPage() {
    const { teams, fixture } = await getLeagueData("2lig");

    return (
        <TwoLigDetailedGroupsClient
            initialTeams={teams}
            initialMatches={fixture}
        />
    );
}

```

## File: app\2lig\gunceldurum\TwoLigDetailedGroupsClient.tsx
```
"use client";

import { useState, useMemo } from "react";
import { TeamStats, Match } from "../../types";

import StandingsTable from "../../components/Calculator/StandingsTable";
import { sortStandings } from "../../utils/calculatorUtils";
import TeamAvatar from "@/app/components/TeamAvatar";
import LeagueActionBar from "../../components/LeagueTemplate/LeagueActionBar";
import { LEAGUE_CONFIGS } from "../../components/LeagueTemplate/types";

interface TwoLigDetailedGroupsClientProps {
    initialTeams: TeamStats[];
    initialMatches: Match[];
}

export default function TwoLigDetailedGroupsClient({ initialTeams, initialMatches }: TwoLigDetailedGroupsClientProps) {
    const [allTeams] = useState<TeamStats[]>(initialTeams);
    const [allMatches] = useState<Match[]>(initialMatches.map((m: any) => ({
        ...m,
        matchDate: m.date || m.matchDate
    })));

    const groups = useMemo(() => {
        return [...new Set(initialTeams.map(t => t.groupName))].sort((a: any, b: any) => {
            const numA = parseInt(a.match(/\d+/)?.[0] || "0");
            const numB = parseInt(b.match(/\d+/)?.[0] || "0");
            return numA - numB;
        });
    }, [initialTeams]);

    const [activeGroup, setActiveGroup] = useState<string>(groups[0] || "");

    // Filter data for active group
    const groupTeams = useMemo(() => sortStandings(allTeams.filter(t => t.groupName === activeGroup)), [allTeams, activeGroup]);
    const groupMatches = useMemo(() => allMatches.filter(m => m.groupName === activeGroup), [allMatches, activeGroup]);

    const playedCount = groupMatches.filter(m => m.isPlayed).length;
    const totalCount = groupMatches.length;
    const completionRate = totalCount > 0 ? Math.round((playedCount / totalCount) * 100) : 0;

    // Turkish day names
    const dayNames = ['PAZAR', 'PAZARTESÄ°', 'SALI', 'Ã‡ARÅAMBA', 'PERÅEMBE', 'CUMA', 'CUMARTESÄ°'];

    // Helper: Parse DD.MM.YYYY
    const parseDDMMYYYY = (dateStr: string) => {
        const parts = dateStr.split('.');
        if (parts.length === 3) {
            const day = parseInt(parts[0], 10);
            const month = parseInt(parts[1], 10) - 1; // JS months 0-11
            const year = parseInt(parts[2], 10);
            return new Date(year, month, day);
        }
        return null;
    };

    // Format date as DD/MM/YYYY + Day
    const formatDate = (dateStr?: string) => {
        if (!dateStr || dateStr.trim() === '') return { formatted: 'TARÄ°H BELÄ°RSÄ°Z', sortKey: '9999-99-99' };
        let date: Date | null = null;
        if (dateStr.includes('.')) {
            date = parseDDMMYYYY(dateStr);
        } else {
            date = new Date(dateStr);
        }
        if (!date || isNaN(date.getTime())) return { formatted: 'TARÄ°H BELÄ°RSÄ°Z', sortKey: '9999-99-99' };
        const day = String(date.getDate()).padStart(2, '0');
        const month = String(date.getMonth() + 1).padStart(2, '0');
        const year = date.getFullYear();
        const dayName = dayNames[date.getDay()];
        return { formatted: `${day}/${month}/${year} ${dayName}`, sortKey: `${year}-${month}-${day}` };
    };

    const groupedMatches = useMemo(() => {
        const matchesByDate: Record<string, { formatted: string; matches: Match[] }> = {};
        const upcomingMatches = groupMatches.filter(m => !m.isPlayed);

        upcomingMatches.forEach(match => {
            const { formatted, sortKey } = formatDate(match.matchDate);
            if (!matchesByDate[sortKey]) {
                matchesByDate[sortKey] = { formatted, matches: [] };
            }
            matchesByDate[sortKey].matches.push(match);
        });

        const sortedDates = Object.keys(matchesByDate).sort();
        return sortedDates.reduce((acc, dateKey) => {
            acc[dateKey] = matchesByDate[dateKey];
            return acc;
        }, {} as Record<string, { formatted: string, matches: Match[] }>);
    }, [groupMatches]);

    return (
        <main className="min-h-screen bg-slate-950 text-slate-100 p-0 sm:p-2 font-sans overflow-hidden">
            <div className="max-w-7xl mx-auto space-y-1 h-full flex flex-col">
                <div className="space-y-3 bg-slate-900/40 p-3 rounded-2xl border border-slate-800/60 backdrop-blur-sm animate-in fade-in slide-in-from-bottom-4 duration-300">
                    {/* Action Bar using LeagueTemplate */}
                    <LeagueActionBar
                        config={LEAGUE_CONFIGS['2lig']}
                        title={`${LEAGUE_CONFIGS['2lig'].shortName} - ${activeGroup}`}
                        subtitle="KadÄ±nlar 2. Ligi Analiz ve Puan Durumu"
                        selectorLabel="Grup"
                        selectorValue={activeGroup}
                        selectorOptions={groups}
                        onSelectorChange={setActiveGroup}
                        progress={completionRate}
                        progressLabel={`%${completionRate}`}
                    >
                        {/* Leader Badge */}
                        <div className="hidden sm:flex bg-slate-950/50 px-3 py-1.5 rounded-lg border border-slate-800 text-center flex-col justify-center h-full min-h-[32px]">
                            <div className="text-[9px] font-bold text-slate-500 uppercase leading-none mb-0.5">Lider</div>
                            <div className="text-xs font-bold text-white truncate max-w-[100px] leading-none">{groupTeams[0]?.name}</div>
                        </div>
                        {/* Live Badge */}
                        <div className="px-3 h-8 bg-emerald-950/50 rounded-lg border border-emerald-800/50 flex items-center gap-2">
                            <div className="w-2 h-2 bg-emerald-500 rounded-full animate-pulse"></div>
                            <span className="text-[10px] font-bold text-emerald-400 uppercase hidden sm:inline">Otomatik GÃ¼ncelleme</span>
                            <span className="text-[10px] font-bold text-emerald-400 uppercase sm:hidden">CANLI</span>
                        </div>
                    </LeagueActionBar>

                    <div className="grid grid-cols-1 lg:grid-cols-3 gap-2 h-full">
                        <div className="lg:col-span-2 space-y-1 flex flex-col h-full">
                            <h3 className="text-xs font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2 px-1">
                                <span>ğŸ“‹</span> Puan Durumu DetaylarÄ±
                            </h3>
                            <div className="bg-slate-950/40 rounded-xl overflow-hidden border border-slate-800/50 flex-1 max-h-[calc(100vh-200px)]">
                                <StandingsTable teams={groupTeams} playoffSpots={2} relegationSpots={2} compact={true} />
                            </div>
                        </div>

                        <div className="space-y-4 flex flex-col h-full">
                            <h3 className="text-xs font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2 px-1">
                                <span>ğŸ“…</span> Gelecek MaÃ§lar
                            </h3>
                            <div className="bg-slate-950/40 rounded-xl overflow-hidden border border-slate-800/50 flex-1 relative">
                                <div className="absolute inset-0 overflow-y-auto p-2 space-y-2">
                                    {Object.keys(groupedMatches).length === 0 ? (
                                        <div className="flex flex-col items-center justify-center h-full text-slate-500 text-xs italic">
                                            MaÃ§ bulunamadÄ± veya sezon tamamlandÄ±.
                                        </div>
                                    ) : (
                                        <div className="space-y-2">
                                            {Object.entries(groupedMatches).map(([dateKey, group], dateIdx) => (
                                                <div key={dateKey} className={dateIdx > 0 ? 'mt-3' : ''}>
                                                    <div className="sticky top-0 bg-emerald-600/20 px-2 py-1 rounded border border-emerald-500/30 mb-2 z-10">
                                                        <span className="text-[10px] font-bold text-emerald-400 uppercase tracking-wide">
                                                            {group.formatted}
                                                        </span>
                                                    </div>
                                                    <div className="space-y-1.5">
                                                        {group.matches.map((match, idx) => (
                                                            <div key={idx} className="flex items-center justify-between p-2 bg-slate-900/40 rounded border border-slate-800/50 hover:bg-slate-800/50 transition-colors group">
                                                                <div className="flex-1 flex items-center justify-end gap-2 overflow-hidden">
                                                                    <span className="text-xs font-bold text-slate-300 text-right truncate">{match.homeTeam}</span>
                                                                    <TeamAvatar name={match.homeTeam} size="xs" />
                                                                </div>
                                                                <div className="px-3 flex flex-col items-center">
                                                                    <span className="text-[10px] font-bold text-slate-600 bg-slate-950 px-1.5 py-0.5 rounded border border-slate-800">VS</span>
                                                                    {match.matchTime && (
                                                                        <span className="text-[9px] text-slate-500 mt-0.5">{match.matchTime}</span>
                                                                    )}
                                                                </div>
                                                                <div className="flex-1 flex items-center justify-start gap-2 overflow-hidden">
                                                                    <TeamAvatar name={match.awayTeam} size="xs" />
                                                                    <span className="text-xs font-bold text-slate-300 text-left truncate">{match.awayTeam}</span>
                                                                </div>
                                                            </div>
                                                        ))}
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    )}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    );
}

```

## File: app\2lig\playoffs\page.tsx
```
import { Metadata } from "next";
import { getLeagueData } from "../../utils/serverData";
import TwoLigPlayoffsClient from "./TwoLigPlayoffsClient";

export const metadata: Metadata = {
    title: "2. Lig Playoff SimÃ¼lasyonu",
    description: "KadÄ±nlar 2. Lig playoff simÃ¼lasyonu. Grup birincileri arasÄ±ndaki eÅŸleÅŸmeleri simÃ¼le edin.",
    openGraph: {
        title: "2. Lig Playoff SimÃ¼lasyonu | VolleySimulator",
        description: "2. Lig playoff eÅŸleÅŸmelerini simÃ¼le edin.",
    },
};

export default async function PlayoffsPage() {
    const { teams, fixture } = await getLeagueData("2lig");

    return (
        <TwoLigPlayoffsClient initialTeams={teams} initialMatches={fixture} />
    );
}

```

# Project Application Context - Part 3

## File: app\2lig\playoffs\TwoLigPlayoffsClient.tsx
```
"use client";

import { useEffect, useState, useMemo } from "react";
import { TeamStats, Match } from "../../types";
import Link from "next/link";
import {
    generateQuarterGroups,
    generateSemiGroups,
    generateFinalGroups,
    applyOverridesToGroups,
    PlayoffGroup,
    calculateGroupStandings
} from "../../utils/playoffUtils";
import { calculateLiveStandings } from "../../utils/calculatorUtils";

import TeamAvatar from "../../components/TeamAvatar";

interface TwoLigPlayoffsClientProps {
    initialTeams: TeamStats[];
    initialMatches: Match[];
}

export default function TwoLigPlayoffsClient({ initialTeams, initialMatches }: TwoLigPlayoffsClientProps) {
    const [groupOverrides, setGroupOverrides] = useState<Record<string, string>>({});
    const [playoffOverrides, setPlayoffOverrides] = useState<Record<string, string>>({});
    const [isLoaded, setIsLoaded] = useState(false);

    useEffect(() => {
        const loadSaved = () => {
            const savedPlayoff = localStorage.getItem('playoffScenarios');
            if (savedPlayoff) {
                try {
                    setPlayoffOverrides(JSON.parse(savedPlayoff));
                } catch (e) { console.error(e); }
            }

            const savedGroup = localStorage.getItem('groupScenarios');
            if (savedGroup) {
                try {
                    const parsed = JSON.parse(savedGroup);
                    let flatOverrides: Record<string, string> = {};
                    Object.values(parsed).forEach((groupObj: unknown) => {
                        flatOverrides = { ...flatOverrides, ...(groupObj as Record<string, string>) };
                    });
                    setGroupOverrides(flatOverrides);
                } catch (e) { console.error(e); }
            }
            setIsLoaded(true);
        };

        Promise.resolve().then(loadSaved);
    }, []);

    const baseStandings = useMemo(() => {
        const calculatedTeams = calculateLiveStandings(initialTeams, initialMatches, groupOverrides);
        return calculateGroupStandings(calculatedTeams);
    }, [initialTeams, initialMatches, groupOverrides]);

    const quarterGroups = useMemo(() => {
        const qs = generateQuarterGroups(baseStandings, initialMatches);
        return applyOverridesToGroups(qs, playoffOverrides, 'quarter');
    }, [baseStandings, initialMatches, playoffOverrides]);

    const semiGroups = useMemo(() => {
        const ss = generateSemiGroups(quarterGroups);
        return applyOverridesToGroups(ss, playoffOverrides, 'semi');
    }, [quarterGroups, playoffOverrides]);

    const finalGroups = useMemo(() => {
        const fs = generateFinalGroups(semiGroups);
        return applyOverridesToGroups(fs, playoffOverrides, 'final');
    }, [semiGroups, playoffOverrides]);

    const remainingGroupMatchesCount = useMemo(() => {
        let remaining = initialMatches.filter((m: Match) => !m.isPlayed).length;
        remaining = Math.max(0, remaining - Object.keys(groupOverrides).length);
        return remaining;
    }, [initialMatches, groupOverrides]);

    const isGroupsComplete = remainingGroupMatchesCount === 0;

    const renderStageGroups = (stage: string, groups: PlayoffGroup[], title: string, color: string) => {
        return (
            <div className="space-y-4">
                <h2 className="text-xl font-bold text-white flex items-center gap-2">
                    <span className={`w-3 h-3 rounded-full ${color}`}></span>
                    {title}
                </h2>
                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                    {groups.map(group => {
                        const groupPrefix = `${stage}-${group.groupName}-`;
                        const groupMatchesCount = Object.keys(playoffOverrides).filter(k => k.startsWith(groupPrefix)).length;
                        const totalMatches = 6;
                        const isComplete = groupMatchesCount >= totalMatches;

                        let displayName = group.groupName;
                        if (stage === 'semi') {
                            const map: Record<string, string> = { 'A': '1', 'B': '2', 'C': '3', 'D': '4' };
                            displayName = map[group.groupName] || group.groupName;
                        }

                        return (
                            <Link
                                key={group.groupName}
                                href={`/2lig/playoffs/${stage}/${group.groupName}`}
                                className="block bg-slate-900 border border-slate-800 rounded-lg overflow-hidden hover:border-slate-600 hover:shadow-lg transition-all"
                            >
                                <div className={`h-2 ${color}/50`}></div>
                                <div className="p-4">
                                    <div className="flex justify-between items-center mb-2">
                                        <h3 className="font-bold text-white text-lg">
                                            {stage === 'semi' ? `${displayName}. Grup` : `Grup ${displayName}`}
                                        </h3>
                                        {isComplete ? (
                                            <span className="text-xs bg-emerald-500/10 text-emerald-400 px-2 py-0.5 rounded border border-emerald-500/20">TamamlandÄ±</span>
                                        ) : (
                                            <span className="text-xs bg-slate-800 text-slate-400 px-2 py-0.5 rounded">{totalMatches - groupMatchesCount} MaÃ§ Eksik</span>
                                        )}
                                    </div>
                                    <div className="space-y-0.5">
                                        <div className="flex items-center justify-between text-[10px] text-slate-500 px-2 pb-1 border-b border-slate-800/50">
                                            <span>#</span>
                                            <span className="flex-1 px-2">TakÄ±m</span>
                                            <span>P</span>
                                        </div>
                                        {group.teams.map((team, idx) => (
                                            <div key={team.name} className={`flex items-center justify-between text-xs py-1 px-2 rounded ${idx < 2 ? 'bg-emerald-500/5' : ''}`}>
                                                <div className="flex items-center gap-2 flex-1 min-w-0">
                                                    <span className={`w-3 text-center text-[10px] ${idx < 2 ? 'text-emerald-400 font-bold' : 'text-slate-500'}`}>{idx + 1}</span>
                                                    <TeamAvatar name={team.name} size="xs" />
                                                    <span className={`truncate ${idx < 2 ? 'text-slate-200 font-medium' : 'text-slate-400'}`}>{team.name}</span>
                                                </div>
                                                <span className={`font-bold ml-2 w-4 text-center ${idx < 2 ? 'text-white' : 'text-slate-500'}`}>
                                                    {team.scenarioPoints ?? 0}
                                                </span>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </Link>
                        );
                    })}
                </div>
            </div>
        );
    };

    return (
        <main className="min-h-screen bg-slate-950 text-slate-100 p-4 md:p-8 font-sans">
            <div className="max-w-7xl mx-auto space-y-8">
                <div className="flex flex-col gap-1">
                    <h1 className="font-bold text-white text-lg tracking-tight leading-none hidden sm:block">Play-Off Senaryo Modu</h1>
                    <p className="text-[10px] text-slate-400 hidden sm:block">Turnuva simÃ¼lasyonu ve eÅŸleÅŸme tahminleri</p>
                </div>

                {!isGroupsComplete && (
                    <div className="bg-amber-500/10 border border-amber-500/20 text-amber-200 p-4 rounded-lg flex items-center gap-3">
                        <span className="text-2xl">âš ï¸</span>
                        <div>
                            <p className="font-bold text-sm">Grup MaÃ§larÄ± HenÃ¼z TamamlanmadÄ±</p>
                            <p className="text-xs opacity-70">
                                Play-Off senaryolarÄ± mevcut grup sÄ±ralamalarÄ±na gÃ¶re hesaplanmaktadÄ±r.
                                Kesin sonuÃ§lar iÃ§in Ã¶nce grup maÃ§larÄ±nÄ± tamamlayÄ±n.
                            </p>
                        </div>
                    </div>
                )}

                {(() => {
                    const promotedTeams: Array<{ name: string; rank: 1 | 2; group: string }> = [];
                    finalGroups.forEach(g => {
                        const count = Object.keys(playoffOverrides).filter(k => k.startsWith(`final-${g.groupName}-`)).length;
                        if (count >= 6) {
                            if (g.teams[0]) promotedTeams.push({ name: g.teams[0].name, rank: 1, group: g.groupName });
                            if (g.teams[1]) promotedTeams.push({ name: g.teams[1].name, rank: 2, group: g.groupName });
                        }
                    });

                    if (promotedTeams.length === 0) return null;

                    const champCount = promotedTeams.filter(t => t.rank === 1).length;
                    const runnerUpCount = promotedTeams.filter(t => t.rank === 2).length;
                    const totalPlayoffMatches = Object.keys(playoffOverrides).length;

                    return (
                        <div className="bg-gradient-to-r from-emerald-900/50 via-slate-900 to-emerald-900/30 border border-emerald-500/30 rounded-xl p-6 relative overflow-hidden">
                            <h2 className="text-2xl font-bold text-white mb-6 flex items-center gap-2 relative z-10">
                                <span className="text-3xl">ğŸ‰</span>
                                <span className="bg-clip-text text-transparent bg-gradient-to-r from-emerald-400 to-teal-200">
                                    1. Lige YÃ¼kselen TakÄ±mlar
                                </span>
                            </h2>

                            <div className="grid grid-cols-1 lg:grid-cols-2 gap-6 relative z-10">
                                <div className="flex flex-col gap-3">
                                    {promotedTeams.map((team, idx) => (
                                        <div key={idx} className={`flex items-center gap-3 p-3 rounded-lg border backdrop-blur-sm transition-transform hover:scale-[1.02] ${team.rank === 1 ? 'bg-amber-500/10 border-amber-500/40' : 'bg-slate-700/30 border-slate-600/50'}`}>
                                            <div className={`w-10 h-10 flex items-center justify-center rounded-full text-lg font-bold shadow-lg ${team.rank === 1 ? 'bg-gradient-to-b from-amber-300 to-amber-600 text-white' : 'bg-gradient-to-b from-slate-300 to-slate-500 text-white'}`}>
                                                {team.rank === 1 ? 'ğŸ¥‡' : 'ğŸ¥ˆ'}
                                            </div>
                                            <TeamAvatar name={team.name} size="md" />
                                            <div className="flex-1">
                                                <div className="font-bold text-white text-lg leading-tight">{team.name}</div>
                                                <div className={`text-xs ${team.rank === 1 ? 'text-amber-400' : 'text-slate-400'}`}>
                                                    Final {team.group}. Grup {team.rank === 1 ? 'Åampiyonu' : 'Ä°kincisi'}
                                                </div>
                                            </div>
                                            <div className={`text-2xl ${team.rank === 1 ? 'text-amber-400' : 'text-slate-500'}`}>
                                                {team.rank === 1 ? 'ğŸ‘‘' : 'â­'}
                                            </div>
                                        </div>
                                    ))}
                                </div>

                                <div className="flex flex-col items-center justify-center gap-4 bg-slate-800/30 rounded-xl p-6 border border-slate-700/50">
                                    <div className="text-8xl animate-bounce">ğŸ†</div>
                                    <div className="text-center">
                                        <div className="text-lg font-bold text-white mb-1">Turnuva Ã–zeti</div>
                                        <div className="text-sm text-slate-400">2. Lig Play-Off 2025-26</div>
                                    </div>

                                    <div className="grid grid-cols-3 gap-4 w-full mt-2">
                                        <div className="text-center p-3 bg-slate-900/50 rounded-lg">
                                            <div className="text-2xl font-bold text-amber-400">{champCount}</div>
                                            <div className="text-[10px] text-slate-500 uppercase tracking-wider">Åampiyon</div>
                                        </div>
                                        <div className="text-center p-3 bg-slate-900/50 rounded-lg">
                                            <div className="text-2xl font-bold text-slate-300">{runnerUpCount}</div>
                                            <div className="text-[10px] text-slate-500 uppercase tracking-wider">Ä°kinci</div>
                                        </div>
                                        <div className="text-center p-3 bg-slate-900/50 rounded-lg">
                                            <div className="text-2xl font-bold text-emerald-400">{totalPlayoffMatches}</div>
                                            <div className="text-[10px] text-slate-500 uppercase tracking-wider">Toplam MaÃ§</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    );
                })()}

                {isGroupsComplete ? (
                    (() => {
                        const quarterMatchCount = Object.keys(playoffOverrides).filter(k => k.startsWith('quarter-')).length;
                        const isQuarterComplete = quarterMatchCount >= 24;

                        const semiMatchCount = Object.keys(playoffOverrides).filter(k => k.startsWith('semi-')).length;
                        const isSemiComplete = semiMatchCount >= 24;

                        return (
                            <div className="space-y-12">
                                {renderStageGroups('quarter', quarterGroups, 'Ã‡eyrek Final', 'bg-amber-500')}

                                <div className="relative">
                                    {!isQuarterComplete && (
                                        <div className="absolute inset-0 bg-slate-950/80 backdrop-blur-sm z-20 flex flex-col items-center justify-center rounded-xl py-8">
                                            <div className="text-4xl mb-2">ğŸ”’</div>
                                            <h3 className="text-lg font-bold text-white mb-1">YarÄ± Final Kilitli</h3>
                                            <p className="text-slate-400 text-xs text-center max-w-sm">
                                                YarÄ± Final gruplarÄ±nÄ± aÃ§mak iÃ§in Ã‡eyrek Final gruplarÄ±nÄ± tamamlayÄ±n.
                                            </p>
                                            <p className="text-amber-400 text-sm font-medium mt-2">
                                                {24 - quarterMatchCount} / 24 maÃ§ eksik
                                            </p>
                                        </div>
                                    )}
                                    <div className={!isQuarterComplete ? 'opacity-30 pointer-events-none select-none' : ''}>
                                        {renderStageGroups('semi', semiGroups, 'YarÄ± Final', 'bg-blue-500')}
                                    </div>
                                </div>

                                <div className="relative">
                                    {!isSemiComplete && (
                                        <div className="absolute inset-0 bg-slate-950/80 backdrop-blur-sm z-20 flex flex-col items-center justify-center rounded-xl py-8">
                                            <div className="text-4xl mb-2">ğŸ”’</div>
                                            <h3 className="text-lg font-bold text-white mb-1">Final Grubu Kilitli</h3>
                                            <p className="text-slate-400 text-xs text-center max-w-sm">
                                                Final grubunu aÃ§mak iÃ§in YarÄ± Final gruplarÄ±nÄ± tamamlayÄ±n.
                                            </p>
                                            <p className="text-blue-400 text-sm font-medium mt-2">
                                                {24 - semiMatchCount} / 24 maÃ§ eksik
                                            </p>
                                        </div>
                                    )}
                                    <div className={!isSemiComplete ? 'opacity-30 pointer-events-none select-none' : ''}>
                                        {renderStageGroups('final', finalGroups, 'Final Grubu', 'bg-emerald-500')}
                                    </div>
                                </div>
                            </div>
                        );
                    })()
                ) : (
                    <div className="relative">
                        <div className="absolute inset-0 bg-slate-950/80 backdrop-blur-sm z-20 flex flex-col items-center justify-start pt-16 rounded-xl">
                            <div className="text-6xl mb-4">ğŸ”’</div>
                            <h3 className="text-xl font-bold text-white mb-2">Play-Off Kilitli</h3>
                            <p className="text-slate-400 text-sm text-center max-w-md mb-4">
                                Play-Off senaryolarÄ±nÄ± dÃ¼zenleyebilmek iÃ§in Ã¶nce tÃ¼m grup maÃ§larÄ±nÄ± tahmin etmeniz gerekmektedir.
                            </p>
                            <p className="text-amber-400 font-medium">
                                {remainingGroupMatchesCount} maÃ§ eksik
                            </p>
                            <Link href="/2lig/tahminoyunu" className="mt-4 px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white font-bold rounded-lg transition-colors">
                                Tahminleri Tamamla â†’
                            </Link>
                        </div>
                        <div className="opacity-30 pointer-events-none select-none space-y-12">
                            {renderStageGroups('quarter', quarterGroups, 'Ã‡eyrek Final', 'bg-amber-500')}
                            {renderStageGroups('semi', semiGroups, 'YarÄ± Final', 'bg-blue-500')}
                            {renderStageGroups('final', finalGroups, 'Final Grubu', 'bg-emerald-500')}
                        </div>
                    </div>
                )}
            </div>
        </main>
    );
}

```

## File: app\2lig\playoffs\[stage]\[groupId]\page.tsx
```
"use client";

import { useEffect, useState } from "react";
import { useParams, useRouter } from "next/navigation";
import { Match, TeamStats } from "../../../../types";
import Link from "next/link";
import {
    GroupStanding,
    PlayoffGroup,
    PlayoffMatch,
    SCORES,
    calculateGroupStandings,
    generateQuarterGroups,
    generateSemiGroups,
    generateFinalGroups,
    generateGroupFixture,
    applyOverridesToGroups
} from "../../../../utils/playoffUtils";

export default function PlayoffGroupDetailPage() {
    const params = useParams();
    const router = useRouter();
    const stage = params.stage as 'quarter' | 'semi' | 'final';
    const groupId = params.groupId as string;

    const [loading, setLoading] = useState(true);
    const [currentGroup, setCurrentGroup] = useState<PlayoffGroup | null>(null);
    const [initialGroup, setInitialGroup] = useState<PlayoffGroup | null>(null); // Stable seed state
    const [groupFixture, setGroupFixture] = useState<PlayoffMatch[]>([]);
    const [overrides, setOverrides] = useState<Record<string, string>>({});
    const [originalFixture, setOriginalFixture] = useState<Match[]>([]);
    const [baseStandings, setBaseStandings] = useState<GroupStanding[]>([]);

    // Auto-save status
    const [saveStatus, setSaveStatus] = useState<'saved' | 'saving' | 'idle'>('idle');
    const [isLoaded, setIsLoaded] = useState(false);
    const [predicting, setPredicting] = useState(false);

    // Initial Rank Map for calculating diffs
    const [initialRanks, setInitialRanks] = useState<Map<string, number>>(new Map());

    // 1. Load Overrides from LocalStorage
    useEffect(() => {
        const saved = localStorage.getItem('playoffScenarios');
        if (saved) {
            try {
                setOverrides(JSON.parse(saved));
            } catch (e) {
                console.error('Failed to load playoff scenarios', e);
            }
        }
        setIsLoaded(true);
    }, []);

    // 2. Fetch Base Data (Once)
    useEffect(() => {
        async function fetchBaseData() {
            try {
                setLoading(true);
                const res = await fetch("/api/scrape");
                if (!res.ok) throw new Error("Veri Ã§ekilemedi");
                const data = await res.json();
                setOriginalFixture(data.fixture);
                const standings = calculateGroupStandings(data.teams);
                setBaseStandings(standings);
            } catch (err) {
                console.error(err);
            } finally {
                setLoading(false);
            }
        }
        fetchBaseData();
    }, []);

    // 3. Auto-save effect
    useEffect(() => {
        if (!isLoaded) return;

        setSaveStatus('saving');
        const timer = setTimeout(() => {
            localStorage.setItem('playoffScenarios', JSON.stringify(overrides));
            setSaveStatus('saved');
        }, 500);

        return () => clearTimeout(timer);
    }, [overrides, isLoaded]);

    // 4. Core Simulation Logic - Runs when Data is Ready OR Overrides Change OR Stage/Group Changes
    useEffect(() => {
        if (!originalFixture.length || !baseStandings.length) return;

        // Reconstruct the playoff tree to get to *this* group state
        const quarters = generateQuarterGroups(baseStandings, originalFixture);

        let targetGroups: PlayoffGroup[] = [];

        if (stage === 'quarter') {
            targetGroups = quarters;
        } else if (stage === 'semi') {
            const updatedQuarters = applyOverridesToGroups(quarters, overrides, 'quarter');
            targetGroups = generateSemiGroups(updatedQuarters);
        } else if (stage === 'final') {
            const updatedQuarters = applyOverridesToGroups(quarters, overrides, 'quarter');
            const semis = generateSemiGroups(updatedQuarters);
            const updatedSemis = applyOverridesToGroups(semis, overrides, 'semi');
            targetGroups = generateFinalGroups(updatedSemis);
        }

        const foundGroup = targetGroups.find(g => g.groupName === groupId);

        if (foundGroup) {
            // Only set initialGroup if it's the first derivation for this specific group/stage context
            // actually, we want initialGroup to be the 'base' state of this group before internal overrides are applied
            // But 'foundGroup' ALREADY has incoming overrides applied (e.g. from Quarter finals)
            // So foundGroup IS the seed for this stage.

            // We only want to set initialGroup if it changes significantly (e.g. different teams)
            // But simple equality check is complex.
            // Let's rely on re-calculating it.

            setInitialGroup(foundGroup);

            const rankMap = new Map<string, number>();
            foundGroup.teams.forEach((t, i) => rankMap.set(t.name, i + 1));
            setInitialRanks(rankMap);

            // Now apply *internal* overrides for *this* stage to this group
            const updatedGroupArray = applyOverridesToGroups([foundGroup], overrides, stage);
            setCurrentGroup(updatedGroupArray[0]);

            const fixture = generateGroupFixture([foundGroup], stage);
            setGroupFixture(fixture);
        }

    }, [baseStandings, originalFixture, overrides, stage, groupId]);


    function handleScoreSelect(matchId: string, score: string | null) {
        setOverrides(prev => {
            const next = { ...prev };
            if (score === null) {
                delete next[matchId];
            } else {
                next[matchId] = score;
            }
            return next;
        });
    }

    function predictGroupMatches() {
        if (!currentGroup) return;
        setPredicting(true);

        try {
            const predictions: Record<string, string> = {};
            const scores = ['3-0', '3-1', '3-2', '2-3', '1-3', '0-3'];
            groupFixture.forEach(match => {
                // Simple random prediction
                const randomScore = scores[Math.floor(Math.random() * scores.length)];
                predictions[match.id] = randomScore;
            });

            setOverrides(prev => ({ ...prev, ...predictions }));

        } catch (e) {
            console.error(e);
        } finally {
            setPredicting(false);
        }
    }

    const getStageInfo = () => {
        switch (stage) {
            case 'quarter': return { title: 'Ã‡eyrek Final', color: 'from-amber-600 to-amber-500', text: 'text-amber-500', nextStage: 'YarÄ± Final' };
            case 'semi': return { title: 'YarÄ± Final', color: 'from-blue-600 to-blue-500', text: 'text-blue-500', nextStage: 'Final' };
            case 'final': return { title: 'Final', color: 'from-emerald-600 to-emerald-500', text: 'text-emerald-500', nextStage: 'Åampiyon' };
            default: return { title: 'Play-Off', color: 'from-slate-600 to-slate-500', text: 'text-slate-500', nextStage: '-' };
        }
    };

    const stageInfo = getStageInfo();

    // Quick Navigation Groups
    const stageGroups = {
        quarter: ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H'],
        semi: ['A', 'B', 'C', 'D'],
        final: ['1', '2']
    };
    const currentStageGroups = stageGroups[stage] || [];

    // Next Round Projection Logic
    const getNextRoundMapping = (pos: 1 | 2) => {
        if (stage === 'quarter') {
            // Mapping based on official schema:
            // Semi A -> 1. Grup
            // Semi B -> 2. Grup
            // Semi C -> 3. Grup
            // Semi D -> 4. Grup
            // Keys must be Uppercase because URL might be lowercase but internal names are Upper.
            const map: Record<string, { 1: string, 2: string }> = {
                'A': { 1: '1', 2: '4' }, 'B': { 1: '2', 2: '3' },
                'C': { 1: '3', 2: '2' }, 'D': { 1: '4', 2: '1' },
                'E': { 1: '1', 2: '4' }, 'F': { 1: '2', 2: '3' },
                'G': { 1: '3', 2: '2' }, 'H': { 1: '4', 2: '1' }
            };
            const key = groupId.toUpperCase();
            return map[key]?.[pos] || '??';
        }
        if (stage === 'semi') {
            const map: Record<string, { 1: string, 2: string }> = {
                'A': { 1: '1', 2: '2' }, 'B': { 1: '2', 2: '1' },
                'C': { 1: '1', 2: '2' }, 'D': { 1: '2', 2: '1' }
            };
            const key = groupId.toUpperCase();
            return map[key]?.[pos] || '??';
        }
        return '?';
    };

    if (loading) {
        return (
            <main className="h-screen overflow-hidden bg-slate-950 text-slate-100 font-sans flex items-center justify-center p-4">
                <div className="text-center">
                    <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto mb-2 opacity-50"></div>
                </div>
            </main>
        );
    }

    if (!currentGroup) {
        return (
            <main className="h-screen bg-slate-950 text-slate-100 p-4 font-sans flex items-center justify-center">
                <div className="text-center">
                    <h2 className="text-lg font-bold text-white mb-2">Grup BulunamadÄ±</h2>
                    <Link href="/2lig/playoffs" className="px-3 py-1.5 bg-slate-700 hover:bg-slate-600 rounded text-xs text-white transition-colors">
                        Geri DÃ¶n
                    </Link>
                </div>
            </main>
        );
    }

    return (
        <main className="h-screen overflow-hidden bg-slate-950 text-slate-100 flex flex-col p-2 sm:p-4 font-sans">
            <div className="w-full max-w-[1400px] mx-auto flex flex-col h-full gap-3">

                {/* Header & Nav Row */}
                <div className="flex flex-col sm:flex-row items-center justify-between bg-slate-900 border border-slate-800 rounded-lg p-2 gap-2 flex-shrink-0">
                    <div className="flex items-center gap-3 w-full sm:w-auto overflow-hidden">
                        <Link href="/" className="flex-shrink-0 p-1.5 bg-slate-800 hover:bg-slate-700 rounded transition-colors text-slate-400 hover:text-white text-xs flex items-center gap-1">
                            <span>â†</span>
                            <span className="hidden sm:inline">Anasayfaya DÃ¶n</span>
                        </Link>
                        <div className="flex-1 min-w-0">
                            <h1 className="text-lg font-bold text-white tracking-tight truncate flex items-center gap-2">
                                <span className={`${stageInfo.text}`}>{stageInfo.title}</span>
                                <span className="text-slate-600">|</span>
                                <span>Grup {currentGroup.groupName}</span>
                                <span className="text-xs font-normal text-slate-500 hidden sm:inline-block">- Play-Off Senaryo</span>
                            </h1>
                        </div>
                    </div>

                    <div className="flex items-center gap-2 w-full sm:w-auto overflow-x-auto scrollbar-hide">
                        {/* Quick Nav */}
                        <div className="flex items-center gap-1 bg-slate-950/50 p-1 rounded-md">
                            {currentStageGroups.map(gId => {
                                const isActive = gId === groupId;
                                return (
                                    <Link
                                        key={gId}
                                        href={`/2lig/playoffs/${stage}/${gId}`}
                                        replace
                                        className={`px-2.5 py-1 text-xs font-bold rounded transition-all ${isActive
                                            ? `bg-gradient-to-r ${stageInfo.color} text-white shadow`
                                            : 'text-slate-500 hover:bg-slate-800 hover:text-slate-300'
                                            }`}
                                    >
                                        {gId}
                                    </Link>
                                )
                            })}
                        </div>

                        <div className="w-px h-6 bg-slate-800 mx-1 flex-shrink-0"></div>

                        <button
                            onClick={() => {
                                const groupMatches = groupFixture.map(m => m.id);
                                setOverrides(prev => {
                                    const next = { ...prev };
                                    groupMatches.forEach(id => delete next[id]);
                                    return next;
                                });
                            }}
                            className="px-2 py-1 bg-slate-800 hover:bg-rose-900/30 text-rose-400 hover:text-rose-300 text-xs rounded transition-colors whitespace-nowrap"
                        >
                            SÄ±fÄ±rla
                        </button>
                    </div>
                </div>

                {/* Main Content Area - Auto Height */}
                <div className="grid lg:grid-cols-12 gap-3 flex-1 min-h-0">

                    {/* Left Column: Standings + Projection (5 Cols) */}
                    <div className="lg:col-span-5 flex flex-col h-full gap-3">
                        {/* Standings */}
                        <div className="flex flex-col gap-0 min-h-0">
                            <div className={`bg-gradient-to-r ${stageInfo.color} px-3 py-1.5 rounded-t-lg shadow`}>
                                <h2 className="text-xs font-bold text-white text-center tracking-wide">PUAN DURUMU</h2>
                            </div>
                            <div className="bg-slate-900 border border-slate-800 rounded-b-lg overflow-x-auto">
                                <table className="w-full text-xs text-left table-fixed">
                                    <thead className="bg-slate-800 text-slate-400 uppercase text-[9px]">
                                        <tr>
                                            <th className="px-1 py-2 w-6 text-center">#</th>
                                            <th className="px-2 py-2 text-left w-auto">TakÄ±m</th>
                                            <th className="px-1 py-1 text-center w-6" title="Oynanan">O</th>
                                            <th className="px-1 py-1 text-center w-6" title="Galibiyet">G</th>
                                            <th className="px-1 py-1 text-center w-6" title="MaÄŸlubiyet">M</th>
                                            <th className="px-1 py-1 text-center w-7 font-bold text-slate-200" title="Puan">P</th>
                                            <th className="px-1 py-1 text-center w-6" title="AlÄ±nan">AS</th>
                                            <th className="px-1 py-1 text-center w-6" title="Verilen">VS</th>
                                        </tr>
                                    </thead>
                                    <tbody className="divide-y divide-slate-800/50">
                                        {currentGroup.teams.map((team, idx) => {
                                            const isQualifying = idx < 2;
                                            const oldRank = initialRanks.get(team.name);
                                            const currentRank = idx + 1;
                                            const hasMatches = groupFixture.some(m => overrides[m.id]);

                                            let diffIcon = null;
                                            if (hasMatches && oldRank) {
                                                const diff = oldRank - currentRank;
                                                if (diff > 0) diffIcon = <span className="text-emerald-500 text-[9px]">â–²</span>;
                                                else if (diff < 0) diffIcon = <span className="text-rose-500 text-[9px]">â–¼</span>;
                                            }

                                            return (
                                                <tr key={team.name} className={`hover:bg-slate-800/50 transition-colors ${isQualifying ? 'bg-emerald-950/10' : ''}`}>
                                                    <td className="px-1 py-1.5 text-slate-500 text-center relative">
                                                        <span className={`text-sm font-medium ${isQualifying ? 'text-emerald-400' : 'text-slate-500'}`}>{idx + 1}</span>
                                                        {diffIcon && <div className="absolute top-0.5 right-0">{diffIcon}</div>}
                                                    </td>
                                                    <td className="px-2 py-1.5">
                                                        <div className="font-semibold text-white text-xs truncate leading-tight w-24 sm:w-auto" title={team.name}>{team.name}</div>
                                                        <div className="text-[9px] text-slate-500 truncate mt-0.5">{team.sourceGroup}</div>
                                                    </td>
                                                    <td className="px-1 py-1.5 text-center text-slate-400">{team.scenarioPlayed}</td>
                                                    <td className="px-1 py-1.5 text-center text-emerald-400">{team.scenarioWins}</td>
                                                    <td className="px-1 py-1.5 text-center text-rose-400">{team.scenarioLosses}</td>
                                                    <td className="px-1 py-1.5 text-center font-bold text-white text-sm bg-slate-800/30 rounded">{team.scenarioPoints}</td>
                                                    <td className="px-1 py-1.5 text-center text-slate-500">{team.scenarioSetsWon}</td>
                                                    <td className="px-1 py-1.5 text-center text-slate-500">{team.scenarioSetsLost}</td>
                                                </tr>
                                            );
                                        })}
                                    </tbody>
                                </table>
                                <div className="p-1.5 text-[9px] text-slate-600 text-center border-t border-slate-800/50">
                                    Ä°lk 2 takÄ±m bir sonraki tura yÃ¼kselir.
                                </div>
                            </div>
                        </div>

                        {/* Next Round Projection */}
                        <div className="bg-slate-900 border border-slate-800 rounded-lg p-3 flex-1">
                            <h3 className="text-xs font-bold text-slate-400 uppercase tracking-wide mb-3 text-center border-b border-slate-800/50 pb-2">
                                ğŸ”® {stageInfo.nextStage} YolculuÄŸu
                            </h3>
                            <div className="space-y-2">
                                {/* 1st Place */}
                                <div className={`flex items-center gap-3 p-2 rounded-lg border ${stage === 'final' ? 'bg-amber-500/10 border-amber-500/30' : 'bg-emerald-950/10 border-emerald-900/30'}`}>
                                    <div className={`w-6 h-6 flex items-center justify-center rounded text-xs font-bold ${stage === 'final' ? 'bg-amber-500/20 text-amber-500' : 'bg-emerald-500/10 text-emerald-500'}`}>1</div>
                                    <div className="flex-1 min-w-0">
                                        <div className="text-xs font-bold text-white truncate">{currentGroup.teams[0]?.name || '-'}</div>
                                        <div className={`text-[10px] ${stage === 'final' ? 'text-amber-400 font-bold' : 'text-emerald-400'}`}>
                                            {stage === 'final' ? '1. Lige YÃ¼kselir ğŸ†' : `YarÄ± Final ${getNextRoundMapping(1)}. Grup'a gider`}
                                        </div>
                                    </div>
                                    <div className="text-xl opacity-20">{stage === 'final' ? 'ğŸ¥‡' : 'âœˆï¸'}</div>
                                </div>

                                {/* 2nd Place */}
                                <div className={`flex items-center gap-3 p-2 rounded-lg border ${stage === 'final' ? 'bg-emerald-500/10 border-emerald-500/30' : 'bg-slate-800/30 border-slate-700/30'}`}>
                                    <div className={`w-6 h-6 flex items-center justify-center rounded text-xs font-bold ${stage === 'final' ? 'bg-emerald-500/20 text-emerald-500' : 'bg-slate-700/50 text-slate-400'}`}>2</div>
                                    <div className="flex-1 min-w-0">
                                        <div className="text-xs font-semibold text-slate-300 truncate">{currentGroup.teams[1]?.name || '-'}</div>
                                        <div className={`text-[10px] ${stage === 'final' ? 'text-emerald-400 font-bold' : 'text-slate-500'}`}>
                                            {stage === 'final' ? '1. Lige YÃ¼kselir ğŸ†' : `YarÄ± Final ${getNextRoundMapping(2)}. Grup'a gider`}
                                        </div>
                                    </div>
                                    <div className="text-xl opacity-20">{stage === 'final' ? 'ğŸ¥ˆ' : 'âœˆï¸'}</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* Right Column: Fixtures (7 Cols) */}
                    <div className="lg:col-span-7 flex flex-col h-full gap-2 min-h-0">
                        <div className="flex items-center justify-between px-1">
                            <h2 className="text-xs font-semibold text-slate-400 uppercase tracking-wider">MaÃ§ FikstÃ¼rÃ¼</h2>
                            <button
                                onClick={predictGroupMatches}
                                disabled={predicting}
                                className="px-2 py-1 bg-purple-600/20 hover:bg-purple-600/40 text-purple-300 hover:text-white border border-purple-500/30 disabled:opacity-50 text-[10px] rounded transition-colors flex items-center gap-1.5"
                            >
                                {predicting ? <span className="animate-spin">â³</span> : 'ğŸ”®'}
                                {predicting ? '...' : 'TÃ¼mÃ¼nÃ¼ Tahmin Et'}
                            </button>
                        </div>

                        {/* Fixture Grid - Scrollable if needed, but designed to fit */}
                        <div className="flex-1 overflow-y-auto min-h-0 pr-1">
                            <div className="grid grid-cols-1 gap-2 pb-2">
                                {groupFixture.map((match, mIdx) => {
                                    const currentScore = overrides[match.id];
                                    return (
                                        <div key={match.id} className="bg-slate-900 border border-slate-800 rounded p-2 hover:border-slate-700 transition-colors group flex items-center gap-3">
                                            {/* Match Index */}
                                            <div className="text-[9px] font-bold text-slate-600 w-4 text-center shrink-0">
                                                {mIdx + 1}.
                                            </div>

                                            <div className="flex-1 flex flex-col gap-1.5 min-w-0">
                                                {/* Teams Row */}
                                                <div className="flex items-center justify-between text-[11px] leading-tight">
                                                    <div className="w-[45%] text-right font-medium text-slate-300 truncate" title={match.homeTeam}>{match.homeTeam}</div>
                                                    <div className="text-[9px] text-slate-600 font-mono shrink-0">v</div>
                                                    <div className="w-[45%] text-left font-medium text-slate-300 truncate" title={match.awayTeam}>{match.awayTeam}</div>
                                                </div>

                                                {/* Scores Row */}
                                                <div className="flex justify-center gap-1">
                                                    {SCORES.map(score => {
                                                        const isSelected = currentScore === score;
                                                        const [h, a] = score.split('-').map(Number);
                                                        const homeWin = h > a;

                                                        return (
                                                            <button
                                                                key={score}
                                                                onClick={() => handleScoreSelect(match.id, isSelected ? null : score)}
                                                                className={`w-8 h-5 flex items-center justify-center rounded-[3px] text-[9px] font-bold transition-all border ${isSelected
                                                                    ? homeWin
                                                                        ? 'bg-emerald-600 border-emerald-500 text-white'
                                                                        : 'bg-rose-600 border-rose-500 text-white'
                                                                    : 'bg-slate-950 border-slate-800 text-slate-500 hover:bg-slate-800 hover:text-slate-300'
                                                                    }`}
                                                            >
                                                                {score}
                                                            </button>
                                                        );
                                                    })}
                                                </div>
                                            </div>
                                        </div>
                                    );
                                })}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    );
}

```

## File: app\2lig\stats\page.tsx
```
import { Metadata } from "next";
import { getLeagueData } from "../../utils/serverData";
import TwoLigStatsClient from "./TwoLigStatsClient";

export const metadata: Metadata = {
    title: "2. Lig Ä°statistikler",
    description: "KadÄ±nlar 2. Lig takÄ±m istatistikleri ve performans analizleri. 5 grup detaylÄ± veriler.",
    openGraph: {
        title: "2. Lig Ä°statistikler | VolleySimulator",
        description: "2. Lig takÄ±m istatistikleri ve performans analizleri.",
    },
};

export default async function TwoLigStatsPage() {
    const { teams } = await getLeagueData("2lig");

    return (
        <TwoLigStatsClient initialTeams={teams} />
    );
}

```

## File: app\2lig\stats\TwoLigStatsClient.tsx
```
"use client";

import { useState, useMemo } from "react";
import { TeamStats } from "../../types";

import TeamAvatar from "@/app/components/TeamAvatar";

interface TwoLigStatsClientProps {
    initialTeams: TeamStats[];
}

interface ExtendedTeamStats extends TeamStats {
    losses: number;
    winRate: number;
    setRatioDisplay: string;
}

export default function TwoLigStatsClient({ initialTeams }: TwoLigStatsClientProps) {
    const [activeTab, setActiveTab] = useState("GENEL");

    const groups = useMemo(() => {
        return Array.from(new Set(initialTeams.map((t: TeamStats) => t.groupName)))
            .sort((a: string, b: string) => {
                const numA = parseInt(a) || 0;
                const numB = parseInt(b) || 0;
                if (numA === numB) return a.localeCompare(b);
                return numA - numB;
            }) as string[];
    }, [initialTeams]);

    const filteredTeams = useMemo(() => activeTab === "GENEL"
        ? initialTeams
        : initialTeams.filter(t => t.groupName === activeTab), [initialTeams, activeTab]);

    const teamsWithStats = useMemo(() => filteredTeams.map(t => ({
        ...t,
        losses: (t.played || 0) - (t.wins || 0),
        winRate: (t.played || 0) > 0 ? Math.round(((t.wins || 0) / (t.played || 0)) * 100) : 0,
        setRatioDisplay: (t.setsLost || 0) > 0 ? ((t.setsWon || 0) / (t.setsLost || 0)).toFixed(2) : (t.setsWon || 0).toString()
    })), [filteredTeams]);

    const totalMatches = useMemo(() => teamsWithStats.reduce((sum, t) => sum + (t.played || 0), 0) / 2, [teamsWithStats]);
    const totalSets = useMemo(() => teamsWithStats.reduce((sum, t) => sum + (t.setsWon || 0), 0), [teamsWithStats]);
    const avgPointsPerTeam = useMemo(() => teamsWithStats.length > 0
        ? Math.round(teamsWithStats.reduce((sum, t) => sum + (t.points || 0), 0) / teamsWithStats.length)
        : 0, [teamsWithStats]);

    const leastLosses = useMemo(() => [...teamsWithStats].sort((a, b) => a.losses - b.losses || b.wins - a.wins).slice(0, 5), [teamsWithStats]);
    const mostLosses = useMemo(() => [...teamsWithStats].sort((a, b) => b.losses - a.losses || a.wins - b.wins).slice(0, 5), [teamsWithStats]);
    const mostSets = useMemo(() => [...teamsWithStats].sort((a, b) => b.setsWon - a.setsWon).slice(0, 5), [teamsWithStats]);
    const mostPoints = useMemo(() => [...teamsWithStats].sort((a, b) => b.points - a.points).slice(0, 5), [teamsWithStats]);
    const leastSetsLost = useMemo(() => [...teamsWithStats].sort((a, b) => a.setsLost - b.setsLost || b.wins - a.wins).slice(0, 5), [teamsWithStats]);
    const bestWinRate = useMemo(() => [...teamsWithStats].filter(t => (t.played || 0) >= 3).sort((a, b) => b.winRate - a.winRate).slice(0, 5), [teamsWithStats]);

    return (
        <main className="min-h-screen bg-slate-950 text-slate-100 p-2 sm:p-4 font-sans">
            <div className="max-w-7xl mx-auto space-y-4 sm:space-y-6">
                <div className="flex flex-col gap-1 px-1">
                    <h1 className="font-bold text-white text-lg tracking-tight leading-none hidden sm:block">2. Lig Ä°statistikleri</h1>
                    <p className="text-[10px] text-slate-400 hidden sm:block">KadÄ±nlar 2. Ligi Ä°statistik Merkezi</p>
                </div>

                <div className="flex bg-slate-900/50 p-1 rounded-xl border border-slate-800/50 overflow-x-auto no-scrollbar snap-x">
                    <button
                        onClick={() => setActiveTab("GENEL")}
                        className={`px-4 py-2 rounded-lg text-xs font-bold transition-all whitespace-nowrap snap-start ${activeTab === "GENEL"
                            ? "bg-emerald-500 text-white shadow-lg shadow-emerald-500/20"
                            : "text-slate-400 hover:text-white hover:bg-slate-800"
                            }`}
                    >
                        GENEL Ä°STATÄ°STÄ°KLER
                    </button>
                    {groups.map(group => (
                        <button
                            key={group}
                            onClick={() => setActiveTab(group)}
                            className={`px-4 py-2 rounded-lg text-xs font-bold transition-all whitespace-nowrap ml-1 snap-start ${activeTab === group
                                ? "bg-emerald-500 text-white shadow-lg shadow-emerald-500/20"
                                : "text-slate-400 hover:text-white hover:bg-slate-800"
                                }`}
                        >
                            {group}
                        </button>
                    ))}
                </div>

                <div className="grid grid-cols-3 gap-2 sm:gap-4">
                    <div className="bg-gradient-to-br from-emerald-600/20 to-emerald-900/10 rounded-xl sm:rounded-2xl p-3 sm:p-4 border border-emerald-600/30 text-center">
                        <div className="text-2xl sm:text-4xl font-bold text-emerald-400">{Math.round(totalMatches)}</div>
                        <div className="text-[10px] sm:text-xs text-emerald-400/70 uppercase tracking-wider mt-1">Toplam MaÃ§</div>
                    </div>
                    <div className="bg-gradient-to-br from-teal-600/20 to-teal-900/10 rounded-xl sm:rounded-2xl p-3 sm:p-4 border border-teal-600/30 text-center">
                        <div className="text-2xl sm:text-4xl font-bold text-teal-400">{totalSets}</div>
                        <div className="text-[10px] sm:text-xs text-teal-400/70 uppercase tracking-wider mt-1">Toplam Set</div>
                    </div>
                    <div className="bg-gradient-to-br from-cyan-600/20 to-cyan-900/10 rounded-xl sm:rounded-2xl p-3 sm:p-4 border border-cyan-600/30 text-center">
                        <div className="text-2xl sm:text-4xl font-bold text-cyan-400">{avgPointsPerTeam}</div>
                        <div className="text-[10px] sm:text-xs text-cyan-400/70 uppercase tracking-wider mt-1">Ort. Puan</div>
                    </div>
                </div>

                <div className="grid sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 pb-8">
                    <StatCard
                        title="En Ã‡ok Puan"
                        icon="ğŸ’"
                        teams={mostPoints}
                        statKey="points"
                        color="bg-emerald-500"
                        gradient="bg-gradient-to-r from-emerald-600 to-teal-600"
                        suffix="P"
                    />
                    <StatCard
                        title="En YÃ¼ksek Galibiyet"
                        icon="ğŸ“ˆ"
                        teams={bestWinRate}
                        statKey="winRate"
                        color="bg-teal-500"
                        gradient="bg-gradient-to-r from-teal-600 to-cyan-600"
                        suffix="%"
                    />
                    <StatCard
                        title="En Ã‡ok Set Alan"
                        icon="ğŸ"
                        teams={mostSets}
                        statKey="setsWon"
                        color="bg-cyan-500"
                        gradient="bg-gradient-to-r from-cyan-600 to-blue-600"
                    />
                    <StatCard
                        title="En Az MaÄŸlubiyet"
                        icon="ğŸ›¡ï¸"
                        teams={leastLosses}
                        statKey="losses"
                        color="bg-green-500"
                        gradient="bg-gradient-to-r from-green-600 to-emerald-600"
                        suffix="M"
                    />
                    <StatCard
                        title="En Az Set Veren"
                        icon="ğŸ§±"
                        teams={leastSetsLost}
                        statKey="setsLost"
                        color="bg-rose-500"
                        gradient="bg-gradient-to-r from-rose-600 to-red-600"
                    />
                    <StatCard
                        title="En Ã‡ok MaÄŸlubiyet"
                        icon="ğŸ“‰"
                        teams={mostLosses}
                        statKey="losses"
                        color="bg-slate-500"
                        gradient="bg-gradient-to-r from-slate-600 to-slate-700"
                        suffix="M"
                    />
                </div>
            </div>
        </main>
    );
}

// Extracted Component
const StatCard = ({ title, icon, teams, statKey, color, gradient, suffix = "" }: {
    title: string; icon: string;
    teams: ExtendedTeamStats[];
    statKey: 'losses' | 'wins' | 'setsWon' | 'setsLost' | 'points' | 'winRate';
    color: string;
    gradient: string;
    suffix?: string;
}) => {
    const maxValue = Math.max(...teams.map(t => Number(t[statKey])), 1);

    return (
        <div className="bg-slate-950/50 backdrop-blur-md rounded-xl border border-slate-800/60 overflow-hidden hover:border-slate-700/80 transition-all duration-300 group shadow-md hover:shadow-lg">
            <div className={`${gradient} px-2.5 py-2 border-b border-white/10 relative overflow-hidden`}>
                <div className="absolute inset-0 bg-white/5 opacity-0 group-hover:opacity-100 transition-opacity"></div>
                <div className="flex items-center justify-between relative z-10">
                    <h3 className="font-bold text-white text-[11px] uppercase tracking-wider flex items-center gap-1.5">
                        <span className="text-sm">{icon}</span> {title}
                    </h3>
                    <span className="text-[9px] font-bold text-white/70 bg-black/20 px-1.5 py-0.5 rounded-full border border-white/10">TOP 5</span>
                </div>
            </div>

            <div className="p-1.5 space-y-1">
                {teams.map((t, idx) => (
                    <div
                        key={t.name}
                        className={`flex items-center gap-2 p-1.5 rounded-lg transition-all ${idx === 0 ? 'bg-gradient-to-r from-white/5 to-transparent border border-white/10' : 'hover:bg-white/5'
                            }`}
                    >
                        <div className={`w-5 h-5 rounded flex items-center justify-center font-bold text-[10px] shadow-sm ${idx === 0 ? 'bg-amber-400 text-amber-950' :
                            idx === 1 ? 'bg-slate-300 text-slate-800' :
                                idx === 2 ? 'bg-amber-700 text-amber-100' :
                                    'bg-slate-800 text-slate-500'
                            }`}>
                            {idx + 1}
                        </div>
                        <TeamAvatar name={t.name} size="xs" />

                        <div className="flex-1 min-w-0">
                            <span className={`text-[11px] font-bold truncate block ${idx === 0 ? 'text-white' : 'text-slate-300'}`} title={t.name}>
                                {t.name}
                            </span>
                            {t.groupName && (
                                <span className="text-[8px] text-slate-500 block leading-tight">{t.groupName}</span>
                            )}
                        </div>

                        <div className="flex items-center gap-1.5 w-16 justify-end">
                            <div className="h-1 bg-slate-800/50 rounded-full overflow-hidden flex-1 max-w-[30px]">
                                <div className={`h-full ${color} opacity-80`} style={{ '--stat-width': `${Math.min((Number(t[statKey]) / maxValue) * 100, 100)}%`, width: 'var(--stat-width)' } as any}></div>
                            </div>
                            <span className={`text-[11px] font-bold min-w-[24px] text-right ${idx === 0 ? 'text-white' : 'text-slate-400'}`}>
                                {t[statKey]}{suffix}
                            </span>
                        </div>
                    </div>
                ))}
            </div>
        </div>
    );
};

```

## File: app\2lig\tahminoyunu\page.tsx
```
import { Suspense } from "react";
import { Metadata } from "next";
import { getLeagueData } from "../../utils/serverData";
import TwoLigCalculatorClient from "./TwoLigCalculatorClient";
import ErrorBoundary from "../../components/ErrorBoundary";
import { SkeletonPage } from "../../components/Skeleton";

export const metadata: Metadata = {
    title: "2. Lig Tahmin Oyunu",
    description: "KadÄ±nlar 2. Lig maÃ§ sonuÃ§larÄ±nÄ± tahmin edin. 5 gruplu sistemde takÄ±mlarÄ±n maÃ§larÄ±nÄ± tahmin ederek puan kazanÄ±n.",
    openGraph: {
        title: "2. Lig Tahmin Oyunu | VolleySimulator",
        description: "2. Lig maÃ§ sonuÃ§larÄ±nÄ± tahmin edin ve liderlik tablosunda yerinizi alÄ±n.",
    },
};

export default async function TwoLigTahminOyunuPage() {
    const { teams, fixture } = await getLeagueData("2lig");

    return (
        <ErrorBoundary>
            <Suspense fallback={<SkeletonPage />}>
                <TwoLigCalculatorClient
                    initialTeams={teams}
                    initialMatches={fixture}
                />
            </Suspense>
        </ErrorBoundary>
    );
}

```

## File: app\2lig\tahminoyunu\TwoLigCalculatorClient.tsx
```
"use client";

import { useEffect, useState, useRef, useMemo } from "react";
import { useSearchParams } from "next/navigation";
import { TeamStats, Match, Achievement } from "../../types";

import { useToast, AchievementToast, AchievementsPanel } from "../../components";
import StandingsTable from "../../components/Calculator/StandingsTable";
import FixtureList from "../../components/Calculator/FixtureList";
import ShareButton from "../../components/ShareButton";
import { calculateLiveStandings } from "../../utils/calculatorUtils";
import { calculateElo } from "../../utils/eloCalculator";
import { useGameState, ACHIEVEMENTS } from "../../utils/gameState";
import { sounds } from "../../utils/sounds";

interface TwoLigCalculatorClientProps {
    initialTeams: TeamStats[];
    initialMatches: Match[];
}

export default function TwoLigCalculatorClient({ initialTeams, initialMatches }: TwoLigCalculatorClientProps) {
    const { showToast, showUndoToast } = useToast();
    const searchParams = useSearchParams();
    const groupParam = searchParams.get("group");
    const standingsRef = useRef<HTMLDivElement>(null);

    // Normalize data (Matching original fetchData logic)
    const normalizedData = useMemo(() => {
        const teamsData: any[] = initialTeams.filter((item: any) => item.name && !item.homeTeam);
        const matchesData: any[] = initialMatches;

        return { teams: teamsData, matches: matchesData };
    }, [initialTeams, initialMatches]);

    // Data State
    const [allTeams] = useState<TeamStats[]>(normalizedData.teams);
    const [allMatches] = useState<Match[]>(normalizedData.matches);
    const groups = useMemo(() => [...new Set(normalizedData.teams.map(t => t.groupName))].sort((a: any, b: any) => {
        const numA = parseInt(a.match(/\d+/)?.[0] || "0");
        const numB = parseInt(b.match(/\d+/)?.[0] || "0");
        return numA - numB;
    }), [normalizedData.teams]);

    // UI State
    const [selectedGroup, setSelectedGroup] = useState<string>(groupParam && groups.includes(groupParam) ? groupParam : (groups[0] || "1. GRUP"));
    const [overrides, setOverrides] = useState<Record<string, string>>({});
    const [showAchievements, setShowAchievements] = useState(false);
    const [showAutoMenu, setShowAutoMenu] = useState(false);
    const [showResetMenu, setShowResetMenu] = useState(false);
    const [newAchievement, setNewAchievement] = useState<Achievement | null>(null);

    // Game State
    const { gameState, addXP, recordPrediction, unlockAchievement, hasAchievement } = useGameState();

    // Load saved scenarios on mount
    useEffect(() => {
        const saved = localStorage.getItem('groupScenarios');
        if (saved) {
            try {
                const parsed = JSON.parse(saved);
                let flatOverrides: Record<string, string> = {};
                Object.values(parsed).forEach((groupObj: any) => {
                    flatOverrides = { ...flatOverrides, ...groupObj };
                });
                setOverrides(flatOverrides);
            } catch (e) { console.error(e); }
        }
    }, []);

    const handleScoreChange = (matchId: string, score: string) => {
        const newOverrides = { ...overrides };
        const wasNew = !overrides[matchId];

        if (score) {
            newOverrides[matchId] = score;
            if (wasNew) {
                addXP(10);
                sounds.scoreSelect();
                if (!hasAchievement('first_prediction')) {
                    const wasUnlocked = unlockAchievement('first_prediction');
                    if (wasUnlocked) {
                        setNewAchievement(ACHIEVEMENTS.first_prediction as Achievement);
                        sounds.achievement();
                    }
                }
                if (gameState.stats.totalPredictions >= 49 && !hasAchievement('game_addict')) {
                    const wasUnlocked = unlockAchievement('game_addict');
                    if (wasUnlocked) {
                        setNewAchievement(ACHIEVEMENTS.game_addict as Achievement);
                        sounds.achievement();
                    }
                }
                recordPrediction(true);
            }
        } else {
            delete newOverrides[matchId];
        }
        setOverrides(newOverrides);
    };

    // Persist overrides to localStorage
    useEffect(() => {
        if (!selectedGroup) return;
        const saved = localStorage.getItem('groupScenarios');
        const globalObj = saved ? JSON.parse(saved) : {};
        const newGlobalObj = { ...globalObj };
        groups.forEach(g => {
            const groupMatches = allMatches.filter(m => m.groupName === g);
            const groupOverrides: Record<string, string> = {};
            groupMatches.forEach(m => {
                const id = `${m.homeTeam}-${m.awayTeam}`;
                if (overrides[id]) groupOverrides[id] = overrides[id];
            });
            newGlobalObj[g] = groupOverrides;
        });
        localStorage.setItem('groupScenarios', JSON.stringify(newGlobalObj));
    }, [overrides, groups, allMatches, selectedGroup]);

    const activeGroup = selectedGroup || groups[0];

    const activeTeams = useMemo(() =>
        allTeams.filter(t => t.groupName === activeGroup),
        [allTeams, activeGroup]
    );

    const activeMatches = useMemo(() =>
        allMatches.filter(m => m.groupName === activeGroup),
        [allMatches, activeGroup]
    );

    const handleResetGroup = () => {
        if (!confirm(`${activeGroup} grubundaki tahminleriniz silinecek. Emin misiniz?`)) return;
        const newOverrides = { ...overrides };
        const groupMatches = allMatches.filter(m => m.groupName === activeGroup);
        groupMatches.forEach(m => {
            const id = `${m.homeTeam}-${m.awayTeam}`;
            delete newOverrides[id];
        });
        setOverrides(newOverrides);
        showToast(`${activeGroup} tahminleri sÄ±fÄ±rlandÄ±`, "success");
    };

    const handleResetAll = () => {
        const previousOverrides = { ...overrides };
        setOverrides({});
        localStorage.removeItem('groupScenarios');
        showUndoToast("TÃ¼m 2. Lig tahminleri sÄ±fÄ±rlandÄ±", () => {
            setOverrides(previousOverrides);
            localStorage.setItem('groupScenarios', JSON.stringify(previousOverrides));
        });
    };

    // Memoize standings calculations
    const initialStandings = useMemo(() =>
        calculateLiveStandings(activeTeams, activeMatches, {}),
        [activeTeams, activeMatches]
    );

    const initialRanks = useMemo(() => {
        const ranks = new Map<string, number>();
        initialStandings.forEach((team, idx) => ranks.set(team.name, idx + 1));
        return ranks;
    }, [initialStandings]);

    const liveStandings = useMemo(() =>
        calculateLiveStandings(activeTeams, activeMatches, overrides),
        [activeTeams, activeMatches, overrides]
    );

    const currentRanks = useMemo(() => {
        const ranks = new Map<string, number>();
        liveStandings.forEach((team, idx) => ranks.set(team.name, idx + 1));
        return ranks;
    }, [liveStandings]);

    // Export / Import Handlers
    const handleSaveAllScenarios = () => {
        try {
            const exportData = {
                league: '2. Lig',
                groupScenarios: JSON.parse(localStorage.getItem('groupScenarios') || '{}'),
                date: new Date().toISOString()
            };
            const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(exportData, null, 2));
            const a = document.createElement('a');
            a.href = dataStr;
            a.download = `senaryo-${new Date().toLocaleDateString('tr-TR')}.json`;
            a.click();
            showToast("Senaryo indirildi", "success");
        } catch (e) { console.error(e); }
    };

    const handleScrollToNextMatch = () => {
        const nextMatch = activeMatches.find(m => !m.isPlayed && !overrides[`${m.homeTeam}-${m.awayTeam}`]);
        if (nextMatch) {
            const id = `match-${nextMatch.homeTeam}-${nextMatch.awayTeam}`;
            const el = document.getElementById(id);
            if (el) {
                el.scrollIntoView({ behavior: 'smooth', block: 'center' });
                el.classList.add('ring-2', 'ring-emerald-500');
                setTimeout(() => el.classList.remove('ring-2', 'ring-emerald-500'), 2000);
            }
        }
    };

    const handleImportAllScenarios = (e: React.ChangeEvent<HTMLInputElement>) => {
        const file = e.target.files?.[0];
        if (!file) return;
        const reader = new FileReader();
        reader.onload = (evt) => {
            try {
                const json = JSON.parse(evt.target?.result as string);
                if (json.groupScenarios) {
                    const convertedScenarios: Record<string, Record<string, string>> = {};
                    for (const [groupName, groupData] of Object.entries(json.groupScenarios)) {
                        convertedScenarios[groupName] = {};
                        for (const [matchKey, score] of Object.entries(groupData as Record<string, string>)) {
                            const newKey = matchKey.includes('|||') ? matchKey.replace('|||', '-') : matchKey;
                            convertedScenarios[groupName][newKey] = score;
                        }
                    }
                    localStorage.setItem('groupScenarios', JSON.stringify(convertedScenarios));
                    let flat: Record<string, string> = {};
                    Object.values(convertedScenarios).forEach((obj: any) => flat = { ...flat, ...obj });
                    setOverrides(flat);
                }
                showToast("Senaryo yÃ¼klendi", "success");
            } catch (err) { console.error(err); }
        }
        reader.readAsText(file);
        e.target.value = '';
    }

    // Auto Simulation Logic
    const handleSimulateSmart = () => {
        if (!confirm(`${activeGroup} grubu iÃ§in oynanmamÄ±ÅŸ maÃ§lar gÃ¼ncel gÃ¼Ã§ dengelerine gÃ¶re doldurulacak. OnaylÄ±yor musunuz?`)) return;
        const newOverrides = { ...overrides };
        let count = 0;
        const eloRatings = calculateElo(activeTeams, activeMatches.filter(m => m.isPlayed));
        activeMatches.forEach(match => {
            if (match.isPlayed || newOverrides[`${match.homeTeam}-${match.awayTeam}`]) return;
            const homeElo = eloRatings.get(match.homeTeam) || 1200;
            const awayElo = eloRatings.get(match.awayTeam) || 1200;
            const winProb = 1 / (1 + Math.pow(10, (awayElo - homeElo) / 400));
            const randomFactor = (Math.random() * 0.15) - 0.075;
            const finalProb = winProb + randomFactor;
            let score = "0-0";
            if (finalProb > 0.60) score = "3-0";
            else if (finalProb > 0.55) score = "3-1";
            else if (finalProb > 0.50) score = "3-2";
            else if (finalProb > 0.45) score = "2-3";
            else if (finalProb > 0.40) score = "1-3";
            else score = "0-3";
            newOverrides[`${match.homeTeam}-${match.awayTeam}`] = score;
            count++;
        });
        setOverrides(newOverrides);
        if (count > 0) {
            sounds.levelUp();
            showToast(`${count} maÃ§ gÃ¼Ã§ dengelerine gÃ¶re tahmin edildi! ğŸ§ `, "success");
            addXP(count * 2);
        }
    };

    const handleSimulateRandom = () => {
        if (!confirm(`${activeGroup} grubu iÃ§in oynanmamÄ±ÅŸ maÃ§lar RASTGELE skorlarla doldurulacak. OnaylÄ±yor musunuz?`)) return;
        const newOverrides = { ...overrides };
        let count = 0;
        const scores = ["3-0", "3-1", "3-2", "2-3", "1-3", "0-3"];
        activeMatches.forEach(match => {
            if (match.isPlayed || newOverrides[`${match.homeTeam}-${match.awayTeam}`]) return;
            const randomScore = scores[Math.floor(Math.random() * scores.length)];
            newOverrides[`${match.homeTeam}-${match.awayTeam}`] = randomScore;
            count++;
        });
        setOverrides(newOverrides);
        if (count > 0) {
            sounds.levelUp();
            showToast(`${count} maÃ§ rastgele tahmin edildi! ğŸ²`, "success");
            addXP(count * 2);
        }
    };

    return (
        <main className="min-h-screen bg-slate-950 text-slate-100 p-1 sm:p-2 font-sans">
            <div className="w-full max-w-7xl mx-auto flex flex-col h-full gap-2">
                <div className="flex flex-col sm:flex-row items-center justify-between gap-3 p-2 bg-slate-900/40 rounded-xl border border-slate-800">
                    <div className="flex flex-col sm:flex-row items-center gap-4 w-full sm:w-auto">
                        <div className="text-center sm:text-left">
                            <h1 className="font-bold text-white text-lg tracking-tight leading-none hidden sm:block">KadÄ±nlar 2. Lig</h1>
                            <p className="text-[10px] text-slate-400 hidden sm:block">Tahmin Oyunu</p>
                        </div>
                        <div className="flex gap-2 items-center w-full sm:w-auto">
                            <span className="text-[10px] font-bold text-slate-500 uppercase tracking-widest hidden sm:inline whitespace-nowrap">GRUP:</span>
                            <select
                                value={activeGroup}
                                onChange={(e) => setSelectedGroup(e.target.value)}
                                title="Grup SeÃ§in"
                                className="flex-1 sm:flex-none px-3 py-1.5 bg-slate-800 hover:bg-slate-700 text-white text-xs font-bold rounded-lg border border-slate-700 hover:border-slate-600 outline-none cursor-pointer transition-all focus:ring-2 focus:ring-emerald-500/50 focus:border-emerald-500"
                            >
                                {groups.map(groupName => (
                                    <option key={groupName} value={groupName} className="bg-slate-900 text-white py-2">
                                        {groupName}
                                    </option>
                                ))}
                            </select>
                        </div>
                    </div>

                    <div className="flex items-center gap-2 w-full sm:w-auto pb-1 sm:pb-0 justify-between sm:justify-end flex-wrap sm:flex-nowrap">
                        <div className="flex items-center gap-2 shrink-0">
                            <div className="relative">
                                <button
                                    onClick={() => setShowAutoMenu(!showAutoMenu)}
                                    className={`px-3 py-1.5 bg-amber-600 hover:bg-amber-500 text-white text-xs font-bold rounded-lg transition-all flex items-center gap-1 shadow-lg shadow-amber-500/20 ${showAutoMenu ? 'ring-2 ring-amber-400' : ''}`}
                                >
                                    <span className="hidden sm:inline">Otomatik</span>
                                    <span className="text-[8px] ml-0.5">â–¼</span>
                                </button>
                                {showAutoMenu && (
                                    <>
                                        <div className="fixed inset-0 z-40" onClick={() => setShowAutoMenu(false)}></div>
                                        <div className="absolute top-full right-0 sm:left-auto sm:right-0 mt-2 w-48 bg-slate-900 border border-slate-700 rounded-xl shadow-xl overflow-hidden z-50 animate-in fade-in slide-in-from-top-2 duration-200">
                                            <button
                                                onClick={() => { handleSimulateSmart(); setShowAutoMenu(false); }}
                                                className="w-full text-left px-4 py-3 hover:bg-slate-800 transition-colors flex items-center gap-3 border-b border-slate-800"
                                            >
                                                <div>
                                                    <div className="text-xs font-bold text-white">GÃ¼Ã§ Dengelerine GÃ¶re</div>
                                                    <div className="text-[9px] text-slate-400">TakÄ±m gÃ¼Ã§lerine gÃ¶re gerÃ§ekÃ§i tahmin</div>
                                                </div>
                                            </button>
                                            <button
                                                onClick={() => { handleSimulateRandom(); setShowAutoMenu(false); }}
                                                className="w-full text-left px-4 py-3 hover:bg-slate-800 transition-colors flex items-center gap-3"
                                            >
                                                <div>
                                                    <div className="text-xs font-bold text-white">Rastgele DaÄŸÄ±t</div>
                                                    <div className="text-[9px] text-slate-400">Tamamen ÅŸansa dayalÄ± sonuÃ§lar</div>
                                                </div>
                                            </button>
                                        </div>
                                    </>
                                )}
                            </div>

                            <input
                                type="file"
                                accept=".json"
                                onChange={handleImportAllScenarios}
                                className="hidden"
                                id="import-upload-2lig"
                            />
                            <label
                                htmlFor="import-upload-2lig"
                                className="px-3 py-1.5 bg-blue-600 hover:bg-blue-500 text-white text-xs font-bold rounded-lg transition-all cursor-pointer flex items-center gap-1"
                                title="Senaryo YÃ¼kle"
                            >
                                <span className="hidden sm:inline">YÃ¼kle</span>
                            </label>
                            <button
                                onClick={handleSaveAllScenarios}
                                className="px-3 py-1.5 bg-emerald-700 hover:bg-emerald-600 text-white text-xs font-bold rounded-lg transition-all flex items-center gap-1"
                                title="Senaryoyu Kaydet"
                            >
                                <span className="hidden sm:inline">Kaydet</span>
                            </button>
                        </div>
                        <div className="w-px h-4 bg-slate-700 hidden sm:block shrink-0"></div>
                        <div className="flex items-center gap-2 shrink-0">
                            <button
                                onClick={handleScrollToNextMatch}
                                className="px-3 py-1.5 bg-slate-800 hover:bg-slate-700 text-slate-400 hover:text-white text-xs font-bold rounded-lg transition-all border border-slate-700 flex items-center gap-1"
                                title="Son kaldÄ±ÄŸÄ±m maÃ§a git"
                            >
                                <span className="hidden sm:inline">KaldÄ±ÄŸÄ±m Yer</span>
                            </button>
                            <div className="relative">
                                <button
                                    onClick={() => setShowResetMenu(!showResetMenu)}
                                    className={`px-3 py-1.5 bg-slate-800 hover:bg-rose-900/50 text-slate-400 hover:text-rose-400 text-xs font-bold rounded-lg transition-all border border-slate-700 flex items-center gap-1 ${showResetMenu ? 'ring-2 ring-rose-500/50' : ''}`}
                                >
                                    <span className="hidden sm:inline">SÄ±fÄ±rla</span>
                                    <span className="text-[8px] ml-0.5">â–¼</span>
                                </button>
                                {showResetMenu && (
                                    <>
                                        <div className="fixed inset-0 z-40" onClick={() => setShowResetMenu(false)}></div>
                                        <div className="absolute top-full right-0 mt-2 w-48 bg-slate-900 border border-slate-700 rounded-xl shadow-xl overflow-hidden z-50 animate-in fade-in slide-in-from-top-2 duration-200">
                                            <button
                                                onClick={() => { handleResetGroup(); setShowResetMenu(false); }}
                                                className="w-full text-left px-4 py-3 hover:bg-slate-800 transition-colors flex items-center gap-3 border-b border-slate-800"
                                            >
                                                <div>
                                                    <div className="text-xs font-bold text-white">Bu Grubu SÄ±fÄ±rla</div>
                                                    <div className="text-[9px] text-slate-400">Sadece {activeGroup} silinir</div>
                                                </div>
                                            </button>
                                            <button
                                                onClick={() => { handleResetAll(); setShowResetMenu(false); }}
                                                className="w-full text-left px-4 py-3 hover:bg-rose-900/20 transition-colors flex items-center gap-3 group"
                                            >
                                                <div>
                                                    <div className="text-xs font-bold text-rose-400 group-hover:text-rose-300">TÃ¼mÃ¼nÃ¼ SÄ±fÄ±rla</div>
                                                    <div className="text-[9px] text-rose-500/70 group-hover:text-rose-400/70">BÃ¼tÃ¼n tahminler silinir</div>
                                                </div>
                                            </button>
                                        </div>
                                    </>
                                )}
                            </div>
                            <ShareButton
                                targetRef={standingsRef}
                                championName={liveStandings[0]?.name}
                            />
                        </div>
                    </div>
                </div>

                <div className="grid grid-cols-1 lg:grid-cols-2 gap-4">
                    <div className="flex flex-col gap-4 relative">
                        <div ref={standingsRef} className="sticky top-14 z-10 max-h-[calc(100vh-120px)] overflow-auto custom-scrollbar">
                            <StandingsTable teams={liveStandings} initialRanks={initialRanks} compact={true} />
                        </div>
                    </div>
                    <div className="flex flex-col">
                        <FixtureList
                            matches={activeMatches}
                            overrides={overrides}
                            onScoreChange={handleScoreChange}
                            teamRanks={currentRanks}
                            totalTeams={activeTeams.length}
                            relegationSpots={2}
                        />
                    </div>
                </div>
            </div>

            {newAchievement && (
                <AchievementToast
                    achievement={newAchievement}
                    onClose={() => setNewAchievement(null)}
                />
            )}
            <AchievementsPanel
                isOpen={showAchievements}
                onClose={() => setShowAchievements(false)}
            />
        </main>
    );
}

```

# Project Application Context - Part 4

## File: app\anasayfa\AnasayfaClient.tsx
```
"use client";

import dynamic from "next/dynamic";
import Link from "next/link";
import { useState, useMemo } from "react";
import { useAuth } from "../context/AuthContext";
import { useGameState, getLevelTitle, getXPForNextLevel } from "../utils/gameState";
import { useTutorial } from "../components/TutorialModal";
import { LEVEL_THRESHOLDS, TeamStats, Match } from "../types";
import TeamAvatar from "../components/TeamAvatar";

const TutorialModal = dynamic(() => import("../components/TutorialModal").then(mod => ({ default: mod.default })), {
    loading: () => null,
    ssr: false,
});


interface AnasayfaClientProps {
    initialLig1: { teams: TeamStats[], fixture: Match[] };
    initialLig2: { teams: TeamStats[], fixture: Match[] };
    initialVsl: { teams: TeamStats[], fixture: Match[] };
}

const sortStandings = (teams: TeamStats[]): TeamStats[] => {
    return [...teams].sort((a, b) => {
        if (b.points !== a.points) return b.points - a.points;
        const aAvg = a.setsLost > 0 ? a.setsWon / a.setsLost : a.setsWon;
        const bAvg = b.setsLost > 0 ? b.setsWon / b.setsLost : b.setsWon;
        if (bAvg !== aAvg) return bAvg - aAvg;
        return b.setsWon - a.setsWon;
    });
};

export default function AnasayfaClient({ initialLig1, initialLig2, initialVsl }: AnasayfaClientProps) {
    const { user } = useAuth();
    const { gameState } = useGameState();
    const { showTutorial, closeTutorial } = useTutorial();

    // XP Progress calculation
    const currentLevelXP = LEVEL_THRESHOLDS[gameState.level - 1] || 0;
    const nextLevelXP = getXPForNextLevel(gameState.level);
    const progress = gameState.xp - currentLevelXP;
    const required = nextLevelXP - currentLevelXP;
    const percentage = (progress / required) * 100;

    // Derived State
    const lig1Groups = useMemo(() => [...new Set(initialLig1.teams.map(t => t.groupName))].sort(), [initialLig1.teams]);
    const lig2Groups = useMemo(() => [...new Set(initialLig2.teams.map(t => t.groupName))].sort(), [initialLig2.teams]);

    const lig1TopTeams = useMemo(() => sortStandings(initialLig1.teams.filter(t => t.groupName === lig1Groups[0])).slice(0, 3), [initialLig1.teams, lig1Groups]);
    const lig2TopTeams = useMemo(() => sortStandings(initialLig2.teams.filter(t => t.groupName === lig2Groups[0])).slice(0, 3), [initialLig2.teams, lig2Groups]);
    const vslTopTeams = useMemo(() => sortStandings(initialVsl.teams).slice(0, 3), [initialVsl.teams]);

    const lig1UpcomingMatches = useMemo(() => initialLig1.fixture.filter(m => !m.isPlayed).slice(0, 3), [initialLig1.fixture]);
    const lig2UpcomingMatches = useMemo(() => initialLig2.fixture.filter(m => !m.isPlayed).slice(0, 3), [initialLig2.fixture]);
    const vslUpcomingMatches = useMemo(() => initialVsl.fixture.filter(m => !m.isPlayed).slice(0, 3), [initialVsl.fixture]);

    return (
        <div className="min-h-screen bg-slate-950">
            {/* Hero Header */}
            <div className="bg-gradient-to-br from-emerald-600 via-teal-600 to-cyan-700 px-4 py-6 relative overflow-hidden">
                <div className="relative max-w-4xl mx-auto">
                    <div className="flex items-center justify-between">
                        <div>
                            <h1 className="text-2xl font-bold text-white mb-1">
                                HoÅŸ Geldin, {user?.user_metadata?.name || 'Oyuncu'}!
                            </h1>
                            <p className="text-white/70 text-sm">{getLevelTitle(gameState.level)}</p>
                        </div>
                        <div className="text-right">
                            <div className="text-3xl font-bold text-white">Lv.{gameState.level}</div>
                            <div className="text-xs text-white/60">{gameState.xp} XP</div>
                        </div>
                    </div>

                    {/* XP Progress Bar */}
                    <div className="mt-4">
                        <div className="h-2 bg-white/20 rounded-full overflow-hidden">
                            <div
                                className="h-full bg-gradient-to-r from-amber-400 to-orange-400 transition-all duration-500"
                                style={{ width: `${Math.min(percentage, 100)}%` }}
                            />
                        </div>
                        <div className="flex justify-between text-xs text-white/60 mt-1">
                            <span>{progress} / {required} XP</span>
                            <span>{gameState.achievements.length} BaÅŸarÄ±m</span>
                        </div>
                    </div>
                </div>
            </div>

            <div className="max-w-4xl mx-auto px-4 mt-4 space-y-6 pb-6">

                {/* Quick Actions */}
                <div className="grid grid-cols-3 gap-3">
                    <Link
                        href="/vsl/tahminoyunu"
                        className="bg-gradient-to-br from-red-600 to-rose-700 rounded-2xl p-4 text-center shadow-xl shadow-red-500/20 hover:scale-[1.02] transition-all"
                    >
                        <div className="font-bold text-white text-lg mb-1">Volley</div>
                        <div className="font-bold text-white">Sultanlar Ligi</div>
                        <div className="text-xs text-white/60">Tahmin Oyunu</div>
                    </Link>
                    <Link
                        href="/1lig/tahminoyunu"
                        className="bg-gradient-to-br from-amber-600 to-orange-700 rounded-2xl p-4 text-center shadow-xl shadow-amber-500/20 hover:scale-[1.02] transition-all"
                    >
                        <div className="font-bold text-white text-lg mb-1">1. Lig</div>
                        <div className="font-bold text-white">KadÄ±nlar</div>
                        <div className="text-xs text-white/60">Tahmin Oyunu</div>
                    </Link>
                    <Link
                        href="/2lig/tahminoyunu"
                        className="bg-gradient-to-br from-emerald-600 to-teal-700 rounded-2xl p-4 text-center shadow-xl shadow-emerald-500/20 hover:scale-[1.02] transition-all"
                    >
                        <div className="font-bold text-white text-lg mb-1">2. Lig</div>
                        <div className="font-bold text-white">KadÄ±nlar</div>
                        <div className="text-xs text-white/60">Tahmin Oyunu</div>
                    </Link>
                </div>

                {/* 1. Lig Summary */}
                <div className="bg-slate-900 border border-slate-800 rounded-2xl overflow-hidden">
                    <div className="bg-gradient-to-r from-amber-600 to-orange-600 px-4 py-3 flex items-center justify-between">
                        <h2 className="font-bold text-white flex items-center gap-2">
                            Arabica Coffee House 1. Lig
                        </h2>
                        <Link href="/1lig/gunceldurum" className="text-xs text-white/80 hover:text-white">
                            TÃ¼mÃ¼nÃ¼ GÃ¶r â†’
                        </Link>
                    </div>

                    <div className="p-4 grid md:grid-cols-2 gap-4">
                        {/* Standings Preview */}
                        <div>
                            <h3 className="text-xs font-bold text-slate-400 uppercase mb-2">Puan Durumu ({lig1Groups[0]})</h3>
                            <div className="space-y-1">
                                {lig1TopTeams.map((team, i) => (
                                    <div key={team.name} className="flex items-center gap-2 p-2 bg-slate-800/50 rounded-lg">
                                        <div className={`w-5 h-5 rounded-full flex items-center justify-center text-[10px] font-bold ${i === 0 ? "bg-amber-500 text-white" : "bg-slate-700 text-slate-400"
                                            }`}>{i + 1}</div>
                                        <TeamAvatar name={team.name} size="xs" />
                                        <span className="flex-1 text-sm text-slate-300 truncate">{team.name}</span>
                                        <span className="text-xs text-slate-400">{team.played}M</span>
                                        <span className="font-bold text-white text-sm">{team.points}P</span>
                                    </div>
                                ))}
                            </div>
                        </div>

                        {/* Upcoming Matches */}
                        <div>
                            <h3 className="text-xs font-bold text-slate-400 uppercase mb-2">YaklaÅŸan MaÃ§lar</h3>
                            <div className="space-y-1">
                                {lig1UpcomingMatches.map((match, i) => (
                                    <div key={i} className="flex items-center gap-2 p-2 bg-slate-800/50 rounded-lg text-xs">
                                        <TeamAvatar name={match.homeTeam} size="xs" />
                                        <span className="flex-1 text-slate-300 truncate text-right">{match.homeTeam}</span>
                                        <span className="px-2 py-0.5 bg-slate-700 rounded text-slate-300">vs</span>
                                        <span className="flex-1 text-slate-300 truncate">{match.awayTeam}</span>
                                        <TeamAvatar name={match.awayTeam} size="xs" />
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>
                </div>

                {/* Vodafone Sultanlar Ligi Summary */}
                <div className="bg-slate-900 border border-slate-800 rounded-2xl overflow-hidden">
                    <div className="bg-gradient-to-r from-red-600 to-rose-600 px-4 py-3 flex items-center justify-between">
                        <h2 className="font-bold text-white flex items-center gap-2">
                            Vodafone Sultanlar Ligi
                        </h2>
                        <Link href="/vsl/gunceldurum" className="text-xs text-white/80 hover:text-white">
                            TÃ¼mÃ¼nÃ¼ GÃ¶r â†’
                        </Link>
                    </div>

                    <div className="p-4 grid md:grid-cols-2 gap-4">
                        {/* Standings Preview */}
                        <div>
                            <h3 className="text-xs font-bold text-slate-400 uppercase mb-2">Puan Durumu</h3>
                            <div className="space-y-1">
                                {vslTopTeams.map((team, i) => (
                                    <div key={team.name} className="flex items-center gap-2 p-2 bg-slate-800/50 rounded-lg">
                                        <div className={`w-5 h-5 rounded-full flex items-center justify-center text-[10px] font-bold ${i === 0 ? "bg-red-600 text-white" : "bg-slate-700 text-slate-400"
                                            }`}>{i + 1}</div>
                                        <TeamAvatar name={team.name} size="xs" />
                                        <span className="flex-1 text-sm text-slate-300 truncate">{team.name}</span>
                                        <span className="text-xs text-slate-400">{team.played}M</span>
                                        <span className="font-bold text-white text-sm">{team.points}P</span>
                                    </div>
                                ))}
                            </div>
                        </div>

                        {/* Upcoming Matches */}
                        <div>
                            <h3 className="text-xs font-bold text-slate-400 uppercase mb-2">YaklaÅŸan MaÃ§lar</h3>
                            <div className="space-y-1">
                                {vslUpcomingMatches.map((match, i) => (
                                    <div key={i} className="flex items-center gap-2 p-2 bg-slate-800/50 rounded-lg text-xs">
                                        <TeamAvatar name={match.homeTeam} size="xs" />
                                        <span className="flex-1 text-slate-300 truncate text-right">{match.homeTeam}</span>
                                        <span className="px-2 py-0.5 bg-slate-700 rounded text-slate-300">vs</span>
                                        <span className="flex-1 text-slate-300 truncate">{match.awayTeam}</span>
                                        <TeamAvatar name={match.awayTeam} size="xs" />
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>
                </div>

                {/* 2. Lig Summary */}
                <div className="bg-slate-900 border border-slate-800 rounded-2xl overflow-hidden">
                    <div className="bg-gradient-to-r from-emerald-600 to-teal-600 px-4 py-3 flex items-center justify-between">
                        <h2 className="font-bold text-white flex items-center gap-2">
                            KadÄ±nlar 2. Lig
                        </h2>
                        <Link href="/2lig/gunceldurum" className="text-xs text-white/80 hover:text-white">
                            TÃ¼mÃ¼nÃ¼ GÃ¶r â†’
                        </Link>
                    </div>

                    <div className="p-4 grid md:grid-cols-2 gap-4">
                        {/* Standings Preview */}
                        <div>
                            <h3 className="text-xs font-bold text-slate-400 uppercase mb-2">Puan Durumu ({lig2Groups[0]})</h3>
                            <div className="space-y-1">
                                {lig2TopTeams.map((team, i) => (
                                    <div key={team.name} className="flex items-center gap-2 p-2 bg-slate-800/50 rounded-lg">
                                        <div className={`w-5 h-5 rounded-full flex items-center justify-center text-[10px] font-bold ${i === 0 ? "bg-emerald-500 text-white" : "bg-slate-700 text-slate-400"
                                            }`}>{i + 1}</div>
                                        <TeamAvatar name={team.name} size="xs" />
                                        <span className="flex-1 text-sm text-slate-300 truncate">{team.name}</span>
                                        <span className="text-xs text-slate-400">{team.played}M</span>
                                        <span className="font-bold text-white text-sm">{team.points}P</span>
                                    </div>
                                ))}
                            </div>
                        </div>

                        {/* Upcoming Matches */}
                        <div>
                            <h3 className="text-xs font-bold text-slate-400 uppercase mb-2">YaklaÅŸan MaÃ§lar</h3>
                            <div className="space-y-1">
                                {lig2UpcomingMatches.map((match, i) => (
                                    <div key={i} className="flex items-center gap-2 p-2 bg-slate-800/50 rounded-lg text-xs">
                                        <TeamAvatar name={match.homeTeam} size="xs" />
                                        <span className="flex-1 text-slate-300 truncate text-right">{match.homeTeam}</span>
                                        <span className="px-2 py-0.5 bg-slate-700 rounded text-slate-300">vs</span>
                                        <span className="flex-1 text-slate-300 truncate">{match.awayTeam}</span>
                                        <TeamAvatar name={match.awayTeam} size="xs" />
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>
                </div>

                {/* Stats Card */}
                <div className="grid grid-cols-4 gap-2">
                    <div className="bg-slate-900 border border-slate-800 rounded-xl p-3 text-center">
                        <div className="text-xl font-bold text-amber-400">{gameState.stats.totalPredictions}</div>
                        <div className="text-[10px] text-slate-400">Tahmin</div>
                    </div>
                    <div className="bg-slate-900 border border-slate-800 rounded-xl p-3 text-center">
                        <div className="text-xl font-bold text-emerald-400">{gameState.stats.correctPredictions}</div>
                        <div className="text-[10px] text-slate-400">DoÄŸru</div>
                    </div>
                    <div className="bg-slate-900 border border-slate-800 rounded-xl p-3 text-center">
                        <div className="text-xl font-bold text-orange-400">{gameState.stats.bestStreak}</div>
                        <div className="text-[10px] text-slate-400">En Ä°yi Seri</div>
                    </div>
                    <div className="bg-slate-900 border border-slate-800 rounded-xl p-3 text-center">
                        <div className="text-xl font-bold text-cyan-400">{gameState.achievements.length}</div>
                        <div className="text-[10px] text-slate-400">BaÅŸarÄ±m</div>
                    </div>
                </div>

                {/* Changelog */}
                <div className="bg-slate-900 border border-slate-800 rounded-2xl overflow-hidden">
                    <div className="bg-gradient-to-r from-purple-600 to-indigo-600 px-4 py-3 flex items-center justify-between">
                        <div className="flex items-center gap-2">
                            <span className="text-lg">ğŸ†•</span>
                            <h2 className="font-bold text-white">Son GÃ¼ncellemeler</h2>
                        </div>
                        <span className="text-xs font-mono bg-white/20 px-2 py-0.5 rounded text-white/80">v1.2.0</span>
                    </div>
                    <div className="p-4 space-y-3">
                        <div className="flex gap-3 items-start">
                            <span className="text-[10px] font-mono bg-emerald-600/30 text-emerald-400 px-1.5 py-0.5 rounded flex-shrink-0">v1.2.0</span>
                            <div>
                                <div className="text-sm font-medium text-white">OynanmÄ±ÅŸ maÃ§lar artÄ±k doÄŸru gÃ¶steriliyor</div>
                                <div className="text-xs text-slate-500">3 Ocak 2026</div>
                            </div>
                        </div>
                        <div className="flex gap-3 items-start">
                            <span className="text-[10px] font-mono bg-emerald-600/30 text-emerald-400 px-1.5 py-0.5 rounded flex-shrink-0">v1.2.0</span>
                            <div>
                                <div className="text-sm font-medium text-white">Puan tablolarÄ± artÄ±k ekrana sÄ±ÄŸÄ±yor</div>
                                <div className="text-xs text-slate-500">3 Ocak 2026</div>
                            </div>
                        </div>
                        <div className="flex gap-3 items-start">
                            <span className="text-[10px] font-mono bg-emerald-600/30 text-emerald-400 px-1.5 py-0.5 rounded flex-shrink-0">v1.2.0</span>
                            <div>
                                <div className="text-sm font-medium text-white">MaÃ§ saatleri artÄ±k tÃ¼m maÃ§larda gÃ¶rÃ¼nÃ¼yor</div>
                                <div className="text-xs text-slate-500">3 Ocak 2026</div>
                            </div>
                        </div>
                        <div className="flex gap-3 items-start">
                            <span className="text-[10px] font-mono bg-emerald-600/30 text-emerald-400 px-1.5 py-0.5 rounded flex-shrink-0">v1.2.0</span>
                            <div>
                                <div className="text-sm font-medium text-white">Ä°statistik kartlarÄ± daha kompakt ve ÅŸÄ±k hale getirildi</div>
                                <div className="text-xs text-slate-500">3 Ocak 2026</div>
                            </div>
                        </div>
                        <div className="flex gap-3 items-start">
                            <span className="text-[10px] font-mono bg-blue-600/30 text-blue-400 px-1.5 py-0.5 rounded flex-shrink-0">v1.1.0</span>
                            <div>
                                <div className="text-sm font-medium text-white">CEV Åampiyonlar Ligi, CEV Cup ve Challenge Cup eklendi</div>
                                <div className="text-xs text-slate-500">AralÄ±k 2025</div>
                            </div>
                        </div>
                        <div className="flex gap-3 items-start">
                            <span className="text-[10px] font-mono bg-purple-600/30 text-purple-400 px-1.5 py-0.5 rounded flex-shrink-0">v1.0.0</span>
                            <div>
                                <div className="text-sm font-medium text-white">Tahmin oyunu ve liderlik tablosu sistemi eklendi</div>
                                <div className="text-xs text-slate-500">AralÄ±k 2025</div>
                            </div>
                        </div>
                        <div className="flex gap-3 items-start">
                            <span className="text-[10px] font-mono bg-slate-600/30 text-slate-400 px-1.5 py-0.5 rounded flex-shrink-0">v0.0.0</span>
                            <div>
                                <div className="text-sm font-medium text-white">VolleySimulator ilk sÃ¼rÃ¼m yayÄ±nlandÄ±</div>
                                <div className="text-xs text-slate-500">KasÄ±m 2025</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            {/* Tutorial Modal */}
            <TutorialModal isOpen={showTutorial} onClose={closeTutorial} />
        </div>
    );
}

```

## File: app\anasayfa\page.tsx
```
import { getLeagueData } from "../utils/serverData";
import AnasayfaClient from "./AnasayfaClient";

export default async function AnasayfaPage() {
    // Fetch all league data in parallel on the server
    const [lig1, lig2, vsl] = await Promise.all([
        getLeagueData("1lig"),
        getLeagueData("2lig"),
        getLeagueData("vsl")
    ]);

    return (
        <AnasayfaClient
            initialLig1={{ teams: lig1.teams || [], fixture: lig1.fixture || [] }}
            initialLig2={{ teams: lig2.teams || [], fixture: lig2.fixture || [] }}
            initialVsl={{ teams: vsl.teams || [], fixture: vsl.fixture || [] }}
        />
    );
}

```

## File: app\api\1lig\route.ts
```
import { NextRequest, NextResponse } from 'next/server';
import fs from 'fs';
import path from 'path';

// Revalidate every 5 minutes
export const revalidate = 300;

export async function GET(req: NextRequest) {
    try {
        // Read the 1. Lig data from local JSON file
        const dataPath = path.join(process.cwd(), 'data', '1lig-data.json');
        const jsonData = fs.readFileSync(dataPath, 'utf-8');
        const data = JSON.parse(jsonData);

        // Filter out withdrawn teams (ligden Ã§ekilen takÄ±mlar)
        const withdrawnTeams = ['Edremit Bld. AltÄ±noluk', 'Ä°zmirspor'];

        data.teams = data.teams.filter((team: any) => !withdrawnTeams.includes(team.name));
        data.fixture = data.fixture.filter((match: any) =>
            !withdrawnTeams.includes(match.homeTeam) && !withdrawnTeams.includes(match.awayTeam)
        );

        // Return with cache headers
        return NextResponse.json(data, {
            headers: {
                'Cache-Control': 'public, s-maxage=300, stale-while-revalidate=600',
            }
        });
    } catch (error) {
        console.error('Error reading 1. Lig data:', error);
        return NextResponse.json(
            { error: 'Failed to load 1. Lig data' },
            { status: 500 }
        );
    }
}

```

## File: app\api\ai\analysis\route.ts
```
import { NextRequest, NextResponse } from 'next/server';

// GET /api/ai/analysis - Get AI match analysis
export async function GET(request: NextRequest) {
  try {
    const { searchParams } = new URL(request.url);
    const homeTeam = searchParams.get('homeTeam');
    const awayTeam = searchParams.get('awayTeam');

    if (!homeTeam || !awayTeam) {
      return NextResponse.json({ error: 'Home and away teams are required' }, { status: 400 });
    }

    // In production, fetch real data and run analysis
    const analysis = {
      homeTeam,
      awayTeam,
      headToHead: {
        totalMatches: 15,
        homeWins: 9,
        awayWins: 6,
        lastFiveResults: [
          { date: '2024-01-15', homeScore: 3, awayScore: 1, winner: 'home' },
          { date: '2023-12-20', homeScore: 2, awayScore: 3, winner: 'away' },
          { date: '2023-11-10', homeScore: 3, awayScore: 0, winner: 'home' },
          { date: '2023-10-05', homeScore: 3, awayScore: 2, winner: 'home' },
          { date: '2023-09-15', homeScore: 1, awayScore: 3, winner: 'away' },
        ],
        averageSetsPerMatch: 4.2,
        averagePointDiff: 3.5,
      },
      homeTeamForm: {
        lastFiveMatches: ['W', 'W', 'L', 'W', 'W'],
        formPercentage: 80,
        goalsScored: 78,
        goalsConceded: 65,
        winStreak: 2,
        recentOpponents: ['Team A', 'Team B', 'Team C', 'Team D', 'Team E'],
      },
      awayTeamForm: {
        lastFiveMatches: ['L', 'W', 'W', 'L', 'W'],
        formPercentage: 60,
        goalsScored: 71,
        goalsConceded: 68,
        winStreak: 1,
        recentOpponents: ['Team F', 'Team G', 'Team H', 'Team I', 'Team J'],
      },
      keyPlayers: {
        home: [
          { name: 'Melissa Vargas', position: 'Outside Hitter', rating: 95 },
          { name: 'Arina Fedorovtseva', position: 'Opposite', rating: 92 },
        ],
        away: [
          { name: 'Tijana BoÅ¡koviÄ‡', position: 'Opposite', rating: 96 },
          { name: 'Kim Yeon-koung', position: 'Outside Hitter', rating: 91 },
        ],
      },
      statisticalInsights: [
        {
          category: 'Servis',
          home: { value: 4.2, label: 'As/MaÃ§' },
          away: { value: 3.8, label: 'As/MaÃ§' },
          advantage: 'home',
        },
        {
          category: 'Blok',
          home: { value: 8.5, label: 'Blok/MaÃ§' },
          away: { value: 9.2, label: 'Blok/MaÃ§' },
          advantage: 'away',
        },
        {
          category: 'HÃ¼cum',
          home: { value: 48.2, label: '%' },
          away: { value: 45.8, label: '%' },
          advantage: 'home',
        },
        {
          category: 'Resepsiyon',
          home: { value: 52.1, label: '%' },
          away: { value: 54.3, label: '%' },
          advantage: 'away',
        },
      ],
      venueAnalysis: {
        venue: 'Burhan Felek Voleybol Salonu',
        capacity: 5000,
        homeWinRate: 72,
        averageAttendance: 3500,
      },
      generatedAt: new Date().toISOString(),
    };

    return NextResponse.json({ analysis });
  } catch (error) {
    console.error('Error generating analysis:', error);
    return NextResponse.json({ error: 'Internal server error' }, { status: 500 });
  }
}

```

## File: app\api\ai\prediction\route.ts
```
import { NextRequest, NextResponse } from 'next/server';

// POST /api/ai/prediction - Get AI prediction for a match
export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const { matchId, homeTeam, awayTeam, league } = body;

    if (!homeTeam || !awayTeam) {
      return NextResponse.json({ error: 'Home and away teams are required' }, { status: 400 });
    }

    // In production, this would call an ML model or prediction service
    // For now, generate a mock prediction based on team names

    // Simulate some AI processing time
    await new Promise(resolve => setTimeout(resolve, 500));

    // Generate prediction probabilities (mock)
    const homeStrength = getTeamStrength(homeTeam);
    const awayStrength = getTeamStrength(awayTeam);
    const total = homeStrength + awayStrength;

    const homeWinProb = Math.round((homeStrength / total) * 100);
    const awayWinProb = 100 - homeWinProb;

    // Generate predicted score (mock)
    const predictedSets = homeWinProb > awayWinProb 
      ? generateSetScore(true) 
      : generateSetScore(false);

    const prediction = {
      matchId: matchId || `${homeTeam}-vs-${awayTeam}`,
      homeTeam,
      awayTeam,
      prediction: {
        homeWinProbability: homeWinProb,
        awayWinProbability: awayWinProb,
        predictedWinner: homeWinProb > awayWinProb ? 'home' : 'away',
        predictedScore: predictedSets.join('-'),
        confidence: Math.abs(homeWinProb - 50) + 50,
        reasoning: generateReasoning(homeTeam, awayTeam, homeWinProb > awayWinProb),
      },
      factors: {
        recentForm: {
          home: Math.floor(Math.random() * 30) + 60,
          away: Math.floor(Math.random() * 30) + 60,
        },
        headToHead: {
          home: Math.floor(Math.random() * 5),
          away: Math.floor(Math.random() * 5),
        },
        homeAdvantage: 5 + Math.floor(Math.random() * 10),
        injuries: Math.random() > 0.7 ? 'minor' : 'none',
      },
      generatedAt: new Date().toISOString(),
    };

    return NextResponse.json({ prediction });
  } catch (error) {
    console.error('Error generating AI prediction:', error);
    return NextResponse.json({ error: 'Internal server error' }, { status: 500 });
  }
}

// Helper functions
function getTeamStrength(teamName: string): number {
  // Mock team strengths based on known teams
  const strengths: Record<string, number> = {
    'FENERBAHÃ‡E MEDICANA': 95,
    'ECZACIBAÅI DYNAVÄ°T': 93,
    'VAKIFBANK': 94,
    'GALATASARAY DAIKIN': 88,
    'THY': 82,
    'NÄ°LÃœFER BELEDÄ°YESPOR': 78,
    'BEÅÄ°KTAÅ': 75,
    'ARAS KARGO': 72,
    'KUZEYBORUÄ°STANBUL': 68,
    'SIGORTA SHOP': 65,
    'PTT': 62,
    'TOKAT BELEDÄ°YE PLEVNE': 58,
  };

  return strengths[teamName] || 70 + Math.floor(Math.random() * 20);
}

function generateSetScore(homeWins: boolean): number[] {
  const outcomes = [
    [3, 0], [3, 1], [3, 2],
    [0, 3], [1, 3], [2, 3]
  ];
  
  const homeOutcomes = outcomes.filter(o => homeWins ? o[0] > o[1] : o[0] < o[1]);
  return homeOutcomes[Math.floor(Math.random() * homeOutcomes.length)];
}

function generateReasoning(homeTeam: string, awayTeam: string, homeWins: boolean): string[] {
  const winner = homeWins ? homeTeam : awayTeam;
  const loser = homeWins ? awayTeam : homeTeam;

  const reasons = [
    `${winner} son 5 maÃ§ta 4 galibiyet aldÄ±`,
    `${winner} takÄ±mÄ± ev sahibi avantajÄ±nÄ± kullanÄ±yor`,
    `${winner} servis istatistiklerinde Ã¼stÃ¼n`,
    `${loser} takÄ±mÄ±nda sakat oyuncular var`,
    `${winner} head-to-head istatistiklerinde Ã¶nde`,
    `${winner} blok etkinliÄŸinde daha baÅŸarÄ±lÄ±`,
    `${winner} takÄ±mÄ± hÃ¼cum etkinliÄŸinde %5 daha iyi`,
  ];

  // Return 3-4 random reasons
  const shuffled = reasons.sort(() => Math.random() - 0.5);
  return shuffled.slice(0, 3 + Math.floor(Math.random() * 2));
}

```

## File: app\api\calculate\route.ts
```
import { NextRequest, NextResponse } from 'next/server';
import { GoogleGenerativeAI } from '@google/generative-ai';
import { calculateElo } from '../../utils/eloCalculator';
import { normalizeTeamName, sortStandings } from '../../utils/calculatorUtils';
import { TeamStats, Match, MatchOutcome } from '../../types';

// Helper to simulate a single match outcome based on Elo
function simulateMatch(homeElo: number, awayElo: number): MatchOutcome {
    const expectedHome = 1 / (1 + Math.pow(10, (awayElo - homeElo) / 400));
    const random = Math.random();
    const homeWin = random < expectedHome;

    // Simplified score distribution
    // If very clear winner (prob > 0.8), likely 3-0 or 3-1
    // If close (prob ~ 0.5), likely 3-2

    let hSets = 0, aSets = 0;

    if (homeWin) {
        hSets = 3;
        // Prob of 3-0 vs 3-1 vs 3-2
        const dominance = expectedHome; // 0.5 to 1.0
        const r2 = Math.random();
        if (dominance > 0.8) aSets = r2 < 0.7 ? 0 : 1;
        else if (dominance > 0.6) aSets = r2 < 0.5 ? 1 : 2;
        else aSets = 2; // Close match
    } else {
        aSets = 3;
        const dominance = 1 - expectedHome; // 0.5 to 1.0
        const r2 = Math.random();
        if (dominance > 0.8) hSets = r2 < 0.7 ? 0 : 1;
        else if (dominance > 0.6) hSets = r2 < 0.5 ? 1 : 2;
        else hSets = 2;
    }

    let hPoints = 0, aPoints = 0;
    if (hSets === 3) {
        if (aSets <= 1) hPoints = 3;
        else { hPoints = 2; aPoints = 1; }
    } else {
        if (hSets <= 1) aPoints = 3;
        else { aPoints = 2; hPoints = 1; }
    }

    return { homeSets: hSets, awaySets: aSets, homePoints: hPoints, awayPoints: aPoints, homeWin };
}

export async function POST(req: NextRequest) {
    try {
        const body = await req.json();
        const { teams, fixture, targetTeam, overrides } = body;

        if (!teams || !targetTeam) {
            return NextResponse.json({ error: "Missing required fields" }, { status: 400 });
        }

        // 1. Calculate Base Elo from History
        const eloMap = calculateElo(teams, fixture);

        // 2. Identify Unplayed Matches (excluding overrides if they are treated as played upstream)
        // The fixture passed usually contains ALL matches. We filter for unplayed.
        // Overrides passed are ALREADY applied to 'teams' (live standings) in the frontend?
        // Actually, the frontend passed 'sortedTeams' which includes applied overrides. 
        // AND it passed 'overrides' array.
        // We should simulate matches that are NOT in overrides and NOT played.

        const overrideIds = new Set(overrides.map((o: any) => `${o.homeTeam}|||${o.awayTeam}`));

        const matchesToSimulate = (fixture as Match[]).filter(m =>
            !m.isPlayed &&
            !overrideIds.has(`${m.homeTeam}|||${m.awayTeam}`)
        );

        // If no matches left, just return current rank
        if (matchesToSimulate.length === 0) {
            const index = teams.findIndex((t: TeamStats) => t.name === targetTeam);
            return NextResponse.json({
                bestRank: index + 1,
                worstRank: index + 1,
                championshipProbability: index === 0 ? 100 : 0,
                playoffProbability: index < 4 ? 100 : 0,
                relegationProbability: index >= teams.length - 2 ? 100 : 0,
                aiAnalysis: "TÃ¼m maÃ§lar tamamlandÄ± veya tahmin edildi."
            });
        }

        // 3. Run Monte Carlo Simulation
        const SIMULATIONS = 1000;
        const ranks: number[] = [];

        // Deep clone for base state
        // Optimize: Convert teams to simpler struct for speed
        const baseTeams = teams.map((t: TeamStats) => ({ ...t, normalizedName: normalizeTeamName(t.name) }));

        for (let i = 0; i < SIMULATIONS; i++) {
            // Copy state
            const simTeams = baseTeams.map((t: any) => ({ ...t }));
            const simMap = new Map();
            simTeams.forEach((t: any) => simMap.set(t.normalizedName, t));

            for (const m of matchesToSimulate) {
                const hName = normalizeTeamName(m.homeTeam);
                const aName = normalizeTeamName(m.awayTeam);
                const hElo = eloMap.get(m.homeTeam) || 1200;
                const aElo = eloMap.get(m.awayTeam) || 1200;

                const outcome = simulateMatch(hElo, aElo);

                const h = simMap.get(hName);
                const a = simMap.get(aName);

                if (h && a) {
                    h.played++;
                    h.wins += outcome.homeWin ? 1 : 0;
                    h.points += outcome.homePoints;
                    h.setsWon += outcome.homeSets;
                    h.setsLost += outcome.awaySets;

                    a.played++;
                    a.wins += outcome.homeWin ? 0 : 1;
                    a.points += outcome.awayPoints;
                    a.setsWon += outcome.awaySets;
                    a.setsLost += outcome.homeSets;
                }
            }

            // Sort
            const sorted = sortStandings(simTeams);
            const rank = sorted.findIndex(t => t.name === targetTeam) + 1;
            ranks.push(rank);
        }

        // 4. Statistics
        const bestRank = Math.min(...ranks);
        const worstRank = Math.max(...ranks);
        const champCount = ranks.filter(r => r === 1).length;
        const playoffCount = ranks.filter(r => r <= 4).length; // Top 4
        // Relegation: Last 2 (assuming 16 teams? Or group specific logic?)
        // Group size varies (e.g. 9 teams). Relegation is usually last 2.
        const delegationThreshold = teams.length - 1; // 8th and 9th if 9 teams
        const relCount = ranks.filter(r => r >= delegationThreshold).length;

        // 5. AI Analysis
        let aiAnalysis = "Analiz oluÅŸturulamadÄ±.";
        if (process.env.GEMINI_API_KEY) {
            try {
                const genAI = new GoogleGenerativeAI(process.env.GEMINI_API_KEY);
                const model = genAI.getGenerativeModel({ model: "gemini-pro" });

                const context = `
TakÄ±m: ${targetTeam}
Mevcut Puan: ${teams.find((t: any) => t.name === targetTeam)?.points}
Kalan MaÃ§ SayÄ±sÄ±: ${matchesToSimulate.length}
SimÃ¼lasyon SonuÃ§larÄ± (1000 tekrar):
- En Ä°yi SÄ±ra: ${bestRank}
- En KÃ¶tÃ¼ SÄ±ra: ${worstRank}
- Åampiyonluk Ä°htimali: %${(champCount / SIMULATIONS * 100).toFixed(1)}
- Play-off Ä°htimali: %${(playoffCount / SIMULATIONS * 100).toFixed(1)}
- DÃ¼ÅŸme Ä°htimali: %${(relCount / SIMULATIONS * 100).toFixed(1)}

Bu takÄ±m iÃ§in kÄ±sa, esprili ve motive edici bir analiz yaz. Voleybol terimleri kullan.
`;
                const result = await model.generateContent(context);
                aiAnalysis = result.response.text();
            } catch (e) {
                console.error("AI Error:", e);
                aiAnalysis = "AI servisine ÅŸu an ulaÅŸÄ±lamÄ±yor, ancak istatistikler gÃ¼ncel.";
            }
        }

        return NextResponse.json({
            bestRank,
            worstRank,
            championshipProbability: (champCount / SIMULATIONS) * 100,
            playoffProbability: (playoffCount / SIMULATIONS) * 100,
            relegationProbability: (relCount / SIMULATIONS) * 100,
            aiAnalysis
        });

    } catch (error) {
        console.error(error);
        return NextResponse.json({ error: "Internal Server Error" }, { status: 500 });
    }
}

```

## File: app\api\cev-challenge\route.ts
```
import { NextResponse } from 'next/server';
import fs from 'fs';
import path from 'path';

export async function GET() {
    try {
        const filePath = path.join(process.cwd(), 'data', 'cev-challenge-cup-data.json');

        if (!fs.existsSync(filePath)) {
            return NextResponse.json({ league: 'CEV Challenge Cup', fixture: [], teams: [] });
        }

        const fileContent = fs.readFileSync(filePath, 'utf8');
        const sourceData = JSON.parse(fileContent);

        // Transform to CEV Cup format
        // Transform to CEV Cup format
        interface Match {
            id: number;
            round: string;
            leg: number;
            date: string;
            matchTime: string;
            homeTeam: string;
            awayTeam: string;
            homeScore: number | null;
            awayScore: number | null;
            setScores: string;
            isPlayed: boolean;
            venue: string;
        }
        const fixture: Match[] = [];
        const teamsMap = new Map();

        // Helper to parse score "3-0" -> { home: 3, away: 0 }
        const parseScore = (scoreStr: string | null) => {
            if (!scoreStr || !scoreStr.includes('-')) return { home: null, away: null };
            const parts = scoreStr.split('-').map(p => parseInt(p.trim()));
            return { home: isNaN(parts[0]) ? null : parts[0], away: isNaN(parts[1]) ? null : parts[1] };
        };

        let matchCounter = 1;

        if (sourceData.phases) {
            sourceData.phases.forEach((phase: { name: string; matches: any[] }) => {
                const roundName = phase.name; // e.g., "Qualification Rounds", "Main Round"
                // Map generic phase names to CEV Cup expected rounds if needed, or update the UI constants.
                // For now, let's keep original names but might need mapping for bracket logic.

                phase.matches.forEach((m: { score: string; date: string; homeTeam: string; awayTeam: string; sets: string; isPlayed: boolean }) => {
                    const { home, away } = parseScore(m.score);

                    // Add teams
                    if (!teamsMap.has(m.homeTeam)) teamsMap.set(m.homeTeam, { name: m.homeTeam, country: '' });
                    if (!teamsMap.has(m.awayTeam)) teamsMap.set(m.awayTeam, { name: m.awayTeam, country: '' });

                    fixture.push({
                        id: matchCounter++,
                        round: roundName,
                        leg: 1, // Challenge Cup scraper doesn't detect leg yet, default to 1 or logic needed
                        date: m.date || 'TBD',
                        matchTime: '', // Scraper didn't separate time
                        homeTeam: m.homeTeam,
                        awayTeam: m.awayTeam,
                        homeScore: home,
                        awayScore: away,
                        setScores: m.sets,
                        isPlayed: m.isPlayed,
                        venue: ''
                    });
                });
            });
        }

        return NextResponse.json({
            league: "CEV Challenge Cup",
            season: "2025-2026",
            currentStage: "Main Round", // Default or derive
            teams: Array.from(teamsMap.values()),
            fixture: fixture
        });
    } catch (error) {
        console.error('Error reading CEV Challenge Cup data:', error);
        return NextResponse.json({ error: 'Failed to load data' }, { status: 500 });
    }
}

```

## File: app\api\cev-cl\route.ts
```
import { NextRequest, NextResponse } from 'next/server';
import fs from 'fs';
import path from 'path';

export async function GET(req: NextRequest) {
    try {
        // Read the CEV CL data from local JSON file
        const dataPath = path.join(process.cwd(), 'data', 'cev-cl-data.json');

        if (!fs.existsSync(dataPath)) {
            return NextResponse.json(
                { error: 'Data file not found.' },
                { status: 404 }
            );
        }

        const jsonData = fs.readFileSync(dataPath, 'utf-8');
        const data = JSON.parse(jsonData);

        return NextResponse.json(data);
    } catch (error) {
        console.error('Error reading CEV CL data:', error);
        return NextResponse.json(
            { error: 'Failed to load CEV CL data' },
            { status: 500 }
        );
    }
}

```

## File: app\api\cev-cup\route.ts
```
import { NextRequest, NextResponse } from 'next/server';
import fs from 'fs';
import path from 'path';

export async function GET(req: NextRequest) {
    try {
        // Read the CEV Cup data from local JSON file
        const dataPath = path.join(process.cwd(), 'data', 'cev-cup-data.json');

        if (!fs.existsSync(dataPath)) {
            return NextResponse.json(
                { error: 'Data file not found.' },
                { status: 404 }
            );
        }

        const jsonData = fs.readFileSync(dataPath, 'utf-8');
        const data = JSON.parse(jsonData);

        return NextResponse.json(data);
    } catch (error) {
        console.error('Error reading CEV Cup data:', error);
        return NextResponse.json(
            { error: 'Failed to load CEV Cup data' },
            { status: 500 }
        );
    }
}

```

## File: app\api\cron\update-results\route.ts
```
import { NextRequest, NextResponse } from 'next/server';
import fs from 'fs';
import path from 'path';
import * as cheerio from 'cheerio';
import { createServiceRoleClient } from '../../../utils/supabase-server';

// Cron job endpoint - fetches all league results from TVF Calendar (Takvim)
// Updates VSL, 1. Lig, and 2. Lig in one pass

export const dynamic = 'force-dynamic';
export const maxDuration = 60; // Allow up to 60 seconds

const TVF_TAKVIM_URL = "https://fikstur.tvf.org.tr/Takvim";

interface MatchResult {
    league: string;
    homeTeam: string;
    awayTeam: string;
    homeScore: number;
    awayScore: number;
    resultScore: string;
}

async function fetchAllLeagueResults(): Promise<MatchResult[]> {
    try {
        const response = await fetch(TVF_TAKVIM_URL, {
            headers: {
                'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36',
            },
            next: { revalidate: 0 }
        });

        if (!response.ok) {
            console.error(`TVF Calendar fetch failed: ${response.status}`);
            return [];
        }

        const html = await response.text();
        const $ = cheerio.load(html);
        const results: MatchResult[] = [];

        // On the Takvim page, matches are grouped under league headers
        // We find all league containers or iterate through rows
        // Headers usually have class .tvf-fixture-league-header (found by subagent)

        $('.tvf-fixture-league-header').each((_, header) => {
            const leagueName = $(header).text().trim();

            // Find the table/container immediately following this header
            // TVF structure usually has rows following the header in the same parent or next sibling
            const $container = $(header).next('table, .tvf-fixture-league-matches, div');

            $container.find('tr').each((_, row) => {
                const $row = $(row);

                const homeTeam = $row.find('span[id*="_gevsahibi"]').text().trim();
                const awayTeam = $row.find('span[id*="_gmisafir"], span[id*="_gdeplasman"]').text().trim();
                const homeScoreStr = $row.find('span[id*="_gseta"]').text().trim();
                const awayScoreStr = $row.find('span[id*="_gsetb"], span[id*="_gsetd"]').text().trim();

                const homeScore = parseInt(homeScoreStr);
                const awayScore = parseInt(awayScoreStr);

                if (homeTeam && awayTeam && !isNaN(homeScore) && !isNaN(awayScore)) {
                    results.push({
                        league: leagueName,
                        homeTeam,
                        awayTeam,
                        homeScore,
                        awayScore,
                        resultScore: `${homeScore}-${awayScore}`
                    });
                }
            });
        });

        // Fallback: If no headers found, try scraping all rows and inferring league (less reliable)
        if (results.length === 0) {
            // console.log('No league headers found, attempting broad row scrape...');
            $('tr').each((_, row) => {
                const $row = $(row);
                const homeTeam = $row.find('span[id*="_gevsahibi"]').text().trim();
                const awayTeam = $row.find('span[id*="_gmisafir"], span[id*="_gdeplasman"]').text().trim();
                const homeScoreStr = $row.find('span[id*="_gseta"]').text().trim();
                const awayScoreStr = $row.find('span[id*="_gsetb"], span[id*="_gsetd"]').text().trim();

                if (homeTeam && awayTeam && homeScoreStr !== '' && awayScoreStr !== '') {
                    // Find nearest preceding league header if possible
                    let leagueName = "Unknown League";
                    const prevHeader = $row.closest('table').prevAll('.tvf-fixture-league-header').first();
                    if (prevHeader.length) leagueName = prevHeader.text().trim();

                    results.push({
                        league: leagueName,
                        homeTeam,
                        awayTeam,
                        homeScore: parseInt(homeScoreStr),
                        awayScore: parseInt(awayScoreStr),
                        resultScore: `${homeScoreStr}-${awayScoreStr}`
                    });
                }
            });
        }

        return results;
    } catch (error) {
        console.error('Error in fetchAllLeagueResults:', error);
        return [];
    }
}

async function syncToDatabaseAndLocal(results: MatchResult[]) {
    const supabase = createServiceRoleClient();
    let synced = 0;
    const localUpdates: Record<string, number> = { vsl: 0, '1lig': 0, '2lig': 0 };

    // Group results by our internal league keys
    const leagueMapping: Record<string, string> = {
        'vsl': 'Sultanlar Ligi',
        '1lig': '1. Lig',
        '2lig': '2. Lig'
    };

    const reverseMapping: Record<string, string> = {
        'Vodafone Sultanlar Ligi': 'vsl',
        'KADINLAR 1. LÄ°G': '1lig',
        'KADINLAR 2. LÄ°G': '2lig',
        'Sultanlar Ligi': 'vsl' // Catch-all variations
    };

    // Helper to find our internal league key from TVF name
    const findInternalKey = (tvfLeague: string) => {
        const upper = tvfLeague.toUpperCase();
        if (upper.includes('SULTANLAR')) return 'vsl';
        if (upper.includes('1. LÄ°G') || upper.includes('1.LÄ°G')) return '1lig';
        if (upper.includes('2. LÄ°G') || upper.includes('2.LÄ°G')) return '2lig';
        return null;
    };

    const dataFiles: Record<string, string> = {
        'vsl': 'vsl-data.json',
        '1lig': '1lig-data.json',
        '2lig': 'tvf-data.json'
    };

    for (const res of results) {
        const internalKey = findInternalKey(res.league);
        if (!internalKey) continue;

        // 1. Database Sync (Persistent)
        const dbLeagueName = leagueMapping[internalKey];
        try {
            const { error } = await supabase
                .from('match_results')
                .upsert({
                    league: dbLeagueName,
                    home_team: res.homeTeam,
                    away_team: res.awayTeam,
                    result_score: res.resultScore,
                    is_verified: true,
                    updated_at: new Date().toISOString()
                }, {
                    onConflict: 'league,home_team,away_team'
                });

            if (!error) synced++;
        } catch (e) {
            console.error(`DB Sync Error for ${res.homeTeam}:`, e);
        }

        // 2. Local File Update (Dev Mode)
        try {
            const fileName = dataFiles[internalKey];
            const filePath = path.join(process.cwd(), 'data', fileName);
            if (fs.existsSync(filePath)) {
                const data = JSON.parse(fs.readFileSync(filePath, 'utf-8'));
                let fileModified = false;

                const fixture = data.fixture || data.matches;
                if (fixture && Array.isArray(fixture)) {
                    for (const match of fixture) {
                        if (match.homeTeam.toUpperCase() === res.homeTeam.toUpperCase() &&
                            match.awayTeam.toUpperCase() === res.awayTeam.toUpperCase() &&
                            !match.isPlayed) {
                            match.isPlayed = true;
                            match.homeScore = res.homeScore;
                            match.awayScore = res.awayScore;
                            match.resultScore = res.resultScore;
                            fileModified = true;
                            localUpdates[internalKey]++;
                        }
                    }
                }

                if (fileModified) {
                    data.lastUpdated = new Date().toISOString();
                    fs.writeFileSync(filePath, JSON.stringify(data, null, 2));
                }
            }
        } catch (e) {
            // Ignore write errors in Vercel environment
        }
    }

    return { synced, localUpdates };
}

export async function GET(request: NextRequest) {
    try {
        const authHeader = request.headers.get('authorization');
        const cronSecret = process.env.CRON_SECRET;
        const vercelCron = request.headers.get('x-vercel-cron');

        if (cronSecret && authHeader !== `Bearer ${cronSecret}` && !vercelCron) {
            return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });
        }

        // console.log('Starting results sync via TVF Takvim...');
        const startTime = Date.now();

        const allResults = await fetchAllLeagueResults();
        console.log(`Fetched ${allResults.length} total matches from Takvim`);

        const syncStats = await syncToDatabaseAndLocal(allResults);

        const duration = Date.now() - startTime;

        return NextResponse.json({
            success: true,
            duration: `${duration}ms`,
            timestamp: new Date().toISOString(),
            fetchedCount: allResults.length,
            syncedCount: syncStats.synced,
            localUpdates: syncStats.localUpdates,
            sampleLeagues: [...new Set(allResults.map(r => r.league))]
        });

    } catch (error: any) {
        console.error('Unified Cron job error:', error);
        return NextResponse.json({ success: false, error: error.message }, { status: 500 });
    }
}

export async function POST(request: NextRequest) {
    return GET(request);
}

```

## File: app\api\custom-leagues\route.ts
```
import { NextRequest, NextResponse } from 'next/server';
import { withAuth } from '@/lib/api-middleware';
import { z } from 'zod';

const LeagueConfigSchema = z.object({
  allowedLeagues: z.array(z.string()),
  scoringMultiplier: z.number().min(0.5).max(5).optional(),
  showRankings: z.boolean().optional(),
  allowChat: z.boolean().optional(),
});

const CreateLeagueSchema = z.object({
  name: z.string().min(3).max(50),
  description: z.string().max(200).optional(),
  type: z.enum(['private', 'public']).default('private'),
  maxMembers: z.number().min(2).max(1000).optional(),
  settings: LeagueConfigSchema.optional(),
});

const UpdateLeagueSchema = z.object({
  leagueId: z.string().min(1),
  updates: CreateLeagueSchema.partial()
});

// GET /api/custom-leagues - Get user's custom leagues
export async function GET(request: NextRequest) {
  return withAuth(request, async (req, { user }) => {
    // In production, fetch from Supabase
    const mockLeagues = [
      {
        id: 'league-1',
        name: 'Ofis Ligi',
        description: 'Åirket iÃ§i voleybol tahmin yarÄ±ÅŸmasÄ±',
        type: 'private',
        ownerId: user.id,
        inviteCode: 'OFIS2024',
        maxMembers: 50,
        memberCount: 12,
        settings: {
          allowedLeagues: ['vsl', '1lig'],
          scoringMultiplier: 1,
          showRankings: true,
          allowChat: true,
        },
        createdAt: new Date('2024-01-01').toISOString(),
        members: [
          { id: 'm-1', username: 'user1', displayName: 'Ahmet', role: 'owner', joinedAt: new Date().toISOString(), points: 450 },
          { id: 'm-2', username: 'user2', displayName: 'Mehmet', role: 'member', joinedAt: new Date().toISOString(), points: 380 },
          { id: 'm-3', username: 'user3', displayName: 'AyÅŸe', role: 'moderator', joinedAt: new Date().toISOString(), points: 520 },
        ],
      },
      {
        id: 'league-2',
        name: 'Ãœniversite TurnuvasÄ±',
        description: 'KampÃ¼s voleybol sezonu',
        type: 'private',
        ownerId: 'other-user',
        inviteCode: 'UNI2024',
        maxMembers: 100,
        memberCount: 45,
        settings: {
          allowedLeagues: ['vsl', '1lig', 'cev-cl'],
          scoringMultiplier: 1.5,
          showRankings: true,
          allowChat: true,
        },
        createdAt: new Date('2024-02-01').toISOString(),
        members: [],
      }
    ];

    return NextResponse.json({ leagues: mockLeagues });
  });
}

// POST /api/custom-leagues - Create a new custom league
export async function POST(request: NextRequest) {
  return withAuth(request, async (req, { user }) => {
    const body = await req.json();

    // Validate with Zod
    let validatedData;
    try {
      validatedData = CreateLeagueSchema.parse(body);
    } catch (error) {
      if (error instanceof z.ZodError) {
        return NextResponse.json({ error: 'Invalid data', details: error.errors }, { status: 400 });
      }
      throw error;
    }

    const { name, description, type, maxMembers, settings } = validatedData;

    // Generate invite code
    const inviteCode = Math.random().toString(36).substring(2, 8).toUpperCase();

    // In production, create in Supabase
    const newLeague = {
      id: `league-${Date.now()}`,
      name,
      description: description || '',
      type: type,
      ownerId: user.id,
      inviteCode,
      maxMembers: maxMembers || 50,
      memberCount: 1,
      settings: settings || {
        allowedLeagues: ['vsl'],
        scoringMultiplier: 1,
        showRankings: true,
        allowChat: true,
      },
      createdAt: new Date().toISOString(),
      members: [
        { id: user.id, username: 'you', displayName: 'Sen', role: 'owner', joinedAt: new Date().toISOString(), points: 0 }
      ],
    };

    return NextResponse.json({
      success: true,
      message: 'League created',
      league: newLeague,
    });
  });
}

// PUT /api/custom-leagues - Update a custom league
export async function PUT(request: NextRequest) {
  return withAuth(request, async (req, { user }) => {
    const body = await req.json();

    // Validate with Zod
    let validatedData;
    try {
      validatedData = UpdateLeagueSchema.parse(body);
    } catch (error) {
      if (error instanceof z.ZodError) {
        return NextResponse.json({ error: 'Invalid data', details: error.errors }, { status: 400 });
      }
      throw error;
    }

    const { leagueId, updates } = validatedData;

    // In production, check ownership and update in Supabase

    return NextResponse.json({
      success: true,
      message: 'League updated',
    });
  });
}

// DELETE /api/custom-leagues - Delete a custom league
export async function DELETE(request: NextRequest) {
  return withAuth(request, async (req, { user }) => {
    const { searchParams } = new URL(req.url);
    const leagueId = searchParams.get('id');

    if (!leagueId) {
      return NextResponse.json({ error: 'League ID is required' }, { status: 400 });
    }

    // In production, check ownership and delete from Supabase

    return NextResponse.json({
      success: true,
      message: 'League deleted',
    });
  });
}

```

## File: app\api\custom-leagues\join\route.ts
```
import { NextRequest, NextResponse } from 'next/server';

// POST /api/custom-leagues/join - Join a league with invite code
export async function POST(request: NextRequest) {
  try {
    const userId = request.headers.get('x-user-id');
    
    if (!userId) {
      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });
    }

    const body = await request.json();
    const { inviteCode } = body;

    if (!inviteCode) {
      return NextResponse.json({ error: 'Invite code is required' }, { status: 400 });
    }

    // In production, find league by invite code and add member in Supabase
    
    // Mock response - simulate finding a league
    if (inviteCode.length !== 6) {
      return NextResponse.json({ error: 'Invalid invite code' }, { status: 400 });
    }

    const mockLeague = {
      id: 'joined-league',
      name: 'Yeni KatÄ±ldÄ±ÄŸÄ±n Lig',
      description: 'Bu lige davet koduyla katÄ±ldÄ±n',
      type: 'private',
      ownerId: 'other-user',
      inviteCode,
      maxMembers: 50,
      memberCount: 15,
    };

    return NextResponse.json({
      success: true,
      message: 'Successfully joined the league',
      league: mockLeague,
    });
  } catch (error) {
    console.error('Error joining league:', error);
    return NextResponse.json({ error: 'Internal server error' }, { status: 500 });
  }
}

```

## File: app\api\errors\route.ts
```
import { NextRequest, NextResponse } from 'next/server';

export async function POST(request: NextRequest) {
    try {
        const body = await request.json();
        const { message, stack, context, timestamp, url, userAgent } = body;

        // Structured log for Vercel/CloudWatch
        console.error(JSON.stringify({
            level: 'error',
            message: message || 'Unknown client error',
            timestamp: timestamp || new Date().toISOString(),
            stack,
            context,
            url,
            userAgent: userAgent || request.headers.get('user-agent'),
            source: 'client-error-boundary'
        }));

        // In a real production app, you would send this to Sentry, LogRocket, or Supabase here.

        return NextResponse.json({ success: true });
    } catch (error) {
        console.error('Error logging client error:', error);
        return NextResponse.json({ error: 'Internal server error' }, { status: 500 });
    }
}

```

## File: app\api\friends\route.ts
```
import { NextRequest, NextResponse } from 'next/server';

// GET /api/friends - Get user's friends list
export async function GET(request: NextRequest) {
  try {
    const userId = request.headers.get('x-user-id');
    
    if (!userId) {
      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });
    }

    // In production, fetch from Supabase
    const mockFriends = [
      {
        id: '1',
        friendId: 'friend-1',
        status: 'accepted',
        createdAt: new Date().toISOString(),
        friend: {
          id: 'friend-1',
          username: 'voleybolcu123',
          displayName: 'Ahmet YÄ±lmaz',
          avatar: null,
          level: 15,
          totalPoints: 2450,
          weeklyPoints: 320,
          correctPredictions: 156,
          totalPredictions: 210,
          winRate: 74.3,
          streak: 5,
          badges: ['early_adopter', 'streak_master'],
          favoriteTeam: 'FENERBAHÃ‡E MEDICANA',
          isOnline: true,
          lastActive: new Date().toISOString(),
        }
      },
      {
        id: '2',
        friendId: 'friend-2',
        status: 'accepted',
        createdAt: new Date().toISOString(),
        friend: {
          id: 'friend-2',
          username: 'tahminKrali',
          displayName: 'Mehmet Demir',
          avatar: null,
          level: 12,
          totalPoints: 1890,
          weeklyPoints: 210,
          correctPredictions: 98,
          totalPredictions: 145,
          winRate: 67.6,
          streak: 3,
          badges: ['prediction_expert'],
          favoriteTeam: 'ECZACIBAÅI DYNAVÄ°T',
          isOnline: false,
          lastActive: new Date(Date.now() - 3600000).toISOString(),
        }
      }
    ];

    return NextResponse.json({ friends: mockFriends });
  } catch (error) {
    console.error('Error fetching friends:', error);
    return NextResponse.json({ error: 'Internal server error' }, { status: 500 });
  }
}

// POST /api/friends - Send friend request
export async function POST(request: NextRequest) {
  try {
    const userId = request.headers.get('x-user-id');
    
    if (!userId) {
      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });
    }

    const body = await request.json();
    const { friendId } = body;

    if (!friendId) {
      return NextResponse.json({ error: 'Friend ID is required' }, { status: 400 });
    }

    // In production, create friend request in Supabase
    const friendRequest = {
      id: `request-${Date.now()}`,
      userId,
      friendId,
      status: 'pending',
      createdAt: new Date().toISOString(),
    };

    return NextResponse.json({ 
      success: true, 
      message: 'Friend request sent',
      request: friendRequest 
    });
  } catch (error) {
    console.error('Error sending friend request:', error);
    return NextResponse.json({ error: 'Internal server error' }, { status: 500 });
  }
}

// DELETE /api/friends - Remove friend
export async function DELETE(request: NextRequest) {
  try {
    const userId = request.headers.get('x-user-id');
    
    if (!userId) {
      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });
    }

    const { searchParams } = new URL(request.url);
    const friendId = searchParams.get('friendId');

    if (!friendId) {
      return NextResponse.json({ error: 'Friend ID is required' }, { status: 400 });
    }

    // In production, delete from Supabase

    return NextResponse.json({ 
      success: true, 
      message: 'Friend removed' 
    });
  } catch (error) {
    console.error('Error removing friend:', error);
    return NextResponse.json({ error: 'Internal server error' }, { status: 500 });
  }
}

```

## File: app\api\friends\requests\route.ts
```
import { NextRequest, NextResponse } from 'next/server';

// GET /api/friends/requests - Get pending friend requests
export async function GET(request: NextRequest) {
  try {
    const userId = request.headers.get('x-user-id');
    
    if (!userId) {
      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });
    }

    // In production, fetch from Supabase
    const mockRequests = [
      {
        id: 'req-1',
        userId: 'user-3',
        friendId: userId,
        status: 'pending',
        createdAt: new Date(Date.now() - 86400000).toISOString(),
        sender: {
          id: 'user-3',
          username: 'voleybolSever',
          displayName: 'Zeynep Kaya',
          avatar: null,
          level: 8,
          totalPoints: 890,
        }
      }
    ];

    return NextResponse.json({ requests: mockRequests });
  } catch (error) {
    console.error('Error fetching friend requests:', error);
    return NextResponse.json({ error: 'Internal server error' }, { status: 500 });
  }
}

// POST /api/friends/requests - Accept or reject friend request
export async function POST(request: NextRequest) {
  try {
    const userId = request.headers.get('x-user-id');
    
    if (!userId) {
      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });
    }

    const body = await request.json();
    const { requestId, action } = body;

    if (!requestId || !action) {
      return NextResponse.json({ error: 'Request ID and action are required' }, { status: 400 });
    }

    if (!['accept', 'reject'].includes(action)) {
      return NextResponse.json({ error: 'Invalid action' }, { status: 400 });
    }

    // In production, update in Supabase

    return NextResponse.json({ 
      success: true, 
      message: action === 'accept' ? 'Friend request accepted' : 'Friend request rejected'
    });
  } catch (error) {
    console.error('Error processing friend request:', error);
    return NextResponse.json({ error: 'Internal server error' }, { status: 500 });
  }
}

```

## File: app\api\friends\search\route.ts
```
import { NextRequest, NextResponse } from 'next/server';

// GET /api/friends/search - Search for users
export async function GET(request: NextRequest) {
  try {
    const { searchParams } = new URL(request.url);
    const query = searchParams.get('q');

    if (!query || query.length < 2) {
      return NextResponse.json({ users: [] });
    }

    // In production, search in Supabase
    const mockUsers = [
      {
        id: 'user-1',
        username: 'voleybolcu123',
        displayName: 'Ahmet YÄ±lmaz',
        avatar: null,
        level: 15,
        totalPoints: 2450,
      },
      {
        id: 'user-2',
        username: 'tahminKrali',
        displayName: 'Mehmet Demir',
        avatar: null,
        level: 12,
        totalPoints: 1890,
      },
      {
        id: 'user-3',
        username: 'voleybolSever',
        displayName: 'Zeynep Kaya',
        avatar: null,
        level: 8,
        totalPoints: 890,
      },
    ].filter(user => 
      user.username.toLowerCase().includes(query.toLowerCase()) ||
      user.displayName.toLowerCase().includes(query.toLowerCase())
    );

    return NextResponse.json({ users: mockUsers });
  } catch (error) {
    console.error('Error searching users:', error);
    return NextResponse.json({ error: 'Internal server error' }, { status: 500 });
  }
}

```

## File: app\api\leaderboard\route.ts
```
import { NextRequest, NextResponse } from 'next/server';
import { createServerSupabaseClient } from '../../utils/supabase-server';

// Revalidate every 2 minutes for leaderboard
export const revalidate = 120;

// GET - Fetch leaderboard
export async function GET(request: NextRequest) {
    try {
        const supabase = await createServerSupabaseClient();
        const { searchParams } = new URL(request.url);

        const type = searchParams.get('type') || 'total'; // total, weekly, monthly
        const limit = parseInt(searchParams.get('limit') || '50');

        let orderColumn = 'total_points';
        if (type === 'weekly') orderColumn = 'weekly_points';
        if (type === 'monthly') orderColumn = 'monthly_points';

        // Fetch Top N
        const { data, error } = await supabase
            .from('leaderboard')
            .select('*')
            .order(orderColumn, { ascending: false })
            .limit(limit);

        if (error) {
            console.error('Error fetching leaderboard:', error);
            return NextResponse.json({ error: error.message }, { status: 500 });
        }

        // Add rank to each entry
        const rankedData = data?.map((entry, index) => ({
            ...entry,
            rank: index + 1
        }));

        // Get current user's position if authenticated
        const { data: { user } } = await supabase.auth.getUser();
        let userEntry = null;
        let userRank = null;

        if (user) {
            // Check if user is already in top N
            const inTopKeys = rankedData?.findIndex(e => e.user_id === user.id);

            if (inTopKeys !== undefined && inTopKeys !== -1) {
                userRank = inTopKeys + 1;
                userEntry = rankedData![inTopKeys];
            } else {
                // If not in top results, fetch their entry specifically
                const { data: userData } = await supabase
                    .from('leaderboard')
                    .select('*')
                    .eq('user_id', user.id)
                    .single();

                if (userData) {
                    // Calculate rank efficiently: Count how many have more points
                    const { count, error: rankError } = await supabase
                        .from('leaderboard')
                        .select('*', { count: 'exact', head: true })
                        .gt(orderColumn, userData[orderColumn]);

                    if (!rankError) {
                        userRank = (count || 0) + 1;
                        userEntry = { ...userData, rank: userRank };
                    }
                }
            }
        }

        return NextResponse.json({
            leaderboard: rankedData,
            userEntry,
            userRank,
            type
        }, {
            headers: {
                'Cache-Control': 'public, s-maxage=120, stale-while-revalidate=300',
            }
        });
    } catch (error) {
        console.error('Leaderboard GET error:', error);
        return NextResponse.json({ error: 'Internal server error' }, { status: 500 });
    }
}

```

## File: app\api\live\route.ts
```
import { NextRequest, NextResponse } from 'next/server';

// GET /api/live - Get live matches
export async function GET(request: NextRequest) {
  try {
    // In production, fetch live matches from external API or WebSocket
    const mockLiveMatches = [
      {
        id: 'live-1',
        homeTeam: 'FENERBAHÃ‡E MEDICANA',
        awayTeam: 'ECZACIBAÅI DYNAVÄ°T',
        homeScore: [25, 23, 18],
        awayScore: [21, 25, 15],
        currentSet: 3,
        currentSetScore: { home: 18, away: 15 },
        status: 'live',
        startTime: new Date(Date.now() - 90 * 60 * 1000).toISOString(),
        league: 'vsl',
        venue: 'Burhan Felek Voleybol Salonu',
        viewers: 1245,
        isHighlighted: true,
        setWins: { home: 1, away: 1 },
      },
      {
        id: 'live-2',
        homeTeam: 'VAKIFBANK',
        awayTeam: 'GALATASARAY DAIKIN',
        homeScore: [25, 22],
        awayScore: [19, 25],
        currentSet: 3,
        currentSetScore: { home: 12, away: 10 },
        status: 'live',
        startTime: new Date(Date.now() - 75 * 60 * 1000).toISOString(),
        league: 'vsl',
        venue: 'VakÄ±f Spor Salonu',
        viewers: 892,
        isHighlighted: false,
        setWins: { home: 1, away: 1 },
      },
    ];

    const mockUpcomingMatches = [
      {
        id: 'upcoming-1',
        homeTeam: 'THY',
        awayTeam: 'NÄ°LÃœFER BELEDÄ°YESPOR',
        status: 'upcoming',
        startTime: new Date(Date.now() + 2 * 60 * 60 * 1000).toISOString(),
        league: 'vsl',
        venue: 'THY Spor Salonu',
      },
      {
        id: 'upcoming-2',
        homeTeam: 'BEÅÄ°KTAÅ',
        awayTeam: 'ARAS KARGO',
        status: 'upcoming',
        startTime: new Date(Date.now() + 4 * 60 * 60 * 1000).toISOString(),
        league: 'vsl',
        venue: 'BeÅŸiktaÅŸ Spor Salonu',
      },
    ];

    return NextResponse.json({
      liveMatches: mockLiveMatches,
      upcomingMatches: mockUpcomingMatches,
    });
  } catch (error) {
    console.error('Error fetching live matches:', error);
    return NextResponse.json({ error: 'Internal server error' }, { status: 500 });
  }
}

```

## File: app\api\live\[matchId]\comments\route.ts
```
import { NextRequest, NextResponse } from 'next/server';

// GET /api/live/[matchId]/comments - Get match comments
export async function GET(
  request: NextRequest,
  { params }: { params: Promise<{ matchId: string }> }
) {
  try {
    const { matchId } = await params;

    // In production, fetch from Supabase
    const mockComments = [
      {
        id: 'comment-1',
        matchId,
        userId: 'user-1',
        username: 'voleybolcu123',
        displayName: 'Ahmet YÄ±lmaz',
        avatar: null,
        content: 'FenerbahÃ§e bu seti alÄ±r! ğŸ’ª',
        timestamp: new Date(Date.now() - 5 * 60 * 1000).toISOString(),
        likes: 12,
        isLiked: false,
      },
      {
        id: 'comment-2',
        matchId,
        userId: 'user-2',
        username: 'tahminKrali',
        displayName: 'Mehmet Demir',
        avatar: null,
        content: 'Harika bir maÃ§! Her iki takÄ±m da Ã§ok iyi oynuyor ğŸ',
        timestamp: new Date(Date.now() - 3 * 60 * 1000).toISOString(),
        likes: 8,
        isLiked: true,
      },
      {
        id: 'comment-3',
        matchId,
        userId: 'user-3',
        username: 'voleybolSever',
        displayName: 'Zeynep Kaya',
        avatar: null,
        content: 'Bu ace Ã§ok gÃ¼zeldi! ğŸ¯',
        timestamp: new Date(Date.now() - 1 * 60 * 1000).toISOString(),
        likes: 5,
        isLiked: false,
      },
    ];

    return NextResponse.json({ comments: mockComments });
  } catch (error) {
    console.error('Error fetching comments:', error);
    return NextResponse.json({ error: 'Internal server error' }, { status: 500 });
  }
}

// POST /api/live/[matchId]/comments - Add a comment
export async function POST(
  request: NextRequest,
  { params }: { params: Promise<{ matchId: string }> }
) {
  try {
    const userId = request.headers.get('x-user-id');
    
    if (!userId) {
      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });
    }

    const { matchId } = await params;
    const body = await request.json();
    const { content } = body;

    if (!content || content.trim().length === 0) {
      return NextResponse.json({ error: 'Comment content is required' }, { status: 400 });
    }

    // In production, save to Supabase
    const newComment = {
      id: `comment-${Date.now()}`,
      matchId,
      userId,
      username: 'currentUser',
      displayName: 'KullanÄ±cÄ±',
      avatar: null,
      content: content.trim(),
      timestamp: new Date().toISOString(),
      likes: 0,
      isLiked: false,
    };

    return NextResponse.json({
      success: true,
      comment: newComment,
    });
  } catch (error) {
    console.error('Error adding comment:', error);
    return NextResponse.json({ error: 'Internal server error' }, { status: 500 });
  }
}

```

## File: app\api\live\[matchId]\comments\[commentId]\like\route.ts
```
import { NextRequest, NextResponse } from 'next/server';

// POST /api/live/[matchId]/comments/[commentId]/like - Like/unlike a comment
export async function POST(
  request: NextRequest,
  { params }: { params: Promise<{ matchId: string; commentId: string }> }
) {
  try {
    const userId = request.headers.get('x-user-id');
    
    if (!userId) {
      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });
    }

    const { matchId, commentId } = await params;

    // In production, toggle like in Supabase
    // This would check if user already liked and toggle

    return NextResponse.json({
      success: true,
      liked: true, // or false if unliked
    });
  } catch (error) {
    console.error('Error liking comment:', error);
    return NextResponse.json({ error: 'Internal server error' }, { status: 500 });
  }
}

```

## File: app\api\notifications\route.ts
```
import { NextRequest, NextResponse } from 'next/server';

// GET /api/notifications - Get user's notifications
export async function GET(request: NextRequest) {
  try {
    const userId = request.headers.get('x-user-id');
    
    if (!userId) {
      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });
    }

    // In production, fetch from Supabase
    const mockNotifications = [
      {
        id: 'notif-1',
        userId,
        type: 'match_reminder',
        title: 'MaÃ§ BaÅŸlÄ±yor!',
        message: 'FenerbahÃ§e vs EczacÄ±baÅŸÄ± maÃ§Ä± 1 saat sonra baÅŸlÄ±yor. Tahminini yaptÄ±n mÄ±?',
        data: { matchId: 'match-1' },
        isRead: false,
        link: '/vsl',
        createdAt: new Date().toISOString(),
      },
      {
        id: 'notif-2',
        userId,
        type: 'match_result',
        title: 'MaÃ§ SonuÃ§landÄ±',
        message: 'VakÄ±fBank 3-1 Galatasaray. Tahminini doÄŸru yaptÄ±n! +25 puan kazandÄ±n.',
        data: { matchId: 'match-2', points: 25 },
        isRead: false,
        link: '/vsl',
        createdAt: new Date(Date.now() - 3600000).toISOString(),
      },
      {
        id: 'notif-3',
        userId,
        type: 'friend_request',
        title: 'Yeni ArkadaÅŸlÄ±k Ä°steÄŸi',
        message: 'voleybolSever sana arkadaÅŸlÄ±k isteÄŸi gÃ¶nderdi.',
        data: { senderId: 'user-3' },
        isRead: true,
        link: '/friends',
        createdAt: new Date(Date.now() - 86400000).toISOString(),
      },
      {
        id: 'notif-4',
        userId,
        type: 'achievement',
        title: 'Yeni Rozet KazandÄ±n! ğŸ†',
        message: 'Tahmin UstasÄ± rozetini kazandÄ±n. 50 doÄŸru tahmin yaptÄ±n!',
        data: { badgeId: 'prediction_master' },
        isRead: true,
        link: '/quests',
        createdAt: new Date(Date.now() - 172800000).toISOString(),
      },
      {
        id: 'notif-5',
        userId,
        type: 'leaderboard_change',
        title: 'SÄ±ralama DeÄŸiÅŸikliÄŸi',
        message: 'HaftalÄ±k sÄ±ralamada 5. sÄ±raya yÃ¼kseldin!',
        data: { rank: 5, change: 3 },
        isRead: true,
        link: '/leaderboard',
        createdAt: new Date(Date.now() - 259200000).toISOString(),
      },
    ];

    return NextResponse.json({ 
      notifications: mockNotifications,
      unreadCount: mockNotifications.filter(n => !n.isRead).length
    });
  } catch (error) {
    console.error('Error fetching notifications:', error);
    return NextResponse.json({ error: 'Internal server error' }, { status: 500 });
  }
}

// POST /api/notifications - Mark notifications as read
export async function POST(request: NextRequest) {
  try {
    const userId = request.headers.get('x-user-id');
    
    if (!userId) {
      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });
    }

    const body = await request.json();
    const { action, notificationIds } = body;

    if (action === 'markAsRead' && notificationIds) {
      // In production, update in Supabase
      return NextResponse.json({ 
        success: true, 
        message: 'Notifications marked as read' 
      });
    }

    if (action === 'markAllAsRead') {
      // In production, update all in Supabase
      return NextResponse.json({ 
        success: true, 
        message: 'All notifications marked as read' 
      });
    }

    return NextResponse.json({ error: 'Invalid action' }, { status: 400 });
  } catch (error) {
    console.error('Error updating notifications:', error);
    return NextResponse.json({ error: 'Internal server error' }, { status: 500 });
  }
}

// DELETE /api/notifications - Delete notification(s)
export async function DELETE(request: NextRequest) {
  try {
    const userId = request.headers.get('x-user-id');
    
    if (!userId) {
      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });
    }

    const { searchParams } = new URL(request.url);
    const notificationId = searchParams.get('id');
    const clearAll = searchParams.get('clearAll');

    if (clearAll === 'true') {
      // In production, delete all from Supabase
      return NextResponse.json({ 
        success: true, 
        message: 'All notifications cleared' 
      });
    }

    if (notificationId) {
      // In production, delete from Supabase
      return NextResponse.json({ 
        success: true, 
        message: 'Notification deleted' 
      });
    }

    return NextResponse.json({ error: 'Notification ID or clearAll required' }, { status: 400 });
  } catch (error) {
    console.error('Error deleting notifications:', error);
    return NextResponse.json({ error: 'Internal server error' }, { status: 500 });
  }
}

```

## File: app\api\notifications\preferences\route.ts
```
import { NextRequest, NextResponse } from 'next/server';

// GET /api/notifications/preferences - Get notification preferences
export async function GET(request: NextRequest) {
  try {
    const userId = request.headers.get('x-user-id');
    
    if (!userId) {
      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });
    }

    // In production, fetch from Supabase
    const mockPreferences = {
      userId,
      pushEnabled: true,
      emailEnabled: true,
      matchReminders: true,
      matchResults: true,
      friendRequests: true,
      friendActivity: true,
      achievements: true,
      leaderboardChanges: true,
      dailyQuests: true,
      weeklyDigest: true,
      quietHoursStart: '23:00',
      quietHoursEnd: '08:00',
    };

    return NextResponse.json({ preferences: mockPreferences });
  } catch (error) {
    console.error('Error fetching notification preferences:', error);
    return NextResponse.json({ error: 'Internal server error' }, { status: 500 });
  }
}

// PUT /api/notifications/preferences - Update notification preferences
export async function PUT(request: NextRequest) {
  try {
    const userId = request.headers.get('x-user-id');
    
    if (!userId) {
      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });
    }

    const body = await request.json();

    // In production, update in Supabase
    
    return NextResponse.json({ 
      success: true, 
      message: 'Preferences updated',
      preferences: { userId, ...body }
    });
  } catch (error) {
    console.error('Error updating notification preferences:', error);
    return NextResponse.json({ error: 'Internal server error' }, { status: 500 });
  }
}

```

## File: app\api\notifications\subscribe\route.ts
```
import { NextRequest, NextResponse } from 'next/server';

// GET /api/notifications/subscribe - Subscribe to push notifications
export async function POST(request: NextRequest) {
  try {
    const userId = request.headers.get('x-user-id');
    
    if (!userId) {
      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });
    }

    const body = await request.json();
    const { subscription } = body;

    if (!subscription) {
      return NextResponse.json({ error: 'Subscription data required' }, { status: 400 });
    }

    // In production, store subscription in Supabase
    // This would include:
    // - subscription.endpoint
    // - subscription.keys.p256dh
    // - subscription.keys.auth
    
    return NextResponse.json({ 
      success: true, 
      message: 'Push subscription saved' 
    });
  } catch (error) {
    console.error('Error saving push subscription:', error);
    return NextResponse.json({ error: 'Internal server error' }, { status: 500 });
  }
}

// DELETE /api/notifications/subscribe - Unsubscribe from push notifications
export async function DELETE(request: NextRequest) {
  try {
    const userId = request.headers.get('x-user-id');
    
    if (!userId) {
      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });
    }

    // In production, remove subscription from Supabase
    
    return NextResponse.json({ 
      success: true, 
      message: 'Push subscription removed' 
    });
  } catch (error) {
    console.error('Error removing push subscription:', error);
    return NextResponse.json({ error: 'Internal server error' }, { status: 500 });
  }
}

```

## File: app\api\predict-all\route.ts
```
import { NextRequest, NextResponse } from 'next/server';
import { calculateElo } from '../../utils/eloCalculator';
import { Match } from '../../types';

export async function POST(req: NextRequest) {
    try {
        const body = await req.json();
        const { teams, upcomingMatches, allMatches } = body;

        if (!upcomingMatches || !allMatches) {
            return NextResponse.json({ error: "Missing match data" }, { status: 400 });
        }

        // 1. Calculate Base Elo from History
        const eloMap = calculateElo(teams, allMatches);

        const predictions: Record<string, string> = {};

        // 2. Predict each upcoming match
        (upcomingMatches as Match[]).forEach(m => {
            const hElo = eloMap.get(m.homeTeam) || 1200;
            const aElo = eloMap.get(m.awayTeam) || 1200;

            const expectedHome = 1 / (1 + Math.pow(10, (aElo - hElo) / 400));

            // Logic for score prediction based on probability
            // > 0.85 -> 3-0
            // > 0.70 -> 3-1
            // > 0.55 -> 3-2
            // < 0.45 -> Away Wins (reversed logic)
            // 0.45 - 0.55 -> Close match 3-2 or 2-3

            let score = "3-2"; // default close

            if (expectedHome > 0.85) score = "3-0";
            else if (expectedHome > 0.70) score = "3-1";
            else if (expectedHome > 0.55) score = "3-2";
            else if (expectedHome < 0.15) score = "0-3";
            else if (expectedHome < 0.30) score = "1-3";
            else if (expectedHome < 0.45) score = "2-3";
            else {
                // Toss up for 3-2 or 2-3
                score = expectedHome >= 0.5 ? "3-2" : "2-3";
            }

            const matchId = `${m.homeTeam}|||${m.awayTeam}`;
            predictions[matchId] = score;
        });

        return NextResponse.json(predictions);

    } catch (error) {
        console.error(error);
        return NextResponse.json({ error: "Internal Server Error" }, { status: 500 });
    }
}

```

## File: app\api\predictions\route.ts
```
import { NextRequest, NextResponse } from 'next/server';
import { z } from 'zod';
import { createServerSupabaseClient } from '../../utils/supabase-server';
import { withAuth } from '@/lib/api-middleware';

// Validation schemas
const PredictionInputSchema = z.object({
    matchId: z.string().min(1),
    league: z.enum(['1lig', '2lig', 'vsl', 'cev-cl']),
    groupName: z.string().optional(),
    homeTeam: z.string().min(1),
    awayTeam: z.string().min(1),
    matchDate: z.string().optional(),
    predictedScore: z.string().regex(/^\d+-\d+$/, 'Invalid score format'),
});

const PredictionBatchSchema = z.array(PredictionInputSchema);

export interface PredictionInput {
    matchId: string;
    league: '1lig' | '2lig' | 'vsl' | 'cev-cl';
    groupName?: string;
    homeTeam: string;
    awayTeam: string;
    matchDate?: string;
    predictedScore: string;
}

// GET - Fetch user's predictions
export async function GET(request: NextRequest) {
    return withAuth(request, async (req, { user }) => {
        const supabase = await createServerSupabaseClient();

        const { searchParams } = new URL(req.url);
        const league = searchParams.get('league');
        const groupName = searchParams.get('group');

        let query = supabase
            .from('predictions')
            .select('*')
            .eq('user_id', user.id)
            .order('created_at', { ascending: false });

        if (league) query = query.eq('league', league);
        if (groupName) query = query.eq('group_name', groupName);

        const { data, error } = await query;

        if (error) {
            console.error('Error fetching predictions:', error);
            return NextResponse.json({ error: error.message }, { status: 500 });
        }

        return NextResponse.json({ predictions: data });
    }, { rateLimit: { limit: 60, windowMs: 60000 } });
}

// POST - Create or update predictions (batch)
export async function POST(request: NextRequest) {
    return withAuth(request, async (req, { user }) => {
        const supabase = await createServerSupabaseClient();
        const body = await req.json();
        const predictions: PredictionInput[] = Array.isArray(body) ? body : [body];

        if (predictions.length === 0) {
            return NextResponse.json({ error: 'No predictions provided' }, { status: 400 });
        }

        // Validate all predictions
        try {
            PredictionBatchSchema.parse(predictions);
        } catch (validationError) {
            if (validationError instanceof z.ZodError) {
                return NextResponse.json(
                    { error: 'Invalid prediction data', details: validationError.errors },
                    { status: 400 }
                );
            }
            throw validationError;
        }

        // Transform predictions for upsert
        const records = predictions.map(p => ({
            user_id: user.id,
            match_id: p.matchId,
            league: p.league,
            group_name: p.groupName || null,
            home_team: p.homeTeam,
            away_team: p.awayTeam,
            match_date: p.matchDate ? new Date(p.matchDate).toISOString().split('T')[0] : null,
            predicted_score: p.predictedScore,
            updated_at: new Date().toISOString()
        }));

        // Upsert predictions (insert or update on conflict)
        const { data, error } = await supabase
            .from('predictions')
            .upsert(records, {
                onConflict: 'user_id,match_id',
                ignoreDuplicates: false
            })
            .select();

        if (error) {
            console.error('Error saving predictions:', error);
            return NextResponse.json({ error: error.message }, { status: 500 });
        }

        return NextResponse.json({
            success: true,
            saved: data?.length || 0,
            message: `${data?.length || 0} tahmin kaydedildi`
        });
    }, { rateLimit: { limit: 60, windowMs: 60000 } });
}

// DELETE - Remove a prediction
export async function DELETE(request: NextRequest) {
    return withAuth(request, async (req, { user }) => {
        const supabase = await createServerSupabaseClient();
        const { searchParams } = new URL(req.url);
        const matchId = searchParams.get('matchId');

        if (!matchId) {
            return NextResponse.json({ error: 'Match ID required' }, { status: 400 });
        }

        const { error } = await supabase
            .from('predictions')
            .delete()
            .eq('user_id', user.id)
            .eq('match_id', matchId);

        if (error) {
            console.error('Error deleting prediction:', error);
            return NextResponse.json({ error: error.message }, { status: 500 });
        }

        return NextResponse.json({ success: true });
    }, { rateLimit: { limit: 60, windowMs: 60000 } });
}


```

## File: app\api\push\subscribe\route.ts
```
import { NextRequest, NextResponse } from 'next/server';
import { createServerSupabaseClient } from '@/app/utils/supabase-server';

/**
 * POST /api/push/subscribe
 * Save push subscription to database
 */
export async function POST(request: NextRequest) {
  try {
    const supabase = await createServerSupabaseClient();
    
    // Get authenticated user
    const { data: { user }, error: authError } = await supabase.auth.getUser();
    
    if (authError || !user) {
      return NextResponse.json(
        { error: 'Unauthorized' },
        { status: 401 }
      );
    }

    const subscription = await request.json();

    // Validate subscription object
    if (!subscription.endpoint || !subscription.keys) {
      return NextResponse.json(
        { error: 'Invalid subscription object' },
        { status: 400 }
      );
    }

    // Save subscription to database
    const { error } = await supabase
      .from('push_subscriptions')
      .upsert({
        user_id: user.id,
        endpoint: subscription.endpoint,
        p256dh: subscription.keys.p256dh,
        auth: subscription.keys.auth,
        updated_at: new Date().toISOString(),
      }, {
        onConflict: 'user_id'
      });

    if (error) {
      console.error('Error saving push subscription:', error);
      return NextResponse.json(
        { error: 'Failed to save subscription' },
        { status: 500 }
      );
    }

    return NextResponse.json({ success: true });
  } catch (error) {
    console.error('Push subscription error:', error);
    return NextResponse.json(
      { error: 'Internal server error' },
      { status: 500 }
    );
  }
}

```

## File: app\api\push\unsubscribe\route.ts
```
import { NextRequest, NextResponse } from 'next/server';
import { createServerSupabaseClient } from '@/app/utils/supabase-server';

/**
 * POST /api/push/unsubscribe
 * Remove push subscription from database
 */
export async function POST(request: NextRequest) {
  try {
    const supabase = await createServerSupabaseClient();
    
    // Get authenticated user
    const { data: { user }, error: authError } = await supabase.auth.getUser();
    
    if (authError || !user) {
      return NextResponse.json(
        { error: 'Unauthorized' },
        { status: 401 }
      );
    }

    const { endpoint } = await request.json();

    if (!endpoint) {
      return NextResponse.json(
        { error: 'Endpoint required' },
        { status: 400 }
      );
    }

    // Remove subscription from database
    const { error } = await supabase
      .from('push_subscriptions')
      .delete()
      .eq('user_id', user.id)
      .eq('endpoint', endpoint);

    if (error) {
      console.error('Error removing push subscription:', error);
      return NextResponse.json(
        { error: 'Failed to remove subscription' },
        { status: 500 }
      );
    }

    return NextResponse.json({ success: true });
  } catch (error) {
    console.error('Push unsubscription error:', error);
    return NextResponse.json(
      { error: 'Internal server error' },
      { status: 500 }
    );
  }
}

```

## File: app\api\quests\route.ts
```
import { NextRequest, NextResponse } from 'next/server';

// GET /api/quests - Get user's quests and badges
export async function GET(request: NextRequest) {
  try {
    const userId = request.headers.get('x-user-id');
    
    if (!userId) {
      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });
    }

    const today = new Date().toISOString().split('T')[0];

    // In production, fetch from Supabase
    const mockDailyQuests = [
      {
        id: 'quest-1',
        type: 'make_predictions',
        title: '3 Tahmin Yap',
        description: 'BugÃ¼n 3 maÃ§ tahmini yap',
        reward: 50,
        progress: 2,
        target: 3,
        completed: false,
        claimedAt: null,
        expiresAt: new Date(new Date().setHours(23, 59, 59, 999)).toISOString(),
      },
      {
        id: 'quest-2',
        type: 'correct_prediction',
        title: 'DoÄŸru Tahmin',
        description: 'En az 1 doÄŸru tahmin yap',
        reward: 30,
        progress: 1,
        target: 1,
        completed: true,
        claimedAt: null,
        expiresAt: new Date(new Date().setHours(23, 59, 59, 999)).toISOString(),
      },
      {
        id: 'quest-3',
        type: 'visit_app',
        title: 'GÃ¼nlÃ¼k GiriÅŸ',
        description: 'Uygulamaya giriÅŸ yap',
        reward: 10,
        progress: 1,
        target: 1,
        completed: true,
        claimedAt: new Date().toISOString(),
        expiresAt: new Date(new Date().setHours(23, 59, 59, 999)).toISOString(),
      },
    ];

    const mockWeeklyChallenge = {
      id: 'weekly-1',
      title: 'HaftalÄ±k Meydan Okuma',
      description: 'Bu hafta 10 doÄŸru tahmin yap',
      reward: 500,
      progress: 6,
      target: 10,
      completed: false,
      expiresAt: new Date(Date.now() + 5 * 24 * 60 * 60 * 1000).toISOString(),
    };

    const mockBadges = [
      {
        id: 'early_adopter',
        name: 'Ä°lk KatÄ±lÄ±mcÄ±',
        description: 'Beta dÃ¶neminde katÄ±ldÄ±n',
        icon: 'ğŸŒŸ',
        rarity: 'legendary',
        earnedAt: new Date('2024-01-15').toISOString(),
        category: 'special',
      },
      {
        id: 'first_prediction',
        name: 'Ä°lk AdÄ±m',
        description: 'Ä°lk tahminini yaptÄ±n',
        icon: 'ğŸ¯',
        rarity: 'common',
        earnedAt: new Date('2024-01-16').toISOString(),
        category: 'prediction',
      },
      {
        id: 'streak_3',
        name: '3 GÃ¼n Seri',
        description: '3 gÃ¼n Ã¼st Ã¼ste tahmin yaptÄ±n',
        icon: 'ğŸ”¥',
        rarity: 'uncommon',
        earnedAt: new Date('2024-01-20').toISOString(),
        category: 'streak',
      },
      {
        id: 'prediction_50',
        name: 'Deneyimli Tahminci',
        description: '50 tahmin yaptÄ±n',
        icon: 'ğŸ“Š',
        rarity: 'rare',
        earnedAt: new Date('2024-02-01').toISOString(),
        category: 'prediction',
      },
    ];

    const mockStreak = {
      currentStreak: 5,
      longestStreak: 12,
      lastActivityDate: today,
      freezesAvailable: 2,
      freezeUsedToday: false,
    };

    return NextResponse.json({
      dailyQuests: mockDailyQuests,
      weeklyChallenge: mockWeeklyChallenge,
      badges: mockBadges,
      streak: mockStreak,
    });
  } catch (error) {
    console.error('Error fetching quests:', error);
    return NextResponse.json({ error: 'Internal server error' }, { status: 500 });
  }
}

// POST /api/quests - Claim quest reward or use streak freeze
export async function POST(request: NextRequest) {
  try {
    const userId = request.headers.get('x-user-id');
    
    if (!userId) {
      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });
    }

    const body = await request.json();
    const { action, questId } = body;

    if (action === 'claimReward' && questId) {
      // In production, update in Supabase and add points to user
      return NextResponse.json({
        success: true,
        message: 'Reward claimed',
        pointsEarned: 50,
      });
    }

    if (action === 'useStreakFreeze') {
      // In production, update in Supabase
      return NextResponse.json({
        success: true,
        message: 'Streak freeze used',
        freezesRemaining: 1,
      });
    }

    return NextResponse.json({ error: 'Invalid action' }, { status: 400 });
  } catch (error) {
    console.error('Error processing quest action:', error);
    return NextResponse.json({ error: 'Internal server error' }, { status: 500 });
  }
}

```

## File: app\api\refresh\route.ts
```
import { NextResponse } from 'next/server';
import { exec } from 'child_process';
import { promisify } from 'util';
import path from 'path';

const execAsync = promisify(exec);

export async function POST() {
    try {
        // Run the data update script
        const scriptPath = path.join(process.cwd(), 'scripts', 'update-data.js');

        // console.log('[REFRESH] Running update script:', scriptPath);

        const { stdout, stderr } = await execAsync(`node "${scriptPath}"`, {
            timeout: 60000, // 60 second timeout
            cwd: process.cwd()
        });

        if (stderr && !stderr.includes('DevTools')) {
            console.warn('[REFRESH] Script stderr:', stderr);
        }

        // console.log('[REFRESH] Script completed successfully');

        return NextResponse.json({
            success: true,
            message: 'Veri gÃ¼ncellendi!',
            timestamp: new Date().toISOString()
        });

    } catch (error: any) {
        console.error('[REFRESH] Error:', error.message);

        return NextResponse.json({
            success: false,
            error: error.message
        }, { status: 500 });
    }
}

// GET endpoint for polling status
export async function GET() {
    return NextResponse.json({
        status: 'ready',
        message: 'POST to this endpoint to refresh data'
    });
}

```

# Project Application Context - Part 5

## File: app\api\results\sync\route.ts
```
import { NextRequest, NextResponse } from 'next/server';
import { createServiceRoleClient } from '../../../utils/supabase-server';

// Scoring constants
const SCORE_EXACT_MATCH = 15;      // Exact score prediction
const SCORE_WINNER_CORRECT = 8;    // Right winner, wrong score
const BONUS_STREAK_3 = 5;
const BONUS_STREAK_5 = 10;
const BONUS_STREAK_10 = 25;

function getWinner(score: string): 'home' | 'away' | 'draw' {
    const [home, away] = score.split('-').map(Number);
    if (home > away) return 'home';
    if (away > home) return 'away';
    return 'draw';
}

function calculatePoints(predicted: string, actual: string): number {
    if (predicted === actual) return SCORE_EXACT_MATCH;
    if (getWinner(predicted) === getWinner(actual)) return SCORE_WINNER_CORRECT;
    return 0;
}

// POST - Sync match results and score predictions
export async function POST(request: NextRequest) {
    try {
        // This endpoint should be called by a cron job or admin
        const authHeader = request.headers.get('authorization');
        const cronSecret = process.env.CRON_SECRET;

        // Simple auth check (you can enhance this)
        if (cronSecret && authHeader !== `Bearer ${cronSecret}`) {
            return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });
        }

        const supabase = createServiceRoleClient();
        const body = await request.json();

        // Expect: { results: [{ matchId, resultScore, league, groupName, homeTeam, awayTeam, matchDate }] }
        const results = body.results || [];

        if (results.length === 0) {
            return NextResponse.json({ error: 'No results provided' }, { status: 400 });
        }

        let savedResults = 0;
        let scoredPredictions = 0;
        const userPointsMap = new Map<string, { points: number, correct: number, partial: number }>();

        for (const result of results) {
            // 1. Save/update match result
            const { error: resultError } = await supabase
                .from('match_results')
                .upsert({
                    match_id: result.matchId,
                    league: result.league,
                    group_name: result.groupName,
                    home_team: result.homeTeam,
                    away_team: result.awayTeam,
                    match_date: result.matchDate,
                    result_score: result.resultScore,
                    is_verified: true
                }, { onConflict: 'match_id' });

            if (!resultError) savedResults++;

            // 2. Find unscored predictions for this match
            const { data: predictions } = await supabase
                .from('predictions')
                .select('*')
                .eq('match_id', result.matchId)
                .eq('is_scored', false);

            if (predictions && predictions.length > 0) {
                for (const pred of predictions) {
                    const points = calculatePoints(pred.predicted_score, result.resultScore);
                    const isExact = pred.predicted_score === result.resultScore;
                    const isPartial = points === SCORE_WINNER_CORRECT;

                    // Update prediction with points
                    await supabase
                        .from('predictions')
                        .update({
                            points_earned: points,
                            is_scored: true
                        })
                        .eq('id', pred.id);

                    scoredPredictions++;

                    // Accumulate user points
                    const userId = pred.user_id;
                    const existing = userPointsMap.get(userId) || { points: 0, correct: 0, partial: 0 };
                    userPointsMap.set(userId, {
                        points: existing.points + points,
                        correct: existing.correct + (isExact ? 1 : 0),
                        partial: existing.partial + (isPartial ? 1 : 0)
                    });
                }
            }
        }

        // 3. Update leaderboard for all affected users
        for (const [userId, stats] of userPointsMap) {
            const { data: current } = await supabase
                .from('leaderboard')
                .select('*')
                .eq('user_id', userId)
                .single();

            if (current) {
                const newStreak = stats.correct > 0
                    ? current.current_streak + stats.correct
                    : 0;

                // Calculate streak bonus
                let streakBonus = 0;
                if (newStreak >= 10) streakBonus = BONUS_STREAK_10;
                else if (newStreak >= 5) streakBonus = BONUS_STREAK_5;
                else if (newStreak >= 3) streakBonus = BONUS_STREAK_3;

                await supabase
                    .from('leaderboard')
                    .update({
                        total_points: current.total_points + stats.points + streakBonus,
                        weekly_points: current.weekly_points + stats.points + streakBonus,
                        monthly_points: current.monthly_points + stats.points + streakBonus,
                        correct_predictions: current.correct_predictions + stats.correct,
                        partial_predictions: current.partial_predictions + stats.partial,
                        total_predictions: current.total_predictions + stats.correct + stats.partial,
                        current_streak: newStreak,
                        best_streak: Math.max(current.best_streak, newStreak)
                    })
                    .eq('user_id', userId);
            }
        }

        return NextResponse.json({
            success: true,
            savedResults,
            scoredPredictions,
            usersUpdated: userPointsMap.size
        });
    } catch (error) {
        console.error('Results sync error:', error);
        return NextResponse.json({ error: 'Internal server error' }, { status: 500 });
    }
}

```

## File: app\api\scrape\route.ts
```
import { NextResponse } from 'next/server';
import fs from 'fs';
import path from 'path';

export const dynamic = 'force-dynamic';
export const revalidate = 3600; // Cache for 1 hour

// Teams relegated from 2. Lig (to be excluded)
const RELEGATED_TEAMS = [
    'EDÄ°RNE SPOR',
    'KUÅADASI YAKAMOZ SPOR',
    'DÃœZÄ°Ã‡Ä° GENÃ‡LÄ°K',
    'SMART HOLDÄ°NG A.Å. Ã‡AYELÄ°',
    'KAHRAMANMARAÅ ELBÄ°STAN FEDA',
    'VAN B. ÅEHÄ°R BLD.',
    // Alternate spellings
    'EDIRNE SPOR',
    'KUSADASI YAKAMOZ SPOR',
    'DUZICI GENCLIK',
    'VAN B.SEHIR BLD.',
    'VAN BÃœYÃœKÅEHIR BLD.',
];

export async function GET() {
    try {
        const dataPath = path.join(process.cwd(), 'data', '2lig-data.json');

        if (!fs.existsSync(dataPath)) {
            throw new Error("Cached data not found. Please run 'node scripts/scrape-tvf-live.js'");
        }

        const fileContent = fs.readFileSync(dataPath, 'utf-8');
        const data = JSON.parse(fileContent);

        // Filter out relegated teams
        const isRelegated = (teamName: string) => {
            const normalized = teamName.toUpperCase().trim();
            return RELEGATED_TEAMS.some(rt =>
                normalized.includes(rt) || rt.includes(normalized)
            );
        };

        interface BaseTeam { name: string;[key: string]: unknown }
        interface BaseMatch { homeTeam: string; awayTeam: string;[key: string]: unknown }

        // Filter teams
        const filteredTeams = data.teams.filter((t: BaseTeam) => !isRelegated(t.name));

        // Filter fixtures (remove matches where either team is relegated)
        const filteredFixture = data.fixture.filter((m: BaseMatch) =>
            !isRelegated(m.homeTeam) && !isRelegated(m.awayTeam)
        );

        return NextResponse.json({
            ...data,
            teams: filteredTeams,
            fixture: filteredFixture
        });

    } catch (error: unknown) {
        const errorMessage = error instanceof Error ? error.message : 'Unknown error';
        return NextResponse.json({ error: errorMessage }, { status: 500 });
    }
}

```

## File: app\api\user\profile\route.ts
```
import { NextRequest, NextResponse } from 'next/server';
import { createServerSupabaseClient } from '../../../utils/supabase-server';
import { withAuth } from '@/lib/api-middleware';
import { z } from 'zod';

const ProfileUpdateSchema = z.object({
    display_name: z.string().min(2).max(50).optional(),
    avatar_url: z.string().url().optional().or(z.literal('')),
    favorite_team: z.string().optional()
});

// GET - Fetch user profile
export async function GET(request: NextRequest) {
    return withAuth(request, async (req, { user }) => {
        const supabase = await createServerSupabaseClient();

        // Get profile
        const { data: profile } = await supabase
            .from('user_profiles')
            .select('*')
            .eq('id', user.id)
            .single();

        // Get leaderboard entry
        const { data: leaderboardEntry } = await supabase
            .from('leaderboard')
            .select('*')
            .eq('user_id', user.id)
            .single();

        // Get user's rank
        let rank = null;
        if (leaderboardEntry) {
            const { data: higherRanked } = await supabase
                .from('leaderboard')
                .select('user_id', { count: 'exact' })
                .gt('total_points', leaderboardEntry.total_points);

            rank = (higherRanked?.length || 0) + 1;
        }

        // Get recent predictions
        const { data: recentPredictions } = await supabase
            .from('predictions')
            .select('*')
            .eq('user_id', user.id)
            .order('created_at', { ascending: false })
            .limit(10);

        return NextResponse.json({
            profile: profile || {
                id: user.id,
                display_name: user.user_metadata?.name || user.email?.split('@')[0],
                level: 1,
                xp: 0
            },
            stats: leaderboardEntry || {
                total_points: 0,
                correct_predictions: 0,
                total_predictions: 0,
                current_streak: 0,
                best_streak: 0
            },
            rank,
            recentPredictions: recentPredictions || []
        });
    });
}

// PUT - Update user profile
export async function PUT(request: NextRequest) {
    return withAuth(request, async (req, { user }) => {
        const supabase = await createServerSupabaseClient();
        const body = await req.json();

        // Validate input with Zod
        let validatedData;
        try {
            validatedData = ProfileUpdateSchema.parse(body);
        } catch (error) {
            if (error instanceof z.ZodError) {
                return NextResponse.json({ error: 'Invalid data', details: error.errors }, { status: 400 });
            }
            throw error;
        }

        if (Object.keys(validatedData).length === 0) {
            return NextResponse.json({ error: 'No valid fields to update' }, { status: 400 });
        }

        const { data, error } = await supabase
            .from('user_profiles')
            .upsert({
                id: user.id,
                ...validatedData,
                updated_at: new Date().toISOString()
            })
            .select()
            .single();

        if (error) {
            console.error('Error updating profile:', error);
            return NextResponse.json({ error: error.message }, { status: 500 });
        }

        // Also update display_name in leaderboard
        if (validatedData.display_name) {
            await supabase
                .from('leaderboard')
                .update({ display_name: validatedData.display_name })
                .eq('user_id', user.id);
        }

        return NextResponse.json({ success: true, profile: data });
    });
}

```

## File: app\api\vsl\route.ts
```
import { NextResponse } from 'next/server';
import fs from 'fs';
import path from 'path';

// Revalidate every 5 minutes
export const revalidate = 300;

export async function GET() {
    try {
        // Read the VSL data from local JSON file
        const dataPath = path.join(process.cwd(), 'data', 'vsl-data.json');

        if (!fs.existsSync(dataPath)) {
            return NextResponse.json(
                { error: 'Data file not found. Please run conversion script.' },
                { status: 404 }
            );
        }

        const jsonData = fs.readFileSync(dataPath, 'utf-8');
        const data = JSON.parse(jsonData);

        // Return with cache headers
        return NextResponse.json(data, {
            headers: {
                'Cache-Control': 'public, s-maxage=300, stale-while-revalidate=600',
            }
        });
    } catch (error) {
        console.error('Error reading VSL data:', error);
        return NextResponse.json(
            { error: 'Failed to load VSL data' },
            { status: 500 }
        );
    }
}

```

## File: app\auth\auth-code-error\page.tsx
```
"use client";

import Link from "next/link";

export default function AuthCodeErrorPage() {
    return (
        <main className="min-h-screen relative flex flex-col items-center justify-center p-4 overflow-hidden">
            {/* Background */}
            <div className="absolute inset-0 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-slate-900 via-[#0a0a1a] to-black -z-20"></div>
            <div className="absolute inset-0 bg-[url('/grid.svg')] opacity-20 -z-10"></div>

            {/* Ambient Light */}
            <div className="absolute top-0 left-1/4 w-96 h-96 bg-rose-500/20 rounded-full blur-[128px] -z-10"></div>
            <div className="absolute bottom-0 right-1/4 w-96 h-96 bg-indigo-500/20 rounded-full blur-[128px] -z-10"></div>

            <div className="w-full max-w-md mx-auto text-center space-y-6">
                {/* Error Icon */}
                <div className="text-6xl animate-bounce">ğŸ˜”</div>

                {/* Error Message */}
                <div className="bg-slate-900/60 backdrop-blur-xl border border-rose-500/30 rounded-3xl p-8 space-y-4">
                    <h1 className="text-2xl font-bold text-white">GiriÅŸ BaÅŸarÄ±sÄ±z</h1>
                    <p className="text-slate-400">
                        Google ile giriÅŸ yapÄ±lÄ±rken bir hata oluÅŸtu. LÃ¼tfen tekrar deneyin.
                    </p>

                    <div className="pt-4 space-y-3">
                        <Link
                            href="/login"
                            className="block w-full py-3 bg-gradient-to-r from-emerald-600 to-teal-600 text-white font-bold rounded-xl shadow-lg shadow-emerald-500/20 hover:shadow-emerald-500/40 hover:scale-[1.02] active:scale-[0.98] transition-all"
                        >
                            Tekrar Dene
                        </Link>

                        <Link
                            href="/"
                            className="block w-full py-3 bg-slate-800 border border-slate-700 text-white font-medium rounded-xl hover:bg-slate-700 transition-all"
                        >
                            Ana Sayfaya DÃ¶n
                        </Link>
                    </div>
                </div>

                {/* Help Text */}
                <p className="text-xs text-slate-500">
                    Sorun devam ederse e-posta ile giriÅŸ yapmayÄ± deneyebilirsiniz.
                </p>
            </div>
        </main>
    );
}

```

## File: app\auth\callback\route.ts
```
import { createServerClient, type CookieOptions } from '@supabase/ssr'
import { type NextRequest, NextResponse } from 'next/server'
import { cookies } from 'next/headers'

export async function GET(request: NextRequest) {
    const { searchParams, origin } = new URL(request.url)
    const code = searchParams.get('code')
    // if "next" is in param, use it as the redirect URL
    const next = searchParams.get('next') ?? '/ligler'

    if (code) {
        const cookieStore = await cookies()
        const supabase = createServerClient(
            process.env.NEXT_PUBLIC_SUPABASE_URL!,
            process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,
            {
                cookies: {
                    getAll() {
                        return cookieStore.getAll()
                    },
                    setAll(cookiesToSet) {
                        try {
                            cookiesToSet.forEach(({ name, value, options }) =>
                                cookieStore.set(name, value, options)
                            )
                        } catch {
                            // The `setAll` method was called from a Server Component.
                            // This can be ignored if you have middleware refreshing
                            // user sessions.
                        }
                    },
                },
            }
        )
        const { error } = await supabase.auth.exchangeCodeForSession(code)
        if (!error) {
            return NextResponse.redirect(`${origin}${next}`)
        }
    }

    // return the user to an error page with instructions
    return NextResponse.redirect(`${origin}/auth/auth-code-error`)
}

```

## File: app\ayarlar\page.tsx
```
"use client";

import dynamic from "next/dynamic";
import { useState, useEffect } from "react";
import { useAuth } from "../context/AuthContext";
import { useGameState } from "../utils/gameState";
import { useToast } from "../components/Toast";
import { Card, CardHeader, CardTitle, CardContent } from "../components/ui/Card";
import { Button } from "../components/ui/Button";
import { Badge } from "../components/ui/Badge";
import { motion, AnimatePresence } from "framer-motion";
import {
    Volume2, VolumeX, Sun, Moon, Bell, BellOff, Download,
    Trash2, HelpCircle, RefreshCcw, User, ShieldCheck, Mail, Info
} from "lucide-react";
import { cn } from "@/lib/utils";

const TutorialModal = dynamic(() => import("../components/TutorialModal"), {
    loading: () => null,
    ssr: false,
});

// Theme handling integrated with system design
function useLocalTheme() {
    const [theme, setThemeState] = useState<'dark' | 'light'>('dark');

    useEffect(() => {
        const saved = localStorage.getItem('theme') as 'dark' | 'light' | null;
        if (saved) {
            setThemeState(saved);
        }
    }, []);

    const setTheme = (newTheme: 'dark' | 'light') => {
        setThemeState(newTheme);
        localStorage.setItem('theme', newTheme);
        document.documentElement.setAttribute('data-theme', newTheme);
    };

    return { theme, setTheme };
}

export default function AyarlarPage() {
    const { user } = useAuth();
    const { gameState, toggleSound } = useGameState();
    const { showToast } = useToast();
    const { theme, setTheme } = useLocalTheme();

    const [notifications, setNotifications] = useState(true);
    const [showTutorial, setShowTutorial] = useState(false);

    const handleResetData = () => {
        if (confirm("TÃ¼m oyun verileriniz (XP, seviye, baÅŸarÄ±mlar, tahminler) silinecek. Bu iÅŸlem geri alÄ±namaz. Emin misiniz?")) {
            localStorage.removeItem('volleySimGameState');
            localStorage.removeItem('1ligGroupScenarios');
            localStorage.removeItem('groupScenarios');
            localStorage.removeItem('playoffScenarios');
            showToast("TÃ¼m veriler sÄ±fÄ±rlandÄ±. Sayfa yenileniyor...", "success");
            setTimeout(() => window.location.reload(), 1000);
        }
    };

    const handleExportData = () => {
        try {
            const exportData = {
                gameState: gameState,
                lig1Scenarios: JSON.parse(localStorage.getItem('1ligGroupScenarios') || '{}'),
                lig2Scenarios: JSON.parse(localStorage.getItem('groupScenarios') || '{}'),
                exportDate: new Date().toISOString()
            };
            const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(exportData, null, 2));
            const a = document.createElement('a');
            a.href = dataStr;
            a.download = `volleysimulator-backup-${new Date().toLocaleDateString('tr-TR')}.json`;
            a.click();
            showToast("Veriler indirildi", "success");
        } catch (e) {
            showToast("Hata oluÅŸtu", "error");
        }
    };

    return (
        <main className="min-h-screen bg-background text-text-primary p-4 sm:p-6 lg:p-8 animate-in fade-in duration-500">
            <div className="max-w-2xl mx-auto space-y-8">

                {/* Header Section */}
                <div className="space-y-1 border-b border-border-subtle pb-6">
                    <h1 className="text-4xl font-black tracking-tighter text-text-primary uppercase italic">
                        UYGULAMA <span className="text-primary shadow-glow-primary">AYARLARI</span>
                    </h1>
                    <p className="text-text-secondary font-medium">Uygulama deneyiminizi kiÅŸiselleÅŸtirin ve verilerinizi yÃ¶netin.</p>
                </div>

                <div className="space-y-4">
                    {/* General Settings */}
                    <SectionHeader title="GENEL TERCÄ°HLER" icon={<Info className="w-4 h-4" />} />

                    <div className="grid grid-cols-1 gap-3">
                        {/* Sound Toggle */}
                        <SettingCard
                            title="Ses Efektleri"
                            desc="Tahmin ve baÅŸarÄ±mlarda geri bildirim sesleri."
                            icon={gameState.soundEnabled ? <Volume2 className="text-emerald-500" /> : <VolumeX className="text-text-muted" />}
                            action={
                                <Toggle
                                    enabled={gameState.soundEnabled}
                                    onClick={toggleSound}
                                    activeColor="bg-emerald-500 shadow-glow-primary"
                                />
                            }
                        />

                        {/* Theme Select */}
                        <SettingCard
                            title="ArayÃ¼z TemasÄ±"
                            desc="Koyu veya AÃ§Ä±k mod arasÄ±nda geÃ§iÅŸ yapÄ±n."
                            icon={theme === 'dark' ? <Moon className="text-primary" /> : <Sun className="text-amber-500" />}
                            action={
                                <select
                                    value={theme}
                                    onChange={(e) => setTheme(e.target.value as 'dark' | 'light')}
                                    className="bg-surface-secondary border border-border-subtle rounded-lg px-3 py-1.5 text-xs font-black uppercase text-text-primary outline-none focus:border-primary/50 transition-all"
                                    aria-label="Tema SeÃ§imi"
                                >
                                    <option value="dark">KOYU</option>
                                    <option value="light">AÃ‡IK</option>
                                </select>
                            }
                        />

                        {/* Notifications */}
                        <SettingCard
                            title="Bildirimler"
                            desc="Uygulama iÃ§i anlÄ±k bildirimler ve duyurular."
                            icon={notifications ? <Bell className="text-primary" /> : <BellOff className="text-text-muted" />}
                            action={
                                <Toggle
                                    enabled={notifications}
                                    onClick={() => setNotifications(!notifications)}
                                />
                            }
                        />
                    </div>

                    {/* Data Management */}
                    <SectionHeader title="VERÄ° YÃ–NETÄ°MÄ°" icon={<ShieldCheck className="w-4 h-4" />} />

                    <div className="grid grid-cols-1 gap-3">
                        <ActionButton
                            title="Tahmin Verilerini Yedekle"
                            desc="TÃ¼m ilerlemenizi JSON formatÄ±nda cihazÄ±nÄ±za kaydedin."
                            icon={<Download className="w-5 h-5 text-emerald-500" />}
                            onClick={handleExportData}
                        />
                        <ActionButton
                            title="TÃ¼m Verileri SÄ±fÄ±rla"
                            desc="XP, seviye ve tÃ¼m yerel tahmin geÃ§miÅŸini kalÄ±cÄ± olarak siler."
                            icon={<Trash2 className="w-5 h-5 text-rose-500" />}
                            danger
                            onClick={handleResetData}
                        />
                    </div>

                    {/* Help & Support */}
                    <SectionHeader title="YARDIM VE DESTEK" icon={<HelpCircle className="w-4 h-4" />} />

                    <div className="grid grid-cols-1 gap-3">
                        <ActionButton
                            title="Uygulama Rehberini BaÅŸlat"
                            desc="Temel Ã¶zelliklerin nasÄ±l kullanÄ±lacaÄŸÄ±nÄ± gÃ¶sterir."
                            icon={<HelpCircle className="w-5 h-5 text-primary" />}
                            highlight
                            onClick={() => setShowTutorial(true)}
                        />
                        <ActionButton
                            title="Rehber Durumunu SÄ±fÄ±rla"
                            desc="Rehberin bir sonraki giriÅŸte tekrar otomatik gÃ¶rÃ¼nmesini saÄŸlar."
                            icon={<RefreshCcw className="w-5 h-5 text-text-muted" />}
                            onClick={() => {
                                localStorage.removeItem('tutorialCompleted');
                                showToast("Rehber sÄ±fÄ±rlandÄ±", "success");
                            }}
                        />
                    </div>

                    {/* Account Info */}
                    <SectionHeader title="HESAP BÄ°LGÄ°LERÄ°" icon={<User className="w-4 h-4" />} />

                    <Card className="bg-surface-secondary/20 border-border-main border-dashed">
                        <CardContent className="p-4 sm:p-6">
                            {user ? (
                                <div className="flex flex-col sm:flex-row justify-between gap-4 items-center">
                                    <div className="flex items-center gap-4">
                                        <div className="w-12 h-12 rounded-full bg-primary/20 flex items-center justify-center border border-primary/30">
                                            <Mail className="w-6 h-6 text-primary" />
                                        </div>
                                        <div>
                                            <p className="font-black text-text-primary tracking-tight">{user.email}</p>
                                            <Badge variant="success" className="h-5 px-2 py-0 text-[8px] font-black uppercase tracking-widest mt-1">KAYITLI KULLANICI</Badge>
                                        </div>
                                    </div>
                                    <Button variant="ghost" onClick={() => window.location.href = '/profile'} className="text-xs font-black uppercase tracking-widest text-primary">PROFÄ°LE GÄ°T</Button>
                                </div>
                            ) : (
                                <div className="text-center space-y-4">
                                    <p className="text-sm text-text-secondary font-medium italic">GiriÅŸ yaparak tÃ¼m cihazlarÄ±nÄ±zdan ilerlemenize eriÅŸebilirsiniz.</p>
                                    <Button variant="primary" onClick={() => window.location.href = '/login'} className="shadow-glow-primary font-black uppercase tracking-widest text-xs px-8">GÄ°RÄ°Å YAP</Button>
                                </div>
                            )}
                        </CardContent>
                    </Card>

                    {/* App Version */}
                    <div className="text-center pt-8 opacity-30">
                        <p className="text-[10px] font-black uppercase tracking-[0.4em] text-text-muted">VolleySimulator â€¢ Build v1.0.b â€¢ 2026</p>
                    </div>
                </div>
            </div>

            <TutorialModal isOpen={showTutorial} onClose={() => setShowTutorial(false)} />
        </main>
    );
}

const SectionHeader = ({ title, icon }: { title: string; icon: React.ReactNode }) => (
    <div className="flex items-center gap-2 pt-4 pb-2 border-b border-border-subtle mb-4">
        <div className="text-primary">{icon}</div>
        <h2 className="text-[10px] font-black tracking-[0.2em] text-text-muted uppercase">{title}</h2>
    </div>
);

const SettingCard = ({ title, desc, icon, action }: { title: string; desc: string; icon: React.ReactNode; action: React.ReactNode }) => (
    <Card className="bg-surface-primary border-border-main/50 overflow-hidden">
        <CardContent className="p-4 flex items-center justify-between gap-4">
            <div className="flex items-center gap-4 overflow-hidden">
                <div className="w-10 h-10 rounded-xl bg-surface-secondary flex items-center justify-center shrink-0">
                    {icon}
                </div>
                <div className="overflow-hidden">
                    <h3 className="text-sm font-black text-text-primary uppercase tracking-tight truncate">{title}</h3>
                    <p className="text-[10px] text-text-secondary font-medium line-clamp-1">{desc}</p>
                </div>
            </div>
            {action}
        </CardContent>
    </Card>
);

const ActionButton = ({ title, desc, icon, onClick, danger, highlight }: { title: string; desc: string; icon: React.ReactNode; onClick: () => void; danger?: boolean; highlight?: boolean }) => (
    <button
        onClick={onClick}
        className={cn(
            "w-full text-left group transition-all duration-300",
            highlight ? "" : ""
        )}
    >
        <Card className={cn(
            "transition-all duration-300 border-border-main/50 group-hover:bg-surface-secondary/50",
            highlight ? "bg-primary/5 border-primary/20 group-hover:bg-primary/10 group-hover:border-primary/40" : "bg-surface-primary",
            danger ? "group-hover:border-rose-500/40" : ""
        )}>
            <CardContent className="p-4 flex items-center justify-between gap-4">
                <div className="flex items-center gap-4">
                    <div className={cn(
                        "w-10 h-10 rounded-xl flex items-center justify-center shrink-0 transition-transform group-hover:scale-110 duration-500",
                        highlight ? "bg-primary/20" : "bg-surface-secondary"
                    )}>
                        {icon}
                    </div>
                    <div>
                        <h3 className={cn(
                            "text-sm font-black uppercase tracking-tight",
                            danger ? "group-hover:text-rose-500" : highlight ? "text-primary" : "text-text-primary"
                        )}>
                            {title}
                        </h3>
                        <p className="text-[10px] text-text-secondary font-medium">{desc}</p>
                    </div>
                </div>
                <span className={cn(
                    "text-lg transition-transform group-hover:translate-x-1 duration-300",
                    danger ? "text-rose-400" : highlight ? "text-primary" : "text-text-muted"
                )}>â†’</span>
            </CardContent>
        </Card>
    </button>
);

const Toggle = ({ enabled, onClick, activeColor = "bg-primary shadow-glow-primary" }: { enabled: boolean; onClick: () => void; activeColor?: string }) => (
    <button
        onClick={onClick}
        className={cn(
            "w-10 h-5 rounded-full transition-all relative border border-border-subtle shrink-0",
            enabled ? activeColor : "bg-surface-dark"
        )}
        aria-label="SeÃ§eneÄŸi DeÄŸiÅŸtir"
    >
        <motion.div
            layout
            className="w-3.5 h-3.5 bg-white rounded-full absolute top-0.5"
            animate={{ x: enabled ? 20 : 2 }}
        />
    </button>
);

```

## File: app\cev-challenge\page.tsx
```
import { redirect } from "next/navigation";

export default function CEVChallengePage() {
    redirect("/cev-challenge/gunceldurum");
}

```

## File: app\cev-challenge\anasayfa\page.tsx
```
"use client";

import Link from "next/link";
import { useEffect, useState } from "react";
import TeamAvatar from "@/app/components/TeamAvatar";

interface Match {
    id: number;
    round: string;
    leg?: number;
    date: string;
    homeTeam: string;
    awayTeam: string;
    homeScore: number | null;
    awayScore: number | null;
    setScores?: string;
    isPlayed: boolean;
}

interface Team {
    name: string;
    country: string;
}

interface CEVChallengeData {
    league: string;
    season: string;
    currentStage: string;
    teams: Team[];
    fixture: Match[];
}

const TURKISH_TEAMS = ["Galatasaray Daikin ISTANBUL", "Kuzeyboru", "THY ISTANBUL", "Bursa Nilufer Bld."]; // Expanded list just in case
const ROUND_LABELS: Record<string, string> = {
    "Qualification Rounds": "Eleme TurlarÄ±",
    "Main Round": "Ana Tablo",
    "16th Finals": "Son 32",
    "8th Finals": "Son 16",
    "Play Off": "Play-Off",
    "4th Finals": "Ã‡eyrek Final",
    "Semi Finals": "YarÄ± Final",
    "Finals": "Final"
};

export default function CEVChallengeAnasayfa() {
    const [data, setData] = useState<CEVChallengeData | null>(null);
    const [loading, setLoading] = useState(true);

    useEffect(() => {
        fetch("/api/cev-challenge")
            .then(res => res.json())
            .then(data => setData(data))
            .finally(() => setLoading(false));
    }, []);

    if (loading) {
        return (
            <div className="min-h-screen flex items-center justify-center bg-slate-950">
                <div className="animate-spin w-8 h-8 border-4 border-emerald-600 border-t-transparent rounded-full"></div>
            </div>
        );
    }

    if (!data) {
        return (
            <div className="min-h-screen flex items-center justify-center text-red-500 bg-slate-950">
                Veri yÃ¼klenemedi
            </div>
        );
    }

    const playedMatches = data.fixture.filter(m => m.isPlayed);
    const upcomingMatches = data.fixture.filter(m => !m.isPlayed).slice(0, 8); // Show next 8 matches

    // Turkish teams highlight logic
    const getTurkishTeamStats = (teamName: string) => {
        const matches = data.fixture.filter(m => m.homeTeam.includes(teamName) || m.awayTeam.includes(teamName));
        const played = matches.filter(m => m.isPlayed);
        let wins = 0;
        played.forEach(m => {
            if (m.homeTeam.includes(teamName) && (m.homeScore || 0) > (m.awayScore || 0)) wins++;
            if (m.awayTeam.includes(teamName) && (m.awayScore || 0) > (m.homeScore || 0)) wins++;
        });
        return { played: played.length, wins };
    };

    // Filter actual Turkish teams present in the data
    const activeTurkishTeams = TURKISH_TEAMS.filter(t =>
        data.teams.some(dt => dt.name.includes(t))
    );

    return (
        <div className="min-h-screen bg-slate-950">
            {/* Hero Header */}
            <div className="bg-gradient-to-br from-emerald-600 via-teal-600 to-emerald-800 px-4 py-4 relative overflow-hidden">
                <div className="relative max-w-4xl mx-auto">
                    <div className="flex items-center justify-between">
                        <div>
                            <h1 className="text-xl font-bold text-white mb-1">CEV Challenge Cup</h1>
                            <p className="text-white/70 text-sm">KadÄ±nlar â€¢ 2025-2026</p>
                        </div>
                        <div className="text-right">
                            <div className="text-3xl font-bold text-white">{playedMatches.length}</div>
                            <div className="text-xs text-white/60">Oynanan MaÃ§</div>
                        </div>
                    </div>
                </div>
            </div>

            <div className="max-w-4xl mx-auto px-4 mt-4 space-y-4 pb-6">
                {/* Current Stage Badge */}
                <div className="bg-emerald-500/10 border border-emerald-500/30 rounded-xl p-4 text-center">
                    <div className="text-xs text-emerald-400/70 uppercase tracking-wider mb-1">Mevcut AÅŸama</div>
                    <div className="text-2xl font-bold text-emerald-400">
                        {ROUND_LABELS[data.currentStage] || data.currentStage}
                    </div>
                </div>

                {/* Turkish Teams Overview - Only show if any found */}
                {activeTurkishTeams.length > 0 && (
                    <div className="bg-slate-900 border border-red-500/30 rounded-2xl overflow-hidden">
                        <div className="bg-red-900/20 px-4 py-3 border-b border-red-500/20">
                            <h3 className="font-bold text-white flex items-center gap-2">
                                <span>ğŸ‡¹ğŸ‡·</span> TÃ¼rk TakÄ±mlarÄ±
                            </h3>
                        </div>
                        <div className="divide-y divide-slate-800/50">
                            {activeTurkishTeams.map(teamName => {
                                const fullTeamName = data.teams.find(t => t.name.includes(teamName))?.name || teamName;
                                const stats = getTurkishTeamStats(teamName);
                                const nextMatch = data.fixture.find(m =>
                                    !m.isPlayed && (m.homeTeam.includes(teamName) || m.awayTeam.includes(teamName))
                                );
                                const opponent = nextMatch ?
                                    (nextMatch.homeTeam.includes(teamName) ? nextMatch.awayTeam : nextMatch.homeTeam) : null;

                                return (
                                    <div key={teamName} className="px-4 py-3 flex items-center gap-3">
                                        <TeamAvatar name={fullTeamName} size="sm" />
                                        <div className="flex-1">
                                            <div className="font-medium text-sm text-white">{fullTeamName}</div>
                                            <div className="text-xs text-slate-500">
                                                {stats.wins}G / {stats.played}M
                                                {opponent && (
                                                    <span className="text-emerald-400 ml-2">
                                                        â†’ vs {opponent}
                                                    </span>
                                                )}
                                            </div>
                                        </div>
                                        <div className="text-right">
                                            <div className="text-xs text-emerald-400 font-bold">
                                                {ROUND_LABELS[data.currentStage]}
                                            </div>
                                        </div>
                                    </div>
                                );
                            })}
                        </div>
                    </div>
                )}

                {/* Recent Results */}
                <div className="bg-slate-900 border border-slate-800 rounded-2xl overflow-hidden">
                    <div className="bg-slate-800/50 px-4 py-3 border-b border-slate-800 flex justify-between items-center">
                        <h3 className="font-bold text-white flex items-center gap-2">
                            <span className="text-emerald-400">âœ“</span> Son SonuÃ§lar
                        </h3>
                    </div>
                    <div className="divide-y divide-slate-800/50 max-h-64 overflow-y-auto">
                        {playedMatches.slice(-6).reverse().map((match, i) => {
                            const hasTurkish = activeTurkishTeams.some(t => match.homeTeam.includes(t) || match.awayTeam.includes(t));
                            return (
                                <div key={match.id} className={`px-4 py-3 ${hasTurkish ? "bg-red-900/10" : ""}`}>
                                    <div className="flex items-center gap-2 mb-1">
                                        <div className="flex-1 text-right text-sm text-slate-300 truncate flex items-center justify-end gap-1">
                                            {match.homeTeam}
                                            {activeTurkishTeams.some(t => match.homeTeam.includes(t)) && <span>ğŸ‡¹ğŸ‡·</span>}
                                        </div>
                                        <div className="px-2 py-0.5 rounded text-xs font-mono bg-emerald-500/20 text-emerald-400">
                                            {match.homeScore} - {match.awayScore}
                                        </div>
                                        <div className="flex-1 text-sm text-slate-300 truncate flex items-center gap-1">
                                            {activeTurkishTeams.some(t => match.awayTeam.includes(t)) && <span>ğŸ‡¹ğŸ‡·</span>}
                                            {match.awayTeam}
                                        </div>
                                    </div>
                                    <div className="text-center text-[10px] text-slate-500">
                                        {ROUND_LABELS[match.round] || match.round}
                                        {match.setScores && <span className="ml-2">({match.setScores})</span>}
                                    </div>
                                </div>
                            );
                        })}
                    </div>
                </div>

                {/* Upcoming Matches */}
                <div className="bg-slate-900 border border-slate-800 rounded-2xl overflow-hidden">
                    <div className="bg-slate-800/50 px-4 py-3 border-b border-slate-800">
                        <h3 className="font-bold text-white flex items-center gap-2">
                            <span className="text-emerald-400">ğŸ“…</span> Gelecek MaÃ§lar
                        </h3>
                    </div>
                    <div className="divide-y divide-slate-800/50">
                        {upcomingMatches.length === 0 ? (
                            <div className="p-4 text-center text-slate-500 text-xs">PlanlanmÄ±ÅŸ maÃ§ bulunamadÄ±.</div>
                        ) : upcomingMatches.map((match, i) => {
                            const hasTurkish = activeTurkishTeams.some(t => match.homeTeam.includes(t) || match.awayTeam.includes(t));
                            return (
                                <div key={match.id} className={`px-4 py-3 ${hasTurkish ? "bg-red-900/10" : ""}`}>
                                    <div className="flex items-center gap-2 mb-1">
                                        <div className="flex-1 text-right text-sm text-slate-300 truncate flex items-center justify-end gap-1">
                                            {match.homeTeam}
                                            {activeTurkishTeams.some(t => match.homeTeam.includes(t)) && <span>ğŸ‡¹ğŸ‡·</span>}
                                        </div>
                                        <div className="px-2 py-0.5 rounded text-xs font-mono bg-slate-800 text-slate-500">
                                            vs
                                        </div>
                                        <div className="flex-1 text-sm text-slate-300 truncate flex items-center gap-1">
                                            {activeTurkishTeams.some(t => match.awayTeam.includes(t)) && <span>ğŸ‡¹ğŸ‡·</span>}
                                            {match.awayTeam}
                                        </div>
                                    </div>
                                    <div className="text-center text-[10px] text-slate-500">
                                        {ROUND_LABELS[match.round] || match.round} â€¢ {match.date || 'TBD'}
                                    </div>
                                </div>
                            );
                        })}
                    </div>
                </div>

                {/* Quick Links */}
                <div className="grid grid-cols-2 gap-3">
                    <Link
                        href="/cev-challenge/gunceldurum"
                        className="bg-slate-900 border border-slate-800 rounded-xl p-4 hover:bg-slate-800 transition-colors group"
                    >
                        <div className="text-2xl mb-2">ğŸ“Š</div>
                        <div className="font-bold text-white text-sm group-hover:text-emerald-400 transition-colors">GÃ¼ncel Durum</div>
                        <div className="text-xs text-slate-500">TÃ¼m eÅŸleÅŸmeleri gÃ¶r</div>
                    </Link>
                    <Link
                        href="/cev-challenge/stats"
                        className="bg-slate-900 border border-slate-800 rounded-xl p-4 hover:bg-slate-800 transition-colors group"
                    >
                        <div className="text-2xl mb-2">ğŸ“ˆ</div>
                        <div className="font-bold text-white text-sm group-hover:text-emerald-400 transition-colors">Ä°statistikler</div>
                        <div className="text-xs text-slate-500">TakÄ±m performanslarÄ±</div>
                    </Link>
                </div>
            </div>
        </div>
    );
}

```

## File: app\cev-challenge\gunceldurum\CEVChallengeGuncelDurumClient.tsx
```
"use client";

import { useState, useMemo } from "react";

import TeamAvatar from "@/app/components/TeamAvatar";
import LeagueActionBar from "../../components/LeagueTemplate/LeagueActionBar";
import { LEAGUE_CONFIGS } from "../../components/LeagueTemplate/types";

interface Match {
    id: number;
    round: string;
    leg?: number;
    date: string;
    homeTeam: string;
    awayTeam: string;
    homeScore: number | null;
    awayScore: number | null;
    setScores?: string;
    isPlayed: boolean;
}

interface Team {
    name: string;
    country: string;
}

interface CEVChallengeData {
    league: string;
    season: string;
    currentStage: string;
    teams: Team[];
    fixture: Match[];
}

interface CEVChallengeGuncelDurumClientProps {
    initialData: CEVChallengeData;
}

const ROUNDS = ["Qualification Rounds", "Main Round", "4th Finals", "Semi Finals", "Finals"];
const ROUND_LABELS: Record<string, string> = {
    "Qualification Rounds": "Eleme TurlarÄ±",
    "Main Round": "Ana Tablo",
    "4th Finals": "Ã‡eyrek Final",
    "Semi Finals": "YarÄ± Final",
    "Finals": "Final"
};

const TURKISH_TEAMS = ["Galatasaray Daikin ISTANBUL", "Kuzeyboru"]; // Updating based on assumption, can be refined

export default function CEVChallengeGuncelDurumClient({ initialData }: CEVChallengeGuncelDurumClientProps) {
    // Default to first available round if currentStage mapping fails
    const [activeRound, setActiveRound] = useState<string>(
        ROUND_LABELS[initialData.currentStage] ? initialData.currentStage : (initialData.fixture.length > 0 ? initialData.fixture[0].round : "Main Round")
    );

    const availableRounds = useMemo(() => {
        const roundsInData = new Set(initialData.fixture.map(m => m.round));
        return ROUNDS.filter(r => roundsInData.has(r)).concat(Array.from(roundsInData).filter(r => !ROUNDS.includes(r)));
    }, [initialData.fixture]);

    const roundMatches = useMemo(() => {
        return initialData.fixture.filter(m => m.round === activeRound);
    }, [initialData.fixture, activeRound]);

    // Group matches by matchup
    const matchups = useMemo(() => {
        const grouped: Record<string, Match[]> = {};
        roundMatches.forEach(match => {
            const key = [match.homeTeam, match.awayTeam].sort().join(" vs ");
            if (!grouped[key]) grouped[key] = [];
            grouped[key].push(match);
        });
        return Object.values(grouped).map(matches => matches.sort((a, b) => (a.leg || 1) - (b.leg || 1)));
    }, [roundMatches]);

    const playedCount = roundMatches.filter(m => m.isPlayed).length;
    const totalCount = roundMatches.length;
    const completionRate = totalCount > 0 ? Math.round((playedCount / totalCount) * 100) : 0;

    const isTurkishTeam = (team: string) => TURKISH_TEAMS.some(t => team.includes(t)) || team.includes("ISTANBUL") || team.includes("ANKARA");

    return (
        <main className="min-h-screen bg-slate-950 text-slate-100 p-0 sm:p-2 font-sans overflow-hidden">
            <div className="max-w-7xl mx-auto space-y-1 h-full flex flex-col">
                <div className="space-y-3 bg-slate-900/40 p-3 rounded-2xl border border-slate-800/60 backdrop-blur-sm animate-in fade-in slide-in-from-bottom-4 duration-300">
                    {/* Action Bar using LeagueTemplate */}
                    <LeagueActionBar
                        config={LEAGUE_CONFIGS['cev-challenge']}
                        title={`${LEAGUE_CONFIGS['cev-challenge'].name} - ${ROUND_LABELS[activeRound]}`}
                        subtitle="CEV Challenge Cup â€¢ GÃ¼ncel Durum"
                        selectorLabel="Tur"
                        selectorValue={activeRound}
                        selectorOptions={availableRounds.map(r => ({ label: ROUND_LABELS[r], value: r }))}
                        onSelectorChange={setActiveRound}
                        progress={completionRate}
                        progressLabel={`%${completionRate}`}
                    >
                        {/* Live Badge */}
                        <div className="px-3 h-8 bg-emerald-950/50 rounded-lg border border-emerald-800/50 flex items-center gap-2">
                            <div className="w-2 h-2 bg-emerald-500 rounded-full animate-pulse"></div>
                            <span className="text-[10px] font-bold text-emerald-400 uppercase hidden sm:inline">Otomatik GÃ¼ncelleme</span>
                            <span className="text-[10px] font-bold text-emerald-400 uppercase sm:hidden">CANLI</span>
                        </div>
                        <div className="bg-slate-950/50 px-3 py-1.5 rounded-lg border border-slate-800 text-center flex flex-col justify-center">
                            <div className="text-[9px] font-bold text-slate-500 uppercase leading-none mb-0.5">Format</div>
                            <div className="text-xs font-bold text-white leading-none">Eleme (Ä°Ã§-DÄ±ÅŸ)</div>
                        </div>
                        <div className="px-3 py-1.5 bg-emerald-950/50 rounded-lg border border-emerald-800/50 flex items-center gap-2">
                            <div className="w-2 h-2 bg-emerald-500 rounded-full animate-pulse"></div>
                            <span className="text-[10px] font-bold text-emerald-400 uppercase">{matchups.length} EÅŸleÅŸme</span>
                        </div>
                    </LeagueActionBar>

                    {/* Matchups Grid */}
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
                        {matchups.map((matchup, idx) => {
                            const team1 = matchup[0]?.homeTeam;
                            const team2 = matchup[0]?.awayTeam;

                            // Calculate aggregate score
                            let team1Total = 0;
                            let team2Total = 0;
                            let allPlayed = true;

                            matchup.forEach(m => {
                                if (m.isPlayed && m.homeScore !== null && m.awayScore !== null) {
                                    if (m.homeTeam === team1) {
                                        team1Total += m.homeScore;
                                        team2Total += m.awayScore;
                                    } else {
                                        team1Total += m.awayScore;
                                        team2Total += m.homeScore;
                                    }
                                } else {
                                    allPlayed = false;
                                }
                            });

                            const hasTurkish = isTurkishTeam(team1) || isTurkishTeam(team2);

                            return (
                                <div
                                    key={idx}
                                    className={`bg-slate-950/60 rounded-xl border p-3 space-y-2 ${hasTurkish ? 'border-emerald-700/50 ring-1 ring-emerald-500/20' : 'border-slate-800/50'
                                        }`}
                                >
                                    {/* Matchup Header */}
                                    <div className="flex items-center justify-between">
                                        <div className="flex items-center gap-2 flex-1 overflow-hidden">
                                            <TeamAvatar name={team1} size="sm" />
                                            <div className="overflow-hidden">
                                                <span className="text-sm font-bold text-slate-200 truncate block">
                                                    {team1}
                                                    {isTurkishTeam(team1) && <span className="ml-1">ğŸ‡¹ğŸ‡·</span>}
                                                </span>
                                            </div>
                                        </div>
                                        <div className="px-3 flex flex-col items-center shrink-0">
                                            {allPlayed ? (
                                                <div className="flex items-center gap-1">
                                                    <span className={`text-lg font-black ${team1Total > team2Total ? 'text-green-400' : 'text-slate-400'}`}>
                                                        {team1Total}
                                                    </span>
                                                    <span className="text-slate-600">-</span>
                                                    <span className={`text-lg font-black ${team2Total > team1Total ? 'text-green-400' : 'text-slate-400'}`}>
                                                        {team2Total}
                                                    </span>
                                                </div>
                                            ) : (
                                                <span className="text-xs font-bold text-slate-600 bg-slate-900 px-2 py-1 rounded">VS</span>
                                            )}
                                            <span className="text-[9px] text-slate-500 uppercase">Toplam</span>
                                        </div>
                                        <div className="flex items-center gap-2 flex-1 justify-end overflow-hidden">
                                            <div className="overflow-hidden text-right">
                                                <span className="text-sm font-bold text-slate-200 truncate block">
                                                    {isTurkishTeam(team2) && <span className="mr-1">ğŸ‡¹ğŸ‡·</span>}
                                                    {team2}
                                                </span>
                                            </div>
                                            <TeamAvatar name={team2} size="sm" />
                                        </div>
                                    </div>

                                    {/* Individual Legs */}
                                    <div className="space-y-1.5 pt-1 border-t border-slate-800/50">
                                        {matchup.map((match, mIdx) => (
                                            <div key={match.id} className="flex items-center justify-between text-xs bg-slate-900/50 rounded-lg px-2 py-1.5">
                                                <div className="flex items-center gap-2">
                                                    <span className="text-[10px] font-bold text-slate-500 bg-slate-800 px-1.5 py-0.5 rounded">
                                                        {match.leg === 1 ? "1. MaÃ§" : "2. MaÃ§"}
                                                    </span>
                                                    <span className="text-[10px] text-slate-500">
                                                        {match.date?.split('-').reverse().join('.')}
                                                    </span>
                                                </div>
                                                <div className="flex items-center gap-1">
                                                    <span className="text-slate-400 text-[10px] truncate max-w-[60px]">{match.homeTeam.split(' ')[0]}</span>
                                                    {match.isPlayed ? (
                                                        <span className="font-bold text-white px-2">
                                                            {match.homeScore} - {match.awayScore}
                                                        </span>
                                                    ) : (
                                                        <span className="text-slate-600 px-2">-</span>
                                                    )}
                                                    <span className="text-slate-400 text-[10px] truncate max-w-[60px]">{match.awayTeam.split(' ')[0]}</span>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            );
                        })}
                    </div>

                    {matchups.length === 0 && (
                        <div className="flex flex-col items-center justify-center py-12 text-slate-500">
                            <span className="text-4xl mb-2">ğŸ</span>
                            <p className="text-sm">Bu tur iÃ§in henÃ¼z maÃ§ planlanmadÄ±.</p>
                        </div>
                    )}
                </div>
            </div>
        </main>
    );
}

```

## File: app\cev-challenge\gunceldurum\page.tsx
```
import fs from 'fs';
import path from 'path';
import { Metadata } from "next";
import CEVChallengeGuncelDurumClient from './CEVChallengeGuncelDurumClient';

export const metadata: Metadata = {
    title: "CEV Challenge Cup GÃ¼ncel Durum",
    description: "CEV Challenge Cup puan durumu, tur sÄ±ralamalarÄ± ve maÃ§ sonuÃ§larÄ±. Avrupa kupasÄ± gÃ¼ncel tablo.",
    openGraph: {
        title: "CEV Challenge Cup GÃ¼ncel Durum | VolleySimulator",
        description: "Challenge Cup tur sÄ±ralamalarÄ± ve maÃ§ sonuÃ§larÄ±.",
    },
};

interface Match {
    id: number;
    round: string;
    leg?: number;
    date: string;
    homeTeam: string;
    awayTeam: string;
    homeScore: number | null;
    awayScore: number | null;
    setScores?: string;
    isPlayed: boolean;
}

interface Team {
    name: string;
    country: string;
}

interface CEVChallengeData {
    league: string;
    season: string;
    currentStage: string;
    teams: Team[];
    fixture: Match[];
}

export default async function CEVChallengeGuncelDurumPage() {
    // We fetch from the API endpoint locally or read the JSON directly and transform it.
    // Since we created a route that transforms it, we can reuse that transformation logic here 
    // OR just call the API URL if full URL is known.
    // Better: Read JSON and Transform here to avoid self-fetch issues during build/runtime.

    // Copying transformation logic from API route for Server Component efficiency
    const filePath = path.join(process.cwd(), 'data', 'cev-challenge-cup-data.json');
    let data: CEVChallengeData | null = null;

    try {
        if (fs.existsSync(filePath)) {
            const fileContent = fs.readFileSync(filePath, 'utf8');
            const sourceData = JSON.parse(fileContent);

            const fixture: Match[] = [];
            const teamsMap = new Map();
            let matchCounter = 1;

            const parseScore = (scoreStr: string | null) => {
                if (!scoreStr || !scoreStr.includes('-')) return { home: null, away: null };
                const parts = scoreStr.split('-').map(p => parseInt(p.trim()));
                return { home: isNaN(parts[0]) ? null : parts[0], away: isNaN(parts[1]) ? null : parts[1] };
            };

            if (sourceData.phases) {
                sourceData.phases.forEach((phase: any) => {
                    const roundName = phase.name;
                    phase.matches.forEach((m: any) => {
                        const { home, away } = parseScore(m.score);
                        if (!teamsMap.has(m.homeTeam)) teamsMap.set(m.homeTeam, { name: m.homeTeam, country: '' });
                        if (!teamsMap.has(m.awayTeam)) teamsMap.set(m.awayTeam, { name: m.awayTeam, country: '' });

                        fixture.push({
                            id: matchCounter++,
                            round: roundName,
                            leg: 1,
                            date: m.date || 'TBD',
                            homeTeam: m.homeTeam,
                            awayTeam: m.awayTeam,
                            homeScore: home,
                            awayScore: away,
                            setScores: m.sets,
                            isPlayed: m.isPlayed
                        });
                    });
                });
            }

            data = {
                league: "CEV Challenge Cup",
                season: "2025-2026",
                currentStage: "Main Round",
                teams: Array.from(teamsMap.values()),
                fixture: fixture
            };
        }
    } catch (error) {
        console.error('Error reading CEV Challenge data:', error);
    }

    if (!data) {
        return (
            <main className="min-h-screen bg-slate-950 text-slate-100 p-4 flex items-center justify-center">
                <div className="text-center">
                    <h1 className="text-2xl font-bold text-emerald-500">Veri YÃ¼klenemedi</h1>
                    <p className="text-slate-400 mt-2">CEV Challenge Cup verileri yÃ¼klenirken bir hata oluÅŸtu.</p>
                </div>
            </main>
        );
    }

    return (
        <CEVChallengeGuncelDurumClient
            initialData={data}
        />
    );
}

```

## File: app\cev-challenge\playoffs\CEVChallengePlayoffsClient.tsx
```
"use client";

import { useEffect, useState, useMemo } from "react";
import TeamAvatar from "../../components/TeamAvatar";
import Link from "next/link";
import { SCORES } from "../../utils/calculatorUtils";

interface Match {
    id: number;
    round: string;
    leg?: number;
    date: string;
    homeTeam: string;
    awayTeam: string;
    homeScore: number | null;
    awayScore: number | null;
    isPlayed: boolean;
    setScores?: string;
}

interface CEVChallengeData {
    league: string;
    season: string;
    currentStage: string;
    teams: any[];
    fixture: Match[];
}

const ROUND_LABELS: Record<string, string> = {
    "Qualification Rounds": "Eleme TurlarÄ±",
    "Main Round": "Son 32 Turu",
    "16th Finals": "Son 32 Turu",
    "8th Finals": "Son 16 Turu",
    "Play Off": "Play-Off Turu",
    "4th Finals": "Ã‡eyrek Final",
    "Semi Finals": "YarÄ± Final",
    "Finals": "Final",
    "Final Phase": "Final AÅŸamasÄ±"
};

const TURKISH_TEAMS = ["Galatasaray Daikin ISTANBUL", "Kuzeyboru AKSARAY", "THY ISTANBUL", "Galatasaray", "Kuzeyboru", "THY"];

export default function CEVChallengePlayoffsClient({ initialData }: { initialData: CEVChallengeData }) {
    const [overrides, setOverrides] = useState<Record<string, string>>({});
    const [isLoaded, setIsLoaded] = useState(false);

    // Load saved predictions
    useEffect(() => {
        const loadSaved = () => {
            const saved = localStorage.getItem('cevChallengePredictions');
            if (saved) {
                try {
                    setOverrides(JSON.parse(saved));
                } catch (e) { console.error(e); }
            }
            setIsLoaded(true);
        };

        Promise.resolve().then(loadSaved);
    }, []);

    // Save predictions
    useEffect(() => {
        if (isLoaded) {
            localStorage.setItem('cevChallengePredictions', JSON.stringify(overrides));
        }
    }, [overrides, isLoaded]);

    const handleScoreChange = (matchId: number, score: string) => {
        setOverrides(prev => {
            const next = { ...prev };
            if (score) next[`match-${matchId}`] = score;
            else delete next[`match-${matchId}`];
            return next;
        });
    };

    const handlePredictAll = () => {
        const newOverrides = { ...overrides };
        const possibleScores = ['3-0', '3-1', '3-2', '2-3', '1-3', '0-3'];
        let changed = false;

        initialData.fixture.forEach(m => {
            if (!m.isPlayed && !newOverrides[`match-${m.id}`]) {
                const randomScore = possibleScores[Math.floor(Math.random() * possibleScores.length)];
                newOverrides[`match-${m.id}`] = randomScore;
                changed = true;
            }
        });

        if (changed) setOverrides(newOverrides);
    };

    // Group matches by matchup (leg 1 + leg 2)
    const getMatchups = (round: string) => {
        const roundMatches = initialData.fixture.filter(m => m.round === round);
        const grouped: Record<string, Match[]> = {};

        roundMatches.forEach(match => {
            const key = [match.homeTeam, match.awayTeam].sort().join(" vs ");
            if (!grouped[key]) grouped[key] = [];
            grouped[key].push(match);
        });

        return Object.values(grouped).map(matches => {
            const sorted = matches.sort((a, b) => (a.leg || 1) - (b.leg || 1));
            const leg1 = sorted[0];
            const leg2 = sorted[1];

            // Determine team1 and team2 based on leg 1 (Team 1 = Home of Leg 1 usually)
            const team1 = leg1.homeTeam;
            const team2 = leg1.awayTeam;

            // Calculate aggregate
            let team1Points = 0;
            let team2Points = 0;
            let allPlayedOrPredicted = true;

            const processMatch = (m: Match) => {
                const isPlayed = m.isPlayed && m.homeScore !== null && m.awayScore !== null;
                const pred = overrides[`match-${m.id}`];
                let hScore = 0, aScore = 0;

                if (isPlayed) {
                    hScore = m.homeScore!;
                    aScore = m.awayScore!;
                } else if (pred) {
                    [hScore, aScore] = pred.split('-').map(Number);
                } else {
                    allPlayedOrPredicted = false;
                    return;
                }

                // Points Calculation logic (3-0/3-1 = 3pts, 3-2 = 2pts)
                let hPts = 0, aPts = 0;
                if (hScore === 3) {
                    if (aScore <= 1) { hPts = 3; aPts = 0; }
                    else { hPts = 2; aPts = 1; }
                } else {
                    if (hScore <= 1) { hPts = 0; aPts = 3; }
                    else { hPts = 1; aPts = 2; }
                }

                if (m.homeTeam === team1) {
                    team1Points += hPts;
                    team2Points += aPts;
                } else {
                    team1Points += aPts;
                    team2Points += hPts;
                }
            };

            if (leg1) processMatch(leg1);
            if (leg2) processMatch(leg2);

            let winner = null;
            let goldenSetNeeded = false;

            if (allPlayedOrPredicted) {
                if (team1Points > team2Points) winner = team1;
                else if (team2Points > team1Points) winner = team2;
                else goldenSetNeeded = true;
            }

            // Golden Set Override
            const goldenKey = `golden-${leg1.id}`;
            const goldenPred = overrides[goldenKey];

            if (goldenSetNeeded) {
                if (goldenPred === 'team1') winner = team1;
                else if (goldenPred === 'team2') winner = team2;
            }

            return { matches: sorted, team1, team2, team1Points, team2Points, allPlayedOrPredicted, winner, goldenSetNeeded, goldenKey, goldenPred };
        });
    };

    const rounds = ["Qualification Rounds", "Main Round", "4th Finals", "Semi Finals", "Finals", "Final Phase"];
    const availableRounds = rounds.filter(r => initialData.fixture.some(m => m.round === r));

    // Render a single inputs row
    const renderScoreInput = (match: Match) => {
        const isPlayed = match.isPlayed && match.homeScore !== null;
        const pred = overrides[`match-${match.id}`];

        if (isPlayed) {
            return (
                <span className="font-mono font-bold text-slate-300 bg-slate-900 px-2 py-1 rounded border border-slate-700">
                    {match.homeScore}-{match.awayScore}
                </span>
            );
        }

        return (
            <select
                value={pred || ''}
                onChange={(e) => handleScoreChange(match.id, e.target.value)}
                className={`bg-slate-900 border text-xs rounded px-1 py-1 font-mono w-16 text-center appearance-none cursor-pointer hover:bg-slate-800 focus:ring-2 focus:ring-blue-500 outline-none transition-all ${pred ? 'border-blue-500 text-white' : 'border-slate-700 text-slate-500'}`}
                aria-label="Skor GeÃ§"
            >
                <option value="">v</option>
                {SCORES.map(s => <option key={s} value={s}>{s}</option>)}
            </select>
        );
    };

    const renderBracketCard = (round: string) => {
        const matchups = getMatchups(round);
        if (matchups.length === 0) return null;

        return (
            <div className="bg-slate-900/60 border border-slate-800 rounded-xl p-4 animate-in fade-in slide-in-from-bottom-4 duration-500" key={round}>
                <h3 className="text-lg font-bold text-amber-400 mb-4 flex items-center gap-2">
                    <span className="w-3 h-3 rounded-full bg-amber-500"></span>
                    {ROUND_LABELS[round] || round}
                    <span className="text-xs text-slate-500 ml-auto bg-slate-900 px-2 py-1 rounded border border-slate-800">{matchups.length} EÅŸleÅŸme</span>
                </h3>

                <div className="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4">
                    {matchups.map((matchup, idx) => {
                        // Check for Turkish teams using includes for fuzzy matching
                        const hasTurkish = TURKISH_TEAMS.some(t => matchup.team1.includes(t) || matchup.team2.includes(t)) ||
                            TURKISH_TEAMS.some(t => matchup.team1.toUpperCase().includes("GALATASARAY") || matchup.team1.toUpperCase().includes("KUZEYBORU") || matchup.team1.toUpperCase().includes("THY"));

                        const leg1 = matchup.matches[0];
                        const leg2 = matchup.matches[1];

                        return (
                            <div
                                key={idx}
                                className={`relative bg-slate-950/80 rounded-xl border overflow-hidden group ${hasTurkish ? 'border-amber-600/40' : 'border-slate-800'}`}
                            >
                                {/* Status Header / Golden Set Indicator */}
                                {(matchup.winner || matchup.goldenSetNeeded) && (
                                    <div className={`text-[10px] uppercase font-bold text-center py-1 ${matchup.winner ? 'bg-emerald-900/20 text-emerald-400 border-b border-emerald-500/20' : 'bg-amber-900/20 text-amber-400 border-b border-amber-500/20'
                                        }`}>
                                        {matchup.winner ? `Tur AtladÄ±: ${matchup.winner}` : 'ALTIN SET GEREKLÄ°'}
                                    </div>
                                )}

                                {/* Match Content */}
                                <div className="p-3 space-y-3">
                                    {/* Team 1 Row */}
                                    <div className={`flex items-center justify-between gap-3 p-2 rounded-lg transition-colors ${matchup.winner === matchup.team1 ? 'bg-emerald-900/20 border border-emerald-500/20' : 'bg-slate-900/40 border border-transparent'}`}>
                                        <div className="flex items-center gap-3 flex-1 min-w-0">
                                            <TeamAvatar name={matchup.team1} size="sm" />
                                            <div className="flex flex-col min-w-0">
                                                <span className={`text-xs font-bold truncate ${matchup.winner === matchup.team1 ? 'text-emerald-400' : 'text-slate-200'}`}>
                                                    {matchup.team1}
                                                </span>
                                                {hasTurkish && (matchup.team1.includes("Galatasaray") || matchup.team1.includes("Kuzeyboru") || matchup.team1.includes("THY")) && <span className="text-[9px] text-amber-500 font-bold tracking-wider">TEMSÄ°LCÄ°MÄ°Z</span>}
                                            </div>
                                        </div>
                                    </div>

                                    {/* Middle Section: Scores */}
                                    <div className="flex flex-col gap-2 bg-slate-900/30 rounded p-2 border border-slate-800/50">
                                        {/* Leg 1 */}
                                        <div className="flex items-center justify-center gap-3 text-xs">
                                            <span className="text-slate-500 w-8 text-right">MaÃ§ 1</span>
                                            {renderScoreInput(leg1)}
                                            <span className="text-slate-600 text-[10px] w-24 text-center truncate opacity-50">{leg1.date}</span>
                                        </div>

                                        {/* Leg 2 */}
                                        {leg2 && (
                                            <div className="flex items-center justify-center gap-3 text-xs">
                                                <span className="text-slate-500 w-8 text-right">MaÃ§ 2</span>
                                                {renderScoreInput(leg2)}
                                                <span className="text-slate-600 text-[10px] w-24 text-center truncate opacity-50">{leg2.date}</span>
                                            </div>
                                        )}

                                        {/* Golden Set Selection */}
                                        {matchup.goldenSetNeeded && (
                                            <div className="flex items-center justify-center gap-2 mt-1 animate-pulse">
                                                <span className="text-amber-500 font-bold text-[10px]">ALTIN SET:</span>
                                                <div className="flex gap-1">
                                                    <button
                                                        onClick={() => setOverrides(prev => ({ ...prev, [matchup.goldenKey]: 'team1' }))}
                                                        className={`px-2 py-0.5 text-[9px] rounded border ${matchup.goldenPred === 'team1' ? 'bg-amber-500 text-slate-900 border-amber-500' : 'bg-slate-800 text-slate-400 border-slate-600'}`}
                                                    >
                                                        {matchup.team1.substring(0, 3)}
                                                    </button>
                                                    <button
                                                        onClick={() => setOverrides(prev => ({ ...prev, [matchup.goldenKey]: 'team2' }))}
                                                        className={`px-2 py-0.5 text-[9px] rounded border ${matchup.goldenPred === 'team2' ? 'bg-amber-500 text-slate-900 border-amber-500' : 'bg-slate-800 text-slate-400 border-slate-600'}`}
                                                    >
                                                        {matchup.team2.substring(0, 3)}
                                                    </button>
                                                </div>
                                            </div>
                                        )}
                                    </div>

                                    {/* Team 2 Row */}
                                    <div className={`flex items-center justify-between gap-3 p-2 rounded-lg transition-colors ${matchup.winner === matchup.team2 ? 'bg-emerald-900/20 border border-emerald-500/20' : 'bg-slate-900/40 border border-transparent'}`}>
                                        <div className="flex items-center gap-3 flex-1 min-w-0 flex-row-reverse text-right">
                                            <TeamAvatar name={matchup.team2} size="sm" />
                                            <div className="flex flex-col min-w-0 items-end">
                                                <span className={`text-xs font-bold truncate ${matchup.winner === matchup.team2 ? 'text-emerald-400' : 'text-slate-200'}`}>
                                                    {matchup.team2}
                                                </span>
                                                {hasTurkish && (matchup.team2.includes("Galatasaray") || matchup.team2.includes("Kuzeyboru") || matchup.team2.includes("THY")) && <span className="text-[9px] text-amber-500 font-bold tracking-wider">TEMSÄ°LCÄ°MÄ°Z</span>}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        );
                    })}
                </div>
            </div>
        );
    };

    const totalMatches = initialData.fixture.length;
    const completedMatches = initialData.fixture.filter(m => m.isPlayed || overrides[`match-${m.id}`]).length;
    const progress = Math.round((completedMatches / totalMatches) * 100) || 0;

    return (
        <main className="min-h-screen bg-slate-950 text-slate-100 p-4 md:p-8 font-sans">
            <div className="max-w-7xl mx-auto space-y-6">
                <div className="flex items-center justify-between">
                    <div className="flex flex-col gap-1">
                        <h1 className="font-bold text-white text-lg tracking-tight leading-none hidden sm:block">{initialData.league || 'CEV Challenge Cup'}</h1>
                        <p className="text-[10px] text-slate-400 hidden sm:block">Eleme Tablosu {initialData.season}</p>
                    </div>

                    <button
                        onClick={handlePredictAll}
                        className="px-4 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white font-bold rounded-lg shadow-lg shadow-blue-600/20 transition-all flex items-center gap-2 text-xs"
                    >
                        <span>ğŸ²</span>
                        <span>TÃ¼mÃ¼nÃ¼ Tahmin Et</span>
                    </button>
                </div>

                {/* Info Banner */}
                {progress < 100 && (
                    <div className="bg-slate-900 border border-slate-800 p-4 rounded-xl flex items-center justify-between gap-4">
                        <div className="flex flex-col gap-1">
                            <span className="text-xs font-bold text-slate-300">Ä°lerleme Durumu</span>
                            <div className="w-32 sm:w-64 h-2 bg-slate-800 rounded-full overflow-hidden">
                                <div
                                    className="h-full bg-gradient-to-r from-blue-500 to-emerald-500 transition-all duration-500"
                                    style={{ width: `${progress}%` }}
                                ></div>
                            </div>
                        </div>
                        <div className="text-right">
                            <div className="text-lg font-black text-white">{completedMatches}/{totalMatches}</div>
                            <div className="text-[10px] text-slate-500 uppercase font-bold">MaÃ§ Tahmin Edildi</div>
                        </div>
                    </div>
                )}

                {/* Bracket by Rounds */}
                <div className="space-y-8">
                    {availableRounds.map(round => renderBracketCard(round))}
                </div>

                {/* Tournament Flow / Legend */}
                <div className="bg-slate-900/60 border border-slate-800 rounded-xl p-6 mt-8">
                    <div className="grid grid-cols-2 md:grid-cols-4 gap-4 text-xs text-center">
                        <div className="p-2 border border-slate-800 rounded flex flex-col items-center gap-1">
                            <span className="w-2 h-2 rounded-full bg-emerald-500"></span>
                            <span className="text-slate-400">Tur Atlayan</span>
                        </div>
                        <div className="p-2 border border-slate-800 rounded flex flex-col items-center gap-1">
                            <span className="w-2 h-2 rounded-full bg-amber-500"></span>
                            <span className="text-slate-400">AltÄ±n Set/Temsilcimiz</span>
                        </div>
                        <div className="p-2 border border-slate-800 rounded flex flex-col items-center gap-1">
                            <span className="border border-blue-500 text-blue-500 px-1 rounded text-[10px]">3-0</span>
                            <span className="text-slate-400">Tahmin Edilen Skor</span>
                        </div>
                        <div className="p-2 border border-slate-800 rounded flex flex-col items-center gap-1">
                            <span className="bg-slate-900 text-slate-300 border border-slate-700 px-1 rounded text-[10px]">3-0</span>
                            <span className="text-slate-400">Resmi SonuÃ§</span>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    );
}

```

## File: app\cev-challenge\playoffs\page.tsx
```
import fs from 'fs';
import path from 'path';
import { Metadata } from "next";
import CEVChallengePlayoffsClient from './CEVChallengePlayoffsClient';

export const metadata: Metadata = {
    title: "CEV Challenge Cup Playoff SimÃ¼lasyonu",
    description: "CEV Challenge Cup playoff simÃ¼lasyonu. Eleme turlarÄ±nÄ± simÃ¼le edin.",
    openGraph: {
        title: "CEV Challenge Cup Playoff | VolleySimulator",
        description: "Challenge Cup playoff eÅŸleÅŸmelerini simÃ¼le edin.",
    },
};

export default async function CEVChallengePlayoffsPage() {
    const filePath = path.join(process.cwd(), 'data', 'cev-challenge-cup-data.json');
    let data = null;

    try {
        if (fs.existsSync(filePath)) {
            const fileContent = fs.readFileSync(filePath, 'utf8');
            const sourceData = JSON.parse(fileContent);

            const fixture: any[] = [];
            const teamsMap = new Map();
            let matchCounter = 1;

            const parseScore = (scoreStr: string | null) => {
                if (!scoreStr || !scoreStr.includes('-')) return { home: null, away: null };
                const parts = scoreStr.split('-').map(p => parseInt(p.trim()));
                return { home: isNaN(parts[0]) ? null : parts[0], away: isNaN(parts[1]) ? null : parts[1] };
            };

            if (sourceData.phases) {
                // Track leg numbers for matchups
                const matchupLegs = new Map<string, number>();

                sourceData.phases.forEach((phase: any) => {
                    const roundName = phase.name;
                    phase.matches.forEach((m: any) => {
                        const { home, away } = parseScore(m.score);
                        if (!teamsMap.has(m.homeTeam)) teamsMap.set(m.homeTeam, { name: m.homeTeam, country: '' });
                        if (!teamsMap.has(m.awayTeam)) teamsMap.set(m.awayTeam, { name: m.awayTeam, country: '' });

                        // Determine leg
                        const matchupKey = [m.homeTeam, m.awayTeam].sort().join(' vs ');
                        const currentLeg = (matchupLegs.get(matchupKey) || 0) + 1;
                        matchupLegs.set(matchupKey, currentLeg);

                        fixture.push({
                            id: matchCounter++,
                            round: roundName,
                            leg: currentLeg,
                            date: m.date || 'TBD',
                            homeTeam: m.homeTeam,
                            awayTeam: m.awayTeam,
                            homeScore: home,
                            awayScore: away,
                            setScores: m.sets,
                            isPlayed: m.isPlayed
                        });
                    });
                });
            }

            data = {
                league: "CEV Challenge Cup",
                season: "2025-2026",
                currentStage: "Main Round",
                teams: Array.from(teamsMap.values()),
                fixture: fixture
            };
        }
    } catch (error) {
        console.error('Error reading CEV Challenge data:', error);
    }

    if (!data) {
        return (
            <main className="min-h-screen bg-slate-950 text-slate-100 p-4 flex items-center justify-center">
                <div className="text-center">
                    <h1 className="text-2xl font-bold text-emerald-500">Veri YÃ¼klenemedi</h1>
                    <p className="text-slate-400 mt-2">CEV Challenge Cup verileri yÃ¼klenirken bir hata oluÅŸtu.</p>
                </div>
            </main>
        );
    }

    return (
        <CEVChallengePlayoffsClient initialData={data} />
    );
}

```

## File: app\cev-challenge\stats\CEVChallengeStatsClient.tsx
```
"use client";

import { useMemo } from "react";

import TeamAvatar from "@/app/components/TeamAvatar";

interface Team {
    name: string;
    country: string;
}

interface Match {
    id: number;
    round: string;
    homeTeam: string;
    awayTeam: string;
    homeScore: number | null;
    awayScore: number | null;
    isPlayed: boolean;
}

interface CEVChallengeStatsClientProps {
    teams: Team[];
    fixture: Match[];
}

interface TeamStats {
    name: string;
    country: string;
    played: number;
    wins: number;
    losses: number;
    setsWon: number;
    setsLost: number;
    winRate: number;
}

export default function CEVChallengeStatsClient({ teams, fixture }: CEVChallengeStatsClientProps) {
    const teamsWithStats = useMemo(() => {
        const statsMap = new Map<string, TeamStats>();

        // Initialize all teams
        teams.forEach(team => {
            statsMap.set(team.name, {
                name: team.name,
                country: team.country,
                played: 0,
                wins: 0,
                losses: 0,
                setsWon: 0,
                setsLost: 0,
                winRate: 0
            });
        });

        // Calculate stats from matches
        fixture.filter(m => m.isPlayed).forEach(match => {
            const homeStats = statsMap.get(match.homeTeam);
            const awayStats = statsMap.get(match.awayTeam);

            if (homeStats && match.homeScore !== null && match.awayScore !== null) {
                homeStats.played++;
                homeStats.setsWon += match.homeScore;
                homeStats.setsLost += match.awayScore;
                if (match.homeScore > match.awayScore) {
                    homeStats.wins++;
                } else {
                    homeStats.losses++;
                }
            }

            if (awayStats && match.homeScore !== null && match.awayScore !== null) {
                awayStats.played++;
                awayStats.setsWon += match.awayScore;
                awayStats.setsLost += match.homeScore;
                if (match.awayScore > match.homeScore) {
                    awayStats.wins++;
                } else {
                    awayStats.losses++;
                }
            }
        });

        // Calculate win rates
        statsMap.forEach(stats => {
            stats.winRate = stats.played > 0 ? Math.round((stats.wins / stats.played) * 100) : 0;
        });

        return Array.from(statsMap.values()).filter(t => t.played > 0);
    }, [teams, fixture]);

    const totalMatches = useMemo(() => fixture.filter(m => m.isPlayed).length, [fixture]);
    const totalSets = useMemo(() => teamsWithStats.reduce((sum, t) => sum + t.setsWon, 0), [teamsWithStats]);

    const mostWins = useMemo(() => [...teamsWithStats].sort((a, b) => b.wins - a.wins).slice(0, 5), [teamsWithStats]);
    const mostSets = useMemo(() => [...teamsWithStats].sort((a, b) => b.setsWon - a.setsWon).slice(0, 5), [teamsWithStats]);
    const bestWinRate = useMemo(() => [...teamsWithStats].filter(t => t.played >= 2).sort((a, b) => b.winRate - a.winRate).slice(0, 5), [teamsWithStats]);
    const leastLosses = useMemo(() => [...teamsWithStats].sort((a, b) => a.losses - b.losses || b.wins - a.wins).slice(0, 5), [teamsWithStats]);

    return (
        <main className="min-h-screen bg-slate-950 text-slate-100 p-2 sm:p-4 font-sans">
            <div className="max-w-7xl mx-auto space-y-4 sm:space-y-6">
                <div className="flex flex-col gap-1 px-1">
                    <h1 className="font-bold text-white text-lg tracking-tight leading-none hidden sm:block">CEV Challenge Cup Ä°statistikleri</h1>
                    <p className="text-[10px] text-slate-400 hidden sm:block">KadÄ±nlar â€¢ 2025-2026</p>
                </div>

                <div className="grid grid-cols-3 gap-2 sm:gap-4">
                    <div className="bg-gradient-to-br from-emerald-600/20 to-emerald-900/10 rounded-xl sm:rounded-2xl p-3 sm:p-4 border border-emerald-600/30 text-center">
                        <div className="text-2xl sm:text-4xl font-bold text-emerald-400">{totalMatches}</div>
                        <div className="text-[10px] sm:text-xs text-emerald-400/70 uppercase tracking-wider mt-1">Oynanan MaÃ§</div>
                    </div>
                    <div className="bg-gradient-to-br from-teal-600/20 to-teal-900/10 rounded-xl sm:rounded-2xl p-3 sm:p-4 border border-teal-600/30 text-center">
                        <div className="text-2xl sm:text-4xl font-bold text-teal-400">{totalSets}</div>
                        <div className="text-[10px] sm:text-xs text-teal-400/70 uppercase tracking-wider mt-1">Toplam Set</div>
                    </div>
                    <div className="bg-gradient-to-br from-indigo-600/20 to-indigo-900/10 rounded-xl sm:rounded-2xl p-3 sm:p-4 border border-indigo-600/30 text-center">
                        <div className="text-2xl sm:text-4xl font-bold text-indigo-400">{teamsWithStats.length}</div>
                        <div className="text-[10px] sm:text-xs text-indigo-400/70 uppercase tracking-wider mt-1">Aktif TakÄ±m</div>
                    </div>
                </div>

                <div className="grid sm:grid-cols-2 gap-3 sm:gap-4 pb-8">
                    <StatCard
                        title="En Ã‡ok Galibiyet"
                        icon="ğŸ†"
                        teamStats={mostWins}
                        statKey="wins"
                        color="bg-emerald-500"
                        gradient="bg-gradient-to-r from-emerald-600 to-teal-600"
                        suffix="G"
                    />
                    <StatCard
                        title="En YÃ¼ksek Galibiyet %"
                        icon="ğŸ“ˆ"
                        teamStats={bestWinRate}
                        statKey="winRate"
                        color="bg-teal-500"
                        gradient="bg-gradient-to-r from-teal-600 to-cyan-600"
                        suffix="%"
                    />
                    <StatCard
                        title="En Ã‡ok Set Alan"
                        icon="ğŸ"
                        teamStats={mostSets}
                        statKey="setsWon"
                        color="bg-indigo-500"
                        gradient="bg-gradient-to-r from-indigo-600 to-purple-600"
                    />
                    <StatCard
                        title="En Az MaÄŸlubiyet"
                        icon="ğŸ›¡ï¸"
                        teamStats={leastLosses}
                        statKey="losses"
                        color="bg-orange-500"
                        gradient="bg-gradient-to-r from-orange-600 to-red-600"
                        suffix="M"
                    />
                </div>
            </div>
        </main>
    );
}

// Extracted Components
const BarChart = ({ value, max, color }: { value: number; max: number; color: string }) => (
    <div className="h-1.5 bg-slate-800 rounded-full overflow-hidden flex-1">
        <div
            className={`h-full ${color} opacity-80`}
            style={{ '--stat-width': `${Math.min((value / (max || 1)) * 100, 100)}%`, width: 'var(--stat-width)' } as any}
        />
    </div>
);

const StatCard = ({ title, icon, teamStats, statKey, color, gradient, suffix = "" }: {
    title: string; icon: string;
    teamStats: TeamStats[];
    statKey: 'losses' | 'wins' | 'setsWon' | 'setsLost' | 'winRate';
    color: string;
    gradient: string;
    suffix?: string;
}) => {
    const maxValue = Math.max(...teamStats.map(t => Number(t[statKey])), 1);

    return (
        <div className="bg-slate-950/50 backdrop-blur-md rounded-xl border border-slate-800/60 overflow-hidden hover:border-slate-700/80 transition-all duration-300 group shadow-md hover:shadow-lg">
            <div className={`${gradient} px-2.5 py-2 border-b border-white/10 relative overflow-hidden`}>
                <div className="absolute inset-0 bg-white/5 opacity-0 group-hover:opacity-100 transition-opacity"></div>
                <div className="flex items-center justify-between relative z-10">
                    <h3 className="font-bold text-white text-[11px] uppercase tracking-wider flex items-center gap-1.5">
                        <span className="text-sm">{icon}</span> {title}
                    </h3>
                    <span className="text-[9px] font-bold text-white/70 bg-black/20 px-1.5 py-0.5 rounded-full border border-white/10">TOP 5</span>
                </div>
            </div>

            <div className="p-1.5 space-y-1">
                {teamStats.map((t, idx) => (
                    <div
                        key={t.name}
                        className={`flex items-center gap-2 p-1.5 rounded-lg transition-all ${idx === 0 ? 'bg-gradient-to-r from-emerald-500/10 to-transparent border border-emerald-500/20' : 'hover:bg-slate-800/50'
                            }`}
                    >
                        <div className={`w-5 h-5 rounded flex items-center justify-center font-bold text-[10px] shadow-sm ${idx === 0 ? 'bg-gradient-to-br from-emerald-500 to-teal-600 text-white' :
                            idx === 1 ? 'bg-slate-300 text-slate-800' :
                                idx === 2 ? 'bg-emerald-700 text-white' :
                                    'bg-slate-800 text-slate-500'
                            }`}>
                            {idx + 1}
                        </div>
                        <TeamAvatar name={t.name} size="xs" />

                        <div className="flex-1 min-w-0">
                            <span className={`text-[11px] font-medium truncate block ${idx === 0 ? 'text-emerald-300' : 'text-white'}`} title={t.name}>
                                {t.name}
                            </span>
                        </div>

                        <div className="flex items-center gap-1.5 w-16">
                            <BarChart value={Number(t[statKey])} max={maxValue} color={color} />
                            <span className={`text-[11px] font-bold min-w-[24px] text-right ${idx === 0 ? 'text-emerald-400' : 'text-slate-300'}`}>
                                {t[statKey]}{suffix}
                            </span>
                        </div>
                    </div>
                ))}
            </div>
        </div>
    );
};

```

## File: app\cev-challenge\stats\page.tsx
```
import fs from 'fs';
import path from 'path';
import { Metadata } from "next";
import CEVChallengeStatsClient from './CEVChallengeStatsClient';

export const metadata: Metadata = {
    title: "CEV Challenge Cup Ä°statistikler",
    description: "CEV Challenge Cup takÄ±m istatistikleri ve performans analizleri.",
    openGraph: {
        title: "CEV Challenge Cup Ä°statistikler | VolleySimulator",
        description: "Challenge Cup takÄ±m istatistikleri.",
    },
};

export default async function CEVChallengeStatsPage() {
    const filePath = path.join(process.cwd(), 'data', 'cev-challenge-cup-data.json');
    let teams: any[] = [];
    const fixture: any[] = [];

    try {
        if (fs.existsSync(filePath)) {
            const fileContent = fs.readFileSync(filePath, 'utf8');
            const sourceData = JSON.parse(fileContent);

            const teamsMap = new Map();
            let matchCounter = 1;

            const parseScore = (scoreStr: string | null) => {
                if (!scoreStr || !scoreStr.includes('-')) return { home: null, away: null };
                const parts = scoreStr.split('-').map(p => parseInt(p.trim()));
                return { home: isNaN(parts[0]) ? null : parts[0], away: isNaN(parts[1]) ? null : parts[1] };
            };

            if (sourceData.phases) {
                sourceData.phases.forEach((phase: any) => {
                    const roundName = phase.name;
                    phase.matches.forEach((m: any) => {
                        const { home, away } = parseScore(m.score);
                        if (!teamsMap.has(m.homeTeam)) teamsMap.set(m.homeTeam, { name: m.homeTeam, country: '' });
                        if (!teamsMap.has(m.awayTeam)) teamsMap.set(m.awayTeam, { name: m.awayTeam, country: '' });

                        fixture.push({
                            id: matchCounter++,
                            round: roundName,
                            homeTeam: m.homeTeam,
                            awayTeam: m.awayTeam,
                            homeScore: home,
                            awayScore: away,
                            isPlayed: m.isPlayed
                        });
                    });
                });
            }
            teams = Array.from(teamsMap.values());
        }
    } catch (error) {
        console.error('Error reading CEV Challenge data:', error);
    }

    return (
        <CEVChallengeStatsClient teams={teams} fixture={fixture} />
    );
}

```

# Project Application Context - Part 6

## File: app\cev-challenge\tahminoyunu\CEVChallengeTahminOyunuClient.tsx
```
"use client";

import { useEffect, useState, useMemo } from "react";

import TeamAvatar from "@/app/components/TeamAvatar";
import { useToast } from "../../components";
import { useGameState } from "../../utils/gameState";
import { sounds } from "../../utils/sounds";

interface Match {
    id: number;
    round: string;
    leg?: number;
    date: string;
    homeTeam: string;
    awayTeam: string;
    homeScore: number | null;
    awayScore: number | null;
    isPlayed: boolean;
}

interface CEVChallengeData {
    league: string;
    season: string;
    currentStage: string;
    teams: any[];
    fixture: Match[];
}

const ROUNDS = ["Qualification Rounds", "Main Round", "4th Finals", "Semi Finals", "Finals", "Final Phase"];
const ROUND_LABELS: Record<string, string> = {
    "Qualification Rounds": "Eleme TurlarÄ±",
    "Main Round": "Ana Tablo",
    "4th Finals": "Ã‡eyrek Final",
    "Semi Finals": "YarÄ± Final",
    "Finals": "Final",
    "Final Phase": "Final AÅŸamasÄ±"
};

const TURKISH_TEAMS = ["Galatasaray Daikin ISTANBUL", "Kuzeyboru", "THY ISTANBUL"];

export default function CEVChallengeTahminOyunuClient({ initialData }: { initialData: CEVChallengeData }) {
    const { showToast, showUndoToast } = useToast();
    const { addXP, recordPrediction, unlockAchievement, hasAchievement, gameState } = useGameState();

    const [activeRound, setActiveRound] = useState<string>(
        ROUND_LABELS[initialData.currentStage] ? initialData.currentStage : (initialData.fixture.length > 0 ? initialData.fixture[0].round : "Main Round")
    );
    const [overrides, setOverrides] = useState<Record<string, string>>({});

    const availableRounds = useMemo(() => {
        const roundsInData = new Set(initialData.fixture.map(m => m.round));
        return ROUNDS.filter(r => roundsInData.has(r));
    }, [initialData.fixture]);

    const roundMatches = useMemo(() => {
        return initialData.fixture.filter(m => m.round === activeRound);
    }, [initialData.fixture, activeRound]);

    // Load saved predictions
    useEffect(() => {
        const saved = localStorage.getItem('cevChallengePredictions');
        if (saved) {
            try {
                setOverrides(JSON.parse(saved));
            } catch (e) { console.error(e); }
        }
    }, []);

    // Save predictions
    useEffect(() => {
        localStorage.setItem('cevChallengePredictions', JSON.stringify(overrides));
    }, [overrides]);

    const handleScoreChange = (matchId: string, score: string) => {
        const newOverrides = { ...overrides };
        const wasNew = !overrides[matchId];

        if (score) {
            newOverrides[matchId] = score;

            if (wasNew) {
                addXP(10);
                sounds.scoreSelect();

                if (!hasAchievement('first_prediction')) {
                    unlockAchievement('first_prediction');
                    sounds.achievement();
                }

                if (gameState.stats.totalPredictions >= 49 && !hasAchievement('game_addict')) {
                    unlockAchievement('game_addict');
                    sounds.achievement();
                }

                recordPrediction(true);
            }
        } else {
            delete newOverrides[matchId];
        }
        setOverrides(newOverrides);
    };

    const handleResetRound = () => {
        if (!confirm(`${ROUND_LABELS[activeRound]} tahminleriniz silinecek. Emin misiniz?`)) return;
        const newOverrides = { ...overrides };
        roundMatches.forEach(m => {
            delete newOverrides[`match-${m.id}`];
        });
        setOverrides(newOverrides);
        showToast(`${ROUND_LABELS[activeRound]} tahminleri sÄ±fÄ±rlandÄ±`, "success");
    };

    const handleResetAll = () => {
        const previousOverrides = { ...overrides };
        setOverrides({});
        localStorage.removeItem('cevChallengePredictions');
        showUndoToast("CEV Challenge Cup tahminleri sÄ±fÄ±rlandÄ±", () => {
            setOverrides(previousOverrides);
        });
    };

    const handleRandomize = () => {
        if (!confirm("OynanmamÄ±ÅŸ maÃ§lar rastgele skorlarla doldurulacak. OnaylÄ±yor musunuz?")) return;
        const newOverrides = { ...overrides };
        const scores = ["3-0", "3-1", "3-2", "2-3", "1-3", "0-3"];
        let count = 0;

        roundMatches.forEach(match => {
            if (match.isPlayed || newOverrides[`match-${match.id}`]) return;
            const randomScore = scores[Math.floor(Math.random() * scores.length)];
            newOverrides[`match-${match.id}`] = randomScore;
            count++;
        });

        setOverrides(newOverrides);
        if (count > 0) {
            sounds.levelUp();
            showToast(`${count} maÃ§ rastgele tahmin edildi!`, "success");
            addXP(count * 2);
        }
    };

    const predictedCount = roundMatches.filter(m => overrides[`match-${m.id}`]).length;
    const totalUnplayed = roundMatches.filter(m => !m.isPlayed).length;

    return (
        <main className="min-h-screen bg-slate-950 text-slate-100 p-1 sm:p-2 font-sans">
            <div className="w-full max-w-7xl mx-auto flex flex-col h-full gap-2">
                <div className="flex flex-col sm:flex-row items-center justify-between gap-3 p-2 bg-slate-900/40 rounded-xl border border-slate-800">
                    <div className="flex flex-col sm:flex-row items-center gap-4 w-full sm:w-auto">
                        <div className="text-center sm:text-left">
                            <h1 className="font-bold text-white text-lg tracking-tight leading-none hidden sm:block">CEV Challenge Cup</h1>
                            <p className="text-[10px] text-slate-400 hidden sm:block">Tahmin Oyunu</p>
                        </div>
                        <div className="flex gap-2 items-center w-full sm:w-auto">
                            <span className="text-[10px] font-bold text-slate-500 uppercase tracking-widest hidden sm:inline whitespace-nowrap">TUR:</span>
                            <div className="flex gap-1 p-1 bg-slate-950/50 rounded-lg border border-slate-800 items-center">
                                <select
                                    value={activeRound}
                                    onChange={(e) => setActiveRound(e.target.value)}
                                    title="Tur SeÃ§in"
                                    className="px-3 py-1 bg-emerald-600/20 text-emerald-500 text-[10px] uppercase font-black rounded-md border border-emerald-500/30 outline-none cursor-pointer transition-all focus:ring-2 focus:ring-emerald-500/50"
                                >
                                    {availableRounds.map(r => (
                                        <option key={r} value={r} className="bg-slate-900 text-white">
                                            {ROUND_LABELS[r] || r}
                                        </option>
                                    ))}
                                </select>
                            </div>
                        </div>
                    </div>

                    <div className="flex flex-col sm:flex-row items-center gap-2 w-full sm:w-auto">
                        <div className="flex items-center gap-2 sm:mr-2">
                            <span className="text-xs text-slate-500 hidden lg:inline">
                                {predictedCount}/{totalUnplayed} tahmin
                            </span>
                            <div className="w-16 h-1.5 bg-slate-800 rounded-full overflow-hidden">
                                <div
                                    className="h-full bg-emerald-500 transition-all"
                                     
                                    style={{ width: `${totalUnplayed > 0 ? (predictedCount / totalUnplayed) * 100 : 0}%` }}
                                />
                            </div>
                        </div>
                        <div className="flex items-center gap-2">
                            <button
                                onClick={handleRandomize}
                                className="px-3 py-1.5 bg-emerald-600 hover:bg-emerald-500 text-white text-xs font-bold rounded-lg transition-all"
                            >
                                ğŸ² Rastgele
                            </button>
                            <button
                                onClick={handleResetRound}
                                className="px-3 py-1.5 bg-slate-800 hover:bg-slate-700 text-slate-400 hover:text-white text-xs font-bold rounded-lg transition-all border border-slate-700"
                            >
                                Turu SÄ±fÄ±rla
                            </button>
                            <button
                                onClick={handleResetAll}
                                className="px-3 py-1.5 bg-slate-800 hover:bg-rose-900/50 text-slate-400 hover:text-rose-400 text-xs font-bold rounded-lg transition-all border border-slate-700"
                            >
                                TÃ¼mÃ¼nÃ¼ SÄ±fÄ±rla
                            </button>
                        </div>
                    </div>
                </div>

                {/* Matches Grid */}
                <div className="bg-slate-900/40 rounded-2xl border border-slate-800/60 p-3 space-y-3">
                    <h2 className="text-xl font-black italic uppercase tracking-tighter text-emerald-500">
                        {ROUND_LABELS[activeRound] || activeRound}
                    </h2>

                    <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
                        {roundMatches.map(match => {
                            const matchId = `match-${match.id}`;
                            const prediction = overrides[matchId];
                            const hasTurkish = TURKISH_TEAMS.some(t => match.homeTeam.includes(t)) || TURKISH_TEAMS.some(t => match.awayTeam.includes(t));

                            return (
                                <div
                                    key={match.id}
                                    id={matchId}
                                    className={`bg-slate-950/60 rounded-xl border p-3 space-y-2 ${hasTurkish ? 'border-emerald-700/50 ring-1 ring-emerald-500/20' : 'border-slate-800/50'
                                        }`}
                                >
                                    {/* Match Header */}
                                    <div className="flex items-center justify-between text-[10px] text-slate-500">
                                        <span>{match.leg === 1 ? "1. MaÃ§" : match.leg === 2 ? "2. MaÃ§" : ""}</span>
                                        <span>{match.date?.split('-').reverse().join('.')}</span>
                                    </div>

                                    {/* Teams */}
                                    <div className="flex items-center gap-2">
                                        <div className="flex items-center gap-2 flex-1 overflow-hidden">
                                            <TeamAvatar name={match.homeTeam} size="sm" />
                                            <span className="text-sm font-bold text-slate-200 truncate">
                                                {match.homeTeam}
                                                {TURKISH_TEAMS.some(t => match.homeTeam.includes(t)) && <span className="ml-1">ğŸ‡¹ğŸ‡·</span>}
                                            </span>
                                        </div>
                                        <div className="px-2">
                                            {match.isPlayed ? (
                                                <span className="text-sm font-bold text-emerald-400">
                                                    {match.homeScore} - {match.awayScore}
                                                </span>
                                            ) : (
                                                <span className="text-xs text-slate-600">VS</span>
                                            )}
                                        </div>
                                        <div className="flex items-center gap-2 flex-1 justify-end overflow-hidden">
                                            <span className="text-sm font-bold text-slate-200 truncate text-right">
                                                {TURKISH_TEAMS.some(t => match.awayTeam.includes(t)) && <span className="mr-1">ğŸ‡¹ğŸ‡·</span>}
                                                {match.awayTeam}
                                            </span>
                                            <TeamAvatar name={match.awayTeam} size="sm" />
                                        </div>
                                    </div>

                                    {/* Score Selection */}
                                    {!match.isPlayed && (
                                        <div className="flex flex-wrap gap-1 pt-2 border-t border-slate-800/50">
                                            {["3-0", "3-1", "3-2", "2-3", "1-3", "0-3"].map(score => {
                                                const isSelected = prediction === score;
                                                return (
                                                    <button
                                                        key={score}
                                                        onClick={() => handleScoreChange(matchId, isSelected ? "" : score)}
                                                        className={`
                                                            px-2 py-1 text-xs rounded border transition-all
                                                            ${isSelected
                                                                ? 'bg-emerald-600 border-emerald-400 text-white font-bold shadow-[0_0_10px_rgba(16,185,129,0.5)]'
                                                                : 'bg-slate-900 border-slate-700 text-slate-500 hover:bg-slate-800 hover:border-slate-500'}
                                                        `}
                                                    >
                                                        {score}
                                                    </button>
                                                );
                                            })}
                                        </div>
                                    )}
                                </div>
                            );
                        })}
                    </div>

                    {roundMatches.length === 0 && (
                        <div className="flex flex-col items-center justify-center py-12 text-slate-500">
                            <span className="text-4xl mb-2">ğŸ</span>
                            <p className="text-sm">Bu tur iÃ§in henÃ¼z maÃ§ planlanmadÄ±.</p>
                        </div>
                    )}
                </div>
            </div>
        </main>
    );
}

```

## File: app\cev-challenge\tahminoyunu\page.tsx
```
import fs from 'fs';
import path from 'path';
import { Metadata } from "next";
import CEVChallengeTahminOyunuClient from './CEVChallengeTahminOyunuClient';

export const metadata: Metadata = {
    title: "CEV Challenge Cup Tahmin Oyunu",
    description: "CEV Challenge Cup maÃ§ sonuÃ§larÄ±nÄ± tahmin edin. Avrupa kupasÄ± maÃ§larÄ±nÄ± tahmin ederek puan kazanÄ±n.",
    openGraph: {
        title: "CEV Challenge Cup Tahmin Oyunu | VolleySimulator",
        description: "Challenge Cup maÃ§ sonuÃ§larÄ±nÄ± tahmin edin ve liderlik tablosunda yerinizi alÄ±n.",
    },
};

export default async function CEVChallengeTahminOyunuPage() {
    const filePath = path.join(process.cwd(), 'data', 'cev-challenge-cup-data.json');
    let data = null;

    try {
        if (fs.existsSync(filePath)) {
            const fileContent = fs.readFileSync(filePath, 'utf8');
            const sourceData = JSON.parse(fileContent);

            const fixture: any[] = [];
            let matchCounter = 1;

            const parseScore = (scoreStr: string | null) => {
                if (!scoreStr || !scoreStr.includes('-')) return { home: null, away: null };
                const parts = scoreStr.split('-').map(p => parseInt(p.trim()));
                return { home: isNaN(parts[0]) ? null : parts[0], away: isNaN(parts[1]) ? null : parts[1] };
            };

            if (sourceData.phases) {
                sourceData.phases.forEach((phase: any) => {
                    const roundName = phase.name;
                    phase.matches.forEach((m: any) => {
                        const { home, away } = parseScore(m.score);
                        fixture.push({
                            id: matchCounter++,
                            round: roundName,
                            leg: 1,
                            date: m.date || 'TBD',
                            homeTeam: m.homeTeam,
                            awayTeam: m.awayTeam,
                            homeScore: home,
                            awayScore: away,
                            isPlayed: m.isPlayed
                        });
                    });
                });
            }

            data = {
                league: "CEV Challenge Cup",
                season: "2025-2026",
                currentStage: "Main Round",
                teams: [],
                fixture: fixture
            };
        }
    } catch (error) {
        console.error('Error reading CEV Challenge data:', error);
    }

    if (!data) {
        return (
            <main className="min-h-screen bg-slate-950 text-slate-100 p-4 flex items-center justify-center">
                <div className="text-center">
                    <h1 className="text-2xl font-bold text-emerald-500">Veri YÃ¼klenemedi</h1>
                    <p className="text-slate-400 mt-2">CEV Challenge Cup verileri yÃ¼klenirken bir hata oluÅŸtu.</p>
                </div>
            </main>
        );
    }

    return (
        <CEVChallengeTahminOyunuClient initialData={data} />
    );
}

```

## File: app\cev-cl\anasayfa\page.tsx
```
"use client";

import Link from "next/link";
import { useEffect, useState } from "react";

interface Team {
    name: string;
    groupName: string;
    played: number;
    wins: number;
    points: number;
    setsWon: number;
    setsLost: number;
}

interface Match {
    homeTeam: string;
    awayTeam: string;
    groupName: string;
    date?: string;
    matchTime?: string;
    round?: string;
    isPlayed: boolean;
    homeScore?: number | null;
    awayScore?: number | null;
    venue?: string;
}

const sortStandings = (teams: Team[]): Team[] => {
    return [...teams].sort((a, b) => {
        if (b.points !== a.points) return b.points - a.points;
        const aAvg = a.setsLost > 0 ? a.setsWon / a.setsLost : a.setsWon;
        const bAvg = b.setsLost > 0 ? b.setsWon / b.setsLost : b.setsWon;
        if (bAvg !== aAvg) return bAvg - aAvg;
        return b.setsWon - a.setsWon;
    });
};

export default function CEVCLAnasayfa() {
    const [teams, setTeams] = useState<Team[]>([]);
    const [matches, setMatches] = useState<Match[]>([]);
    const [loading, setLoading] = useState(true);
    const [selectedPool, setSelectedPool] = useState<string>("Pool A");

    useEffect(() => {
        fetch("/api/cev-cl")
            .then(res => res.json())
            .then(data => {
                setTeams(data.teams || []);
                setMatches(data.fixture || []);
            })
            .finally(() => setLoading(false));
    }, []);

    const pools = ["Pool A", "Pool B", "Pool C", "Pool D", "Pool E"];
    const poolTeams = sortStandings(teams.filter(t => t.groupName === selectedPool));
    const poolMatches = matches.filter(m => m.groupName === selectedPool);
    const upcomingMatches = poolMatches.filter(m => !m.isPlayed).slice(0, 4);
    const playedCount = matches.filter(m => m.isPlayed).length;

    // Turkish teams highlight
    const turkishTeams = ["VakifBank ISTANBUL", "FenerbahÃ§e Medicana ISTANBUL", "Eczacibasi ISTANBUL", "ANKARA Zeren Spor KulÃ¼bÃ¼"];

    if (loading) {
        return (
            <div className="min-h-screen flex items-center justify-center">
                <div className="animate-spin w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full"></div>
            </div>
        );
    }

    return (
        <div className="min-h-screen bg-slate-950">
            {/* Hero Header */}
            <div className="bg-gradient-to-br from-blue-600 via-indigo-600 to-blue-800 px-4 py-4 relative overflow-hidden">
                <div className="relative max-w-4xl mx-auto">
                    <div className="flex items-center justify-between">
                        <div>
                            <h1 className="text-xl font-bold text-white mb-1">CEV Åampiyonlar Ligi</h1>
                            <p className="text-white/70 text-sm">KadÄ±nlar â€¢ 2025-2026</p>
                        </div>
                        <div className="text-right">
                            <div className="text-3xl font-bold text-white">{playedCount}</div>
                            <div className="text-xs text-white/60">Oynanan MaÃ§</div>
                        </div>
                    </div>
                </div>
            </div>

            <div className="max-w-4xl mx-auto px-4 mt-4 space-y-4 pb-6">
                {/* Pool Selector */}
                <div className="flex gap-2 overflow-x-auto pb-2">
                    {pools.map(pool => (
                        <button
                            key={pool}
                            onClick={() => setSelectedPool(pool)}
                            className={`px-4 py-2 rounded-xl text-sm font-bold whitespace-nowrap transition-all ${selectedPool === pool
                                    ? "bg-blue-600 text-white shadow-lg shadow-blue-500/30"
                                    : "bg-slate-800 text-slate-400 hover:bg-slate-700"
                                }`}
                        >
                            {pool}
                        </button>
                    ))}
                </div>

                {/* Pool Standings */}
                <div className="bg-slate-900 border border-slate-800 rounded-2xl overflow-hidden">
                    <div className="bg-slate-800/50 px-4 py-3 flex items-center justify-between border-b border-slate-800">
                        <h3 className="font-bold text-white flex items-center gap-2">
                            <span className="text-blue-400">ğŸ“Š</span> {selectedPool} - Puan Durumu
                        </h3>
                    </div>
                    <div className="divide-y divide-slate-800/50">
                        {poolTeams.map((team, i) => (
                            <div key={team.name} className={`px-4 py-2.5 flex items-center gap-3 ${turkishTeams.includes(team.name) ? "bg-red-900/20" : ""
                                }`}>
                                <div className={`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${i === 0 ? "bg-blue-600 text-white" :
                                        i === 1 ? "bg-emerald-500 text-white" :
                                            "bg-slate-700 text-slate-400"
                                    }`}>
                                    {i + 1}
                                </div>
                                <div className="flex-1">
                                    <div className="font-medium text-sm text-slate-200 truncate flex items-center gap-2">
                                        {team.name}
                                        {turkishTeams.includes(team.name) && (
                                            <span className="text-xs">ğŸ‡¹ğŸ‡·</span>
                                        )}
                                    </div>
                                </div>
                                <div className="text-xs text-slate-500">{team.played}M</div>
                                <div className="text-xs text-slate-500">{team.setsWon}-{team.setsLost}</div>
                                <div className="font-bold text-sm text-white w-8 text-right">{team.points}</div>
                            </div>
                        ))}
                    </div>
                </div>

                {/* Pool Matches */}
                <div className="bg-slate-900 border border-slate-800 rounded-2xl overflow-hidden">
                    <div className="bg-slate-800/50 px-4 py-3 border-b border-slate-800">
                        <h3 className="font-bold text-white flex items-center gap-2">
                            <span className="text-indigo-400">ğŸ“…</span> {selectedPool} - MaÃ§lar
                        </h3>
                    </div>
                    <div className="divide-y divide-slate-800/50 max-h-96 overflow-y-auto">
                        {poolMatches.map((match, i) => (
                            <div key={i} className={`px-4 py-3 ${(turkishTeams.includes(match.homeTeam) || turkishTeams.includes(match.awayTeam))
                                    ? "bg-red-900/10" : ""
                                }`}>
                                <div className="flex items-center gap-2 mb-1">
                                    <div className="flex-1 text-right text-sm text-slate-300 truncate">
                                        {match.homeTeam}
                                        {turkishTeams.includes(match.homeTeam) && <span className="ml-1">ğŸ‡¹ğŸ‡·</span>}
                                    </div>
                                    <div className={`px-2 py-0.5 rounded text-xs font-mono ${match.isPlayed
                                            ? "bg-emerald-500/20 text-emerald-400"
                                            : "bg-slate-800 text-slate-500"
                                        }`}>
                                        {match.isPlayed ? `${match.homeScore} - ${match.awayScore}` : "vs"}
                                    </div>
                                    <div className="flex-1 text-sm text-slate-300 truncate">
                                        {turkishTeams.includes(match.awayTeam) && <span className="mr-1">ğŸ‡¹ğŸ‡·</span>}
                                        {match.awayTeam}
                                    </div>
                                </div>
                                <div className="flex justify-between text-[10px] text-slate-500">
                                    <span>{match.round}</span>
                                    <span>{match.date} {match.matchTime}</span>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>

                {/* Turkish Teams Overview */}
                <div className="bg-slate-900 border border-red-500/30 rounded-2xl overflow-hidden">
                    <div className="bg-red-900/20 px-4 py-3 border-b border-red-500/20">
                        <h3 className="font-bold text-white flex items-center gap-2">
                            <span>ğŸ‡¹ğŸ‡·</span> TÃ¼rk TakÄ±mlarÄ±
                        </h3>
                    </div>
                    <div className="divide-y divide-slate-800/50">
                        {teams.filter(t => turkishTeams.includes(t.name)).map((team, i) => (
                            <div key={team.name} className="px-4 py-3 flex items-center gap-3">
                                <div className="flex-1">
                                    <div className="font-medium text-sm text-white">{team.name}</div>
                                    <div className="text-xs text-slate-500">{team.groupName}</div>
                                </div>
                                <div className="text-right">
                                    <div className="font-bold text-white">{team.points} P</div>
                                    <div className="text-xs text-slate-500">{team.wins}G {team.played - team.wins}M</div>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            </div>
        </div>
    );
}

```

## File: app\cev-cl\gunceldurum\CEVCLGuncelDurumClient.tsx
```
"use client";

import { useState, useMemo } from "react";
import { TeamStats, Match } from "../../types";

import StandingsTable from "../../components/Calculator/StandingsTable";
import { sortStandings } from "../../utils/calculatorUtils";
import TeamAvatar from "@/app/components/TeamAvatar";
import LeagueActionBar from "../../components/LeagueTemplate/LeagueActionBar";
import { LEAGUE_CONFIGS } from "../../components/LeagueTemplate/types";

interface CEVCLGuncelDurumClientProps {
    initialTeams: TeamStats[];
    initialMatches: Match[];
}

export default function CEVCLGuncelDurumClient({ initialTeams, initialMatches }: CEVCLGuncelDurumClientProps) {
    const [allTeams] = useState<TeamStats[]>(initialTeams);
    const [allMatches] = useState<Match[]>(initialMatches.map((m: any) => ({
        ...m,
        matchDate: m.date || m.matchDate
    })));

    const pools = ["Grup A", "Grup B", "Grup C", "Grup D", "Grup E"];
    const [activePool, setActivePool] = useState<string>("Grup A");

    const backendGroupName = useMemo(() => activePool.replace("Grup", "Pool"), [activePool]);
    const poolTeams = useMemo(() => sortStandings(allTeams.filter(t => t.groupName === backendGroupName)), [allTeams, backendGroupName]);
    const poolMatches = useMemo(() => allMatches.filter(m => m.groupName === backendGroupName), [allMatches, backendGroupName]);

    const playedCount = poolMatches.filter(m => m.isPlayed).length;
    const totalCount = poolMatches.length;
    const completionRate = totalCount > 0 ? Math.round((playedCount / totalCount) * 100) : 0;

    const turkishTeams = ["VakifBank ISTANBUL", "Savino Del Bene SCANDICCI", "FenerbahÃ§e Medicana ISTANBUL", "Eczacibasi ISTANBUL", "ANKARA Zeren Spor KulÃ¼bÃ¼"];

    const groupedMatches = useMemo(() => {
        const matchesByDate: Record<string, { formatted: string; matches: Match[] }> = {};
        const upcomingMatches = poolMatches.filter(m => !m.isPlayed);

        upcomingMatches.forEach(match => {
            if (!match.matchDate) return;
            const parts = match.matchDate.split(/[-.]/);
            let year, month, day;
            if (parts[0].length === 4) { [year, month, day] = parts; }
            else { [day, month, year] = parts; }
            if (!year) year = "2025";

            const sortKey = `${year}-${month.padStart(2, '0')}-${day.padStart(2, '0')}`;
            const formatted = `${day}/${month}/${year}`;

            if (!matchesByDate[sortKey]) {
                matchesByDate[sortKey] = { formatted, matches: [] };
            }
            matchesByDate[sortKey].matches.push(match);
        });

        const sortedDates = Object.keys(matchesByDate).sort();
        return sortedDates.reduce((acc, dateKey) => {
            acc[dateKey] = matchesByDate[dateKey];
            return acc;
        }, {} as Record<string, { formatted: string, matches: Match[] }>);
    }, [poolMatches]);

    return (
        <main className="min-h-screen bg-slate-950 text-slate-100 p-0 sm:p-2 font-sans overflow-hidden">
            <div className="max-w-7xl mx-auto space-y-1 h-full flex flex-col">
                <div className="space-y-3 bg-slate-900/40 p-3 rounded-2xl border border-slate-800/60 backdrop-blur-sm animate-in fade-in slide-in-from-bottom-4 duration-300">
                    {/* Action Bar using LeagueTemplate */}
                    <LeagueActionBar
                        config={LEAGUE_CONFIGS['cev-cl']}
                        title={`${LEAGUE_CONFIGS['cev-cl'].name} - ${activePool}`}
                        subtitle="CEV Åampiyonlar Ligi â€¢ GÃ¼ncel Durum"
                        selectorLabel="Grup"
                        selectorValue={activePool}
                        selectorOptions={pools}
                        onSelectorChange={setActivePool}
                        progress={completionRate}
                        progressLabel={`%${completionRate}`}
                    >
                        {/* Leader Badge */}
                        <div className="hidden sm:flex bg-slate-950/50 px-3 py-1.5 rounded-lg border border-slate-800 text-center flex-col justify-center h-full min-h-[32px]">
                            <div className="text-[9px] font-bold text-slate-500 uppercase leading-none mb-0.5">Lider</div>
                            <div className="text-xs font-bold text-white truncate max-w-[100px] leading-none">{poolTeams[0]?.name || "-"}</div>
                        </div>
                        {/* Live Badge */}
                        <div className="px-3 h-8 bg-emerald-950/50 rounded-lg border border-emerald-800/50 flex items-center gap-2">
                            <div className="w-2 h-2 bg-emerald-500 rounded-full animate-pulse"></div>
                            <span className="text-[10px] font-bold text-emerald-400 uppercase hidden sm:inline">Otomatik GÃ¼ncelleme</span>
                            <span className="text-[10px] font-bold text-emerald-400 uppercase sm:hidden">CANLI</span>
                        </div>
                    </LeagueActionBar>

                    <div className="grid grid-cols-1 lg:grid-cols-3 gap-2 h-full">
                        <div className="lg:col-span-2 space-y-1 flex flex-col h-full">
                            <h3 className="text-xs font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2 px-1">
                                <span>ğŸ“‹</span> Puan Durumu DetaylarÄ±
                            </h3>
                            <div className="bg-slate-950/40 rounded-xl overflow-hidden border border-slate-800/50 flex-1">
                                <StandingsTable teams={poolTeams} playoffSpots={2} relegationSpots={0} compact={true} />
                            </div>
                        </div>

                        <div className="space-y-4 flex flex-col h-full">
                            <h3 className="text-xs font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2 px-1">
                                <span>ğŸ“…</span> Gelecek MaÃ§lar
                            </h3>
                            <div className="bg-slate-950/40 rounded-xl overflow-hidden border border-slate-800/50 flex-1 relative">
                                <div className="absolute inset-0 overflow-y-auto p-2 space-y-2">
                                    {Object.keys(groupedMatches).length === 0 ? (
                                        <div className="flex flex-col items-center justify-center h-full text-slate-500 text-xs italic">
                                            MaÃ§ bulunamadÄ± veya sezon tamamlandÄ±.
                                        </div>
                                    ) : (
                                        Object.entries(groupedMatches).map(([dateKey, group], dateIdx) => (
                                            <div key={dateKey} className={dateIdx > 0 ? 'mt-3' : ''}>
                                                <div className="sticky top-0 bg-blue-600/20 px-2 py-1 rounded border border-blue-500/30 mb-2 z-10">
                                                    <span className="text-[10px] font-bold text-blue-400 uppercase tracking-wide">
                                                        {group.formatted}
                                                    </span>
                                                </div>
                                                <div className="space-y-1.5">
                                                    {group.matches.map((match, idx) => (
                                                        <div key={idx} className="flex items-center justify-between p-2 bg-slate-900/40 rounded border border-slate-800/50 hover:bg-slate-800/50 transition-colors group">
                                                            <div className="flex-1 flex items-center justify-end gap-2 overflow-hidden">
                                                                <span className="text-xs font-bold text-slate-300 text-right truncate">
                                                                    {match.homeTeam}
                                                                    {turkishTeams.includes(match.homeTeam) && <span className="ml-1">ğŸ‡¹ğŸ‡·</span>}
                                                                </span>
                                                                <TeamAvatar name={match.homeTeam} size="xs" />
                                                            </div>
                                                            <div className="px-3 flex flex-col items-center">
                                                                <span className="text-[10px] font-bold text-slate-600 bg-slate-950 px-1.5 py-0.5 rounded border border-slate-800">VS</span>
                                                                {match.matchTime && (
                                                                    <span className="text-[9px] text-slate-500 mt-0.5">{match.matchTime}</span>
                                                                )}
                                                            </div>
                                                            <div className="flex-1 flex items-center justify-start gap-2 overflow-hidden">
                                                                <TeamAvatar name={match.awayTeam} size="xs" />
                                                                <span className="text-xs font-bold text-slate-300 text-left truncate">
                                                                    {turkishTeams.includes(match.awayTeam) && <span className="mr-1">ğŸ‡¹ğŸ‡·</span>}
                                                                    {match.awayTeam}
                                                                </span>
                                                            </div>
                                                        </div>
                                                    ))}
                                                </div>
                                            </div>
                                        ))
                                    )}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    );
}

```

## File: app\cev-cl\gunceldurum\page.tsx
```
import { Metadata } from "next";
import { getLeagueData } from "../../utils/serverData";
import CEVCLGuncelDurumClient from "./CEVCLGuncelDurumClient";

export const metadata: Metadata = {
    title: "CEV Åampiyonlar Ligi GÃ¼ncel Durum",
    description: "CEV KadÄ±nlar Åampiyonlar Ligi puan durumu, grup sÄ±ralamalarÄ± ve maÃ§ sonuÃ§larÄ±. Avrupa'nÄ±n en prestijli turnuvasÄ±.",
    openGraph: {
        title: "CEV Åampiyonlar Ligi GÃ¼ncel Durum | VolleySimulator",
        description: "Åampiyonlar Ligi grup sÄ±ralamalarÄ± ve puan durumu.",
    },
};

export default async function CEVCLGuncelDurum() {
    const { teams, fixture } = await getLeagueData("cev-cl");

    return (
        <CEVCLGuncelDurumClient
            initialTeams={teams}
            initialMatches={fixture}
        />
    );
}

```

## File: app\cev-cl\playoffs\CEVCLPlayoffsClient.tsx
```
"use client";

import { useEffect, useState, useMemo } from "react";
import { TeamStats, Match } from "../../types";
import Link from "next/link";

import TeamAvatar from "../../components/TeamAvatar";
import { calculateLiveStandings } from "../../utils/calculatorUtils";

interface PoolData {
    poolName: string;
    teams: TeamStats[];
}

interface CEVCLPlayoffsClientProps {
    initialTeams: TeamStats[];
    initialMatches: Match[];
}

export default function CEVCLPlayoffsClient({ initialTeams, initialMatches }: CEVCLPlayoffsClientProps) {
    // ONE-TIME Normalization to match Calculator Client keys (TR Uppercase)
    const [baseTeams] = useState<TeamStats[]>(() =>
        initialTeams.map(t => ({
            ...t,
            name: t.name.toLocaleUpperCase('tr-TR'),
            groupName: t.groupName.replace('Pool ', '') + ' GRUBU' // Match Calculator style
        }))
    );

    const [allMatches] = useState<Match[]>(() =>
        initialMatches.map(m => ({
            ...m,
            homeTeam: m.homeTeam.toLocaleUpperCase('tr-TR'),
            awayTeam: m.awayTeam.toLocaleUpperCase('tr-TR'),
            groupName: typeof m.groupName === 'string' ? m.groupName.replace('Pool ', '') + ' GRUBU' : m.groupName
        }))
    );

    const [groupOverrides, setGroupOverrides] = useState<Record<string, string>>({});
    const [remainingMatches, setRemainingMatches] = useState(0);
    const [playoffOverrides, setPlayoffOverrides] = useState<Record<string, string>>({});
    const [isLoaded, setIsLoaded] = useState(false);

    // Tab state
    const [activeTabFF, setActiveTabFF] = useState<'semi' | 'final' | '3rd'>('semi');

    // Load Overrides
    useEffect(() => {
        const savedPlayoff = localStorage.getItem('cevclPlayoffScenarios');
        if (savedPlayoff) {
            try {
                setPlayoffOverrides(JSON.parse(savedPlayoff));
            } catch (e) { console.error(e); }
        }

        const savedGroup = localStorage.getItem('cevclGroupScenarios');
        if (savedGroup) {
            try {
                setGroupOverrides(JSON.parse(savedGroup));
            } catch (e) { console.error(e); }
        }

        setIsLoaded(true);
    }, []);

    // Check remaining matches
    useEffect(() => {
        let remaining = allMatches.filter((m: Match) => !m.isPlayed).length;
        if (groupOverrides) {
            const predictedCount = allMatches.filter(m => !m.isPlayed && groupOverrides[`${m.homeTeam}-${m.awayTeam}`]).length;
            remaining = Math.max(0, remaining - predictedCount);
        }
        setRemainingMatches(remaining);
    }, [allMatches, groupOverrides]);


    // Calculate live standings
    const pools = useMemo(() => {
        if (!baseTeams.length) return [];

        const poolNames = ["A GRUBU", "B GRUBU", "C GRUBU", "D GRUBU", "E GRUBU"];
        const calculatedTeams = calculateLiveStandings(baseTeams, allMatches, groupOverrides);

        return poolNames.map(poolName => {
            const poolTeams = calculatedTeams
                .filter((t: TeamStats) => t.groupName === poolName)
                .sort((a: TeamStats, b: TeamStats) => {
                    if (b.wins !== a.wins) return b.wins - a.wins;
                    if (b.points !== a.points) return b.points - a.points;
                    const aRatio = a.setsLost > 0 ? a.setsWon / a.setsLost : a.setsWon;
                    const bRatio = b.setsLost > 0 ? b.setsWon / b.setsLost : b.setsWon;
                    return bRatio - aRatio;
                });
            return { poolName, teams: poolTeams };
        });
    }, [baseTeams, allMatches, groupOverrides]);

    // Save overrides
    useEffect(() => {
        if (isLoaded) {
            localStorage.setItem('cevclPlayoffScenarios', JSON.stringify(playoffOverrides));
        }
    }, [playoffOverrides, isLoaded]);

    useEffect(() => {
        if (isLoaded) {
            localStorage.setItem('cevclGroupScenarios', JSON.stringify(groupOverrides));
        }
    }, [groupOverrides, isLoaded]);

    const isGroupsComplete = remainingMatches === 0;

    const handleScoreChange = (matchId: string, score: string) => {
        const newOverrides = { ...playoffOverrides };
        if (score) {
            newOverrides[matchId] = score;
        } else {
            delete newOverrides[matchId];
        }
        setPlayoffOverrides(newOverrides);
    };

    const handlePredictAll = () => {
        const newGroupOverrides = { ...groupOverrides };
        const possibleScores = ['3-0', '3-1', '3-2', '2-3', '1-3', '0-3'];

        let addedCount = 0;
        allMatches.forEach(m => {
            if (!m.isPlayed) {
                const key = `${m.homeTeam}-${m.awayTeam}`;
                if (!newGroupOverrides[key]) {
                    newGroupOverrides[key] = possibleScores[Math.floor(Math.random() * possibleScores.length)];
                    addedCount++;
                }
            }
        });

        if (addedCount > 0) {
            setGroupOverrides(newGroupOverrides);
        }
    };

    // Get pool winners and runners-up
    const poolWinners = pools.map(p => p.teams[0]?.name || null);
    const poolRunnersUp = pools.map(p => p.teams[1]?.name || null);
    const poolThirds = pools.map(p => p.teams[2]?.name || null);

    // Rank pool winners
    const rankedWinners = pools
        .map((p, idx) => ({ name: p.teams[0]?.name, points: p.teams[0]?.points || 0, poolIdx: idx }))
        .sort((a, b) => b.points - a.points);

    // Rank runners-up
    const rankedRunnersUp = pools
        .map((p, idx) => ({ name: p.teams[1]?.name, points: p.teams[1]?.points || 0, poolIdx: idx }))
        .sort((a, b) => b.points - a.points);

    // Best 3rd placed team
    const rankedThirds = pools
        .map((p, idx) => ({ name: p.teams[2]?.name, points: p.teams[2]?.points || 0, poolIdx: idx }))
        .sort((a, b) => b.points - a.points);
    const bestThird = rankedThirds[0]?.name || null;

    // Calculate points for a match score
    const getMatchPoints = (score: string | undefined): { home: number, away: number } | null => {
        if (!score) return null;
        const [h, a] = score.split('-').map(Number);

        if (h === 3 && (a === 0 || a === 1)) return { home: 3, away: 0 };
        if (h === 3 && a === 2) return { home: 2, away: 1 };
        if (h === 2 && a === 3) return { home: 1, away: 2 };
        if ((h === 0 || h === 1) && a === 3) return { home: 0, away: 3 };
        return { home: 0, away: 0 };
    };

    const calculateLegacyResult = (matchId: string, homeTeam: string | null, awayTeam: string | null, matchFormat: '2leg' | '1match') => {
        if (!homeTeam || !awayTeam) return { winner: null, loser: null, goldenSetNeeded: false };

        if (matchFormat === '1match') {
            const score = playoffOverrides[`${matchId}-m1`];
            if (!score) return { winner: null, loser: null };
            const [h, a] = score.split('-').map(Number);
            return h > a ? { winner: homeTeam, loser: awayTeam } : { winner: awayTeam, loser: homeTeam };
        }

        // 2 Leg Logic
        const score1 = playoffOverrides[`${matchId}-m1`];
        const score2 = playoffOverrides[`${matchId}-m2`];
        const golden = playoffOverrides[`${matchId}-golden`];

        if (!score1 || !score2) return { winner: null, loser: null, goldenSetNeeded: false };

        const p1 = getMatchPoints(score1);
        const p2 = getMatchPoints(score2);

        if (!p1 || !p2) return { winner: null, loser: null };

        const totalHome = p1.home + p2.home;
        const totalAway = p1.away + p2.away;

        if (totalHome > totalAway) return { winner: homeTeam, loser: awayTeam, goldenSetNeeded: false };
        if (totalAway > totalHome) return { winner: awayTeam, loser: homeTeam, goldenSetNeeded: false };

        if (golden === 'home') return { winner: homeTeam, loser: awayTeam, goldenSetNeeded: true };
        if (golden === 'away') return { winner: awayTeam, loser: homeTeam, goldenSetNeeded: true };

        return { winner: null, loser: null, goldenSetNeeded: true };
    };

    const getWinner = (matchId: string, homeTeam: string | null, awayTeam: string | null, matchFormat: '2leg' | '1match' = '2leg'): string | null => {
        return calculateLegacyResult(matchId, homeTeam, awayTeam, matchFormat).winner;
    };

    const getLoser = (matchId: string, homeTeam: string | null, awayTeam: string | null, matchFormat: '2leg' | '1match' = '2leg'): string | null => {
        return calculateLegacyResult(matchId, homeTeam, awayTeam, matchFormat).loser;
    };

    const randomizeCEVMatch = (matchId: string, matchFormat: '2leg' | '1match') => {
        const newOverrides = { ...playoffOverrides };
        const possibleScores = ['3-0', '3-1', '3-2', '2-3', '1-3', '0-3'];

        const s1 = possibleScores[Math.floor(Math.random() * possibleScores.length)];
        newOverrides[`${matchId}-m1`] = s1;

        if (matchFormat === '2leg') {
            const s2 = possibleScores[Math.floor(Math.random() * possibleScores.length)];
            newOverrides[`${matchId}-m2`] = s2;

            const p1 = getMatchPoints(s1);
            const p2 = getMatchPoints(s2);
            if (p1 && p2) {
                const totalHome = p1.home + p2.home;
                const totalAway = p1.away + p2.away;
                if (totalHome === totalAway) {
                    newOverrides[`${matchId}-golden`] = Math.random() > 0.5 ? 'home' : 'away';
                } else {
                    delete newOverrides[`${matchId}-golden`];
                }
            }
        }
        setPlayoffOverrides(newOverrides);
    };

    const renderBracketMatch = (matchId: string, homeTeam: string | null, awayTeam: string | null, label: string, matchFormat: '2leg' | '1match' = '2leg') => {
        const result = calculateLegacyResult(matchId, homeTeam, awayTeam, matchFormat);
        const homeSeriesWin = result.winner === homeTeam;
        const awaySeriesWin = result.winner === awayTeam;
        const showGoldenSet = result.goldenSetNeeded;

        const formatLabel = matchFormat === '2leg' ? '2 Leg' : 'Tek MaÃ§';

        return (
            <div className="bg-slate-800 rounded-lg p-3 border border-slate-700 space-y-3 min-w-[200px]">
                <div className="flex items-center justify-between border-b border-slate-700/50 pb-2">
                    <div className="text-[10px] text-blue-400 font-bold uppercase tracking-wider flex items-center gap-2">
                        {label}
                        {homeTeam && awayTeam && (
                            <button
                                onClick={() => randomizeCEVMatch(matchId, matchFormat)}
                                className="text-base hover:scale-110 transition-transform"
                                title="Rastgele Oynat"
                            >
                                ğŸ²
                            </button>
                        )}
                    </div>
                    <span className="text-[9px] text-slate-500 bg-slate-900 px-1.5 py-0.5 rounded">{formatLabel}</span>
                </div>

                <div className={`flex items-center justify-between p-2 rounded transition-colors ${homeSeriesWin ? 'bg-gradient-to-r from-emerald-900/40 to-slate-900/50 border border-emerald-500/30' : 'bg-slate-900/50'}`}>
                    <div className="flex items-center gap-2 flex-1 min-w-0">
                        <TeamAvatar name={homeTeam || '?'} size="sm" />
                        <span className={`text-xs truncate ${homeSeriesWin ? 'text-emerald-400 font-bold' : 'text-slate-300'}`}>
                            {homeTeam || 'TBD'}
                        </span>
                    </div>
                    {homeSeriesWin && <span className="text-xs text-emerald-400 font-bold">Tur AtladÄ±</span>}
                </div>

                <div className={`flex items-center justify-between p-2 rounded transition-colors ${awaySeriesWin ? 'bg-gradient-to-r from-emerald-900/40 to-slate-900/50 border border-emerald-500/30' : 'bg-slate-900/50'}`}>
                    <div className="flex items-center gap-2 flex-1 min-w-0">
                        <TeamAvatar name={awayTeam || '?'} size="sm" />
                        <span className={`text-xs truncate ${awaySeriesWin ? 'text-emerald-400 font-bold' : 'text-slate-300'}`}>
                            {awayTeam || 'TBD'}
                        </span>
                    </div>
                    {awaySeriesWin && <span className="text-xs text-emerald-400 font-bold">Tur AtladÄ±</span>}
                </div>

                {homeTeam && awayTeam && (
                    <div className="bg-slate-900/50 p-2 rounded border border-slate-800 mt-2 space-y-3">
                        {/* Match 1 */}
                        <div className="flex flex-col gap-1">
                            <span className="text-[9px] text-slate-500 uppercase font-bold pl-1">
                                {matchFormat === '1match' ? `${homeTeam} vs ${awayTeam}` : `1. MaÃ§: ${homeTeam} vs ${awayTeam}`}
                            </span>
                            <div className="flex flex-wrap gap-1">
                                {['3-0', '3-1', '3-2', '2-3', '1-3', '0-3'].map(score => {
                                    const isSelected = playoffOverrides[`${matchId}-m1`] === score;
                                    return (
                                        <button
                                            key={score}
                                            onClick={() => handleScoreChange(`${matchId}-m1`, isSelected ? '' : score)}
                                            className={`
                                                px-1.5 py-0.5 text-[10px] rounded border transition-all
                                                ${isSelected
                                                    ? 'bg-blue-600 border-blue-400 text-white font-bold shadow-[0_0_10px_rgba(37,99,235,0.5)]'
                                                    : 'bg-slate-900 border-slate-700 text-slate-500 hover:bg-slate-800 hover:border-slate-500'}
                                            `}
                                        >
                                            {score}
                                        </button>
                                    );
                                })}
                            </div>
                        </div>

                        {/* Match 2 (Only for 2leg) */}
                        {matchFormat === '2leg' && (
                            <div className="flex flex-col gap-1">
                                <span className="text-[9px] text-slate-500 uppercase font-bold pl-1">2. MaÃ§: {awayTeam} vs {homeTeam}</span>
                                <div className="flex flex-wrap gap-1">
                                    {['3-0', '3-1', '3-2', '2-3', '1-3', '0-3'].map(score => {
                                        const isSelected = playoffOverrides[`${matchId}-m2`] === score;
                                        return (
                                            <button
                                                key={score}
                                                onClick={() => handleScoreChange(`${matchId}-m2`, isSelected ? '' : score)}
                                                className={`
                                                    px-1.5 py-0.5 text-[10px] rounded border transition-all
                                                    ${isSelected
                                                        ? 'bg-blue-600 border-blue-400 text-white font-bold shadow-[0_0_10px_rgba(37,99,235,0.5)]'
                                                        : 'bg-slate-900 border-slate-700 text-slate-500 hover:bg-slate-800 hover:border-slate-500'}
                                                `}
                                            >
                                                {score}
                                            </button>
                                        );
                                    })}
                                </div>
                            </div>
                        )}

                        {/* Golden Set Input */}
                        {showGoldenSet && (
                            <div className="flex flex-col gap-1 animate-in fade-in slide-in-from-top-2">
                                <span className="text-[9px] text-amber-500 uppercase font-bold pl-1 flex items-center gap-1">
                                    <span>ğŸ†</span> AltÄ±n Set KazananÄ±
                                </span>
                                <div className="flex gap-2">
                                    <button
                                        onClick={() => handleScoreChange(`${matchId}-golden`, 'home')}
                                        className={`flex-1 py-1.5 text-[10px] rounded border ${playoffOverrides[`${matchId}-golden`] === 'home' ? 'bg-amber-500/20 border-amber-500 text-amber-400' : 'bg-slate-800 border-slate-700 text-slate-400 hover:bg-slate-700'}`}
                                    >
                                        Ev Sahibi
                                    </button>
                                    <button
                                        onClick={() => handleScoreChange(`${matchId}-golden`, 'away')}
                                        className={`flex-1 py-1.5 text-[10px] rounded border ${playoffOverrides[`${matchId}-golden`] === 'away' ? 'bg-amber-500/20 border-amber-500 text-amber-400' : 'bg-slate-800 border-slate-700 text-slate-400 hover:bg-slate-700'}`}
                                    >
                                        Deplasman
                                    </button>
                                </div>
                            </div>
                        )}
                    </div>
                )}
            </div>
        );
    };

    const playoff6_1_home = bestThird;
    const playoff6_1_away = rankedRunnersUp[0]?.name || null;
    const playoff6_2_home = rankedRunnersUp[4]?.name || null;
    const playoff6_2_away = rankedRunnersUp[1]?.name || null;
    const playoff6_3_home = rankedRunnersUp[3]?.name || null;
    const playoff6_3_away = rankedRunnersUp[2]?.name || null;

    const playoff6_1_winner = getWinner('cevcl-po6-1', playoff6_1_home, playoff6_1_away);
    const playoff6_2_winner = getWinner('cevcl-po6-2', playoff6_2_home, playoff6_2_away);
    const playoff6_3_winner = getWinner('cevcl-po6-3', playoff6_3_home, playoff6_3_away);

    const qf1_home = playoff6_1_winner;
    const qf1_away = rankedWinners[2]?.name || null;
    const qf2_home = playoff6_2_winner;
    const qf2_away = rankedWinners[1]?.name || null;
    const qf3_home = rankedWinners[4]?.name || null;
    const qf3_away = rankedWinners[3]?.name || null;
    const qf4_home = playoff6_3_winner;
    const qf4_away = rankedWinners[0]?.name || null;

    const qf1_winner = getWinner('cevcl-qf-1', qf1_home, qf1_away);
    const qf2_winner = getWinner('cevcl-qf-2', qf2_home, qf2_away);
    const qf3_winner = getWinner('cevcl-qf-3', qf3_home, qf3_away);
    const qf4_winner = getWinner('cevcl-qf-4', qf4_home, qf4_away);

    const sf1_winner = getWinner('cevcl-sf-1', qf1_winner, qf2_winner, '1match');
    const sf2_winner = getWinner('cevcl-sf-2', qf3_winner, qf4_winner, '1match');
    const sf1_loser = getLoser('cevcl-sf-1', qf1_winner, qf2_winner, '1match');
    const sf2_loser = getLoser('cevcl-sf-2', qf3_winner, qf4_winner, '1match');

    const finalWinner = getWinner('cevcl-final', sf1_winner, sf2_winner, '1match');
    const thirdPlaceWinner = getWinner('cevcl-3rd', sf1_loser, sf2_loser, '1match');


    return (
        <main className="min-h-screen bg-slate-950 text-slate-100 p-4 md:p-8 font-sans">
            <div className="max-w-7xl mx-auto space-y-6">
                <div className="flex flex-col gap-1">
                    <h1 className="font-bold text-white text-lg tracking-tight leading-none hidden sm:block">CEV Åampiyonlar Ligi</h1>
                    <p className="text-[10px] text-slate-400 hidden sm:block">Playoff ve Final Four 2025-2026</p>
                </div>

                {!isGroupsComplete && (
                    <div className="bg-blue-500/10 border border-blue-500/20 text-blue-200 p-4 rounded-lg flex items-center justify-between gap-3">
                        <div className="flex items-center gap-3">
                            <span className="text-2xl">âš ï¸</span>
                            <div>
                                <p className="font-bold text-sm">Havuz EtabÄ± HenÃ¼z TamamlanmadÄ±</p>
                                <p className="text-xs opacity-70">
                                    Play-Off senaryolarÄ± mevcut sÄ±ralamaya gÃ¶re hesaplanmaktadÄ±r.
                                    Kesin sonuÃ§lar iÃ§in Ã¶nce tÃ¼m havuz maÃ§larÄ±nÄ± tahmin edin.
                                </p>
                            </div>
                        </div>
                        <button
                            onClick={handlePredictAll}
                            className="px-3 py-1.5 bg-blue-600 hover:bg-blue-500 text-white text-xs font-bold rounded flex items-center gap-1 transition-colors whitespace-nowrap"
                        >
                            <span>ğŸ²</span>
                            TÃ¼mÃ¼nÃ¼ Tahmin Et
                        </button>
                    </div>
                )}

                <div className="relative">
                    {!isGroupsComplete && (
                        <div className="absolute inset-0 bg-slate-950/80 backdrop-blur-sm z-20 flex flex-col items-center justify-start pt-16 rounded-xl">
                            <div className="text-6xl mb-4">ğŸ”’</div>
                            <h3 className="text-xl font-bold text-white mb-2">Play-Off Kilitli</h3>
                            <p className="text-slate-400 text-sm text-center max-w-md mb-4">
                                Play-Off senaryolarÄ±nÄ± dÃ¼zenleyebilmek iÃ§in Ã¶nce tÃ¼m havuz maÃ§larÄ±nÄ± tahmin etmeniz gerekmektedir.
                            </p>
                            <p className="text-blue-400 font-medium">
                                {remainingMatches} maÃ§ eksik
                            </p>
                            <div className="flex gap-2 mt-4">
                                <Link href="/cev-cl/tahminoyunu" className="px-4 py-2 bg-slate-800 hover:bg-slate-700 text-white font-bold rounded-lg transition-colors border border-slate-700">
                                    Tahminlere Git â†’
                                </Link>
                                <button
                                    onClick={handlePredictAll}
                                    className="px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white font-bold rounded-lg transition-colors shadow-lg shadow-blue-600/20"
                                >
                                    ğŸ² TÃ¼mÃ¼nÃ¼ Tahmin Et ({remainingMatches})
                                </button>
                            </div>
                        </div>
                    )}

                    <div className={`${!isGroupsComplete ? 'opacity-30 pointer-events-none select-none' : ''} space-y-6`}>

                        {/* Pool Qualification Status */}
                        <div className="bg-slate-900/60 border border-slate-800 rounded-xl p-4">
                            <h2 className="text-lg font-bold text-white mb-4 flex items-center gap-2">
                                <span>ğŸ“Š</span> Havuz Durumu ve Kalifikasyon
                            </h2>
                            <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3">
                                {pools.map((pool) => (
                                    <div key={pool.poolName} className="bg-slate-800 rounded-lg p-3 border border-slate-700">
                                        <div className="text-xs font-bold text-blue-400 mb-2">{pool.poolName}</div>
                                        <div className="space-y-1">
                                            {pool.teams.slice(0, 3).map((team, tIdx) => (
                                                <div key={team.name} className={`text-xs flex items-center gap-1 ${tIdx === 0 ? 'text-emerald-400' :
                                                    tIdx === 1 ? 'text-amber-400' :
                                                        'text-slate-400'
                                                    }`}>
                                                    <span className="w-4 text-center">{tIdx + 1}.</span>
                                                    <TeamAvatar name={team.name} size="xs" />
                                                    <span className="truncate flex-1">{team.name}</span>
                                                    <span className="text-slate-500">{team.points}P</span>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>

                        {/* PLAYOFF 6 */}
                        <div className="bg-gradient-to-br from-amber-900/30 to-slate-900/50 border border-amber-500/20 rounded-xl p-6">
                            <h2 className="text-xl font-bold text-white mb-4 flex items-center gap-2">
                                <span className="w-3 h-3 rounded-full bg-amber-500"></span>
                                Playoff 6
                                <span className="text-xs text-amber-400 ml-auto">Åubat 2026</span>
                            </h2>
                            <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                                {renderBracketMatch('cevcl-po6-1', playoff6_1_home, playoff6_1_away, 'Tie 1: En Ä°yi 3. vs 1. Ä°kinci')}
                                {renderBracketMatch('cevcl-po6-2', playoff6_2_home, playoff6_2_away, 'Tie 2: 5. Ä°kinci vs 2. Ä°kinci')}
                                {renderBracketMatch('cevcl-po6-3', playoff6_3_home, playoff6_3_away, 'Tie 3: 4. Ä°kinci vs 3. Ä°kinci')}
                            </div>
                        </div>

                        {/* QUARTERFINALS */}
                        <div className="bg-gradient-to-br from-blue-900/30 to-slate-900/50 border border-blue-500/20 rounded-xl p-6">
                            <h2 className="text-xl font-bold text-white mb-4 flex items-center gap-2">
                                <span className="w-3 h-3 rounded-full bg-blue-500"></span>
                                Ã‡eyrek Final
                                <span className="text-xs text-blue-400 ml-auto">Mart 2026</span>
                            </h2>
                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                                {renderBracketMatch('cevcl-qf-1', qf1_home, qf1_away, 'QF1: PO6-1 K. vs 3. Birinci')}
                                {renderBracketMatch('cevcl-qf-2', qf2_home, qf2_away, 'QF2: PO6-2 K. vs 2. Birinci')}
                                {renderBracketMatch('cevcl-qf-3', qf3_home, qf3_away, 'QF3: 5. Birinci vs 4. Birinci')}
                                {renderBracketMatch('cevcl-qf-4', qf4_home, qf4_away, 'QF4: PO6-3 K. vs 1. Birinci')}
                            </div>
                        </div>

                        {/* FINAL FOUR */}
                        <div className="bg-gradient-to-br from-purple-900/30 to-slate-900/50 border border-purple-500/20 rounded-xl p-6">
                            <h2 className="text-xl font-bold text-white mb-4 flex items-center gap-2">
                                <span className="w-3 h-3 rounded-full bg-purple-500"></span>
                                Final Four
                                <span className="text-xs text-purple-400 ml-auto">2-3 MayÄ±s 2026</span>
                            </h2>

                            <div className="flex gap-2 border-b border-purple-500/20 mb-6 overflow-x-auto pb-2">
                                <button onClick={() => setActiveTabFF('semi')} className={`px-4 py-2 text-sm font-bold rounded-t-lg transition-colors whitespace-nowrap ${activeTabFF === 'semi' ? 'bg-purple-600 text-white' : 'text-slate-400 hover:text-white hover:bg-slate-800'}`}>YarÄ± Final</button>
                                <button onClick={() => setActiveTabFF('final')} className={`px-4 py-2 text-sm font-bold rounded-t-lg transition-colors whitespace-nowrap ${activeTabFF === 'final' ? 'bg-amber-600 text-white' : 'text-slate-400 hover:text-white hover:bg-slate-800'}`}>Super Final</button>
                                <button onClick={() => setActiveTabFF('3rd')} className={`px-4 py-2 text-sm font-bold rounded-t-lg transition-colors whitespace-nowrap ${activeTabFF === '3rd' ? 'bg-slate-600 text-white' : 'text-slate-400 hover:text-white hover:bg-slate-800'}`}>3.&apos;lÃ¼k MaÃ§Ä±</button>
                            </div>

                            <div className="min-h-[250px]">
                                {activeTabFF === 'semi' && (
                                    <div className="grid md:grid-cols-2 gap-6">
                                        {renderBracketMatch('cevcl-sf-1', qf1_winner, qf2_winner, 'SF1: QF1 K. vs QF2 K.', '1match')}
                                        {renderBracketMatch('cevcl-sf-2', qf3_winner, qf4_winner, 'SF2: QF3 K. vs QF4 K.', '1match')}
                                    </div>
                                )}
                                {activeTabFF === 'final' && (
                                    <div>
                                        <div className="max-w-md">
                                            {renderBracketMatch('cevcl-final', sf1_winner, sf2_winner, 'ğŸ† ÅAMPÄ°YONLUK FÄ°NALÄ°', '1match')}
                                        </div>
                                        {finalWinner && (
                                            <div className="mt-4 bg-gradient-to-r from-amber-500/20 to-amber-600/10 border border-amber-500/30 rounded-lg p-6 text-center max-w-md animate-in fade-in zoom-in duration-500">
                                                <div className="text-5xl mb-2">ğŸ†</div>
                                                <div className="text-sm text-amber-400 uppercase tracking-wider font-bold">CEV Åampiyonlar Ligi KazananÄ±</div>
                                                <div className="text-3xl font-black text-white mt-1">{finalWinner}</div>
                                            </div>
                                        )}
                                    </div>
                                )}
                                {activeTabFF === '3rd' && (
                                    <div>
                                        <div className="max-w-md">
                                            {renderBracketMatch('cevcl-3rd', sf1_loser, sf2_loser, 'ğŸ¥‰ 3. lÃ¼k MÃ¼cadelesi', '1match')}
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    );
}

```

## File: app\cev-cl\playoffs\page.tsx
```
import { Metadata } from "next";
import { getLeagueData } from "../../utils/serverData";
import CEVCLPlayoffsClient from "./CEVCLPlayoffsClient";

export const metadata: Metadata = {
    title: "CEV Åampiyonlar Ligi Playoff SimÃ¼lasyonu",
    description: "CEV Åampiyonlar Ligi playoff simÃ¼lasyonu. Ã‡eyrek final, yarÄ± final ve final eÅŸleÅŸmelerini simÃ¼le edin.",
    openGraph: {
        title: "CEV Åampiyonlar Ligi Playoff | VolleySimulator",
        description: "Åampiyonlar Ligi playoff eÅŸleÅŸmelerini simÃ¼le edin.",
    },
};

export default async function CEVCLPlayoffsPage() {
    const { teams, fixture } = await getLeagueData("cev-cl");

    return (
        <CEVCLPlayoffsClient
            initialTeams={teams}
            initialMatches={fixture}
        />
    );
}

```

## File: app\cev-cl\stats\CEVCLStatsClient.tsx
```
"use client";

import { useMemo } from "react";
import { TeamStats } from "../../types";

import TeamAvatar from "@/app/components/TeamAvatar";

interface CEVCLStatsClientProps {
    initialTeams: TeamStats[];
}

interface ExtendedTeamStats extends TeamStats {
    losses: number;
    winRate: number;
    setRatioDisplay: string;
}

export default function CEVCLStatsClient({ initialTeams }: CEVCLStatsClientProps) {
    const teamsWithStats = useMemo(() => initialTeams.map(t => ({
        ...t,
        losses: (t.played || 0) - (t.wins || 0),
        winRate: (t.played || 0) > 0 ? Math.round(((t.wins || 0) / (t.played || 0)) * 100) : 0,
        setRatioDisplay: (t.setsLost || 0) > 0 ? ((t.setsWon || 0) / (t.setsLost || 0)).toFixed(2) : (t.setsWon || 0).toString()
    })), [initialTeams]);

    const totalMatches = useMemo(() => teamsWithStats.reduce((sum, t) => sum + (t.played || 0), 0) / 2, [teamsWithStats]);
    const totalSets = useMemo(() => teamsWithStats.reduce((sum, t) => sum + (t.setsWon || 0), 0), [teamsWithStats]);
    const avgPointsPerTeam = useMemo(() => teamsWithStats.length > 0
        ? Math.round(teamsWithStats.reduce((sum, t) => sum + (t.points || 0), 0) / teamsWithStats.length)
        : 0, [teamsWithStats]);

    const mostPoints = useMemo(() => [...teamsWithStats].sort((a, b) => (b.points || 0) - (a.points || 0)).slice(0, 5), [teamsWithStats]);
    const mostSets = useMemo(() => [...teamsWithStats].sort((a, b) => (b.setsWon || 0) - (a.setsWon || 0)).slice(0, 5), [teamsWithStats]);
    const leastLosses = useMemo(() => [...teamsWithStats].sort((a, b) => a.losses - b.losses || b.wins - a.wins).slice(0, 5), [teamsWithStats]);
    const bestWinRate = useMemo(() => [...teamsWithStats].filter(t => (t.played || 0) >= 2).sort((a, b) => b.winRate - a.winRate).slice(0, 5), [teamsWithStats]);

    return (
        <main className="min-h-screen bg-slate-950 text-slate-100 p-2 sm:p-4 font-sans">
            <div className="max-w-7xl mx-auto space-y-4 sm:space-y-6">
                <div className="flex flex-col gap-1 px-1">
                    <h1 className="font-bold text-white text-lg tracking-tight leading-none hidden sm:block">CEV Åampiyonlar Ligi Ä°statistikleri</h1>
                    <p className="text-[10px] text-slate-400 hidden sm:block">KadÄ±nlar â€¢ 2025-2026</p>
                </div>

                <div className="grid grid-cols-3 gap-2 sm:gap-4">
                    <div className="bg-gradient-to-br from-blue-600/20 to-blue-900/10 rounded-xl sm:rounded-2xl p-3 sm:p-4 border border-blue-600/30 text-center">
                        <div className="text-2xl sm:text-4xl font-bold text-blue-400">{Math.round(totalMatches)}</div>
                        <div className="text-[10px] sm:text-xs text-blue-400/70 uppercase tracking-wider mt-1">Toplam MaÃ§</div>
                    </div>
                    <div className="bg-gradient-to-br from-emerald-600/20 to-emerald-900/10 rounded-xl sm:rounded-2xl p-3 sm:p-4 border border-emerald-600/30 text-center">
                        <div className="text-2xl sm:text-4xl font-bold text-emerald-400">{totalSets}</div>
                        <div className="text-[10px] sm:text-xs text-emerald-400/70 uppercase tracking-wider mt-1">Toplam Set</div>
                    </div>
                    <div className="bg-gradient-to-br from-purple-600/20 to-purple-900/10 rounded-xl sm:rounded-2xl p-3 sm:p-4 border border-purple-600/30 text-center">
                        <div className="text-2xl sm:text-4xl font-bold text-purple-400">{avgPointsPerTeam}</div>
                        <div className="text-[10px] sm:text-xs text-purple-400/70 uppercase tracking-wider mt-1">Ort. Puan</div>
                    </div>
                </div>

                <div className="grid sm:grid-cols-2 gap-3 sm:gap-4 pb-8">
                    <StatCard
                        title="En Ã‡ok Puan"
                        icon="ğŸ’"
                        teams={mostPoints}
                        statKey="points"
                        color="bg-blue-500"
                        gradient="bg-gradient-to-r from-blue-600 to-indigo-600"
                        suffix="P"
                    />
                    <StatCard
                        title="En YÃ¼ksek Galibiyet"
                        icon="ğŸ“ˆ"
                        teams={bestWinRate}
                        statKey="winRate"
                        color="bg-teal-500"
                        gradient="bg-gradient-to-r from-teal-600 to-cyan-600"
                        suffix="%"
                    />
                    <StatCard
                        title="En Ã‡ok Set Alan"
                        icon="ğŸ"
                        teams={mostSets}
                        statKey="setsWon"
                        color="bg-purple-500"
                        gradient="bg-gradient-to-r from-purple-600 to-pink-600"
                    />
                    <StatCard
                        title="En Az MaÄŸlubiyet"
                        icon="ğŸ›¡ï¸"
                        teams={leastLosses}
                        statKey="losses"
                        color="bg-emerald-500"
                        gradient="bg-gradient-to-r from-emerald-600 to-green-600"
                        suffix="M"
                    />
                </div>
            </div>
        </main>
    );
}

// Extracted Components
const BarChart = ({ value, max, color }: { value: number; max: number; color: string }) => (
    <div className="h-1.5 bg-slate-800 rounded-full overflow-hidden flex-1">
        <div
            className={`h-full ${color} transition-all duration-500`}
            style={{ '--stat-width': `${Math.min((value / (max || 1)) * 100, 100)}%`, width: 'var(--stat-width)' } as any}
        />
    </div>
);

const StatCard = ({ title, icon, teams, statKey, color, gradient, suffix = "" }: {
    title: string; icon: string;
    teams: ExtendedTeamStats[];
    statKey: 'losses' | 'wins' | 'setsWon' | 'setsLost' | 'points' | 'winRate';
    color: string;
    gradient: string;
    suffix?: string;
}) => {
    const maxValue = Math.max(...teams.map(t => Number(t[statKey])), 1);

    return (
        <div className="bg-slate-950/50 backdrop-blur-md rounded-xl border border-slate-800/60 overflow-hidden hover:border-slate-700/80 transition-all duration-300 group shadow-md hover:shadow-lg">
            <div className={`${gradient} px-2.5 py-2 border-b border-white/10 relative overflow-hidden`}>
                <div className="absolute inset-0 bg-white/5 opacity-0 group-hover:opacity-100 transition-opacity"></div>
                <div className="flex items-center justify-between relative z-10">
                    <h3 className="font-bold text-white text-[11px] uppercase tracking-wider flex items-center gap-1.5">
                        <span className="text-sm">{icon}</span> {title}
                    </h3>
                    <span className="text-[9px] font-bold text-white/70 bg-black/20 px-1.5 py-0.5 rounded-full border border-white/10">TOP 5</span>
                </div>
            </div>

            <div className="p-1.5 space-y-1">
                {teams.map((t, idx) => (
                    <div
                        key={t.name}
                        className={`flex items-center gap-2 p-1.5 rounded-lg transition-all ${idx === 0 ? 'bg-gradient-to-r from-white/5 to-transparent border border-white/10' : 'hover:bg-white/5'
                            }`}
                    >
                        <div className={`w-5 h-5 rounded flex items-center justify-center font-bold text-[10px] shadow-sm ${idx === 0 ? 'bg-amber-400 text-amber-950' :
                            idx === 1 ? 'bg-slate-300 text-slate-800' :
                                idx === 2 ? 'bg-amber-700 text-amber-100' :
                                    'bg-slate-800 text-slate-500'
                            }`}>
                            {idx + 1}
                        </div>
                        <TeamAvatar name={t.name} size="xs" />

                        <div className="flex-1 min-w-0">
                            <span className={`text-[11px] font-bold truncate block ${idx === 0 ? 'text-white' : 'text-slate-300'}`} title={t.name}>
                                {t.name}
                            </span>
                        </div>

                        <div className="flex items-center gap-1.5 w-16 justify-end">
                            <div className="h-1 bg-slate-800/50 rounded-full overflow-hidden flex-1 max-w-[30px]">
                                <div className={`h-full ${color} opacity-80`} style={{ '--stat-width': `${Math.min((Number(t[statKey]) / maxValue) * 100, 100)}%`, width: 'var(--stat-width)' } as any}></div>
                            </div>
                            <span className={`text-[11px] font-bold min-w-[24px] text-right ${idx === 0 ? 'text-white' : 'text-slate-400'}`}>
                                {t[statKey]}{suffix}
                            </span>
                        </div>
                    </div>
                ))}
            </div>
        </div>
    );
};

```

## File: app\cev-cl\stats\page.tsx
```
import { Metadata } from "next";
import { getLeagueData } from "../../utils/serverData";
import CEVCLStatsClient from "./CEVCLStatsClient";

export const metadata: Metadata = {
    title: "CEV Åampiyonlar Ligi Ä°statistikler",
    description: "CEV Åampiyonlar Ligi takÄ±m istatistikleri, performans analizleri ve karÅŸÄ±laÅŸtÄ±rmalar.",
    openGraph: {
        title: "CEV Åampiyonlar Ligi Ä°statistikler | VolleySimulator",
        description: "Åampiyonlar Ligi takÄ±m istatistikleri ve analizler.",
    },
};

export default async function CEVCLStatsPage() {
    const { teams } = await getLeagueData("cev-cl");

    return (
        <CEVCLStatsClient initialTeams={teams} />
    );
}

```

# Project Application Context - Part 7

## File: app\cev-cl\tahminoyunu\CEVCLCalculatorClient.tsx
```
"use client";

import { useEffect, useState, useRef, useMemo } from "react";
import { TeamStats, Match, Achievement } from "../../types";

import { useToast, AchievementToast, AchievementsPanel } from "../../components";
import StandingsTable from "../../components/Calculator/StandingsTable";
import FixtureList from "../../components/Calculator/FixtureList";
import ShareButton from "../../components/ShareButton";
import { calculateLiveStandings } from "../../utils/calculatorUtils";
import { calculateElo } from "../../utils/eloCalculator";
import { useGameState, ACHIEVEMENTS } from "../../utils/gameState";
import { sounds } from "../../utils/sounds";

interface CEVCLCalculatorClientProps {
    initialTeams: TeamStats[];
    initialMatches: Match[];
}

export default function CEVCLCalculatorClient({ initialTeams, initialMatches }: CEVCLCalculatorClientProps) {
    const { showToast, showUndoToast } = useToast();
    const standingsRef = useRef<HTMLDivElement>(null);

    // Normalize data (Matching original fetchData logic)
    const normalizedTeams = useMemo(() => initialTeams.map((t: any) => ({
        ...t,
        name: t.name.toLocaleUpperCase('tr-TR'),
        groupName: t.groupName.replace('Pool ', '') + ' GRUBU'
    })), [initialTeams]);

    const normalizedMatches = useMemo(() => initialMatches.map((m: any) => ({
        ...m,
        matchDate: m.date || m.matchDate,
        homeTeam: m.homeTeam.toLocaleUpperCase('tr-TR'),
        awayTeam: m.awayTeam.toLocaleUpperCase('tr-TR'),
        groupName: m.groupName.replace('Pool ', '') + ' GRUBU'
    })), [initialMatches]);

    // Data State
    const [allTeams] = useState<TeamStats[]>(normalizedTeams);
    const [allMatches] = useState<Match[]>(normalizedMatches);
    const [selectedPool, setSelectedPool] = useState<string>("A GRUBU");

    // UI State
    const [overrides, setOverrides] = useState<Record<string, string>>({});
    const [showAchievements, setShowAchievements] = useState(false);
    const [showAutoMenu, setShowAutoMenu] = useState(false);
    const [showResetMenu, setShowResetMenu] = useState(false);
    const [newAchievement, setNewAchievement] = useState<Achievement | null>(null);

    // Game State
    const { gameState, addXP, recordPrediction, unlockAchievement, hasAchievement } = useGameState();

    const pools = ["A GRUBU", "B GRUBU", "C GRUBU", "D GRUBU", "E GRUBU"];

    // Load saved scenarios on mount
    useEffect(() => {
        const saved = localStorage.getItem('cevclGroupScenarios');
        if (saved) {
            try {
                const parsed = JSON.parse(saved);
                setOverrides(parsed);
            } catch (e) { console.error(e); }
        }
    }, []);

    // Filter by selected pool
    const poolTeams = useMemo(() =>
        allTeams.filter(t => t.groupName === selectedPool),
        [allTeams, selectedPool]
    );

    const poolMatches = useMemo(() =>
        allMatches.filter(m => m.groupName === selectedPool),
        [allMatches, selectedPool]
    );

    const handleScoreChange = (matchId: string, score: string) => {
        const newOverrides = { ...overrides };
        const wasNew = !overrides[matchId];

        if (score) {
            newOverrides[matchId] = score;

            if (wasNew) {
                addXP(10);
                sounds.scoreSelect();

                if (!hasAchievement('first_prediction')) {
                    const wasUnlocked = unlockAchievement('first_prediction');
                    if (wasUnlocked) {
                        setNewAchievement(ACHIEVEMENTS.first_prediction as Achievement);
                        sounds.achievement();
                    }
                }

                if (gameState.stats.totalPredictions >= 49 && !hasAchievement('game_addict')) {
                    const wasUnlocked = unlockAchievement('game_addict');
                    if (wasUnlocked) {
                        setNewAchievement(ACHIEVEMENTS.game_addict as Achievement);
                        sounds.achievement();
                    }
                }

                recordPrediction(true);
            }
        } else {
            delete newOverrides[matchId];
        }
        setOverrides(newOverrides);
    };

    // Persist overrides to localStorage
    useEffect(() => {
        localStorage.setItem('cevclGroupScenarios', JSON.stringify(overrides));
    }, [overrides]);

    const handleResetGroup = () => {
        if (!confirm(`${selectedPool} tahminleriniz silinecek. Emin misiniz?`)) return;
        const newOverrides = { ...overrides };
        const groupMatches = allMatches
            .filter(m => m.groupName === selectedPool)
            .map(m => `${m.homeTeam}-${m.awayTeam}`);
        groupMatches.forEach(matchId => {
            delete newOverrides[matchId];
        });
        setOverrides(newOverrides);
        showToast(`${selectedPool} tahminleri sÄ±fÄ±rlandÄ±`, "success");
    };

    const handleResetAll = () => {
        const previousOverrides = { ...overrides };
        setOverrides({});
        localStorage.removeItem('cevclGroupScenarios');
        showUndoToast("Åampiyonlar Ligi tahminleri sÄ±fÄ±rlandÄ±", () => {
            setOverrides(previousOverrides);
            localStorage.setItem('cevclGroupScenarios', JSON.stringify(previousOverrides));
        });
    };

    // Memoize standings calculations for current pool
    const initialStandings = useMemo(() =>
        calculateLiveStandings(poolTeams, poolMatches, {}),
        [poolTeams, poolMatches]
    );

    const initialRanks = useMemo(() => {
        const ranks = new Map<string, number>();
        initialStandings.forEach((team, idx) => ranks.set(team.name, idx + 1));
        return ranks;
    }, [initialStandings]);

    const liveStandings = useMemo(() =>
        calculateLiveStandings(poolTeams, poolMatches, overrides),
        [poolTeams, poolMatches, overrides]
    );

    const currentRanks = useMemo(() => {
        const ranks = new Map<string, number>();
        liveStandings.forEach((team, idx) => ranks.set(team.name, idx + 1));
        return ranks;
    }, [liveStandings]);

    // Export / Import Handlers
    const handleSaveAllScenarios = () => {
        try {
            const exportData = {
                league: 'CEV Åampiyonlar Ligi',
                groupScenarios: overrides,
                date: new Date().toISOString()
            };
            const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(exportData, null, 2));
            const a = document.createElement('a');
            a.href = dataStr;
            a.download = `cevcl-tahmin-${new Date().toLocaleDateString('tr-TR')}.json`;
            a.click();
            showToast("Åampiyonlar Ligi senaryosu indirildi", "success");
        } catch (e) { console.error(e); }
    };

    const handleScrollToNextMatch = () => {
        const nextMatch = poolMatches.find(m => !m.isPlayed && !overrides[`${m.homeTeam}-${m.awayTeam}`]);
        if (nextMatch) {
            const id = `match-${nextMatch.homeTeam}-${nextMatch.awayTeam}`;
            const el = document.getElementById(id);
            if (el) {
                el.scrollIntoView({ behavior: 'smooth', block: 'center' });
                el.classList.add('ring-2', 'ring-blue-500');
                setTimeout(() => el.classList.remove('ring-2', 'ring-blue-500'), 2000);
            }
        }
    };

    const handleImportAllScenarios = (e: React.ChangeEvent<HTMLInputElement>) => {
        const file = e.target.files?.[0];
        if (!file) return;
        const reader = new FileReader();
        reader.onload = (evt) => {
            try {
                const json = JSON.parse(evt.target?.result as string);
                if (json.groupScenarios) {
                    localStorage.setItem('cevclGroupScenarios', JSON.stringify(json.groupScenarios));
                    setOverrides(json.groupScenarios);
                }
                showToast("Åampiyonlar Ligi senaryosu yÃ¼klendi", "success");
            } catch (err) { console.error(err); }
        }
        reader.readAsText(file);
        e.target.value = '';
    }

    // Auto Simulation Logic
    const handleSimulateSmart = () => {
        if (!confirm("OynanmamÄ±ÅŸ tÃ¼m maÃ§lar gÃ¼ncel gÃ¼Ã§ dengelerine gÃ¶re otomatik doldurulacak. OnaylÄ±yor musunuz?")) return;
        const newOverrides = { ...overrides };
        let count = 0;
        const eloRatings = calculateElo(poolTeams, poolMatches.filter(m => m.isPlayed));
        poolMatches.forEach(match => {
            if (match.isPlayed || newOverrides[`${match.homeTeam}-${match.awayTeam}`]) return;
            const homeElo = eloRatings.get(match.homeTeam) || 1200;
            const awayElo = eloRatings.get(match.awayTeam) || 1200;
            const winProb = 1 / (1 + Math.pow(10, (awayElo - homeElo) / 400));
            const randomFactor = (Math.random() * 0.15) - 0.075;
            const finalProb = winProb + randomFactor;
            let score = "0-0";
            if (finalProb > 0.60) score = "3-0";
            else if (finalProb > 0.55) score = "3-1";
            else if (finalProb > 0.50) score = "3-2";
            else if (finalProb > 0.45) score = "2-3";
            else if (finalProb > 0.40) score = "1-3";
            else score = "0-3";
            newOverrides[`${match.homeTeam}-${match.awayTeam}`] = score;
            count++;
        });
        setOverrides(newOverrides);
        if (count > 0) {
            sounds.levelUp();
            showToast(`${count} maÃ§ gÃ¼Ã§ dengelerine gÃ¶re tahmin edildi!`, "success");
            addXP(count * 2);
        }
    };

    const handleSimulateRandom = () => {
        if (!confirm("OynanmamÄ±ÅŸ tÃ¼m maÃ§lar RASTGELE skorlarla doldurulacak. OnaylÄ±yor musunuz?")) return;
        const newOverrides = { ...overrides };
        let count = 0;
        const scores = ["3-0", "3-1", "3-2", "2-3", "1-3", "0-3"];
        poolMatches.forEach(match => {
            if (match.isPlayed || newOverrides[`${match.homeTeam}-${match.awayTeam}`]) return;
            const randomScore = scores[Math.floor(Math.random() * scores.length)];
            newOverrides[`${match.homeTeam}-${match.awayTeam}`] = randomScore;
            count++;
        });
        setOverrides(newOverrides);
        if (count > 0) {
            sounds.levelUp();
            showToast(`${count} maÃ§ rastgele tahmin edildi!`, "success");
            addXP(count * 2);
        }
    };

    return (
        <main className="min-h-screen bg-slate-950 text-slate-100 p-1 sm:p-2 font-sans">
            <div className="w-full max-w-7xl mx-auto flex flex-col h-full gap-2">
                <div className="flex flex-col sm:flex-row items-center justify-between gap-3 p-2 bg-slate-900/40 rounded-xl border border-slate-800">
                    <div className="flex flex-col sm:flex-row items-center gap-4 w-full sm:w-auto">
                        <div className="text-center sm:text-left">
                            <h1 className="font-bold text-white text-lg tracking-tight leading-none hidden sm:block">CEV Åampiyonlar Ligi</h1>
                            <p className="text-[10px] text-slate-400 hidden sm:block">Tahmin Oyunu</p>
                        </div>
                        <div className="flex gap-2 items-center w-full sm:w-auto">
                            <span className="text-[10px] font-bold text-slate-500 uppercase tracking-widest hidden sm:inline whitespace-nowrap">GRUP:</span>
                            <select
                                value={selectedPool}
                                onChange={(e) => setSelectedPool(e.target.value)}
                                title="Havuz SeÃ§in"
                                className="appearance-none bg-slate-800 hover:bg-slate-700 text-white text-xs font-bold rounded-lg px-4 py-2 border border-slate-700 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-all outline-none cursor-pointer min-w-[120px]"
                            >
                                {pools.map(pool => (
                                    <option key={pool} value={pool} className="bg-slate-900">
                                        {pool}
                                    </option>
                                ))}
                            </select>
                        </div>
                    </div>
                    <div className="flex items-center gap-2 w-full sm:w-auto pb-1 sm:pb-0 justify-end flex-wrap sm:flex-nowrap">
                        <div className="flex items-center gap-2 shrink-0">
                            <div className="relative">
                                <button
                                    onClick={() => setShowAutoMenu(!showAutoMenu)}
                                    className={`px-3 py-1.5 bg-amber-600 hover:bg-amber-500 text-white text-xs font-bold rounded-lg transition-all flex items-center gap-1 shadow-lg shadow-amber-500/20 ${showAutoMenu ? 'ring-2 ring-amber-400' : ''}`}
                                >
                                    <span className="hidden sm:inline">Otomatik</span>
                                    <span className="text-[8px] ml-0.5">â–¼</span>
                                </button>
                                {showAutoMenu && (
                                    <>
                                        <div className="fixed inset-0 z-40" onClick={() => setShowAutoMenu(false)}></div>
                                        <div className="absolute top-full right-0 mt-2 w-48 bg-slate-900 border border-slate-700 rounded-xl shadow-xl overflow-hidden z-50 animate-in fade-in slide-in-from-top-2 duration-200">
                                            <button
                                                onClick={() => { handleSimulateSmart(); setShowAutoMenu(false); }}
                                                className="w-full text-left px-4 py-3 hover:bg-slate-800 transition-colors flex items-center gap-3 border-b border-slate-800"
                                            >
                                                <div>
                                                    <div className="text-xs font-bold text-white">GÃ¼Ã§ Dengelerine GÃ¶re</div>
                                                    <div className="text-[9px] text-slate-400">TakÄ±m gÃ¼Ã§lerine gÃ¶re gerÃ§ekÃ§i tahmin</div>
                                                </div>
                                            </button>
                                            <button
                                                onClick={() => { handleSimulateRandom(); setShowAutoMenu(false); }}
                                                className="w-full text-left px-4 py-3 hover:bg-slate-800 transition-colors flex items-center gap-3"
                                            >
                                                <div>
                                                    <div className="text-xs font-bold text-white">Rastgele DaÄŸÄ±t</div>
                                                    <div className="text-[9px] text-slate-400">Tamamen ÅŸansa dayalÄ± sonuÃ§lar</div>
                                                </div>
                                            </button>
                                        </div>
                                    </>
                                )}
                            </div>

                            <input
                                type="file"
                                accept=".json"
                                onChange={handleImportAllScenarios}
                                className="hidden"
                                id="import-upload-cevcl"
                            />
                            <label
                                htmlFor="import-upload-cevcl"
                                className="px-3 py-1.5 bg-blue-600 hover:bg-blue-500 text-white text-xs font-bold rounded-lg transition-all cursor-pointer flex items-center gap-1"
                                title="Senaryo YÃ¼kle"
                            >
                                <span className="hidden sm:inline">YÃ¼kle</span>
                            </label>
                            <button
                                onClick={handleSaveAllScenarios}
                                className="px-3 py-1.5 bg-emerald-700 hover:bg-emerald-600 text-white text-xs font-bold rounded-lg transition-all flex items-center gap-1"
                                title="Senaryoyu Kaydet"
                            >
                                <span className="hidden sm:inline">Kaydet</span>
                            </button>
                        </div>
                        <div className="w-px h-4 bg-slate-700 hidden sm:block shrink-0"></div>
                        <div className="flex items-center gap-2 shrink-0">
                            <button
                                onClick={handleScrollToNextMatch}
                                className="px-3 py-1.5 bg-slate-800 hover:bg-slate-700 text-slate-400 hover:text-white text-xs font-bold rounded-lg transition-all border border-slate-700 flex items-center gap-1"
                                title="Son kaldÄ±ÄŸÄ±m maÃ§a git"
                            >
                                <span className="hidden sm:inline">KaldÄ±ÄŸÄ±m Yer</span>
                            </button>
                            <div className="relative">
                                <button
                                    onClick={() => setShowResetMenu(!showResetMenu)}
                                    className={`px-3 py-1.5 bg-slate-800 hover:bg-rose-900/50 text-slate-400 hover:text-rose-400 text-xs font-bold rounded-lg transition-all border border-slate-700 flex items-center gap-1 ${showResetMenu ? 'ring-2 ring-rose-500/50' : ''}`}
                                >
                                    <span className="hidden sm:inline">SÄ±fÄ±rla</span>
                                    <span className="text-[8px] ml-0.5">â–¼</span>
                                </button>
                                {showResetMenu && (
                                    <>
                                        <div className="fixed inset-0 z-40" onClick={() => setShowResetMenu(false)}></div>
                                        <div className="absolute top-full right-0 mt-2 w-48 bg-slate-900 border border-slate-700 rounded-xl shadow-xl overflow-hidden z-50 animate-in fade-in slide-in-from-top-2 duration-200">
                                            <button
                                                onClick={() => { handleResetGroup(); setShowResetMenu(false); }}
                                                className="w-full text-left px-4 py-3 hover:bg-slate-800 transition-colors flex items-center gap-3 border-b border-slate-800"
                                            >
                                                <div>
                                                    <div className="text-xs font-bold text-white">Bu Grubu SÄ±fÄ±rla</div>
                                                    <div className="text-[9px] text-slate-400">Sadece {selectedPool} silinir</div>
                                                </div>
                                            </button>
                                            <button
                                                onClick={() => { handleResetAll(); setShowResetMenu(false); }}
                                                className="w-full text-left px-4 py-3 hover:bg-rose-900/20 transition-colors flex items-center gap-3 group"
                                            >
                                                <div>
                                                    <div className="text-xs font-bold text-rose-400 group-hover:text-rose-300">TÃ¼mÃ¼nÃ¼ SÄ±fÄ±rla</div>
                                                    <div className="text-[9px] text-rose-500/70 group-hover:text-rose-400/70">BÃ¼tÃ¼n tahminler silinir</div>
                                                </div>
                                            </button>
                                        </div>
                                    </>
                                )}
                            </div>
                            <ShareButton
                                targetRef={standingsRef}
                                championName={liveStandings[0]?.name}
                            />
                        </div>
                    </div>
                </div>

                <div className="grid grid-cols-1 lg:grid-cols-2 gap-4">
                    <div className="flex flex-col gap-4 relative">
                        <div ref={standingsRef} className="sticky top-14 z-10 max-h-[calc(100vh-120px)] overflow-auto custom-scrollbar">
                            <StandingsTable
                                teams={liveStandings}
                                playoffSpots={2}
                                secondaryPlayoffSpots={0}
                                relegationSpots={0}
                                initialRanks={initialRanks}
                                compact={true}
                            />
                        </div>
                    </div>
                    <div className="flex flex-col">
                        <FixtureList
                            matches={poolMatches}
                            overrides={overrides}
                            onScoreChange={handleScoreChange}
                            teamRanks={currentRanks}
                            totalTeams={poolTeams.length}
                            relegationSpots={0}
                        />
                    </div>
                </div>
            </div>

            {newAchievement && (
                <AchievementToast
                    achievement={newAchievement}
                    onClose={() => setNewAchievement(null)}
                />
            )}
            <AchievementsPanel
                isOpen={showAchievements}
                onClose={() => setShowAchievements(false)}
            />
        </main>
    );
}

```

## File: app\cev-cl\tahminoyunu\page.tsx
```
import { Suspense } from "react";
import { Metadata } from "next";
import { getLeagueData } from "../../utils/serverData";
import CEVCLCalculatorClient from "./CEVCLCalculatorClient";
import ErrorBoundary from "../../components/ErrorBoundary";
import { SkeletonPage } from "../../components/Skeleton";

export const metadata: Metadata = {
    title: "CEV Åampiyonlar Ligi Tahmin Oyunu",
    description: "CEV KadÄ±nlar Åampiyonlar Ligi maÃ§ sonuÃ§larÄ±nÄ± tahmin edin. Avrupa'nÄ±n en iyi takÄ±mlarÄ±nÄ±n maÃ§larÄ±nÄ± tahmin ederek puan kazanÄ±n.",
    openGraph: {
        title: "CEV Åampiyonlar Ligi Tahmin Oyunu | VolleySimulator",
        description: "Åampiyonlar Ligi maÃ§ sonuÃ§larÄ±nÄ± tahmin edin ve liderlik tablosunda yerinizi alÄ±n.",
    },
};

export default async function CEVCLTahminOyunuPage() {
    const { teams, fixture } = await getLeagueData("cev-cl");

    return (
        <ErrorBoundary>
            <Suspense fallback={<SkeletonPage />}>
                <CEVCLCalculatorClient
                    initialTeams={teams}
                    initialMatches={fixture}
                />
            </Suspense>
        </ErrorBoundary>
    );
}

```

## File: app\cev-cup\page.tsx
```
import { redirect } from "next/navigation";

export default function CEVCupPage() {
    redirect("/cev-cup/gunceldurum");
}

```

## File: app\cev-cup\anasayfa\page.tsx
```
"use client";

import Link from "next/link";
import { useEffect, useState } from "react";
import TeamAvatar from "@/app/components/TeamAvatar";

interface Match {
    id: number;
    round: string;
    leg?: number;
    date: string;
    homeTeam: string;
    awayTeam: string;
    homeScore: number | null;
    awayScore: number | null;
    setScores?: string;
    isPlayed: boolean;
}

interface Team {
    name: string;
    country: string;
}

interface CEVCupData {
    league: string;
    season: string;
    currentStage: string;
    teams: Team[];
    fixture: Match[];
}

const TURKISH_TEAMS = ["Galatasaray Daikin ISTANBUL", "THY ISTANBUL"];
const ROUND_LABELS: Record<string, string> = {
    "16th Finals": "Son 32",
    "8th Finals": "Son 16",
    "Play Off": "Play-Off",
    "4th Finals": "Ã‡eyrek Final",
    "Semi Finals": "YarÄ± Final",
    "Finals": "Final"
};

export default function CEVCupAnasayfa() {
    const [data, setData] = useState<CEVCupData | null>(null);
    const [loading, setLoading] = useState(true);

    useEffect(() => {
        fetch("/api/cev-cup")
            .then(res => res.json())
            .then(data => setData(data))
            .finally(() => setLoading(false));
    }, []);

    if (loading) {
        return (
            <div className="min-h-screen flex items-center justify-center">
                <div className="animate-spin w-8 h-8 border-4 border-amber-600 border-t-transparent rounded-full"></div>
            </div>
        );
    }

    if (!data) {
        return (
            <div className="min-h-screen flex items-center justify-center text-red-500">
                Veri yÃ¼klenemedi
            </div>
        );
    }

    const playedMatches = data.fixture.filter(m => m.isPlayed);
    const upcomingMatches = data.fixture.filter(m => !m.isPlayed).slice(0, 8);
    const turkishTeamMatches = data.fixture.filter(m =>
        TURKISH_TEAMS.includes(m.homeTeam) || TURKISH_TEAMS.includes(m.awayTeam)
    );

    // Get Turkish teams progress
    const getTurkishTeamStats = (teamName: string) => {
        const matches = data.fixture.filter(m => m.homeTeam === teamName || m.awayTeam === teamName);
        const played = matches.filter(m => m.isPlayed);
        let wins = 0;
        played.forEach(m => {
            if (m.homeTeam === teamName && (m.homeScore || 0) > (m.awayScore || 0)) wins++;
            if (m.awayTeam === teamName && (m.awayScore || 0) > (m.homeScore || 0)) wins++;
        });
        return { played: played.length, wins };
    };

    return (
        <div className="min-h-screen bg-slate-950">
            {/* Hero Header */}
            <div className="bg-gradient-to-br from-amber-600 via-orange-600 to-amber-800 px-4 py-4 relative overflow-hidden">
                <div className="relative max-w-4xl mx-auto">
                    <div className="flex items-center justify-between">
                        <div>
                            <h1 className="text-xl font-bold text-white mb-1">CEV Cup</h1>
                            <p className="text-white/70 text-sm">KadÄ±nlar â€¢ 2025-2026</p>
                        </div>
                        <div className="text-right">
                            <div className="text-3xl font-bold text-white">{playedMatches.length}</div>
                            <div className="text-xs text-white/60">Oynanan MaÃ§</div>
                        </div>
                    </div>
                </div>
            </div>

            <div className="max-w-4xl mx-auto px-4 mt-4 space-y-4 pb-6">
                {/* Current Stage Badge */}
                <div className="bg-amber-500/10 border border-amber-500/30 rounded-xl p-4 text-center">
                    <div className="text-xs text-amber-400/70 uppercase tracking-wider mb-1">Mevcut AÅŸama</div>
                    <div className="text-2xl font-bold text-amber-400">
                        {ROUND_LABELS[data.currentStage] || data.currentStage}
                    </div>
                </div>

                {/* Turkish Teams Overview */}
                <div className="bg-slate-900 border border-red-500/30 rounded-2xl overflow-hidden">
                    <div className="bg-red-900/20 px-4 py-3 border-b border-red-500/20">
                        <h3 className="font-bold text-white flex items-center gap-2">
                            <span>ğŸ‡¹ğŸ‡·</span> TÃ¼rk TakÄ±mlarÄ±
                        </h3>
                    </div>
                    <div className="divide-y divide-slate-800/50">
                        {TURKISH_TEAMS.map(teamName => {
                            const stats = getTurkishTeamStats(teamName);
                            const nextMatch = data.fixture.find(m =>
                                !m.isPlayed && (m.homeTeam === teamName || m.awayTeam === teamName)
                            );
                            const opponent = nextMatch ?
                                (nextMatch.homeTeam === teamName ? nextMatch.awayTeam : nextMatch.homeTeam) : null;

                            return (
                                <div key={teamName} className="px-4 py-3 flex items-center gap-3">
                                    <TeamAvatar name={teamName} size="sm" />
                                    <div className="flex-1">
                                        <div className="font-medium text-sm text-white">{teamName}</div>
                                        <div className="text-xs text-slate-500">
                                            {stats.wins}G / {stats.played}M
                                            {opponent && (
                                                <span className="text-amber-400 ml-2">
                                                    â†’ vs {opponent}
                                                </span>
                                            )}
                                        </div>
                                    </div>
                                    <div className="text-right">
                                        <div className="text-xs text-amber-400 font-bold">
                                            {ROUND_LABELS[data.currentStage]}
                                        </div>
                                    </div>
                                </div>
                            );
                        })}
                    </div>
                </div>

                {/* Recent Results */}
                <div className="bg-slate-900 border border-slate-800 rounded-2xl overflow-hidden">
                    <div className="bg-slate-800/50 px-4 py-3 border-b border-slate-800 flex justify-between items-center">
                        <h3 className="font-bold text-white flex items-center gap-2">
                            <span className="text-emerald-400">âœ“</span> Son SonuÃ§lar
                        </h3>
                    </div>
                    <div className="divide-y divide-slate-800/50 max-h-64 overflow-y-auto">
                        {playedMatches.slice(-6).reverse().map((match, i) => {
                            const hasTurkish = TURKISH_TEAMS.includes(match.homeTeam) || TURKISH_TEAMS.includes(match.awayTeam);
                            return (
                                <div key={match.id} className={`px-4 py-3 ${hasTurkish ? "bg-red-900/10" : ""}`}>
                                    <div className="flex items-center gap-2 mb-1">
                                        <div className="flex-1 text-right text-sm text-slate-300 truncate flex items-center justify-end gap-1">
                                            {match.homeTeam}
                                            {TURKISH_TEAMS.includes(match.homeTeam) && <span>ğŸ‡¹ğŸ‡·</span>}
                                        </div>
                                        <div className="px-2 py-0.5 rounded text-xs font-mono bg-emerald-500/20 text-emerald-400">
                                            {match.homeScore} - {match.awayScore}
                                        </div>
                                        <div className="flex-1 text-sm text-slate-300 truncate flex items-center gap-1">
                                            {TURKISH_TEAMS.includes(match.awayTeam) && <span>ğŸ‡¹ğŸ‡·</span>}
                                            {match.awayTeam}
                                        </div>
                                    </div>
                                    <div className="text-center text-[10px] text-slate-500">
                                        {ROUND_LABELS[match.round] || match.round} â€¢ {match.leg === 1 ? "1. MaÃ§" : "2. MaÃ§"}
                                    </div>
                                </div>
                            );
                        })}
                    </div>
                </div>

                {/* Upcoming Matches */}
                <div className="bg-slate-900 border border-slate-800 rounded-2xl overflow-hidden">
                    <div className="bg-slate-800/50 px-4 py-3 border-b border-slate-800">
                        <h3 className="font-bold text-white flex items-center gap-2">
                            <span className="text-amber-400">ğŸ“…</span> Gelecek MaÃ§lar
                        </h3>
                    </div>
                    <div className="divide-y divide-slate-800/50">
                        {upcomingMatches.map((match, i) => {
                            const hasTurkish = TURKISH_TEAMS.includes(match.homeTeam) || TURKISH_TEAMS.includes(match.awayTeam);
                            return (
                                <div key={match.id} className={`px-4 py-3 ${hasTurkish ? "bg-red-900/10" : ""}`}>
                                    <div className="flex items-center gap-2 mb-1">
                                        <div className="flex-1 text-right text-sm text-slate-300 truncate flex items-center justify-end gap-1">
                                            {match.homeTeam}
                                            {TURKISH_TEAMS.includes(match.homeTeam) && <span>ğŸ‡¹ğŸ‡·</span>}
                                        </div>
                                        <div className="px-2 py-0.5 rounded text-xs font-mono bg-slate-800 text-slate-500">
                                            vs
                                        </div>
                                        <div className="flex-1 text-sm text-slate-300 truncate flex items-center gap-1">
                                            {TURKISH_TEAMS.includes(match.awayTeam) && <span>ğŸ‡¹ğŸ‡·</span>}
                                            {match.awayTeam}
                                        </div>
                                    </div>
                                    <div className="text-center text-[10px] text-slate-500">
                                        {ROUND_LABELS[match.round] || match.round} â€¢ {match.date?.split('-').reverse().join('.')}
                                    </div>
                                </div>
                            );
                        })}
                    </div>
                </div>

                {/* Quick Links */}
                <div className="grid grid-cols-2 gap-3">
                    <Link
                        href="/cev-cup/gunceldurum"
                        className="bg-slate-900 border border-slate-800 rounded-xl p-4 hover:bg-slate-800 transition-colors group"
                    >
                        <div className="text-2xl mb-2">ğŸ“Š</div>
                        <div className="font-bold text-white text-sm group-hover:text-amber-400 transition-colors">GÃ¼ncel Durum</div>
                        <div className="text-xs text-slate-500">TÃ¼m eÅŸleÅŸmeleri gÃ¶r</div>
                    </Link>
                    <Link
                        href="/cev-cup/stats"
                        className="bg-slate-900 border border-slate-800 rounded-xl p-4 hover:bg-slate-800 transition-colors group"
                    >
                        <div className="text-2xl mb-2">ğŸ“ˆ</div>
                        <div className="font-bold text-white text-sm group-hover:text-amber-400 transition-colors">Ä°statistikler</div>
                        <div className="text-xs text-slate-500">TakÄ±m performanslarÄ±</div>
                    </Link>
                </div>
            </div>
        </div>
    );
}

```

## File: app\cev-cup\gunceldurum\CEVCupGuncelDurumClient.tsx
```
"use client";

import { useState, useMemo } from "react";

import TeamAvatar from "@/app/components/TeamAvatar";
import LeagueActionBar from "../../components/LeagueTemplate/LeagueActionBar";
import { LEAGUE_CONFIGS } from "../../components/LeagueTemplate/types";

interface CEVCupMatch {
    id: number;
    round: string;
    leg?: number;
    date: string;
    homeTeam: string;
    awayTeam: string;
    homeScore: number | null;
    awayScore: number | null;
    setScores?: string;
    isPlayed: boolean;
}

interface CEVCupTeam {
    name: string;
    country: string;
}

interface CEVCupData {
    league: string;
    season: string;
    currentStage: string;
    teams: CEVCupTeam[];
    fixture: CEVCupMatch[];
}

interface CEVCupGuncelDurumClientProps {
    initialData: CEVCupData;
}

const ROUNDS = ["16th Finals", "8th Finals", "Play Off", "4th Finals", "Semi Finals", "Finals"];
const ROUND_LABELS: Record<string, string> = {
    "16th Finals": "Son 32",
    "8th Finals": "Son 16",
    "Play Off": "Play-Off",
    "4th Finals": "Ã‡eyrek Final",
    "Semi Finals": "YarÄ± Final",
    "Finals": "Final"
};

const TURKISH_TEAMS = ["Galatasaray Daikin ISTANBUL", "THY ISTANBUL"];

export default function CEVCupGuncelDurumClient({ initialData }: CEVCupGuncelDurumClientProps) {
    const [activeRound, setActiveRound] = useState<string>(initialData.currentStage || "8th Finals");

    const availableRounds = useMemo(() => {
        const roundsInData = new Set(initialData.fixture.map(m => m.round));
        return ROUNDS.filter(r => roundsInData.has(r));
    }, [initialData.fixture]);

    const roundMatches = useMemo(() => {
        return initialData.fixture.filter(m => m.round === activeRound);
    }, [initialData.fixture, activeRound]);

    // Group matches by matchup (leg 1 and leg 2 together)
    const matchups = useMemo(() => {
        const grouped: Record<string, CEVCupMatch[]> = {};
        roundMatches.forEach(match => {
            const key = [match.homeTeam, match.awayTeam].sort().join(" vs ");
            if (!grouped[key]) grouped[key] = [];
            grouped[key].push(match);
        });
        return Object.values(grouped).map(matches => matches.sort((a, b) => (a.leg || 1) - (b.leg || 1)));
    }, [roundMatches]);

    const playedCount = roundMatches.filter(m => m.isPlayed).length;
    const totalCount = roundMatches.length;
    const completionRate = totalCount > 0 ? Math.round((playedCount / totalCount) * 100) : 0;

    const isTurkishTeam = (team: string) => TURKISH_TEAMS.includes(team);

    return (
        <main className="min-h-screen bg-slate-950 text-slate-100 p-0 sm:p-2 font-sans overflow-hidden">
            <div className="max-w-7xl mx-auto space-y-1 h-full flex flex-col">
                <div className="space-y-3 bg-slate-900/40 p-3 rounded-2xl border border-slate-800/60 backdrop-blur-sm animate-in fade-in slide-in-from-bottom-4 duration-300">
                    {/* Action Bar using LeagueTemplate */}
                    <LeagueActionBar
                        config={LEAGUE_CONFIGS['cev-cup']}
                        title={`${LEAGUE_CONFIGS['cev-cup'].name} - ${ROUND_LABELS[activeRound]}`}
                        subtitle="CEV Cup â€¢ GÃ¼ncel Durum"
                        selectorLabel="Tur"
                        selectorValue={activeRound}
                        selectorOptions={availableRounds.map(r => ({ label: ROUND_LABELS[r], value: r }))}
                        onSelectorChange={setActiveRound}
                        progress={completionRate}
                        progressLabel={`%${completionRate}`}
                    >
                        {/* Live Badge */}
                        <div className="px-3 h-8 bg-emerald-950/50 rounded-lg border border-emerald-800/50 flex items-center gap-2">
                            <div className="w-2 h-2 bg-emerald-500 rounded-full animate-pulse"></div>
                            <span className="text-[10px] font-bold text-emerald-400 uppercase hidden sm:inline">Otomatik GÃ¼ncelleme</span>
                            <span className="text-[10px] font-bold text-emerald-400 uppercase sm:hidden">CANLI</span>
                        </div>
                        <div className="bg-slate-950/50 px-3 py-1.5 rounded-lg border border-slate-800 text-center flex flex-col justify-center">
                            <div className="text-[9px] font-bold text-slate-500 uppercase leading-none mb-0.5">Format</div>
                            <div className="text-xs font-bold text-white leading-none">Eleme (Ä°Ã§-DÄ±ÅŸ)</div>
                        </div>
                        <div className="px-3 py-1.5 bg-amber-950/50 rounded-lg border border-amber-800/50 flex items-center gap-2">
                            <div className="w-2 h-2 bg-amber-500 rounded-full animate-pulse"></div>
                            <span className="text-[10px] font-bold text-amber-400 uppercase">{matchups.length} EÅŸleÅŸme</span>
                        </div>
                    </LeagueActionBar>

                    {/* Matchups Grid */}
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
                        {matchups.map((matchup, idx) => {
                            const team1 = matchup[0]?.homeTeam;
                            const team2 = matchup[0]?.awayTeam;

                            // Calculate aggregate score
                            let team1Total = 0;
                            let team2Total = 0;
                            let allPlayed = true;

                            matchup.forEach(m => {
                                if (m.isPlayed && m.homeScore !== null && m.awayScore !== null) {
                                    if (m.homeTeam === team1) {
                                        team1Total += m.homeScore;
                                        team2Total += m.awayScore;
                                    } else {
                                        team1Total += m.awayScore;
                                        team2Total += m.homeScore;
                                    }
                                } else {
                                    allPlayed = false;
                                }
                            });

                            const hasTurkish = isTurkishTeam(team1) || isTurkishTeam(team2);

                            return (
                                <div
                                    key={idx}
                                    className={`bg-slate-950/60 rounded-xl border p-3 space-y-2 ${hasTurkish ? 'border-amber-700/50 ring-1 ring-amber-500/20' : 'border-slate-800/50'
                                        }`}
                                >
                                    {/* Matchup Header */}
                                    <div className="flex items-center justify-between">
                                        <div className="flex items-center gap-2 flex-1 overflow-hidden">
                                            <TeamAvatar name={team1} size="sm" />
                                            <div className="overflow-hidden">
                                                <span className="text-sm font-bold text-slate-200 truncate block">
                                                    {team1}
                                                    {isTurkishTeam(team1) && <span className="ml-1">ğŸ‡¹ğŸ‡·</span>}
                                                </span>
                                            </div>
                                        </div>
                                        <div className="px-3 flex flex-col items-center shrink-0">
                                            {allPlayed ? (
                                                <div className="flex items-center gap-1">
                                                    <span className={`text-lg font-black ${team1Total > team2Total ? 'text-green-400' : 'text-slate-400'}`}>
                                                        {team1Total}
                                                    </span>
                                                    <span className="text-slate-600">-</span>
                                                    <span className={`text-lg font-black ${team2Total > team1Total ? 'text-green-400' : 'text-slate-400'}`}>
                                                        {team2Total}
                                                    </span>
                                                </div>
                                            ) : (
                                                <span className="text-xs font-bold text-slate-600 bg-slate-900 px-2 py-1 rounded">VS</span>
                                            )}
                                            <span className="text-[9px] text-slate-500 uppercase">Toplam</span>
                                        </div>
                                        <div className="flex items-center gap-2 flex-1 justify-end overflow-hidden">
                                            <div className="overflow-hidden text-right">
                                                <span className="text-sm font-bold text-slate-200 truncate block">
                                                    {isTurkishTeam(team2) && <span className="mr-1">ğŸ‡¹ğŸ‡·</span>}
                                                    {team2}
                                                </span>
                                            </div>
                                            <TeamAvatar name={team2} size="sm" />
                                        </div>
                                    </div>

                                    {/* Individual Legs */}
                                    <div className="space-y-1.5 pt-1 border-t border-slate-800/50">
                                        {matchup.map((match, mIdx) => (
                                            <div key={match.id} className="flex items-center justify-between text-xs bg-slate-900/50 rounded-lg px-2 py-1.5">
                                                <div className="flex items-center gap-2">
                                                    <span className="text-[10px] font-bold text-slate-500 bg-slate-800 px-1.5 py-0.5 rounded">
                                                        {match.leg === 1 ? "1. MaÃ§" : "2. MaÃ§"}
                                                    </span>
                                                    <span className="text-[10px] text-slate-500">
                                                        {match.date?.split('-').reverse().join('.')}
                                                    </span>
                                                </div>
                                                <div className="flex items-center gap-1">
                                                    <span className="text-slate-400 text-[10px] truncate max-w-[60px]">{match.homeTeam.split(' ')[0]}</span>
                                                    {match.isPlayed ? (
                                                        <span className="font-bold text-white px-2">
                                                            {match.homeScore} - {match.awayScore}
                                                        </span>
                                                    ) : (
                                                        <span className="text-slate-600 px-2">-</span>
                                                    )}
                                                    <span className="text-slate-400 text-[10px] truncate max-w-[60px]">{match.awayTeam.split(' ')[0]}</span>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            );
                        })}
                    </div>

                    {matchups.length === 0 && (
                        <div className="flex flex-col items-center justify-center py-12 text-slate-500">
                            <span className="text-4xl mb-2">ğŸ</span>
                            <p className="text-sm">Bu tur iÃ§in henÃ¼z maÃ§ planlanmadÄ±.</p>
                        </div>
                    )}
                </div>
            </div>
        </main>
    );
}

```

## File: app\cev-cup\gunceldurum\page.tsx
```
import fs from 'fs';
import path from 'path';
import { Metadata } from "next";
import CEVCupGuncelDurumClient from './CEVCupGuncelDurumClient';

export const metadata: Metadata = {
    title: "CEV Cup GÃ¼ncel Durum",
    description: "CEV KadÄ±nlar KupasÄ± puan durumu, tur sÄ±ralamalarÄ± ve maÃ§ sonuÃ§larÄ±. Avrupa kupasÄ± gÃ¼ncel tablo.",
    openGraph: {
        title: "CEV Cup GÃ¼ncel Durum | VolleySimulator",
        description: "CEV Cup tur sÄ±ralamalarÄ± ve maÃ§ sonuÃ§larÄ±.",
    },
};

interface CEVCupMatch {
    id: number;
    round: string;
    leg?: number;
    date: string;
    homeTeam: string;
    awayTeam: string;
    homeScore: number | null;
    awayScore: number | null;
    setScores?: string;
    isPlayed: boolean;
}

interface CEVCupTeam {
    name: string;
    country: string;
}

interface CEVCupData {
    league: string;
    season: string;
    currentStage: string;
    teams: CEVCupTeam[];
    fixture: CEVCupMatch[];
}

export default async function CEVCupGuncelDurumPage() {
    const dataPath = path.join(process.cwd(), 'data', 'cev-cup-data.json');
    let data: CEVCupData | null = null;

    try {
        const jsonData = fs.readFileSync(dataPath, 'utf-8');
        data = JSON.parse(jsonData);
    } catch (error) {
        console.error('Error reading CEV Cup data:', error);
    }

    if (!data) {
        return (
            <main className="min-h-screen bg-slate-950 text-slate-100 p-4 flex items-center justify-center">
                <div className="text-center">
                    <h1 className="text-2xl font-bold text-red-500">Veri YÃ¼klenemedi</h1>
                    <p className="text-slate-400 mt-2">CEV Cup verileri yÃ¼klenirken bir hata oluÅŸtu.</p>
                </div>
            </main>
        );
    }

    return (
        <CEVCupGuncelDurumClient
            initialData={data}
        />
    );
}

```

## File: app\cev-cup\playoffs\CEVCupPlayoffsClient.tsx
```
"use client";

import { useEffect, useState } from "react";
import TeamAvatar from "../../components/TeamAvatar";
import { SCORES } from "../../utils/calculatorUtils";

interface Match {
    id: number;
    round: string;
    leg?: number;
    date: string;
    homeTeam: string;
    awayTeam: string;
    homeScore: number | null;
    awayScore: number | null;
    isPlayed: boolean;
    setScores?: string;
}

interface CEVCupData {
    league: string;
    season: string;
    currentStage: string;
    teams: string[];
    fixture: Match[];
}

const ROUND_LABELS: Record<string, string> = {
    "16th Finals": "Son 32 Turu",
    "8th Finals": "Son 16 Turu",
    "Play Off": "Play-Off Turu",
    "4th Finals": "Ã‡eyrek Final",
    "Semi Finals": "YarÄ± Final",
    "Finals": "Final"
};

const TURKISH_TEAMS = ["Galatasaray Daikin ISTANBUL", "THY ISTANBUL", "Kuzeyboru AKSARAY"];

export default function CEVCupPlayoffsClient({ initialData }: { initialData: CEVCupData }) {
    const [overrides, setOverrides] = useState<Record<string, string>>(() => {
        try {
            const saved = localStorage.getItem('cevCupPredictions');
            return saved ? JSON.parse(saved) : {};
        } catch (e) {
            console.error(e);
            return {};
        }
    });
    // Save predictions
    useEffect(() => {
        localStorage.setItem('cevCupPredictions', JSON.stringify(overrides));
    }, [overrides]);

    const handleScoreChange = (matchId: number, score: string) => {
        setOverrides(prev => {
            const next = { ...prev };
            if (score) next[`match-${matchId}`] = score;
            else delete next[`match-${matchId}`];
            return next;
        });
    };

    const handlePredictAll = () => {
        const newOverrides = { ...overrides };
        const possibleScores = ['3-0', '3-1', '3-2', '2-3', '1-3', '0-3'];
        let changed = false;

        initialData.fixture.forEach(m => {
            if (!m.isPlayed && !newOverrides[`match-${m.id}`]) {
                const randomScore = possibleScores[Math.floor(Math.random() * possibleScores.length)];
                newOverrides[`match-${m.id}`] = randomScore;
                changed = true;
            }
        });

        if (changed) setOverrides(newOverrides);
    };

    // Group matches by matchup (leg 1 + leg 2)
    const getMatchups = (round: string) => {
        const roundMatches = initialData.fixture.filter(m => m.round === round);
        const grouped: Record<string, Match[]> = {};

        roundMatches.forEach(match => {
            const key = [match.homeTeam, match.awayTeam].sort().join(" vs ");
            if (!grouped[key]) grouped[key] = [];
            grouped[key].push(match);
        });

        return Object.values(grouped).map(matches => {
            const sorted = matches.sort((a, b) => (a.leg || 1) - (b.leg || 1));
            const leg1 = sorted[0];
            const leg2 = sorted[1];

            // Determine team1 and team2 based on leg 1 (Team 1 = Home of Leg 1 usually)
            // But strict alphabetical sort earlier might confuse.
            // Let's stick to Leg 1 Home as Team A vs Leg 1 Away as Team B for visual consistency
            const team1 = leg1.homeTeam;
            const team2 = leg1.awayTeam;

            // Calculate aggregate
            let team1Points = 0;
            let team2Points = 0;
            let allPlayedOrPredicted = true;

            const processMatch = (m: Match) => {
                const isPlayed = m.isPlayed && m.homeScore !== null && m.awayScore !== null;
                const pred = overrides[`match-${m.id}`];
                let hScore = 0, aScore = 0;

                if (isPlayed) {
                    hScore = m.homeScore!;
                    aScore = m.awayScore!;
                } else if (pred) {
                    [hScore, aScore] = pred.split('-').map(Number);
                } else {
                    allPlayedOrPredicted = false;
                    return;
                }

                // Points Calculation logic (3-0/3-1 = 3pts, 3-2 = 2pts)
                let hPts = 0, aPts = 0;
                if (hScore === 3) {
                    if (aScore <= 1) { hPts = 3; aPts = 0; }
                    else { hPts = 2; aPts = 1; }
                } else {
                    if (hScore <= 1) { hPts = 0; aPts = 3; }
                    else { hPts = 1; aPts = 2; }
                }

                if (m.homeTeam === team1) {
                    team1Points += hPts;
                    team2Points += aPts;
                } else {
                    team1Points += aPts;
                    team2Points += hPts;
                }
            };

            if (leg1) processMatch(leg1);
            if (leg2) processMatch(leg2);

            let winner = null;
            let goldenSetNeeded = false;

            if (allPlayedOrPredicted) {
                if (team1Points > team2Points) winner = team1;
                else if (team2Points > team1Points) winner = team2;
                else goldenSetNeeded = true;
            }

            // Golden Set Override?
            // Since we don't have a specific match ID for golden set in fixture usually,
            // we simulate it or check if fixture has a "Leg 3" or golden set entry? 
            // Data usually doesn't have it. We'll use a virtual ID: "golden-{leg1.id}"
            const goldenKey = `golden-${leg1.id}`;
            const goldenPred = overrides[goldenKey];

            if (goldenSetNeeded) {
                if (goldenPred === 'team1') winner = team1;
                else if (goldenPred === 'team2') winner = team2;
            }

            return { matches: sorted, team1, team2, team1Points, team2Points, allPlayedOrPredicted, winner, goldenSetNeeded, goldenKey, goldenPred };
        });
    };

    const rounds = ["16th Finals", "8th Finals", "Play Off", "4th Finals", "Semi Finals", "Finals"];
    const availableRounds = rounds.filter(r => initialData.fixture.some(m => m.round === r));

    // Render a single inputs row
    const renderScoreInput = (match: Match) => {
        const isPlayed = match.isPlayed && match.homeScore !== null;
        const pred = overrides[`match-${match.id}`];

        if (isPlayed) {
            return (
                <span className="font-mono font-bold text-slate-300 bg-slate-900 px-2 py-1 rounded border border-slate-700">
                    {match.homeScore}-{match.awayScore}
                </span>
            );
        }

        return (
            <select
                aria-label={`Match ${match.id} score prediction`}
                value={pred || ''}
                onChange={(e) => handleScoreChange(match.id, e.target.value)}
                className={`bg-slate-900 border text-xs rounded px-1 py-1 font-mono w-16 text-center appearance-none cursor-pointer hover:bg-slate-800 focus:ring-2 focus:ring-blue-500 outline-none transition-all ${pred ? 'border-blue-500 text-white' : 'border-slate-700 text-slate-500'}`}
            >
                <option value="">v</option>
                {SCORES.map(s => <option key={s} value={s}>{s}</option>)}
            </select>
        );
    };

    const renderBracketCard = (round: string) => {
        const matchups = getMatchups(round);
        if (matchups.length === 0) return null;

        return (
            <div className="bg-slate-900/60 border border-slate-800 rounded-xl p-4 animate-in fade-in slide-in-from-bottom-4 duration-500" key={round}>
                <h3 className="text-lg font-bold text-amber-400 mb-4 flex items-center gap-2">
                    <span className="w-3 h-3 rounded-full bg-amber-500"></span>
                    {ROUND_LABELS[round] || round}
                    <span className="text-xs text-slate-500 ml-auto bg-slate-900 px-2 py-1 rounded border border-slate-800">{matchups.length} EÅŸleÅŸme</span>
                </h3>

                <div className="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4">
                    {matchups.map((matchup, idx) => {
                        const hasTurkish = TURKISH_TEAMS.includes(matchup.team1) || TURKISH_TEAMS.includes(matchup.team2);
                        const leg1 = matchup.matches[0];
                        const leg2 = matchup.matches[1];

                        return (
                            <div
                                key={idx}
                                className={`relative bg-slate-950/80 rounded-xl border overflow-hidden group ${hasTurkish ? 'border-amber-600/40' : 'border-slate-800'}`}
                            >
                                {/* Status Header / Golden Set Indicator */}
                                {(matchup.winner || matchup.goldenSetNeeded) && (
                                    <div className={`text-[10px] uppercase font-bold text-center py-1 ${matchup.winner ? 'bg-emerald-900/20 text-emerald-400 border-b border-emerald-500/20' : 'bg-amber-900/20 text-amber-400 border-b border-amber-500/20'
                                        }`}>
                                        {matchup.winner ? `Tur AtladÄ±: ${matchup.winner}` : 'ALTIN SET GEREKLÄ°'}
                                    </div>
                                )}

                                {/* Match Content */}
                                <div className="p-3 space-y-3">
                                    {/* Team 1 Row */}
                                    <div className={`flex items-center justify-between gap-3 p-2 rounded-lg transition-colors ${matchup.winner === matchup.team1 ? 'bg-emerald-900/20 border border-emerald-500/20' : 'bg-slate-900/40 border border-transparent'}`}>
                                        <div className="flex items-center gap-3 flex-1 min-w-0">
                                            <TeamAvatar name={matchup.team1} size="sm" />
                                            <div className="flex flex-col min-w-0">
                                                <span className={`text-xs font-bold truncate ${matchup.winner === matchup.team1 ? 'text-emerald-400' : 'text-slate-200'}`}>
                                                    {matchup.team1}
                                                </span>
                                                {TURKISH_TEAMS.includes(matchup.team1) && <span className="text-[9px] text-amber-500 font-bold tracking-wider">TEMSÄ°LCÄ°MÄ°Z</span>}
                                            </div>
                                        </div>
                                    </div>

                                    {/* Middle Section: Scores */}
                                    <div className="flex flex-col gap-2 bg-slate-900/30 rounded p-2 border border-slate-800/50">
                                        {/* Leg 1 */}
                                        <div className="flex items-center justify-center gap-3 text-xs">
                                            <span className="text-slate-500 w-8 text-right">MaÃ§ 1</span>
                                            {renderScoreInput(leg1)}
                                            <span className="text-slate-600 text-[10px] w-24 text-center truncate opacity-50">{leg1.date}</span>
                                        </div>

                                        {/* Leg 2 */}
                                        {leg2 && (
                                            <div className="flex items-center justify-center gap-3 text-xs">
                                                <span className="text-slate-500 w-8 text-right">MaÃ§ 2</span>
                                                {/* Leg 2 usually has swapped home/away relative to Team1/Team2, logic handled inside renderScoreInput by match ID */}
                                                {renderScoreInput(leg2)}
                                                <span className="text-slate-600 text-[10px] w-24 text-center truncate opacity-50">{leg2.date}</span>
                                            </div>
                                        )}

                                        {/* Golden Set Selection */}
                                        {matchup.goldenSetNeeded && (
                                            <div className="flex items-center justify-center gap-2 mt-1 animate-pulse">
                                                <span className="text-amber-500 font-bold text-[10px]">ALTIN SET:</span>
                                                <div className="flex gap-1">
                                                    <button
                                                        type="button"
                                                        title={`Golden set winner: ${matchup.team1}`}
                                                        onClick={() => setOverrides(prev => ({ ...prev, [matchup.goldenKey]: 'team1' }))}
                                                        className={`px-2 py-0.5 text-[9px] rounded border ${matchup.goldenPred === 'team1' ? 'bg-amber-500 text-slate-900 border-amber-500' : 'bg-slate-800 text-slate-400 border-slate-600'}`}
                                                    >
                                                        {matchup.team1.substring(0, 3)}
                                                    </button>
                                                    <button
                                                        type="button"
                                                        title={`Golden set winner: ${matchup.team2}`}
                                                        onClick={() => setOverrides(prev => ({ ...prev, [matchup.goldenKey]: 'team2' }))}
                                                        className={`px-2 py-0.5 text-[9px] rounded border ${matchup.goldenPred === 'team2' ? 'bg-amber-500 text-slate-900 border-amber-500' : 'bg-slate-800 text-slate-400 border-slate-600'}`}
                                                    >
                                                        {matchup.team2.substring(0, 3)}
                                                    </button>
                                                </div>
                                            </div>
                                        )}
                                    </div>

                                    {/* Team 2 Row */}
                                    <div className={`flex items-center justify-between gap-3 p-2 rounded-lg transition-colors ${matchup.winner === matchup.team2 ? 'bg-emerald-900/20 border border-emerald-500/20' : 'bg-slate-900/40 border border-transparent'}`}>
                                        <div className="flex items-center gap-3 flex-1 min-w-0 flex-row-reverse text-right">
                                            <TeamAvatar name={matchup.team2} size="sm" />
                                            <div className="flex flex-col min-w-0 items-end">
                                                <span className={`text-xs font-bold truncate ${matchup.winner === matchup.team2 ? 'text-emerald-400' : 'text-slate-200'}`}>
                                                    {matchup.team2}
                                                </span>
                                                {TURKISH_TEAMS.includes(matchup.team2) && <span className="text-[9px] text-amber-500 font-bold tracking-wider">TEMSÄ°LCÄ°MÄ°Z</span>}
                                            </div>
                                        </div>
                                    </div>


                                </div>
                            </div>
                        );
                    })}
                </div>
            </div>
        );
    };

    const totalMatches = initialData.fixture.length;
    const completedMatches = initialData.fixture.filter(m => m.isPlayed || overrides[`match-${m.id}`]).length;
    const progress = Math.round((completedMatches / totalMatches) * 100) || 0;

    return (
        <main className="min-h-screen bg-slate-950 text-slate-100 p-4 md:p-8 font-sans">
            <div className="max-w-7xl mx-auto space-y-6">
                <div className="flex items-center justify-between">
                    <div className="flex flex-col gap-1">
                        <h1 className="font-bold text-white text-lg tracking-tight leading-none hidden sm:block">{initialData.league || 'CEV Cup'}</h1>
                        <p className="text-[10px] text-slate-400 hidden sm:block">Eleme Tablosu {initialData.season}</p>
                    </div>

                    <button
                        onClick={handlePredictAll}
                        className="px-4 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white font-bold rounded-lg shadow-lg shadow-blue-600/20 transition-all flex items-center gap-2 text-xs"
                    >
                        <span>ğŸ²</span>
                        <span>TÃ¼mÃ¼nÃ¼ Tahmin Et</span>
                    </button>
                </div>

                {/* Info Banner */}
                {progress < 100 && (
                    <div className="bg-slate-900 border border-slate-800 p-4 rounded-xl flex items-center justify-between gap-4">
                        <div className="flex flex-col gap-1">
                            <span className="text-xs font-bold text-slate-300">Ä°lerleme Durumu</span>
                            <div className="w-32 sm:w-64 h-2 bg-slate-800 rounded-full overflow-hidden">
                                <div
                                    className="h-full bg-gradient-to-r from-blue-500 to-emerald-500 transition-all duration-500"
                                    style={{ width: `${progress}%` }}
                                ></div>
                            </div>
                        </div>
                        <div className="text-right">
                            <div className="text-lg font-black text-white">{completedMatches}/{totalMatches}</div>
                            <div className="text-[10px] text-slate-500 uppercase font-bold">MaÃ§ Tahmin Edildi</div>
                        </div>
                    </div>
                )}

                {/* Bracket by Rounds */}
                <div className="space-y-8">
                    {availableRounds.map(round => renderBracketCard(round))}
                </div>

                {/* Tournament Flow / Legend */}
                <div className="bg-slate-900/60 border border-slate-800 rounded-xl p-6 mt-8">
                    <div className="grid grid-cols-2 md:grid-cols-4 gap-4 text-xs text-center">
                        <div className="p-2 border border-slate-800 rounded flex flex-col items-center gap-1">
                            <span className="w-2 h-2 rounded-full bg-emerald-500"></span>
                            <span className="text-slate-400">Tur Atlayan</span>
                        </div>
                        <div className="p-2 border border-slate-800 rounded flex flex-col items-center gap-1">
                            <span className="w-2 h-2 rounded-full bg-amber-500"></span>
                            <span className="text-slate-400">AltÄ±n Set/Temsilcimiz</span>
                        </div>
                        <div className="p-2 border border-slate-800 rounded flex flex-col items-center gap-1">
                            <span className="border border-blue-500 text-blue-500 px-1 rounded text-[10px]">3-0</span>
                            <span className="text-slate-400">Tahmin Edilen Skor</span>
                        </div>
                        <div className="p-2 border border-slate-800 rounded flex flex-col items-center gap-1">
                            <span className="bg-slate-900 text-slate-300 border border-slate-700 px-1 rounded text-[10px]">3-0</span>
                            <span className="text-slate-400">Resmi SonuÃ§</span>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    );
}

```

## File: app\cev-cup\playoffs\page.tsx
```
import fs from 'fs';
import path from 'path';
import { Metadata } from "next";
import CEVCupPlayoffsClient from './CEVCupPlayoffsClient';

export const metadata: Metadata = {
    title: "CEV Cup Playoff SimÃ¼lasyonu",
    description: "CEV KadÄ±nlar KupasÄ± playoff simÃ¼lasyonu. Eleme turlarÄ±nÄ± simÃ¼le edin.",
    openGraph: {
        title: "CEV Cup Playoff SimÃ¼lasyonu | VolleySimulator",
        description: "CEV Cup playoff eÅŸleÅŸmelerini simÃ¼le edin.",
    },
};

export default async function CEVCupPlayoffsPage() {
    const dataPath = path.join(process.cwd(), 'data', 'cev-cup-data.json');
    let data = null;

    try {
        const jsonData = fs.readFileSync(dataPath, 'utf-8');
        data = JSON.parse(jsonData);
    } catch (error) {
        console.error('Error reading CEV Cup data:', error);
    }

    if (!data) {
        return (
            <main className="min-h-screen bg-slate-950 text-slate-100 p-4 flex items-center justify-center">
                <div className="text-center">
                    <h1 className="text-2xl font-bold text-red-500">Veri YÃ¼klenemedi</h1>
                    <p className="text-slate-400 mt-2">CEV Cup verileri yÃ¼klenirken bir hata oluÅŸtu.</p>
                </div>
            </main>
        );
    }

    return (
        <CEVCupPlayoffsClient initialData={data} />
    );
}

```

## File: app\cev-cup\stats\CEVCupStatsClient.tsx
```
"use client";

import { useMemo } from "react";

import TeamAvatar from "@/app/components/TeamAvatar";

interface Team {
    name: string;
    country: string;
}

interface Match {
    id: number;
    round: string;
    homeTeam: string;
    awayTeam: string;
    homeScore: number | null;
    awayScore: number | null;
    isPlayed: boolean;
}

interface CEVCupStatsClientProps {
    teams: Team[];
    fixture: Match[];
}

interface TeamStats {
    name: string;
    country: string;
    played: number;
    wins: number;
    losses: number;
    setsWon: number;
    setsLost: number;
    winRate: number;
}

export default function CEVCupStatsClient({ teams, fixture }: CEVCupStatsClientProps) {
    const teamsWithStats = useMemo(() => {
        const statsMap = new Map<string, TeamStats>();

        // Initialize all teams
        teams.forEach(team => {
            statsMap.set(team.name, {
                name: team.name,
                country: team.country,
                played: 0,
                wins: 0,
                losses: 0,
                setsWon: 0,
                setsLost: 0,
                winRate: 0
            });
        });

        // Calculate stats from matches
        fixture.filter(m => m.isPlayed).forEach(match => {
            const homeStats = statsMap.get(match.homeTeam);
            const awayStats = statsMap.get(match.awayTeam);

            if (homeStats && match.homeScore !== null && match.awayScore !== null) {
                homeStats.played++;
                homeStats.setsWon += match.homeScore;
                homeStats.setsLost += match.awayScore;
                if (match.homeScore > match.awayScore) {
                    homeStats.wins++;
                } else {
                    homeStats.losses++;
                }
            }

            if (awayStats && match.homeScore !== null && match.awayScore !== null) {
                awayStats.played++;
                awayStats.setsWon += match.awayScore;
                awayStats.setsLost += match.homeScore;
                if (match.awayScore > match.homeScore) {
                    awayStats.wins++;
                } else {
                    awayStats.losses++;
                }
            }
        });

        // Calculate win rates
        statsMap.forEach(stats => {
            stats.winRate = stats.played > 0 ? Math.round((stats.wins / stats.played) * 100) : 0;
        });

        return Array.from(statsMap.values()).filter(t => t.played > 0);
    }, [teams, fixture]);

    const totalMatches = useMemo(() => fixture.filter(m => m.isPlayed).length, [fixture]);
    const totalSets = useMemo(() => teamsWithStats.reduce((sum, t) => sum + t.setsWon, 0), [teamsWithStats]);

    const mostWins = useMemo(() => [...teamsWithStats].sort((a, b) => b.wins - a.wins).slice(0, 5), [teamsWithStats]);
    const mostSets = useMemo(() => [...teamsWithStats].sort((a, b) => b.setsWon - a.setsWon).slice(0, 5), [teamsWithStats]);
    const bestWinRate = useMemo(() => [...teamsWithStats].filter(t => t.played >= 2).sort((a, b) => b.winRate - a.winRate).slice(0, 5), [teamsWithStats]);
    const leastLosses = useMemo(() => [...teamsWithStats].sort((a, b) => a.losses - b.losses || b.wins - a.wins).slice(0, 5), [teamsWithStats]);

    return (
        <main className="min-h-screen bg-slate-950 text-slate-100 p-2 sm:p-4 font-sans">
            <div className="max-w-7xl mx-auto space-y-4 sm:space-y-6">
                <div className="flex flex-col gap-1 px-1">
                    <h1 className="font-bold text-white text-lg tracking-tight leading-none hidden sm:block">CEV Cup Ä°statistikleri</h1>
                    <p className="text-[10px] text-slate-400 hidden sm:block">KadÄ±nlar â€¢ 2025-2026</p>
                </div>

                <div className="grid grid-cols-3 gap-2 sm:gap-4">
                    <div className="bg-gradient-to-br from-amber-600/20 to-amber-900/10 rounded-xl sm:rounded-2xl p-3 sm:p-4 border border-amber-600/30 text-center">
                        <div className="text-2xl sm:text-4xl font-bold text-amber-400">{totalMatches}</div>
                        <div className="text-[10px] sm:text-xs text-amber-400/70 uppercase tracking-wider mt-1">Oynanan MaÃ§</div>
                    </div>
                    <div className="bg-gradient-to-br from-emerald-600/20 to-emerald-900/10 rounded-xl sm:rounded-2xl p-3 sm:p-4 border border-emerald-600/30 text-center">
                        <div className="text-2xl sm:text-4xl font-bold text-emerald-400">{totalSets}</div>
                        <div className="text-[10px] sm:text-xs text-emerald-400/70 uppercase tracking-wider mt-1">Toplam Set</div>
                    </div>
                    <div className="bg-gradient-to-br from-purple-600/20 to-purple-900/10 rounded-xl sm:rounded-2xl p-3 sm:p-4 border border-purple-600/30 text-center">
                        <div className="text-2xl sm:text-4xl font-bold text-purple-400">{teamsWithStats.length}</div>
                        <div className="text-[10px] sm:text-xs text-purple-400/70 uppercase tracking-wider mt-1">Aktif TakÄ±m</div>
                    </div>
                </div>

                <div className="grid sm:grid-cols-2 gap-3 sm:gap-4 pb-8">
                    <StatCard
                        title="En Ã‡ok Galibiyet"
                        icon="ğŸ†"
                        teamStats={mostWins}
                        statKey="wins"
                        color="bg-amber-500"
                        gradient="bg-gradient-to-r from-amber-600 to-orange-600"
                        suffix="G"
                    />
                    <StatCard
                        title="En YÃ¼ksek Galibiyet %"
                        icon="ğŸ“ˆ"
                        teamStats={bestWinRate}
                        statKey="winRate"
                        color="bg-teal-500"
                        gradient="bg-gradient-to-r from-teal-600 to-cyan-600"
                        suffix="%"
                    />
                    <StatCard
                        title="En Ã‡ok Set Alan"
                        icon="ğŸ"
                        teamStats={mostSets}
                        statKey="setsWon"
                        color="bg-purple-500"
                        gradient="bg-gradient-to-r from-purple-600 to-pink-600"
                    />
                    <StatCard
                        title="En Az MaÄŸlubiyet"
                        icon="ğŸ›¡ï¸"
                        teamStats={leastLosses}
                        statKey="losses"
                        color="bg-emerald-500"
                        gradient="bg-gradient-to-r from-emerald-600 to-green-600"
                        suffix="M"
                    />
                </div>
            </div>
        </main>
    );
}

const StatCard = ({ title, icon, teamStats, statKey, color, gradient, suffix = "" }: {
    title: string; icon: string;
    teamStats: TeamStats[];
    statKey: 'losses' | 'wins' | 'setsWon' | 'setsLost' | 'winRate';
    color: string;
    gradient: string;
    suffix?: string;
}) => {
    const maxValue = Math.max(...teamStats.map(t => Number(t[statKey])), 1);

    return (
        <div className="bg-slate-950/50 backdrop-blur-md rounded-xl border border-slate-800/60 overflow-hidden hover:border-slate-700/80 transition-all duration-300 group shadow-md hover:shadow-lg">
            <div className={`${gradient} px-2.5 py-2 border-b border-white/10 relative overflow-hidden`}>
                <div className="absolute inset-0 bg-white/5 opacity-0 group-hover:opacity-100 transition-opacity"></div>
                <div className="flex items-center justify-between relative z-10">
                    <h3 className="font-bold text-white text-[11px] uppercase tracking-wider flex items-center gap-1.5">
                        <span className="text-sm">{icon}</span> {title}
                    </h3>
                    <span className="text-[9px] font-bold text-white/70 bg-black/20 px-1.5 py-0.5 rounded-full border border-white/10">TOP 5</span>
                </div>
            </div>

            <div className="p-1.5 space-y-1">
                {teamStats.map((t, idx) => (
                    <div
                        key={t.name}
                        className={`flex items-center gap-2 p-1.5 rounded-lg transition-all ${idx === 0 ? 'bg-gradient-to-r from-white/5 to-transparent border border-white/10' : 'hover:bg-white/5'
                            }`}
                    >
                        <div className={`w-5 h-5 rounded flex items-center justify-center font-bold text-[10px] shadow-sm ${idx === 0 ? 'bg-amber-400 text-amber-950' :
                            idx === 1 ? 'bg-slate-300 text-slate-800' :
                                idx === 2 ? 'bg-amber-700 text-amber-100' :
                                    'bg-slate-800 text-slate-500'
                            }`}>
                            {idx + 1}
                        </div>
                        <TeamAvatar name={t.name} size="xs" />

                        <div className="flex-1 min-w-0">
                            <span className={`text-[11px] font-bold truncate block ${idx === 0 ? 'text-white' : 'text-slate-300'}`} title={t.name}>
                                {t.name}
                            </span>
                        </div>

                        <div className="flex items-center gap-1.5 w-16 justify-end">
                            <div className="h-1 bg-slate-800/50 rounded-full overflow-hidden flex-1 max-w-[30px]">
                                <div className={`h-full ${color} opacity-80`} style={{ '--stat-width': `${Math.min((Number(t[statKey]) / maxValue) * 100, 100)}%`, width: 'var(--stat-width)' } as any}></div>
                            </div>
                            <span className={`text-[11px] font-bold min-w-[24px] text-right ${idx === 0 ? 'text-white' : 'text-slate-400'}`}>
                                {t[statKey]}{suffix}
                            </span>
                        </div>
                    </div>
                ))}
            </div>
        </div>
    );
};

```

## File: app\cev-cup\stats\page.tsx
```
import fs from 'fs';
import path from 'path';
import { Metadata } from "next";
import CEVCupStatsClient from './CEVCupStatsClient';

export const metadata: Metadata = {
    title: "CEV Cup Ä°statistikler",
    description: "CEV KadÄ±nlar KupasÄ± takÄ±m istatistikleri ve performans analizleri.",
    openGraph: {
        title: "CEV Cup Ä°statistikler | VolleySimulator",
        description: "CEV Cup takÄ±m istatistikleri.",
    },
};

export default async function CEVCupStatsPage() {
    const dataPath = path.join(process.cwd(), 'data', 'cev-cup-data.json');
    let teams: any[] = [];
    let fixture: any[] = [];

    try {
        const jsonData = fs.readFileSync(dataPath, 'utf-8');
        const data = JSON.parse(jsonData);
        teams = data.teams || [];
        fixture = data.fixture || [];
    } catch (error) {
        console.error('Error reading CEV Cup data:', error);
    }

    return (
        <CEVCupStatsClient teams={teams} fixture={fixture} />
    );
}

```

## File: app\cev-cup\tahminoyunu\CEVCupTahminOyunuClient.tsx
```
"use client";

import { useEffect, useState, useMemo } from "react";

import TeamAvatar from "@/app/components/TeamAvatar";
import { useToast } from "../../components";
import { useGameState, ACHIEVEMENTS } from "../../utils/gameState";
import { sounds } from "../../utils/sounds";

interface Match {
    id: number;
    round: string;
    leg?: number;
    date: string;
    homeTeam: string;
    awayTeam: string;
    homeScore: number | null;
    awayScore: number | null;
    isPlayed: boolean;
}

interface CEVCupData {
    league: string;
    season: string;
    currentStage: string;
    teams: any[];
    fixture: Match[];
}

const ROUNDS = ["16th Finals", "8th Finals", "Play Off", "4th Finals", "Semi Finals", "Finals"];
const ROUND_LABELS: Record<string, string> = {
    "16th Finals": "Son 32",
    "8th Finals": "Son 16",
    "Play Off": "Play-Off",
    "4th Finals": "Ã‡eyrek Final",
    "Semi Finals": "YarÄ± Final",
    "Finals": "Final"
};

const TURKISH_TEAMS = ["Galatasaray Daikin ISTANBUL", "THY ISTANBUL"];

export default function CEVCupTahminOyunuClient({ initialData }: { initialData: CEVCupData }) {
    const { showToast, showUndoToast } = useToast();
    const { addXP, recordPrediction, unlockAchievement, hasAchievement, gameState } = useGameState();

    const [activeRound, setActiveRound] = useState<string>(initialData.currentStage || "8th Finals");
    const [overrides, setOverrides] = useState<Record<string, string>>({});

    const availableRounds = useMemo(() => {
        const roundsInData = new Set(initialData.fixture.map(m => m.round));
        return ROUNDS.filter(r => roundsInData.has(r));
    }, [initialData.fixture]);

    const roundMatches = useMemo(() => {
        return initialData.fixture.filter(m => m.round === activeRound);
    }, [initialData.fixture, activeRound]);

    // Load saved predictions
    useEffect(() => {
        const saved = localStorage.getItem('cevCupPredictions');
        if (saved) {
            try {
                setOverrides(JSON.parse(saved));
            } catch (e) { console.error(e); }
        }
    }, []);

    // Save predictions
    useEffect(() => {
        localStorage.setItem('cevCupPredictions', JSON.stringify(overrides));
    }, [overrides]);

    const handleScoreChange = (matchId: string, score: string) => {
        const newOverrides = { ...overrides };
        const wasNew = !overrides[matchId];

        if (score) {
            newOverrides[matchId] = score;

            if (wasNew) {
                addXP(10);
                sounds.scoreSelect();

                if (!hasAchievement('first_prediction')) {
                    unlockAchievement('first_prediction');
                    sounds.achievement();
                }

                if (gameState.stats.totalPredictions >= 49 && !hasAchievement('game_addict')) {
                    unlockAchievement('game_addict');
                    sounds.achievement();
                }

                recordPrediction(true);
            }
        } else {
            delete newOverrides[matchId];
        }
        setOverrides(newOverrides);
    };

    const handleResetRound = () => {
        if (!confirm(`${ROUND_LABELS[activeRound]} tahminleriniz silinecek. Emin misiniz?`)) return;
        const newOverrides = { ...overrides };
        roundMatches.forEach(m => {
            delete newOverrides[`match-${m.id}`];
        });
        setOverrides(newOverrides);
        showToast(`${ROUND_LABELS[activeRound]} tahminleri sÄ±fÄ±rlandÄ±`, "success");
    };

    const handleResetAll = () => {
        const previousOverrides = { ...overrides };
        setOverrides({});
        localStorage.removeItem('cevCupPredictions');
        showUndoToast("CEV Cup tahminleri sÄ±fÄ±rlandÄ±", () => {
            setOverrides(previousOverrides);
        });
    };

    const handleRandomize = () => {
        if (!confirm("OynanmamÄ±ÅŸ maÃ§lar rastgele skorlarla doldurulacak. OnaylÄ±yor musunuz?")) return;
        const newOverrides = { ...overrides };
        const scores = ["3-0", "3-1", "3-2", "2-3", "1-3", "0-3"];
        let count = 0;

        roundMatches.forEach(match => {
            if (match.isPlayed || newOverrides[`match-${match.id}`]) return;
            const randomScore = scores[Math.floor(Math.random() * scores.length)];
            newOverrides[`match-${match.id}`] = randomScore;
            count++;
        });

        setOverrides(newOverrides);
        if (count > 0) {
            sounds.levelUp();
            showToast(`${count} maÃ§ rastgele tahmin edildi!`, "success");
            addXP(count * 2);
        }
    };

    const predictedCount = roundMatches.filter(m => overrides[`match-${m.id}`]).length;
    const totalUnplayed = roundMatches.filter(m => !m.isPlayed).length;

    return (
        <main className="min-h-screen bg-slate-950 text-slate-100 p-1 sm:p-2 font-sans">
            <div className="w-full max-w-7xl mx-auto flex flex-col h-full gap-2">
                <div className="flex flex-col sm:flex-row items-center justify-between gap-3 p-2 bg-slate-900/40 rounded-xl border border-slate-800">
                    <div className="flex flex-col sm:flex-row items-center gap-4 w-full sm:w-auto">
                        <div className="text-center sm:text-left">
                            <h1 className="font-bold text-white text-lg tracking-tight leading-none hidden sm:block">CEV Cup</h1>
                            <p className="text-[10px] text-slate-400 hidden sm:block">Tahmin Oyunu</p>
                        </div>
                        <div className="flex gap-2 items-center w-full sm:w-auto">
                            <span className="text-[10px] font-bold text-slate-500 uppercase tracking-widest hidden sm:inline whitespace-nowrap">TUR:</span>
                            <div className="flex gap-1 p-1 bg-slate-950/50 rounded-lg border border-slate-800 items-center">
                                <select
                                    value={activeRound}
                                    onChange={(e) => setActiveRound(e.target.value)}
                                    title="Tur SeÃ§in"
                                    className="px-3 py-1 bg-amber-600/20 text-amber-500 text-[10px] uppercase font-black rounded-md border border-amber-500/30 outline-none cursor-pointer transition-all focus:ring-2 focus:ring-amber-500/50"
                                >
                                    {availableRounds.map(r => (
                                        <option key={r} value={r} className="bg-slate-900 text-white">
                                            {ROUND_LABELS[r] || r}
                                        </option>
                                    ))}
                                </select>
                            </div>
                        </div>
                    </div>

                    <div className="flex flex-col sm:flex-row items-center gap-2 w-full sm:w-auto">
                        <div className="flex items-center gap-2 sm:mr-2">
                            <span className="text-xs text-slate-500 hidden lg:inline">
                                {predictedCount}/{totalUnplayed} tahmin
                            </span>
                            <div className="w-16 h-1.5 bg-slate-800 rounded-full overflow-hidden">
                                <div
                                    className="h-full bg-amber-500 transition-all"
                                     
                                    style={{ width: `${totalUnplayed > 0 ? (predictedCount / totalUnplayed) * 100 : 0}%` }}
                                />
                            </div>
                        </div>
                        <div className="flex items-center gap-2">
                            <button
                                onClick={handleRandomize}
                                className="px-3 py-1.5 bg-amber-600 hover:bg-amber-500 text-white text-xs font-bold rounded-lg transition-all"
                            >
                                ğŸ² Rastgele
                            </button>
                            <button
                                onClick={handleResetRound}
                                className="px-3 py-1.5 bg-slate-800 hover:bg-slate-700 text-slate-400 hover:text-white text-xs font-bold rounded-lg transition-all border border-slate-700"
                            >
                                Turu SÄ±fÄ±rla
                            </button>
                            <button
                                onClick={handleResetAll}
                                className="px-3 py-1.5 bg-slate-800 hover:bg-rose-900/50 text-slate-400 hover:text-rose-400 text-xs font-bold rounded-lg transition-all border border-slate-700"
                            >
                                TÃ¼mÃ¼nÃ¼ SÄ±fÄ±rla
                            </button>
                        </div>
                    </div>
                </div>

                {/* Matches Grid */}
                <div className="bg-slate-900/40 rounded-2xl border border-slate-800/60 p-3 space-y-3">
                    <h2 className="text-xl font-black italic uppercase tracking-tighter text-amber-500">
                        {ROUND_LABELS[activeRound] || activeRound}
                    </h2>

                    <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
                        {roundMatches.map(match => {
                            const matchId = `match-${match.id}`;
                            const prediction = overrides[matchId];
                            const hasTurkish = TURKISH_TEAMS.includes(match.homeTeam) || TURKISH_TEAMS.includes(match.awayTeam);

                            return (
                                <div
                                    key={match.id}
                                    id={matchId}
                                    className={`bg-slate-950/60 rounded-xl border p-3 space-y-2 ${hasTurkish ? 'border-amber-700/50 ring-1 ring-amber-500/20' : 'border-slate-800/50'
                                        }`}
                                >
                                    {/* Match Header */}
                                    <div className="flex items-center justify-between text-[10px] text-slate-500">
                                        <span>{match.leg === 1 ? "1. MaÃ§" : match.leg === 2 ? "2. MaÃ§" : ""}</span>
                                        <span>{match.date?.split('-').reverse().join('.')}</span>
                                    </div>

                                    {/* Teams */}
                                    <div className="flex items-center gap-2">
                                        <div className="flex items-center gap-2 flex-1 overflow-hidden">
                                            <TeamAvatar name={match.homeTeam} size="sm" />
                                            <span className="text-sm font-bold text-slate-200 truncate">
                                                {match.homeTeam}
                                                {TURKISH_TEAMS.includes(match.homeTeam) && <span className="ml-1">ğŸ‡¹ğŸ‡·</span>}
                                            </span>
                                        </div>
                                        <div className="px-2">
                                            {match.isPlayed ? (
                                                <span className="text-sm font-bold text-emerald-400">
                                                    {match.homeScore} - {match.awayScore}
                                                </span>
                                            ) : (
                                                <span className="text-xs text-slate-600">VS</span>
                                            )}
                                        </div>
                                        <div className="flex items-center gap-2 flex-1 justify-end overflow-hidden">
                                            <span className="text-sm font-bold text-slate-200 truncate text-right">
                                                {TURKISH_TEAMS.includes(match.awayTeam) && <span className="mr-1">ğŸ‡¹ğŸ‡·</span>}
                                                {match.awayTeam}
                                            </span>
                                            <TeamAvatar name={match.awayTeam} size="sm" />
                                        </div>
                                    </div>

                                    {/* Score Selection */}
                                    {!match.isPlayed && (
                                        <div className="flex flex-wrap gap-1 pt-2 border-t border-slate-800/50">
                                            {["3-0", "3-1", "3-2", "2-3", "1-3", "0-3"].map(score => {
                                                const isSelected = prediction === score;
                                                return (
                                                    <button
                                                        key={score}
                                                        onClick={() => handleScoreChange(matchId, isSelected ? "" : score)}
                                                        className={`
                                                            px-2 py-1 text-xs rounded border transition-all
                                                            ${isSelected
                                                                ? 'bg-amber-600 border-amber-400 text-white font-bold shadow-[0_0_10px_rgba(245,158,11,0.5)]'
                                                                : 'bg-slate-900 border-slate-700 text-slate-500 hover:bg-slate-800 hover:border-slate-500'}
                                                        `}
                                                    >
                                                        {score}
                                                    </button>
                                                );
                                            })}
                                        </div>
                                    )}
                                </div>
                            );
                        })}
                    </div>

                    {roundMatches.length === 0 && (
                        <div className="flex flex-col items-center justify-center py-12 text-slate-500">
                            <span className="text-4xl mb-2">ğŸ</span>
                            <p className="text-sm">Bu tur iÃ§in henÃ¼z maÃ§ planlanmadÄ±.</p>
                        </div>
                    )}
                </div>
            </div>
        </main>
    );
}

```

## File: app\cev-cup\tahminoyunu\page.tsx
```
import fs from 'fs';
import path from 'path';
import { Metadata } from "next";
import CEVCupTahminOyunuClient from './CEVCupTahminOyunuClient';

export const metadata: Metadata = {
    title: "CEV Cup Tahmin Oyunu",
    description: "CEV KadÄ±nlar KupasÄ± maÃ§ sonuÃ§larÄ±nÄ± tahmin edin. Avrupa'nÄ±n prestijli kupa turnuvasÄ±nÄ±n maÃ§larÄ±nÄ± tahmin ederek puan kazanÄ±n.",
    openGraph: {
        title: "CEV Cup Tahmin Oyunu | VolleySimulator",
        description: "CEV Cup maÃ§ sonuÃ§larÄ±nÄ± tahmin edin ve liderlik tablosunda yerinizi alÄ±n.",
    },
};

export default async function CEVCupTahminOyunuPage() {
    const dataPath = path.join(process.cwd(), 'data', 'cev-cup-data.json');
    let data = null;

    try {
        const jsonData = fs.readFileSync(dataPath, 'utf-8');
        data = JSON.parse(jsonData);
    } catch (error) {
        console.error('Error reading CEV Cup data:', error);
    }

    if (!data) {
        return (
            <main className="min-h-screen bg-slate-950 text-slate-100 p-4 flex items-center justify-center">
                <div className="text-center">
                    <h1 className="text-2xl font-bold text-red-500">Veri YÃ¼klenemedi</h1>
                    <p className="text-slate-400 mt-2">CEV Cup verileri yÃ¼klenirken bir hata oluÅŸtu.</p>
                </div>
            </main>
        );
    }

    return (
        <CEVCupTahminOyunuClient initialData={data} />
    );
}

```

## File: app\components\AccessiBeWidget.tsx
```
'use client';

import Script from 'next/script';

export default function AccessiBeWidget() {
    return (
        <Script
            src="https://acsbapp.com/apps/app/dist/js/app.js"
            strategy="lazyOnload"
            onLoad={() => {
                // @ts-expect-error - acsbJS is loaded from external script
                if (typeof acsbJS !== 'undefined') {
                    // @ts-expect-error - acsbJS is loaded from external script
                    acsbJS.init({
                        statementLink: '',
                        footerHtml: '',
                        hideMobile: false,
                        hideTrigger: false,
                        disableBgProcess: false,
                        language: 'tr',
                        position: 'right',
                        leadColor: '#146FF8',
                        triggerColor: '#146FF8',
                        triggerRadius: '50%',
                        triggerPositionX: 'right',
                        triggerPositionY: 'bottom',
                        triggerIcon: 'people',
                        triggerSize: 'medium',
                        triggerOffsetX: 20,
                        triggerOffsetY: 20,
                        mobile: {
                            triggerSize: 'small',
                            triggerPositionX: 'right',
                            triggerPositionY: 'bottom',
                            triggerOffsetX: 10,
                            triggerOffsetY: 10,
                            triggerRadius: '50%'
                        }
                    });
                }
            }}
        />
    );
}

```

# Project Application Context - Part 8

## File: app\components\Achievements.tsx
```
"use client";

import { useEffect, useState } from "react";
import { Achievement } from "../types";
import { useGameState, ACHIEVEMENTS } from "../utils/gameState";

interface AchievementToastProps {
    achievement: Achievement;
    onClose: () => void;
}

function AchievementToast({ achievement, onClose }: AchievementToastProps) {
    useEffect(() => {
        const timer = setTimeout(onClose, 5000);
        return () => clearTimeout(timer);
    }, [onClose]);

    return (
        <div className="fixed top-20 left-1/2 -translate-x-1/2 z-50 animate-bounce-in">
            <div className="bg-gradient-to-r from-amber-900/95 to-orange-900/95 backdrop-blur-lg rounded-2xl border-2 border-amber-500 shadow-2xl shadow-amber-500/30 p-4 min-w-[300px]">
                <div className="flex items-center gap-4">
                    <div className="flex items-center justify-center w-16 h-16 bg-gradient-to-br from-amber-400 to-orange-500 rounded-xl text-4xl shadow-lg" aria-hidden="true">
                        {achievement.icon}
                    </div>
                    <div className="flex-1">
                        <div className="text-xs text-amber-400 font-bold uppercase tracking-wider mb-1">
                            ğŸ‰ BaÅŸarÄ± AÃ§Ä±ldÄ±!
                        </div>
                        <div className="text-lg font-black text-white">{achievement.name}</div>
                        <div className="text-xs text-slate-300">{achievement.description}</div>
                        <div className="text-sm font-bold text-amber-400 mt-1">
                            +{achievement.xpReward} XP
                        </div>
                    </div>
                </div>
            </div>
        </div>
    );
}

interface AchievementsPanelProps {
    isOpen: boolean;
    onClose: () => void;
}

export function AchievementsPanel({ isOpen, onClose }: AchievementsPanelProps) {
    const { gameState, hasAchievement } = useGameState();

    if (!isOpen) return null;

    const allAchievements = Object.values(ACHIEVEMENTS);

    return (
        <div className="fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm" onClick={onClose}>
            <div
                className="bg-slate-900 rounded-2xl border border-slate-700 shadow-2xl max-w-lg w-full mx-4 max-h-[80vh] overflow-hidden"
                onClick={e => e.stopPropagation()}
                role="dialog"
                aria-modal="true"
                aria-labelledby="achievements-title"
            >
                <div className="p-4 border-b border-slate-700 flex items-center justify-between">
                    <h2 id="achievements-title" className="text-xl font-black text-white flex items-center gap-2">
                        <span>ğŸ†</span> BaÅŸarÄ±lar
                    </h2>
                    <button onClick={onClose} className="text-slate-400 hover:text-white text-xl">âœ•</button>
                </div>

                <div className="p-4 overflow-y-auto max-h-[60vh]">
                    <div className="grid grid-cols-2 gap-3">
                        {allAchievements.map(achievement => {
                            const isUnlocked = hasAchievement(achievement.id);
                            const unlockedData = gameState.achievements.find(a => a.id === achievement.id);

                            return (
                                <div
                                    key={achievement.id}
                                    className={`p-3 rounded-xl border transition-all ${isUnlocked
                                        ? 'bg-gradient-to-br from-amber-900/30 to-orange-900/30 border-amber-600/50'
                                        : 'bg-slate-800/50 border-slate-700/50 opacity-60'
                                        }`}
                                >
                                    <div className="flex items-start gap-3">
                                        <div className={`text-3xl ${!isUnlocked && 'grayscale opacity-50'}`}>
                                            {achievement.icon}
                                        </div>
                                        <div className="flex-1 min-w-0">
                                            <div className="font-bold text-white text-sm truncate">
                                                {achievement.name}
                                            </div>
                                            <div className="text-[10px] text-slate-400 line-clamp-2">
                                                {achievement.description}
                                            </div>
                                            <div className="text-xs font-bold text-amber-400 mt-1">
                                                +{achievement.xpReward} XP
                                            </div>
                                            {isUnlocked && unlockedData?.unlockedAt && (
                                                <div className="text-[10px] text-slate-500 mt-0.5">
                                                    âœ“ {new Date(unlockedData.unlockedAt).toLocaleDateString('tr-TR')}
                                                </div>
                                            )}
                                        </div>
                                    </div>
                                </div>
                            );
                        })}
                    </div>
                </div>

                <div className="p-4 border-t border-slate-700 bg-slate-800/50">
                    <div className="text-center text-sm text-slate-400">
                        {gameState.achievements.length} / {allAchievements.length} baÅŸarÄ± aÃ§Ä±ldÄ±
                    </div>
                </div>
            </div>
        </div>
    );
}

// Export the toast component
export { AchievementToast };

```

## File: app\components\AIPredictionCard.tsx
```
"use client";

import { useState } from 'react';
import { AIPrediction } from '../types';

interface AIPredictionCardProps {
  homeTeam: string;
  awayTeam: string;
  prediction?: AIPrediction | null;
  isLoading?: boolean;
  onRequestPrediction?: () => void;
  compact?: boolean;
}

export default function AIPredictionCard({
  homeTeam,
  awayTeam,
  prediction,
  isLoading = false,
  onRequestPrediction,
  compact = false,
}: AIPredictionCardProps) {
  const [showDetails, setShowDetails] = useState(false);

  if (isLoading) {
    return (
      <div className="bg-gradient-to-r from-violet-500/10 to-purple-500/10 border border-violet-500/30 rounded-xl p-4 animate-pulse">
        <div className="flex items-center gap-3">
          <div className="w-10 h-10 bg-violet-500/30 rounded-full" />
          <div className="flex-1">
            <div className="h-4 bg-slate-700 rounded w-32 mb-2" />
            <div className="h-3 bg-slate-700 rounded w-24" />
          </div>
        </div>
      </div>
    );
  }

  if (!prediction) {
    return (
      <button
        onClick={onRequestPrediction}
        className="w-full bg-gradient-to-r from-violet-500/10 to-purple-500/10 border border-violet-500/30 hover:border-violet-500/50 rounded-xl p-4 transition-all group"
      >
        <div className="flex items-center gap-3">
          <div className="w-10 h-10 bg-gradient-to-br from-violet-500 to-purple-500 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform">
            <span className="text-xl">ğŸ¤–</span>
          </div>
          <div className="text-left">
            <h4 className="font-bold text-white">AI Tahmin Al</h4>
            <p className="text-xs text-slate-400">Yapay zeka analizi iste</p>
          </div>
          <span className="ml-auto text-violet-400 text-xl group-hover:translate-x-1 transition-transform">â†’</span>
        </div>
      </button>
    );
  }

  // Determine winner
  const homeWins = prediction.homeWinProbability > prediction.awayWinProbability;
  const winProb = homeWins ? prediction.homeWinProbability : prediction.awayWinProbability;
  const winner = homeWins ? homeTeam : awayTeam;

  if (compact) {
    return (
      <div className="bg-gradient-to-r from-violet-500/10 to-purple-500/10 border border-violet-500/30 rounded-xl p-3">
        <div className="flex items-center gap-2">
          <span className="text-lg">ğŸ¤–</span>
          <span className="text-sm text-white font-medium">{winner}</span>
          <span className="ml-auto text-sm font-bold text-violet-400">%{winProb}</span>
        </div>
      </div>
    );
  }

  return (
    <div className="bg-gradient-to-r from-violet-500/10 to-purple-500/10 border border-violet-500/30 rounded-xl overflow-hidden">
      {/* Header */}
      <div className="px-4 py-3 border-b border-violet-500/20 flex items-center gap-3">
        <div className="w-10 h-10 bg-gradient-to-br from-violet-500 to-purple-500 rounded-full flex items-center justify-center">
          <span className="text-xl">ğŸ¤–</span>
        </div>
        <div>
          <h4 className="font-bold text-white">AI Tahmin AsistanÄ±</h4>
          <p className="text-xs text-slate-400">Yapay zeka analizi</p>
        </div>
        <div className="ml-auto">
          <div className={`px-2 py-1 rounded-lg text-xs font-bold ${
            prediction.confidence >= 80 ? 'bg-emerald-500/20 text-emerald-400' :
            prediction.confidence >= 60 ? 'bg-amber-500/20 text-amber-400' :
            'bg-red-500/20 text-red-400'
          }`}>
            GÃ¼ven: %{prediction.confidence}
          </div>
        </div>
      </div>

      {/* Prediction */}
      <div className="p-4">
        {/* Win Probabilities */}
        <div className="space-y-3 mb-4">
          <div>
            <div className="flex items-center justify-between text-sm mb-1">
              <span className={homeWins ? 'text-white font-bold' : 'text-slate-400'}>{homeTeam}</span>
              <span className={homeWins ? 'text-emerald-400 font-bold' : 'text-slate-400'}>
                %{prediction.homeWinProbability}
              </span>
            </div>
            <div className="h-2 bg-slate-800 rounded-full overflow-hidden">
              <div 
                className={`h-full transition-all ${homeWins ? 'bg-emerald-500' : 'bg-slate-600'}`}
                style={{ width: `${prediction.homeWinProbability}%` }}
              />
            </div>
          </div>
          
          <div>
            <div className="flex items-center justify-between text-sm mb-1">
              <span className={!homeWins ? 'text-white font-bold' : 'text-slate-400'}>{awayTeam}</span>
              <span className={!homeWins ? 'text-emerald-400 font-bold' : 'text-slate-400'}>
                %{prediction.awayWinProbability}
              </span>
            </div>
            <div className="h-2 bg-slate-800 rounded-full overflow-hidden">
              <div 
                className={`h-full transition-all ${!homeWins ? 'bg-emerald-500' : 'bg-slate-600'}`}
                style={{ width: `${prediction.awayWinProbability}%` }}
              />
            </div>
          </div>
        </div>

        {/* Predicted Score */}
        <div className="bg-slate-900/50 rounded-lg p-3 text-center mb-4">
          <div className="text-xs text-slate-500 mb-1">Tahmini Skor</div>
          <div className="text-2xl font-black text-white">{prediction.predictedScore}</div>
        </div>

        {/* Show Details Toggle */}
        <button
          onClick={() => setShowDetails(!showDetails)}
          className="w-full text-sm text-violet-400 hover:text-violet-300 transition-colors"
        >
          {showDetails ? 'DetaylarÄ± Gizle â†‘' : 'DetaylarÄ± GÃ¶ster â†“'}
        </button>

        {/* Details */}
        {showDetails && prediction.factors && prediction.factors.length > 0 && (
          <div className="mt-4 pt-4 border-t border-slate-800">
            <h5 className="text-sm font-medium text-slate-300 mb-2">Analiz FaktÃ¶rleri:</h5>
            <ul className="space-y-2">
              {prediction.factors.map((factor, index) => (
                <li key={index} className="flex items-start gap-2 text-sm text-slate-400">
                  <span className={factor.impact === 'positive' ? 'text-green-400' : factor.impact === 'negative' ? 'text-red-400' : 'text-violet-400'}>â€¢</span>
                  <span><strong>{factor.name}:</strong> {factor.description}</span>
                </li>
              ))}
            </ul>
          </div>
        )}
      </div>

      {/* Footer */}
      <div className="px-4 py-2 bg-slate-900/50 text-xs text-slate-500 text-center">
        OluÅŸturulma: {new Date(prediction.lastUpdated).toLocaleTimeString('tr-TR')}
      </div>
    </div>
  );
}

```

## File: app\components\AuthGuard.tsx
```
"use client";

import { useEffect } from "react";
import { useRouter, usePathname } from "next/navigation";
import { useAuth } from "../context/AuthContext";

interface AuthGuardProps {
    children: React.ReactNode;
}

// Public paths that don't require authentication
const PUBLIC_PATHS = [
    "/", "/login", "/register", "/auth/callback", "/oauth",
    "/1lig/tahminoyunu", "/2lig/tahminoyunu", "/1lig/gunceldurum", "/2lig/gunceldurum", "/1lig/stats", "/2lig/stats",
    "/vsl/tahminoyunu", "/vsl/gunceldurum", "/vsl/stats",
    "/cev-cl/tahminoyunu", "/cev-cl/gunceldurum", "/cev-cl/stats"
];

export default function AuthGuard({ children }: AuthGuardProps) {
    const { user, loading } = useAuth();
    const router = useRouter();
    const pathname = usePathname();

    const isPublicPath = PUBLIC_PATHS.some(
        (path) => pathname === path || pathname?.startsWith("/auth/") || pathname?.startsWith("/oauth")
    );

    useEffect(() => {
        if (!loading && !user && !isPublicPath) {
            router.push("/login");
        }
    }, [user, loading, isPublicPath, router]);

    // Show loading state
    if (loading) {
        return (
            <div className="min-h-screen bg-slate-950 flex items-center justify-center">
                <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500"></div>
            </div>
        );
    }

    // If not authenticated and trying to access protected route, show nothing (will redirect)
    if (!user && !isPublicPath) {
        return (
            <div className="min-h-screen bg-slate-950 flex items-center justify-center">
                <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500"></div>
            </div>
        );
    }

    return <>{children}</>;
}

```

## File: app\components\BadgeDisplay.tsx
```
"use client";

import { Badge, BadgeRarity } from '../types';

interface BadgeDisplayProps {
  badge: Badge;
  size?: 'sm' | 'md' | 'lg';
  showDetails?: boolean;
}

const rarityColors: Record<BadgeRarity, { bg: string; border: string; text: string }> = {
  common: {
    bg: 'from-slate-600 to-slate-700',
    border: 'border-slate-500',
    text: 'text-slate-300',
  },
  uncommon: {
    bg: 'from-green-600 to-emerald-700',
    border: 'border-green-500',
    text: 'text-green-300',
  },
  rare: {
    bg: 'from-blue-600 to-indigo-700',
    border: 'border-blue-500',
    text: 'text-blue-300',
  },
  epic: {
    bg: 'from-purple-600 to-violet-700',
    border: 'border-purple-500',
    text: 'text-purple-300',
  },
  legendary: {
    bg: 'from-amber-500 to-orange-600',
    border: 'border-amber-400',
    text: 'text-amber-300',
  },
};

const rarityLabels: Record<BadgeRarity, string> = {
  common: 'YaygÄ±n',
  uncommon: 'Nadir',
  rare: 'Epik',
  epic: 'Efsanevi',
  legendary: 'Efsane',
};

const sizeClasses = {
  sm: 'w-10 h-10 text-xl',
  md: 'w-14 h-14 text-2xl',
  lg: 'w-20 h-20 text-4xl',
};

export default function BadgeDisplay({ badge, size = 'md', showDetails = true }: BadgeDisplayProps) {
  const colors = rarityColors[badge.rarity];
  const sizeClass = sizeClasses[size];

  return (
    <div className="flex flex-col items-center">
      {/* Badge Icon */}
      <div 
        className={`relative ${sizeClass} bg-gradient-to-br ${colors.bg} border-2 ${colors.border} rounded-xl flex items-center justify-center shadow-lg transition-transform hover:scale-110`}
      >
        <span>{badge.icon}</span>
        
        {/* Legendary glow effect */}
        {badge.rarity === 'legendary' && (
          <div className="absolute inset-0 bg-gradient-to-br from-amber-400/30 to-orange-500/30 rounded-xl animate-pulse" />
        )}
        
        {/* Epic shimmer effect */}
        {badge.rarity === 'epic' && (
          <div className="absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent rounded-xl animate-shimmer" />
        )}
      </div>

      {showDetails && (
        <>
          {/* Badge Name */}
          <h4 className={`mt-2 font-bold text-sm ${colors.text}`}>
            {badge.name}
          </h4>

          {/* Rarity Label */}
          <span className={`text-xs ${colors.text} opacity-70`}>
            {rarityLabels[badge.rarity]}
          </span>
        </>
      )}
    </div>
  );
}

// Badge Grid Component
export function BadgeGrid({ badges, maxDisplay = 6 }: { badges: Badge[]; maxDisplay?: number }) {
  const displayBadges = badges.slice(0, maxDisplay);
  const remaining = badges.length - maxDisplay;

  return (
    <div className="flex flex-wrap gap-2">
      {displayBadges.map(badge => (
        <BadgeDisplay 
          key={badge.id} 
          badge={badge} 
          size="sm" 
          showDetails={false} 
        />
      ))}
      {remaining > 0 && (
        <div className="w-10 h-10 bg-slate-800 border border-slate-700 rounded-xl flex items-center justify-center text-sm text-slate-400">
          +{remaining}
        </div>
      )}
    </div>
  );
}

// Badge Tooltip Component
export function BadgeWithTooltip({ badge }: { badge: Badge }) {
  return (
    <div className="group relative inline-block">
      <BadgeDisplay badge={badge} size="sm" showDetails={false} />
      
      {/* Tooltip */}
      <div className="absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-48 bg-slate-900 border border-slate-700 rounded-lg p-3 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-50 shadow-xl">
        <h5 className="font-bold text-white text-sm">{badge.name}</h5>
        <p className="text-xs text-slate-400 mt-1">{badge.description}</p>
        {badge.unlockedAt && (
          <p className="text-xs text-slate-500 mt-2">
            KazanÄ±ldÄ±: {new Date(badge.unlockedAt).toLocaleDateString('tr-TR')}
          </p>
        )}
        <div className="absolute bottom-0 left-1/2 -translate-x-1/2 translate-y-1/2 rotate-45 w-2 h-2 bg-slate-900 border-r border-b border-slate-700" />
      </div>
    </div>
  );
}

```

## File: app\components\BracketView.tsx
```
"use client";

import TeamAvatar from "./TeamAvatar";

interface BracketTeam {
    name: string;
    sourceGroup: string;
    position: number;
    eliminated?: boolean;
}

interface BracketMatch {
    team1: BracketTeam | null;
    team2: BracketTeam | null;
    winner?: 1 | 2;
}

interface BracketViewProps {
    quarterGroups: { name: string; teams: { name: string; sourceGroup: string; position: string }[] }[];
    semiGroups: { name: string; teams: { name: string; sourceGroup: string; position: string }[] }[];
    finalGroups: { name: string; teams: { name: string; sourceGroup: string; position: string }[] }[];
}

interface GroupTeam {
    name: string;
    sourceGroup: string;
    position: string;
}

interface GroupData {
    name: string;
    teams: GroupTeam[];
}

export default function BracketView({ quarterGroups, semiGroups, finalGroups }: BracketViewProps) {
    const getWinners = (groups: GroupData[]) => {
        return groups.map(g => ({
            name: g.name,
            first: g.teams[0],
            second: g.teams[1]
        }));
    };

    const quarterWinners = getWinners(quarterGroups);
    const semiWinners = getWinners(semiGroups);
    const finalWinners = getWinners(finalGroups);

    return (
        <div className="overflow-x-auto pb-4">
            <div className="min-w-[800px] flex items-center gap-4 p-4">

                {/* Quarter Finals */}
                <div className="flex flex-col gap-4">
                    <h3 className="text-xs font-bold text-amber-400 text-center mb-2">Ã‡EYREK FÄ°NAL</h3>
                    {quarterWinners.slice(0, 4).map((group, idx) => (
                        <BracketCard
                            key={group.name}
                            groupName={`Grup ${group.name}`}
                            team1={group.first?.name || '?'}
                            team2={group.second?.name || '?'}
                            color="amber"
                        />
                    ))}
                </div>

                {/* Connector Lines 1 */}
                <div className="flex flex-col gap-4 items-center self-stretch justify-around py-16">
                    <ConnectorLine />
                    <ConnectorLine />
                </div>

                {/* Semi Finals Left */}
                <div className="flex flex-col gap-4 self-center">
                    <h3 className="text-xs font-bold text-blue-400 text-center mb-2">YARI FÄ°NAL</h3>
                    {semiWinners.slice(0, 2).map((group) => (
                        <BracketCard
                            key={group.name}
                            groupName={`Grup ${group.name}`}
                            team1={group.first?.name || '?'}
                            team2={group.second?.name || '?'}
                            color="blue"
                        />
                    ))}
                </div>

                {/* Connector Lines 2 */}
                <div className="flex flex-col gap-4 items-center self-center">
                    <ConnectorLine />
                </div>

                {/* Final */}
                <div className="flex flex-col gap-4 self-center">
                    <h3 className="text-xs font-bold text-emerald-400 text-center mb-2">FÄ°NAL</h3>
                    {finalWinners.map((group) => (
                        <BracketCard
                            key={group.name}
                            groupName={`Grup ${group.name}`}
                            team1={group.first?.name || '?'}
                            team2={group.second?.name || '?'}
                            color="emerald"
                            isChampion
                        />
                    ))}
                </div>

                {/* Right Side Mirror */}
                <div className="flex flex-col gap-4 items-center self-center">
                    <ConnectorLine />
                </div>

                <div className="flex flex-col gap-4 self-center">
                    <h3 className="text-xs font-bold text-blue-400 text-center mb-2 opacity-0">.</h3>
                    {semiWinners.slice(2, 4).map((group) => (
                        <BracketCard
                            key={group.name}
                            groupName={`Grup ${group.name}`}
                            team1={group.first?.name || '?'}
                            team2={group.second?.name || '?'}
                            color="blue"
                        />
                    ))}
                </div>

                <div className="flex flex-col gap-4 items-center self-stretch justify-around py-16">
                    <ConnectorLine />
                    <ConnectorLine />
                </div>

                <div className="flex flex-col gap-4">
                    <h3 className="text-xs font-bold text-amber-400 text-center mb-2 opacity-0">.</h3>
                    {quarterWinners.slice(4, 8).map((group) => (
                        <BracketCard
                            key={group.name}
                            groupName={`Grup ${group.name}`}
                            team1={group.first?.name || '?'}
                            team2={group.second?.name || '?'}
                            color="amber"
                        />
                    ))}
                </div>
            </div>

            {/* Legend */}
            <div className="flex justify-center gap-6 mt-4 text-xs text-slate-500">
                <span className="flex items-center gap-1">
                    <span className="w-3 h-3 rounded bg-amber-600"></span> Ã‡eyrek Final
                </span>
                <span className="flex items-center gap-1">
                    <span className="w-3 h-3 rounded bg-blue-600"></span> YarÄ± Final
                </span>
                <span className="flex items-center gap-1">
                    <span className="w-3 h-3 rounded bg-emerald-700"></span> Final
                </span>
            </div>
        </div>
    );
}

function BracketCard({
    groupName,
    team1,
    team2,
    color = 'slate',
    isChampion = false
}: {
    groupName: string;
    team1: string;
    team2: string;
    color?: 'amber' | 'blue' | 'emerald' | 'slate';
    isChampion?: boolean;
}) {
    const colors = {
        amber: 'border-amber-600 bg-amber-950/30',
        blue: 'border-blue-600 bg-blue-950/30',
        emerald: 'border-emerald-600 bg-emerald-950/30',
        slate: 'border-slate-700 bg-slate-900'
    };

    return (
        <div className={`rounded-lg border-2 ${colors[color]} p-2 w-40 transition-all hover:scale-105 ${isChampion ? 'glow-emerald' : ''}`}>
            <div className="text-[10px] text-center opacity-50 mb-1">{groupName}</div>
            <div className="space-y-1">
                <TeamSlot name={team1} isWinner />
                <TeamSlot name={team2} />
            </div>
        </div>
    );
}

function TeamSlot({ name, isWinner = false }: { name: string; isWinner?: boolean }) {
    return (
        <div className={`text-xs px-2 py-1 rounded truncate flex items-center gap-2 ${isWinner
            ? 'bg-emerald-900/50 text-emerald-300 border border-emerald-700'
            : 'bg-slate-800/50 text-slate-400'
            }`}>
            <TeamAvatar name={name} size="sm" />
            <span className="truncate">{name}</span>
        </div>
    );
}

function ConnectorLine() {
    return (
        <div className="w-8 h-px bg-gradient-to-r from-slate-600 to-slate-700"></div>
    );
}

```

## File: app\components\ClientSideComponents.tsx
```
"use client";

import dynamic from "next/dynamic";

const ScrollToTop = dynamic(() => import("./ScrollToTop"), { ssr: false });
const OnboardingTour = dynamic(() => import("./ui/OnboardingTour"), { ssr: false });
const AccessiBeWidget = dynamic(() => import("./AccessiBeWidget"), { ssr: false });

export function ClientSideComponents() {
    return (
        <>
            <ScrollToTop />
            <OnboardingTour />
            <AccessiBeWidget />
        </>
    );
}

```

## File: app\components\Confetti.tsx
```
"use client";

import { useEffect, useState } from 'react';

interface ConfettiProps {
    trigger: boolean;
    onComplete?: () => void;
}

export default function Confetti({ trigger, onComplete }: ConfettiProps) {
    const [particles, setParticles] = useState<Array<{
        id: number;
        x: number;
        color: string;
        delay: number;
        size: number;
        borderRadius: string;
        duration: string;
    }>>([]);

    useEffect(() => {
        if (trigger) {
            const colors = ['#10b981', '#3b82f6', '#f59e0b', '#ef4444', '#8b5cf6', '#ec4899'];
            const newParticles = Array.from({ length: 50 }, (_, i) => ({
                id: i,
                x: Math.random() * 100,
                color: colors[Math.floor(Math.random() * colors.length)],
                delay: Math.random() * 0.5,
                size: Math.random() * 8 + 4,
                borderRadius: Math.random() > 0.5 ? '50%' : '0',
                duration: `${1 + Math.random()}s`
            }));
            Promise.resolve().then(() => setParticles(newParticles));

            const timer = setTimeout(() => {
                setParticles([]);
                onComplete?.();
            }, 2000);

            return () => clearTimeout(timer);
        }
    }, [trigger, onComplete]);

    if (particles.length === 0) return null;

    return (
        <div className="fixed inset-0 pointer-events-none z-50 overflow-hidden">
            {particles.map(p => (
                <div
                    key={p.id}
                    className="absolute animate-confetti"
                    style={{
                        '--c-left': `${p.x}%`,
                        '--c-size': p.size,
                        '--c-bg': p.color,
                        '--c-radius': p.borderRadius,
                        '--c-delay': `${p.delay}s`,
                        '--c-duration': p.duration,
                        left: 'var(--c-left)',
                        width: 'var(--c-size)',
                        height: 'var(--c-size)',
                        backgroundColor: 'var(--c-bg)',
                        borderRadius: 'var(--c-radius)',
                        animationDelay: 'var(--c-delay)',
                        animationDuration: 'var(--c-duration)',
                        top: '-20px'
                    } as any}
                />
            ))}
        </div>
    );
}

```

## File: app\components\DynamicTeamTheme.tsx
```
"use client";

import { useEffect } from 'react';
import { useGameState } from '../utils/gameState';
import { getTeamTheme } from '../utils/team-themes';

export function DynamicTeamTheme() {
    const { gameState, isLoaded } = useGameState();

    useEffect(() => {
        if (!isLoaded) return;

        const teamTheme = getTeamTheme(gameState.favoriteTeam);
        const root = document.documentElement;

        if (gameState.favoriteTeam) {
            root.style.setProperty('--color-primary', teamTheme.primary);
            root.style.setProperty('--shadow-glow-primary', `0 0 20px ${teamTheme.primary}40`);
            root.style.setProperty('--color-primary-muted', `${teamTheme.primary}20`);
            // Add a flag for components to know a team theme is active
            root.setAttribute('data-team-theme', 'true');
        } else {
            // Revert to defaults (or remove)
            root.style.removeProperty('--color-primary');
            root.style.removeProperty('--shadow-glow-primary');
            root.style.removeProperty('--color-primary-muted');
            root.removeAttribute('data-team-theme');
        }
    }, [gameState.favoriteTeam, isLoaded]);

    return null;
}

```

## File: app\components\ErrorBoundary.tsx
```
"use client";

import React, { Component, ReactNode, ErrorInfo } from 'react';

interface ErrorBoundaryProps {
    children: ReactNode;
    fallback?: ReactNode;
    onError?: (error: Error, errorInfo: ErrorInfo) => void;
}

interface ErrorBoundaryState {
    hasError: boolean;
    error: Error | null;
}

class ErrorBoundary extends Component<ErrorBoundaryProps, ErrorBoundaryState> {
    constructor(props: ErrorBoundaryProps) {
        super(props);
        this.state = { hasError: false, error: null };
    }

    static getDerivedStateFromError(error: Error): ErrorBoundaryState {
        return { hasError: true, error };
    }

    componentDidCatch(error: Error, errorInfo: ErrorInfo) {
        console.error('ErrorBoundary caught an error:', error, errorInfo);
        this.props.onError?.(error, errorInfo);
    }

    render() {
        if (this.state.hasError) {
            if (this.props.fallback) {
                return this.props.fallback;
            }

            return (
                <div className="min-h-[200px] flex flex-col items-center justify-center p-6 bg-slate-900/50 rounded-xl border border-red-500/30">
                    <div className="text-4xl mb-4">ğŸ˜”</div>
                    <h3 className="text-lg font-bold text-white mb-2">Bir ÅŸeyler yanlÄ±ÅŸ gitti</h3>
                    <p className="text-sm text-slate-400 text-center mb-4 max-w-md">
                        Beklenmeyen bir hata oluÅŸtu. SayfayÄ± yenileyerek tekrar deneyebilirsiniz.
                    </p>
                    {process.env.NODE_ENV === 'development' && this.state.error && (
                        <details className="w-full max-w-md">
                            <summary className="text-xs text-red-400 cursor-pointer hover:text-red-300">
                                Hata DetaylarÄ± (GeliÅŸtirici)
                            </summary>
                            <pre className="mt-2 p-3 bg-red-900/20 rounded-lg text-xs text-red-300 overflow-auto max-h-32">
                                {this.state.error.message}
                                {'\n\n'}
                                {this.state.error.stack}
                            </pre>
                        </details>
                    )}
                    <button
                        onClick={() => window.location.reload()}
                        className="mt-4 px-4 py-2 bg-red-600 hover:bg-red-500 text-white text-sm font-bold rounded-lg transition-colors"
                    >
                        SayfayÄ± Yenile
                    </button>
                </div>
            );
        }

        return this.props.children;
    }
}

// Functional wrapper for easier use
export function withErrorBoundary<P extends object>(
    WrappedComponent: React.ComponentType<P>,
    fallback?: ReactNode
) {
    return function WithErrorBoundaryWrapper(props: P) {
        return (
            <ErrorBoundary fallback={fallback}>
                <WrappedComponent {...props} />
            </ErrorBoundary>
        );
    };
}

export default ErrorBoundary;

```

## File: app\components\ErrorFallback.tsx
```
"use client";

import { ReactNode } from "react";

interface ErrorFallbackProps {
    error: string;
    onRetry?: () => void;
    className?: string;
}

/**
 * Reusable error fallback component with retry button.
 */
export default function ErrorFallback({ error, onRetry, className = "" }: ErrorFallbackProps) {
    return (
        <div className={`flex flex-col items-center justify-center p-8 bg-slate-900/50 rounded-xl border border-rose-900/30 ${className}`}>
            <div className="text-4xl mb-4">âš ï¸</div>
            <h3 className="text-lg font-semibold text-rose-400 mb-2">Bir Hata OluÅŸtu</h3>
            <p className="text-sm text-slate-400 text-center mb-4 max-w-md">{error}</p>
            {onRetry && (
                <button
                    onClick={onRetry}
                    className="flex items-center gap-2 px-4 py-2 bg-rose-700 hover:bg-rose-600 text-white text-sm font-medium rounded-lg transition-all"
                >
                    <span>ğŸ”„</span>
                    <span>Tekrar Dene</span>
                </button>
            )}
        </div>
    );
}

interface DataLoaderProps<T> {
    data: T | null;
    error: string | null;
    loading: boolean;
    onRetry?: () => void;
    loadingFallback?: ReactNode;
    errorFallback?: ReactNode;
    children: (data: T) => ReactNode;
}

/**
 * Generic data loader component that handles loading, error, and success states.
 * 
 * @example
 * <DataLoader data={teams} error={error} loading={loading} onRetry={retry}>
 *   {(teams) => <TeamList teams={teams} />}
 * </DataLoader>
 */
export function DataLoader<T>({
    data,
    error,
    loading,
    onRetry,
    loadingFallback,
    errorFallback,
    children
}: DataLoaderProps<T>) {
    if (loading) {
        return loadingFallback || (
            <div className="flex items-center justify-center p-8">
                <div className="w-8 h-8 border-4 border-amber-500/30 border-t-amber-500 rounded-full animate-spin"></div>
            </div>
        );
    }

    if (error) {
        return errorFallback || <ErrorFallback error={error} onRetry={onRetry} />;
    }

    if (!data) {
        return null;
    }

    return <>{children(data)}</>;
}

```

## File: app\components\index.ts
```
// Re-export all components for easy importing
export { default as BracketView } from './BracketView';
export { default as Confetti } from './Confetti';
export { default as ProgressRing } from './ProgressRing';
export { default as TeamCompareModal } from './TeamCompareModal';
export { default as MiniBarChart } from './MiniBarChart';
export { default as TeamAvatar } from './TeamAvatar';
export { default as Tooltip } from './Tooltip';
export { default as StatsCard } from './StatsCard';
export { default as ShareButton } from './ShareButton';
export { default as ErrorFallback, DataLoader } from './ErrorFallback';
export { default as XPBar } from './XPBar';
export { default as TeamLoyaltySelector } from './TeamLoyaltySelector';
export { default as QuestPanel } from './QuestPanel';
export { AchievementToast, AchievementsPanel } from './Achievements';
export { ToastProvider, useToast } from './Toast';

// New components
export { default as ErrorBoundary, withErrorBoundary } from './ErrorBoundary';
export * from './Skeleton';
export * from './LeagueTemplate';

```

## File: app\components\LanguageSwitcher.tsx
```
'use client';

import { useLocale } from '@/app/context/LocaleContext';
import { Button } from '@/components/ui/button';
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuTrigger,
} from "@/components/ui/dropdown-menu";
import { Globe } from "lucide-react";

export function LanguageSwitcher() {
  const { locale, setLocale } = useLocale();

  return (
    <DropdownMenu>
      <DropdownMenuTrigger asChild>
        <Button variant="ghost" size="icon" className="h-9 w-9">
          <Globe className="h-4 w-4" />
          <span className="sr-only">Dil deÄŸiÅŸtir</span>
        </Button>
      </DropdownMenuTrigger>
      <DropdownMenuContent align="end">
        <DropdownMenuItem
          onClick={() => setLocale('tr')}
          className={locale === 'tr' ? 'bg-accent' : ''}
        >
          ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e
        </DropdownMenuItem>
        <DropdownMenuItem
          onClick={() => setLocale('en')}
          className={locale === 'en' ? 'bg-accent' : ''}
        >
          ğŸ‡¬ğŸ‡§ English
        </DropdownMenuItem>
      </DropdownMenuContent>
    </DropdownMenu>
  );
}

```

## File: app\components\LiveMatchCard.tsx
```
"use client";

import { LiveMatch } from '../types';
import { useState, useEffect } from 'react';

interface LiveMatchCardProps {
  match: LiveMatch;
  onClick?: () => void;
  showChat?: boolean;
}

export default function LiveMatchCard({ match, onClick, showChat = true }: LiveMatchCardProps) {
  const [pulseKey, setPulseKey] = useState(0);

  // Pulse animation every few seconds to show "live" status
  useEffect(() => {
    const interval = setInterval(() => {
      setPulseKey(prev => prev + 1);
    }, 3000);
    return () => clearInterval(interval);
  }, []);

  return (
    <div 
      onClick={onClick}
      className={`bg-gradient-to-br from-slate-900 to-slate-800 border border-slate-700 rounded-xl overflow-hidden transition-all ${
        onClick ? 'cursor-pointer hover:border-red-500/50 hover:scale-[1.02]' : ''
      }`}
    >
      {/* Live Badge */}
      <div className="flex items-center justify-between px-4 py-2 bg-red-500/10 border-b border-slate-800">
        <div className="flex items-center gap-2">
          <span 
            key={pulseKey} 
            className="w-2 h-2 bg-red-500 rounded-full animate-pulse"
          />
          <span className="text-xs font-bold text-red-400 uppercase">CanlÄ±</span>
        </div>
        <div className="flex items-center gap-2 text-xs text-slate-400">
          <span>ğŸ‘ {match.viewers?.toLocaleString() || '-'}</span>
          <span>Set {match.currentSet}</span>
        </div>
      </div>

      {/* Teams and Score */}
      <div className="p-4">
        <div className="flex items-center justify-between">
          {/* Home Team */}
          <div className="flex-1 text-center">
            <div className="w-12 h-12 mx-auto bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center text-2xl mb-2 shadow-lg">
              ğŸ
            </div>
            <h3 className="font-bold text-white text-sm truncate">{match.homeTeam}</h3>
          </div>

          {/* Score */}
          <div className="px-4 text-center">
            <div className="text-3xl font-black text-white">
              {match.setWins?.home || 0} - {match.setWins?.away || 0}
            </div>
            <div className="text-sm text-slate-400 mt-1">Set</div>
            
            {/* Current Set Score */}
            <div className="mt-3 bg-red-500/20 border border-red-500/30 rounded-lg px-4 py-2">
              <div className="text-lg font-bold text-white">
                {match.currentSetScore?.home || 0} - {match.currentSetScore?.away || 0}
              </div>
              <div className="text-xs text-red-400">{match.currentSet}. Set</div>
            </div>
          </div>

          {/* Away Team */}
          <div className="flex-1 text-center">
            <div className="w-12 h-12 mx-auto bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl flex items-center justify-center text-2xl mb-2 shadow-lg">
              ğŸ
            </div>
            <h3 className="font-bold text-white text-sm truncate">{match.awayTeam}</h3>
          </div>
        </div>

        {/* Set Scores */}
        {match.homeScore && match.homeScore.length > 0 && (
          <div className="mt-4 flex justify-center gap-2">
            {match.homeScore.map((homePoints, index) => (
              <div 
                key={index}
                className={`px-2 py-1 rounded text-xs font-medium ${
                  index === match.currentSet - 1
                    ? 'bg-red-500/30 text-red-300 animate-pulse'
                    : homePoints > (match.awayScore?.[index] || 0)
                      ? 'bg-blue-500/30 text-blue-300'
                      : 'bg-orange-500/30 text-orange-300'
                }`}
              >
                {homePoints}-{match.awayScore?.[index] || 0}
              </div>
            ))}
          </div>
        )}
      </div>

      {/* Footer */}
      <div className="px-4 py-2 bg-slate-900/50 flex items-center justify-between text-xs text-slate-500">
        <span>{match.league?.toUpperCase()}</span>
        <span>{match.venue}</span>
      </div>
    </div>
  );
}

// Mini version for sidebar/navbar
export function LiveMatchMini({ match }: { match: LiveMatch }) {
  return (
    <div className="flex items-center gap-3 px-3 py-2 bg-slate-800/50 rounded-lg">
      <span className="w-1.5 h-1.5 bg-red-500 rounded-full animate-pulse" />
      <div className="flex-1 min-w-0">
        <div className="flex items-center justify-between text-xs">
          <span className="text-slate-300 truncate">{match.homeTeam}</span>
          <span className="font-bold text-white mx-2">
            {match.setWins?.home || 0}-{match.setWins?.away || 0}
          </span>
          <span className="text-slate-300 truncate text-right">{match.awayTeam}</span>
        </div>
        <div className="text-xs text-slate-500 text-center mt-0.5">
          Set {match.currentSet}: {match.currentSetScore?.home || 0}-{match.currentSetScore?.away || 0}
        </div>
      </div>
    </div>
  );
}

// Live Match Counter for Navbar
export function LiveMatchCounter({ count }: { count: number }) {
  if (count === 0) return null;

  return (
    <div className="flex items-center gap-1.5 bg-red-500/20 px-2 py-1 rounded-lg">
      <span className="w-1.5 h-1.5 bg-red-500 rounded-full animate-pulse" />
      <span className="text-xs font-bold text-red-400">{count} CanlÄ±</span>
    </div>
  );
}

```

## File: app\components\LoginBackground.tsx
```
import { memo } from 'react';

const LoginBackground = memo(function LoginBackground() {
    return (
        <>
            {/* Background with Modern Gradient & Pattern */}
            <div className="absolute inset-0 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-slate-900 via-[#0a0a1a] to-black -z-20"></div>
            <div className="absolute inset-0 bg-[url('/grid.svg')] opacity-20 -z-10"></div>

            {/* Ambient Light Effects */}
            <div className="absolute top-0 left-1/4 w-96 h-96 bg-emerald-500/20 rounded-full blur-[128px] -z-10"></div>
            <div className="absolute bottom-0 right-1/4 w-96 h-96 bg-indigo-500/20 rounded-full blur-[128px] -z-10"></div>
        </>
    );
});

export default LoginBackground;

```

## File: app\components\Logo.tsx
```
export default function Logo({ className = "", size = "md" }: { className?: string; size?: "sm" | "md" | "lg" | "xl" }) {
    const sizeClasses = {
        sm: "w-9 h-8 text-sm",
        md: "w-12 h-10 text-base",
        lg: "w-20 h-16 text-2xl",
        xl: "w-40 h-32 text-5xl"
    };

    return (
        <div className={`relative flex items-center justify-center bg-slate-900 rounded-xl overflow-hidden border border-white/10 shadow-[0_0_15px_rgba(16,185,129,0.3)] ${sizeClasses[size]} ${className}`}>
            {/* Background Gradient */}
            <div className="absolute inset-0 bg-gradient-to-br from-emerald-500/20 to-indigo-500/20"></div>

            {/* Shiny Reflection */}
            <div className="absolute -top-[50%] -left-[50%] w-[200%] h-[200%] bg-gradient-to-br from-transparent via-white/10 to-transparent rotate-45 animate-pulse"></div>

            {/* Letters */}
            <div className="relative z-10 font-black italic leading-none flex items-center justify-center pl-1 pr-2">
                <span className="bg-clip-text text-transparent bg-gradient-to-br from-emerald-400 to-cyan-400 drop-shadow-[0_2px_4px_rgba(0,0,0,0.5)]">
                    VS
                </span>
            </div>
        </div>
    );
}


```

## File: app\components\MiniBarChart.tsx
```
"use client";

interface MiniBarChartProps {
    data: number[];
    labels?: string[];
    height?: number;
    color?: string;
    showValues?: boolean;
}

export default function MiniBarChart({
    data,
    labels,
    height = 40,
    color = '#10b981',
    showValues = false
}: MiniBarChartProps) {
    const max = Math.max(...data, 1);
    const barWidth = 100 / data.length;

    return (
        <div className="w-full" style={{ '--chart-height': height, height: 'var(--chart-height)' } as any}>
            <div className="flex items-end justify-between h-full gap-0.5">
                {data.map((value, i) => (
                    <div
                        key={i}
                        className="flex-1 flex flex-col items-center justify-end"
                        title={labels?.[i] ? `${labels[i]}: ${value}` : `${value}`}
                    >
                        {showValues && (
                            <span className="text-[8px] text-slate-400 mb-0.5">{value}</span>
                        )}
                        <div
                            className="w-full rounded-t transition-all duration-300 hover:opacity-80"
                            style={{
                                '--bar-height': `${(value / max) * 100}%`,
                                '--bar-color': color,
                                height: 'var(--bar-height)',
                                backgroundColor: 'var(--bar-color)',
                                minHeight: value > 0 ? '2px' : '0'
                            } as any}
                        />
                    </div>
                ))}
            </div>
            {labels && (
                <div className="flex justify-between mt-1">
                    {labels.map((label, i) => (
                        <span key={i} className="text-[8px] text-slate-500 flex-1 text-center truncate">
                            {label}
                        </span>
                    ))}
                </div>
            )}
        </div>
    );
}

```

## File: app\components\Navbar.tsx
```
"use client";

import Link from "next/link";
import Logo from "./Logo";
import ThemeToggle from "./ThemeToggle";
import { usePathname } from "next/navigation";
import { useState, useEffect } from "react";
import { useGameState, getLevelTitle, getXPForNextLevel } from "../utils/gameState";
import { useAuth } from "../context/AuthContext";
import { LEVEL_THRESHOLDS } from "../types";
import NotificationBell from "./NotificationBell";
import { StreakBadge } from "./StreakWidget";
import { LiveMatchCounter } from "./LiveMatchCard";


export default function Navbar() {
    const pathname = usePathname();
    const { gameState } = useGameState();
    const { user, loading, signOut } = useAuth();
    const [showLeagueModal, setShowLeagueModal] = useState(false);
    const [scrolled, setScrolled] = useState(false);

    // Track scroll position for navbar background
    useEffect(() => {
        const handleScroll = () => {
            setScrolled(window.scrollY > 20);
        };
        window.addEventListener('scroll', handleScroll);
        return () => window.removeEventListener('scroll', handleScroll);
    }, []);

    // Calculate XP progress
    const currentLevelXP = LEVEL_THRESHOLDS[gameState.level - 1] || 0;
    const nextLevelXP = getXPForNextLevel(gameState.level);
    const progress = gameState.xp - currentLevelXP;
    const required = nextLevelXP - currentLevelXP;
    const xpProgress = Math.min((progress / required) * 100, 100);

    const isInLeague = pathname?.startsWith('/1lig') || pathname?.startsWith('/2lig') || pathname?.startsWith('/vsl') || pathname?.startsWith('/cev-cl') || pathname?.startsWith('/cev-cup') || pathname?.startsWith('/cev-challenge');
    const isAnasayfa = pathname === '/' || pathname === '/anasayfa';
    const isAyarlar = pathname === '/ayarlar';
    const isProfile = pathname === '/profile' || pathname === '/login' || pathname === '/register';

    // Generate league URL preserving current page path
    const getLeagueUrl = (targetLeague: string) => {
        if (!pathname) return `/${targetLeague}/tahminoyunu`;

        const pathParts = pathname.split('/');
        if (pathParts[1] === '1lig' || pathParts[1] === '2lig') {
            pathParts[1] = targetLeague;
            return pathParts.join('/');
        }
        return `/${targetLeague}/tahminoyunu`;
    };

    // Get user display name
    const userName = user?.user_metadata?.name || user?.email?.split('@')[0] || 'Oyuncu';

    return (
        <>
            {/* Top Header */}
            <nav className={`fixed top-0 left-0 right-0 z-50 backdrop-blur-md border-b h-14 transition-all duration-300 ${scrolled
                ? 'bg-slate-900/95 border-slate-700 shadow-lg'
                : 'bg-slate-900/80 border-slate-800'
                }`}>
                <div className="max-w-7xl mx-auto px-4 h-full flex items-center justify-between gap-4">
                    {/* Brand & Context Navigation */}
                    <div className="flex items-center gap-6 overflow-x-auto no-scrollbar">
                        <Link href="/" className="flex items-center gap-2 group shrink-0" prefetch={true}>
                            <Logo size="md" className="group-hover:scale-110 transition-transform duration-300" />
                            <span className={`text-lg font-bold bg-clip-text text-transparent bg-gradient-to-r from-emerald-400 to-cyan-400 ${isInLeague ? 'hidden xl:inline' : 'hidden sm:inline'}`}>
                                VolleySimulator
                            </span>
                        </Link>

                        {/* Context Navigation (Moved from PageHeader) */}
                        {isInLeague && (
                            <div className="flex items-center gap-4">
                                {/* League Switcher */}
                                <div className="flex items-center bg-slate-800/50 rounded-lg p-1 border border-slate-700/50">
                                    <Link href={getLeagueUrl('vsl')} className={`px-2 py-1 rounded text-[10px] font-bold transition-all flex items-center gap-1.5 ${pathname?.includes('/vsl') ? 'bg-slate-700 text-white shadow-sm' : 'text-slate-400 hover:text-white hover:bg-slate-700/50'}`}>
                                        <span className="w-1.5 h-1.5 rounded-full bg-rose-400"></span>
                                        VSL
                                    </Link>
                                    <Link href={getLeagueUrl('1lig')} className={`px-2 py-1 rounded text-[10px] font-bold transition-all flex items-center gap-1.5 ${pathname?.includes('/1lig') ? 'bg-slate-700 text-white shadow-sm' : 'text-slate-400 hover:text-white hover:bg-slate-700/50'}`}>
                                        <span className="w-1.5 h-1.5 rounded-full bg-amber-400"></span>
                                        1.Lig
                                    </Link>
                                    <Link href={getLeagueUrl('2lig')} className={`px-2 py-1 rounded text-[10px] font-bold transition-all flex items-center gap-1.5 ${pathname?.includes('/2lig') ? 'bg-slate-700 text-white shadow-sm' : 'text-slate-400 hover:text-white hover:bg-slate-700/50'}`}>
                                        <span className="w-1.5 h-1.5 rounded-full bg-emerald-400"></span>
                                        2.Lig
                                    </Link>
                                    <Link href={getLeagueUrl('cev-cl')} className={`px-2 py-1 rounded text-[10px] font-bold transition-all flex items-center gap-1.5 ${pathname?.includes('/cev-cl') ? 'bg-slate-700 text-white shadow-sm' : 'text-slate-400 hover:text-white hover:bg-slate-700/50'}`}>
                                        <span className="w-1.5 h-1.5 rounded-full bg-blue-500"></span>
                                        ÅL
                                    </Link>
                                    <Link href={getLeagueUrl('cev-cup')} className={`px-2 py-1 rounded text-[10px] font-bold transition-all flex items-center gap-1.5 ${pathname?.includes('/cev-cup') ? 'bg-slate-700 text-white shadow-sm' : 'text-slate-400 hover:text-white hover:bg-slate-700/50'}`}>
                                        <span className="w-1.5 h-1.5 rounded-full bg-amber-500"></span>
                                        Cup
                                    </Link>
                                    <Link href={getLeagueUrl('cev-challenge')} className={`px-2 py-1 rounded text-[10px] font-bold transition-all flex items-center gap-1.5 ${pathname?.includes('/cev-challenge') ? 'bg-slate-700 text-white shadow-sm' : 'text-slate-400 hover:text-white hover:bg-slate-700/50'}`}>
                                        <span className="w-1.5 h-1.5 rounded-full bg-purple-500"></span>
                                        Chall
                                    </Link>
                                </div>

                                {/* Divider */}
                                <div className="w-px h-4 bg-slate-800 hidden lg:block"></div>

                                {/* Page Switcher */}
                                <div className="hidden lg:flex items-center gap-1">
                                    <Link
                                        href={pathname?.replace(/\/(gunceldurum|stats|playoffs|tahminoyunu)/, '/tahminoyunu') || '#'}
                                        className={`px-3 py-1.5 rounded text-xs font-bold transition-all ${pathname?.includes('/tahminoyunu') ? 'bg-gradient-to-r from-slate-700 to-slate-600 text-white shadow-md border border-slate-600' : 'text-slate-400 hover:text-white hover:bg-slate-800'}`}
                                    >
                                        Tahmin
                                    </Link>
                                    <Link
                                        href={pathname?.replace(/\/(gunceldurum|stats|playoffs|tahminoyunu)/, '/gunceldurum') || '#'}
                                        className={`px-3 py-1.5 rounded text-xs font-bold transition-all ${pathname?.includes('/gunceldurum') ? 'bg-gradient-to-r from-slate-700 to-slate-600 text-white shadow-md border border-slate-600' : 'text-slate-400 hover:text-white hover:bg-slate-800'}`}
                                    >
                                        Durum
                                    </Link>
                                    <Link
                                        href={pathname?.replace(/\/(gunceldurum|stats|playoffs|tahminoyunu)/, '/stats') || '#'}
                                        className={`px-3 py-1.5 rounded text-xs font-bold transition-all ${pathname?.includes('/stats') ? 'bg-gradient-to-r from-slate-700 to-slate-600 text-white shadow-md border border-slate-600' : 'text-slate-400 hover:text-white hover:bg-slate-800'}`}
                                    >
                                        Ä°statistik
                                    </Link>
                                    <Link
                                        href={pathname?.replace(/\/(gunceldurum|stats|playoffs|tahminoyunu)/, '/playoffs') || '#'}
                                        className={`px-3 py-1.5 rounded text-xs font-bold transition-all ${pathname?.includes('/playoffs') ? 'bg-gradient-to-r from-amber-600 to-orange-500 text-white shadow-md' : 'text-amber-500/80 hover:text-amber-400 hover:bg-amber-900/10'}`}
                                    >
                                        Play-Off
                                    </Link>
                                </div>
                            </div>
                        )}
                    </div>

                    {/* Right: User & Actions */}
                    <div className="flex items-center gap-2">
                        {/* Live Match Counter */}
                        <Link href="/live" className="hidden md:block">
                            <LiveMatchCounter count={2} />
                        </Link>

                        {/* Streak Badge */}
                        {user && (
                            <Link href="/quests" className="hidden sm:block">
                                <StreakBadge />
                            </Link>
                        )}

                        {/* Notification Bell */}
                        {user && <NotificationBell />}

                        <ThemeToggle />

                        {!loading && (
                            user ? (
                                <div className="flex items-center gap-3">
                                    {/* Achievements Badge */}
                                    <div className="hidden sm:flex items-center gap-1 text-xs text-amber-400 bg-amber-500/20 px-2 py-1 rounded-full border border-amber-500/30">
                                        <span className="font-bold">{gameState.achievements.length}</span>
                                    </div>

                                    {/* Level + XP Bar */}
                                    <div className="flex items-center gap-2">
                                        <div className="hidden sm:block">
                                            <div className="w-20 h-1.5 bg-slate-700 rounded-full overflow-hidden">
                                                <div
                                                    className="h-full bg-gradient-to-r from-amber-400 to-orange-400 transition-all"
                                                    style={{ '--xp-progress': `${xpProgress}%`, width: 'var(--xp-progress)' } as any}
                                                />
                                            </div>
                                        </div>
                                        <span className="text-xs font-bold text-amber-400 bg-amber-500/20 px-2 py-0.5 rounded-full border border-amber-500/30">
                                            Lv.{gameState.level}
                                        </span>
                                    </div>

                                    {/* User Name */}
                                    <Link
                                        href="/profile"
                                        className="flex items-center gap-2 px-3 py-1.5 bg-slate-800 hover:bg-slate-700 border border-slate-700 text-white text-sm font-medium rounded-lg transition-all"
                                        prefetch={true}
                                    >
                                        <div className="w-6 h-6 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-full flex items-center justify-center text-white text-xs font-bold">
                                            {userName[0].toUpperCase()}
                                        </div>
                                        <span className="hidden md:inline max-w-[100px] truncate">{userName}</span>
                                    </Link>

                                    {/* Logout Button */}
                                    <button
                                        onClick={() => signOut()}
                                        className="px-2 py-1.5 bg-slate-800 hover:bg-rose-900/50 border border-slate-700 hover:border-rose-600/50 text-slate-400 hover:text-rose-400 text-xs font-medium rounded-lg transition-all"
                                        title="Ã‡Ä±kÄ±ÅŸ Yap"
                                    >
                                        Ã‡Ä±kÄ±ÅŸ
                                    </button>
                                </div>
                            ) : (
                                <Link
                                    href="/login"
                                    className="flex items-center gap-1.5 px-3 py-1.5 bg-gradient-to-r from-emerald-600 to-teal-600 text-white text-sm font-bold rounded-lg shadow-lg shadow-emerald-500/20 hover:shadow-emerald-500/40 hover:scale-105 active:scale-95 transition-all duration-200"
                                    prefetch={true}
                                >
                                    <span>GiriÅŸ Yap</span>
                                </Link>
                            )
                        )}
                    </div>
                </div>
            </nav>

            {/* Bottom Navigation Bar */}
            <nav className="fixed bottom-0 left-0 right-0 z-50 bg-slate-900/95 backdrop-blur-md border-t border-slate-800 h-14 pb-safe shadow-[0_-4px_20px_rgba(0,0,0,0.3)] safe-p-bottom content-box">
                <div className="max-w-lg mx-auto h-full flex items-center justify-around px-2">
                    {/* Anasayfa */}
                    <Link
                        href={user ? "/anasayfa" : "/"}
                        onClick={() => navigator.vibrate?.(10)}
                        className={`relative flex flex-col items-center gap-0.5 px-5 py-2 rounded-xl transition-all duration-200 active:scale-95 ${isAnasayfa
                            ? 'text-emerald-400'
                            : 'text-slate-400 hover:text-white'
                            }`}
                        prefetch={true}
                    >
                        {isAnasayfa && (
                            <div className="absolute inset-0 bg-emerald-500/15 rounded-xl border border-emerald-500/30"></div>
                        )}
                        <span className="text-xs font-bold relative z-10">Anasayfa</span>
                    </Link>



                    {/* Ligler */}
                    <Link
                        href="/ligler"
                        onClick={() => navigator.vibrate?.(10)}
                        className={`relative flex flex-col items-center gap-0.5 px-5 py-2 rounded-xl transition-all duration-200 active:scale-95 ${isInLeague || pathname === '/ligler'
                            ? 'text-indigo-400'
                            : 'text-slate-400 hover:text-white'
                            }`}
                        prefetch={true}
                    >
                        {(isInLeague || pathname === '/ligler') && (
                            <div className="absolute inset-0 bg-indigo-500/15 rounded-xl border border-indigo-500/30"></div>
                        )}
                        <span className="text-xs font-bold relative z-10">Ligler</span>
                    </Link>

                    {/* Ayarlar */}
                    <Link
                        href="/ayarlar"
                        onClick={() => navigator.vibrate?.(10)}
                        className={`relative flex flex-col items-center gap-0.5 px-5 py-2 rounded-xl transition-all duration-200 active:scale-95 ${isAyarlar
                            ? 'text-cyan-400'
                            : 'text-slate-400 hover:text-white'
                            }`}
                        prefetch={true}
                    >
                        {isAyarlar && (
                            <div className="absolute inset-0 bg-cyan-500/15 rounded-xl border border-cyan-500/30"></div>
                        )}
                        <span className="text-xs font-bold relative z-10">Ayarlar</span>
                    </Link>

                    {/* Profil */}
                    <Link
                        href={user ? "/profile" : "/login"}
                        onClick={() => navigator.vibrate?.(10)}
                        className={`relative flex flex-col items-center gap-0.5 px-5 py-2 rounded-xl transition-all duration-200 active:scale-95 ${isProfile
                            ? 'text-amber-400'
                            : 'text-slate-400 hover:text-white'
                            }`}
                        prefetch={true}
                    >
                        {isProfile && (
                            <div className="absolute inset-0 bg-amber-500/15 rounded-xl border border-amber-500/30"></div>
                        )}
                        <span className="text-xs font-bold relative z-10">Profil</span>
                    </Link>
                </div>
            </nav>

            {/* League Selection Modal */}
            {showLeagueModal && (
                <div
                    className="fixed inset-0 z-[100] bg-black/70 backdrop-blur-md flex items-center justify-center p-4"
                    onClick={() => setShowLeagueModal(false)}
                >
                    <div
                        className="bg-gradient-to-b from-slate-900 to-slate-950 border border-slate-700/50 rounded-3xl w-full max-w-md shadow-2xl shadow-black/50 animate-scale-in overflow-hidden"
                        onClick={e => e.stopPropagation()}
                        role="dialog"
                        aria-modal="true"
                        aria-labelledby="league-modal-title"
                    >
                        {/* Header */}
                        <div className="bg-gradient-to-r from-emerald-600/20 via-transparent to-amber-600/20 p-6 border-b border-slate-800">
                            <div className="flex items-center justify-between">
                                <div>
                                    <h2 id="league-modal-title" className="text-xl font-bold text-white">Lig SeÃ§in</h2>
                                    <p className="text-xs text-slate-400 mt-1">Takip etmek istediÄŸiniz ligi seÃ§in</p>
                                </div>
                                <button
                                    onClick={() => setShowLeagueModal(false)}
                                    className="w-8 h-8 bg-slate-800 hover:bg-slate-700 rounded-full flex items-center justify-center text-slate-400 hover:text-white transition-colors"
                                >
                                    âœ•
                                </button>
                            </div>
                        </div>

                        {/* Content */}
                        <div className="p-4 max-h-[60vh] overflow-y-auto">
                            {/* Turkey Section */}
                            <div className="mb-4">
                                <div className="flex items-center gap-2 mb-3 px-1">
                                    <span className="text-sm font-bold text-slate-300 uppercase tracking-wider">TÃ¼rkiye</span>
                                    <div className="flex-1 h-px bg-gradient-to-r from-slate-700 to-transparent"></div>
                                </div>

                                <div className="space-y-2">
                                    {/* Vodafone Sultanlar Ligi */}
                                    <Link
                                        href="/vsl/tahminoyunu"
                                        onClick={() => setShowLeagueModal(false)}
                                        className="group flex items-center gap-4 p-4 bg-gradient-to-r from-red-900/30 to-red-800/10 hover:from-red-800/40 hover:to-red-700/20 rounded-2xl border border-red-600/30 hover:border-red-500/50 transition-all duration-300"
                                    >
                                        <div className="flex-1">
                                            <div className="font-bold text-white group-hover:text-red-300 transition-colors">Vodafone Sultanlar Ligi</div>
                                            <div className="text-xs text-red-400/70">KadÄ±nlar Voleybol â€¢ 2025-26</div>
                                        </div>
                                        <div className="text-red-500/50 group-hover:text-red-400 group-hover:translate-x-1 transition-all">â†’</div>
                                    </Link>

                                    {/* 1. Lig */}
                                    <Link
                                        href={getLeagueUrl('1lig')}
                                        onClick={() => setShowLeagueModal(false)}
                                        className="group flex items-center gap-4 p-4 bg-gradient-to-r from-amber-900/30 to-amber-800/10 hover:from-amber-800/40 hover:to-amber-700/20 rounded-2xl border border-amber-600/30 hover:border-amber-500/50 transition-all duration-300"
                                    >
                                        <div className="flex-1">
                                            <div className="font-bold text-white group-hover:text-amber-300 transition-colors">Arabica Coffee House 1. Lig</div>
                                            <div className="text-xs text-amber-400/70">KadÄ±nlar Voleybol â€¢ 2025-26</div>
                                        </div>
                                        <div className="text-amber-500/50 group-hover:text-amber-400 group-hover:translate-x-1 transition-all">â†’</div>
                                    </Link>

                                    {/* 2. Lig */}
                                    <Link
                                        href={getLeagueUrl('2lig')}
                                        onClick={() => setShowLeagueModal(false)}
                                        className="group flex items-center gap-4 p-4 bg-gradient-to-r from-emerald-900/30 to-emerald-800/10 hover:from-emerald-800/40 hover:to-emerald-700/20 rounded-2xl border border-emerald-600/30 hover:border-emerald-500/50 transition-all duration-300"
                                    >
                                        <div className="flex-1">
                                            <div className="font-bold text-white group-hover:text-emerald-300 transition-colors">KadÄ±nlar 2. Lig</div>
                                            <div className="text-xs text-emerald-400/70">KadÄ±nlar Voleybol â€¢ 2025-26</div>
                                        </div>
                                        <div className="text-emerald-500/50 group-hover:text-emerald-400 group-hover:translate-x-1 transition-all">â†’</div>
                                    </Link>
                                </div>
                            </div>

                            {/* Europe Section */}
                            <div className="mt-6 pt-4 border-t border-slate-800">
                                <div className="flex items-center gap-2 mb-3 px-1">
                                    <span className="text-sm font-bold text-slate-300 uppercase tracking-wider">Avrupa</span>
                                    <div className="flex-1 h-px bg-gradient-to-r from-slate-700 to-transparent"></div>
                                </div>

                                <div className="space-y-2">
                                    {/* CEV Champions League */}
                                    <Link
                                        href="/cev-cl/anasayfa"
                                        onClick={() => setShowLeagueModal(false)}
                                        className="group flex items-center gap-4 p-4 bg-gradient-to-r from-blue-900/30 to-indigo-800/10 hover:from-blue-800/40 hover:to-indigo-700/20 rounded-2xl border border-blue-600/30 hover:border-blue-500/50 transition-all duration-300"
                                    >
                                        <div className="flex-1">
                                            <div className="font-bold text-white group-hover:text-blue-300 transition-colors">CEV Åampiyonlar Ligi</div>
                                            <div className="text-xs text-blue-400/70">KadÄ±nlar â€¢ Grup AÅŸamasÄ± 2025-26</div>
                                        </div>
                                        <div className="text-blue-500/50 group-hover:text-blue-400 group-hover:translate-x-1 transition-all">â†’</div>
                                    </Link>

                                    {/* CEV Cup */}
                                    <Link
                                        href="/cev-cup/gunceldurum"
                                        onClick={() => setShowLeagueModal(false)}
                                        className="group flex items-center gap-4 p-4 bg-gradient-to-r from-amber-900/30 to-orange-800/10 hover:from-amber-800/40 hover:to-orange-700/20 rounded-2xl border border-amber-600/30 hover:border-amber-500/50 transition-all duration-300"
                                    >
                                        <div className="flex-1">
                                            <div className="font-bold text-white group-hover:text-amber-300 transition-colors">CEV Cup</div>
                                            <div className="text-xs text-amber-400/70">KadÄ±nlar â€¢ Eleme AÅŸamasÄ± 2025-26</div>
                                        </div>
                                        <div className="text-amber-500/50 group-hover:text-amber-400 group-hover:translate-x-1 transition-all">â†’</div>
                                    </Link>

                                    {/* CEV Challenge Cup */}
                                    <Link
                                        href="/cev-challenge/gunceldurum"
                                        onClick={() => setShowLeagueModal(false)}
                                        className="group flex items-center gap-4 p-4 bg-gradient-to-r from-purple-900/30 to-violet-800/10 hover:from-purple-800/40 hover:to-violet-700/20 rounded-2xl border border-purple-600/30 hover:border-purple-500/50 transition-all duration-300"
                                    >
                                        <div className="flex-1">
                                            <div className="font-bold text-white group-hover:text-purple-300 transition-colors">CEV Challenge Cup</div>
                                            <div className="text-xs text-purple-400/70">KadÄ±nlar â€¢ 2025-26</div>
                                        </div>
                                        <div className="text-purple-500/50 group-hover:text-purple-400 group-hover:translate-x-1 transition-all">â†’</div>
                                    </Link>
                                </div>
                            </div>

                            {/* Coming Soon Section */}
                            <div className="mt-6 pt-4 border-t border-slate-800">
                                <div className="flex items-center gap-2 mb-3 px-1">
                                    <span className="text-xs font-medium text-slate-500 uppercase tracking-wider">YakÄ±nda Eklenecek</span>
                                </div>

                                <div className="grid grid-cols-3 gap-2">
                                    <div className="flex flex-col items-center gap-1 p-3 bg-slate-800/30 rounded-xl opacity-50">
                                        <span className="text-[10px] text-slate-500">Ä°talya</span>
                                    </div>
                                    <div className="flex flex-col items-center gap-1 p-3 bg-slate-800/30 rounded-xl opacity-50">
                                        <span className="text-[10px] text-slate-500">Polonya</span>
                                    </div>
                                    <div className="flex flex-col items-center gap-1 p-3 bg-slate-800/30 rounded-xl opacity-50">
                                        <span className="text-[10px] text-slate-500">Brezilya</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        {/* Footer */}
                        <div className="p-4 border-t border-slate-800 bg-slate-900/50">
                            <p className="text-center text-xs text-slate-500">
                                Daha fazla lig iÃ§in takipte kalÄ±n!
                            </p>
                        </div>
                    </div>
                </div>
            )}

            <style jsx>{`
                @keyframes slide-up {
                    from {
                        transform: translateY(100%);
                        opacity: 0;
                    }
                    to {
                        transform: translateY(0);
                        opacity: 1;
                    }
                }
                .animate-slide-up {
                    animation: slide-up 0.3s ease-out forwards;
                }
                @keyframes scale-in {
                    from {
                        transform: scale(0.9);
                        opacity: 0;
                    }
                    to {
                        transform: scale(1);
                        opacity: 1;
                    }
                }
                .animate-scale-in {
                    animation: scale-in 0.25s ease-out forwards;
                }
            `}</style>
        </>
    );
}

```

## File: app\components\NotificationBell.tsx
```
"use client";

import { useState, useRef, useEffect } from 'react';
import Link from 'next/link';
import { useNotifications } from '../context/NotificationsContext';
import { Notification, NotificationType } from '../types';

export default function NotificationBell() {
  const { notifications, unreadCount, markAsRead } = useNotifications();
  const [isOpen, setIsOpen] = useState(false);
  const dropdownRef = useRef<HTMLDivElement>(null);

  // Close dropdown when clicking outside
  useEffect(() => {
    function handleClickOutside(event: MouseEvent) {
      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {
        setIsOpen(false);
      }
    }

    document.addEventListener('mousedown', handleClickOutside);
    return () => document.removeEventListener('mousedown', handleClickOutside);
  }, []);

  const recentNotifications = notifications.slice(0, 5);

  return (
    <div className="relative" ref={dropdownRef}>
      {/* Bell Button */}
      <button
        onClick={() => setIsOpen(!isOpen)}
        className="relative p-2 text-slate-400 hover:text-white transition-colors"
        aria-label={`Bildirimler ${unreadCount > 0 ? `(${unreadCount} okunmamÄ±ÅŸ)` : ''}`}
      >
        <svg 
          xmlns="http://www.w3.org/2000/svg" 
          className="h-6 w-6" 
          fill="none" 
          viewBox="0 0 24 24" 
          stroke="currentColor"
        >
          <path 
            strokeLinecap="round" 
            strokeLinejoin="round" 
            strokeWidth={2} 
            d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" 
          />
        </svg>
        
        {/* Badge */}
        {unreadCount > 0 && (
          <span className="absolute -top-1 -right-1 min-w-[18px] h-[18px] bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center px-1">
            {unreadCount > 99 ? '99+' : unreadCount}
          </span>
        )}
      </button>

      {/* Dropdown */}
      {isOpen && (
        <div className="absolute right-0 mt-2 w-80 bg-slate-900 border border-slate-800 rounded-xl shadow-xl overflow-hidden z-50">
          {/* Header */}
          <div className="px-4 py-3 border-b border-slate-800 flex items-center justify-between">
            <h3 className="font-bold text-white">Bildirimler</h3>
            {unreadCount > 0 && (
              <span className="text-xs text-cyan-400">{unreadCount} yeni</span>
            )}
          </div>

          {/* Notification List */}
          <div className="max-h-80 overflow-y-auto">
            {recentNotifications.length === 0 ? (
              <div className="px-4 py-8 text-center text-slate-500">
                <span className="text-3xl block mb-2">ğŸ””</span>
                Bildirim yok
              </div>
            ) : (
              recentNotifications.map(notification => (
                <NotificationItem 
                  key={notification.id} 
                  notification={notification}
                  onRead={() => markAsRead(notification.id)}
                  onClose={() => setIsOpen(false)}
                />
              ))
            )}
          </div>

          {/* Footer */}
          <div className="px-4 py-3 border-t border-slate-800">
            <Link 
              href="/notifications"
              onClick={() => setIsOpen(false)}
              className="block text-center text-sm text-cyan-400 hover:text-cyan-300 transition-colors"
            >
              TÃ¼mÃ¼nÃ¼ GÃ¶r â†’
            </Link>
          </div>
        </div>
      )}
    </div>
  );
}

function NotificationItem({ 
  notification, 
  onRead,
  onClose 
}: { 
  notification: Notification;
  onRead: () => void;
  onClose: () => void;
}) {
  const icon = getNotificationIcon(notification.type);
  
  const handleClick = () => {
    if (!notification.isRead) {
      onRead();
    }
    onClose();
  };

  return (
    <Link
      href={notification.link || '/notifications'}
      onClick={handleClick}
      className={`block px-4 py-3 hover:bg-slate-800/50 transition-colors ${
        !notification.isRead ? 'bg-cyan-500/5' : ''
      }`}
    >
      <div className="flex items-start gap-3">
        <span className="text-xl">{icon}</span>
        <div className="flex-1 min-w-0">
          <p className={`text-sm ${notification.isRead ? 'text-slate-400' : 'text-white font-medium'}`}>
            {notification.title}
          </p>
          <p className="text-xs text-slate-500 mt-0.5 truncate">
            {notification.message}
          </p>
          <p className="text-xs text-slate-600 mt-1">
            {formatTimeAgo(notification.createdAt)}
          </p>
        </div>
        {!notification.isRead && (
          <span className="w-2 h-2 bg-cyan-400 rounded-full flex-shrink-0 mt-2" />
        )}
      </div>
    </Link>
  );
}

function getNotificationIcon(type: NotificationType): string {
  switch (type) {
    case 'match_reminder': return 'â°';
    case 'match_result': return 'âš½';
    case 'prediction_result': return 'ğŸ¯';
    case 'friend_request': return 'ğŸ‘¥';
    case 'friend_activity': return 'ğŸ“Š';
    case 'achievement': return 'ğŸ†';
    case 'level_up': return 'â¬†ï¸';
    case 'leaderboard_change': return 'ğŸ“ˆ';
    case 'daily_quest': return 'ğŸ“‹';
    case 'weekly_challenge': return 'ğŸ…';
    case 'system': return 'ğŸ“¢';
    default: return 'ğŸ””';
  }
}

function formatTimeAgo(dateString: string): string {
  const date = new Date(dateString);
  const now = new Date();
  const diff = now.getTime() - date.getTime();
  
  const minutes = Math.floor(diff / 60000);
  const hours = Math.floor(diff / 3600000);
  const days = Math.floor(diff / 86400000);
  
  if (minutes < 1) return 'Az Ã¶nce';
  if (minutes < 60) return `${minutes} dk Ã¶nce`;
  if (hours < 24) return `${hours} saat Ã¶nce`;
  if (days < 7) return `${days} gÃ¼n Ã¶nce`;
  
  return date.toLocaleDateString('tr-TR');
}

```

## File: app\components\NotificationToggle.tsx
```
'use client';

import { usePushNotifications } from '@/app/hooks/usePushNotifications';

interface NotificationToggleProps {
  className?: string;
}

export function NotificationToggle({ className = '' }: NotificationToggleProps) {
  const { isSupported, isSubscribed, isLoading, error, subscribe, unsubscribe } = usePushNotifications();

  if (!isSupported) {
    return (
      <div className={`text-slate-500 text-sm ${className}`}>
        TarayÄ±cÄ±nÄ±z bildirimleri desteklemiyor
      </div>
    );
  }

  const handleToggle = async () => {
    if (isSubscribed) {
      await unsubscribe();
    } else {
      await subscribe();
    }
  };

  return (
    <div className={`flex flex-col gap-2 ${className}`}>
      <div className="flex items-center justify-between">
        <div>
          <h3 className="text-white font-medium">MaÃ§ Bildirimleri</h3>
          <p className="text-sm text-slate-400">
            MaÃ§lar baÅŸlamadan Ã¶nce hatÄ±rlatma al
          </p>
        </div>
        <button
          onClick={handleToggle}
          disabled={isLoading}
          aria-label={isSubscribed ? 'Bildirimleri kapat' : 'Bildirimleri aÃ§'}
          role="switch"
          aria-checked={isSubscribed ? 'true' : 'false'}
          className={`relative w-14 h-8 rounded-full transition-colors ${
            isSubscribed ? 'bg-emerald-600' : 'bg-slate-700'
          } ${isLoading ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer'}`}
        >
          <span
            className={`absolute top-1 w-6 h-6 rounded-full bg-white transition-transform ${
              isSubscribed ? 'left-7' : 'left-1'
            }`}
          />
        </button>
      </div>
      
      {error && (
        <p className="text-sm text-red-400">{error}</p>
      )}
      
      {isSubscribed && (
        <p className="text-sm text-emerald-400">
          âœ“ Bildirimler aktif
        </p>
      )}
    </div>
  );
}

```

## File: app\components\OptimizedImage.tsx
```
'use client';

import Image, { ImageProps } from 'next/image';
import { useState, memo } from 'react';

interface OptimizedImageProps extends Omit<ImageProps, 'onError'> {
  fallbackSrc?: string;
  fallbackText?: string;
}

/**
 * Optimized Image component with:
 * - Blur placeholder
 * - Error fallback
 * - Lazy loading by default
 * - Proper sizing
 */
function OptimizedImageComponent({
  src,
  alt,
  fallbackSrc,
  fallbackText,
  className = '',
  ...props
}: OptimizedImageProps) {
  const [hasError, setHasError] = useState(false);
  const [isLoaded, setIsLoaded] = useState(false);

  if (hasError) {
    if (fallbackSrc) {
      return (
        <Image
          src={fallbackSrc}
          alt={alt}
          className={className}
          {...props}
        />
      );
    }
    
    if (fallbackText) {
      return (
        <div 
          className={`flex items-center justify-center bg-slate-800 text-white font-bold ${className}`}
          style={{ width: props.width, height: props.height }}
        >
          {fallbackText}
        </div>
      );
    }

    return null;
  }

  return (
    <Image
      src={src}
      alt={alt}
      className={`${className} ${!isLoaded ? 'opacity-0' : 'opacity-100'} transition-opacity duration-300`}
      onError={() => setHasError(true)}
      onLoad={() => setIsLoaded(true)}
      placeholder="blur"
      blurDataURL="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBmaWxsPSIjMWUyOTNiIi8+PC9zdmc+"
      loading="lazy"
      {...props}
    />
  );
}

export const OptimizedImage = memo(OptimizedImageComponent);

```

## File: app\components\ProgressRing.tsx
```
"use client";

interface ProgressRingProps {
    progress: number; // 0-100
    size?: number;
    strokeWidth?: number;
    color?: string;
    bgColor?: string;
    showValue?: boolean;
    label?: string;
}

export default function ProgressRing({
    progress,
    size = 80,
    strokeWidth = 6,
    color = '#10b981',
    bgColor = '#1e293b',
    showValue = true,
    label
}: ProgressRingProps) {
    const radius = (size - strokeWidth) / 2;
    const circumference = radius * 2 * Math.PI;
    const offset = circumference - (progress / 100) * circumference;

    return (
        <div className="relative inline-flex items-center justify-center">
            <svg width={size} height={size} className="-rotate-90">
                {/* Background circle */}
                <circle
                    cx={size / 2}
                    cy={size / 2}
                    r={radius}
                    fill="none"
                    stroke={bgColor}
                    strokeWidth={strokeWidth}
                />
                {/* Progress circle */}
                <circle
                    cx={size / 2}
                    cy={size / 2}
                    r={radius}
                    fill="none"
                    stroke={color}
                    strokeWidth={strokeWidth}
                    strokeDasharray={circumference}
                    strokeDashoffset={offset}
                    strokeLinecap="round"
                    className="transition-all duration-500 ease-out"
                />
            </svg>
            {showValue && (
                <div className="absolute inset-0 flex flex-col items-center justify-center">
                    <span className="text-lg font-bold text-white">{Math.round(progress)}%</span>
                    {label && <span className="text-[10px] text-slate-400">{label}</span>}
                </div>
            )}
        </div>
    );
}

```

## File: app\components\QuestPanel.tsx
```
"use client";

import { useState, useEffect, useMemo } from "react";
import { Quest, QuestId } from "../types";
import { useGameState } from "../utils/gameState";

// Quest definitions
const DAILY_QUESTS: Record<QuestId, Omit<Quest, 'progress' | 'expiresAt' | 'completed'>> = {
    daily_3_predictions: {
        id: 'daily_3_predictions',
        name: 'GÃ¼nÃ¼n Tahminleri',
        description: 'BugÃ¼n 3 maÃ§ tahmini yap',
        icon: 'ğŸ¯',
        target: 3,
        xpReward: 50
    },
    daily_underdog: {
        id: 'daily_underdog',
        name: 'Cesur Tahmin',
        description: 'Alt sÄ±radaki takÄ±mÄ±n kazanacaÄŸÄ±nÄ± tahmin et',
        icon: 'ğŸ¦¸',
        target: 1,
        xpReward: 30
    },
    daily_complete_group: {
        id: 'daily_complete_group',
        name: 'Grup Tamamla',
        description: 'Bir grubun tÃ¼m maÃ§larÄ±nÄ± tahmin et',
        icon: 'âœ…',
        target: 1,
        xpReward: 100
    }
};

interface QuestPanelProps {
    dailyPredictions?: number;
    underdogPredictions?: number;
    completedGroups?: number;
}

export default function QuestPanel({
    dailyPredictions = 0,
    underdogPredictions = 0,
    completedGroups = 0
}: QuestPanelProps) {
    const { addXP } = useGameState();
    const [completedQuests, setCompletedQuests] = useState<Set<QuestId>>(new Set());
    const [lastResetDate, setLastResetDate] = useState<string>('');

    // Get today's date string
    const today = new Date().toISOString().split('T')[0];

    // Reset quests at midnight
    useEffect(() => {
        const saved = localStorage.getItem('questLastReset');
        Promise.resolve().then(() => {
            if (saved !== today) {
                setCompletedQuests(new Set());
                localStorage.setItem('questLastReset', today);
                localStorage.removeItem('completedQuests');
            } else {
                const savedCompleted = localStorage.getItem('completedQuests');
                if (savedCompleted) {
                    setCompletedQuests(new Set(JSON.parse(savedCompleted)));
                }
            }
            setLastResetDate(today);
        });
    }, [today]);

    // Build quests with current progress
    const quests = useMemo(() => {
        const questList: Quest[] = [
            {
                ...DAILY_QUESTS.daily_3_predictions,
                progress: dailyPredictions,
                expiresAt: `${today}T23:59:59`,
                completed: completedQuests.has('daily_3_predictions') || dailyPredictions >= 3
            },
            {
                ...DAILY_QUESTS.daily_underdog,
                progress: underdogPredictions,
                expiresAt: `${today}T23:59:59`,
                completed: completedQuests.has('daily_underdog') || underdogPredictions >= 1
            },
            {
                ...DAILY_QUESTS.daily_complete_group,
                progress: completedGroups,
                expiresAt: `${today}T23:59:59`,
                completed: completedQuests.has('daily_complete_group') || completedGroups >= 1
            }
        ];
        return questList;
    }, [dailyPredictions, underdogPredictions, completedGroups, today, completedQuests]);

    // Check for newly completed quests and award XP
    useEffect(() => {
        const newlyCompletedQuests = quests.filter(
            quest => quest.progress >= quest.target && !completedQuests.has(quest.id)
        );

        if (newlyCompletedQuests.length > 0) {
            // Defer update to avoid "cascading renders" warning
            Promise.resolve().then(() => {
                setCompletedQuests(prev => {
                    const newSet = new Set(prev);
                    newlyCompletedQuests.forEach(quest => {
                        newSet.add(quest.id);
                        addXP(quest.xpReward);
                    });
                    localStorage.setItem('completedQuests', JSON.stringify([...newSet]));
                    return newSet;
                });
            });
        }
    }, [quests, completedQuests, addXP]);

    const completedCount = quests.filter(q => q.completed).length;

    return (
        <div className="bg-slate-900/80 backdrop-blur-sm rounded-xl border border-slate-700 overflow-hidden">
            {/* Header */}
            <div className="px-3 py-2 bg-gradient-to-r from-purple-900/50 to-indigo-900/50 border-b border-slate-700 flex items-center justify-between">
                <div className="flex items-center gap-2">
                    <span className="text-lg">ğŸ“‹</span>
                    <span className="text-sm font-bold text-white">GÃ¼nlÃ¼k GÃ¶revler</span>
                </div>
                <div className="text-xs text-purple-400 font-bold">
                    {completedCount}/{quests.length}
                </div>
            </div>

            {/* Quest List */}
            <div className="p-2 space-y-2">
                {quests.map(quest => {
                    const progressPercent = Math.min((quest.progress / quest.target) * 100, 100);

                    return (
                        <div
                            key={quest.id}
                            className={`p-2 rounded-lg border transition-all ${quest.completed
                                ? 'bg-emerald-900/20 border-emerald-600/30'
                                : 'bg-slate-800/50 border-slate-700/50'
                                }`}
                        >
                            <div className="flex items-start gap-2">
                                <span className={`text-xl ${quest.completed ? '' : 'grayscale-[50%]'}`}>
                                    {quest.icon}
                                </span>
                                <div className="flex-1 min-w-0">
                                    <div className="flex items-center gap-2">
                                        <span className={`text-xs font-bold ${quest.completed ? 'text-emerald-400' : 'text-white'
                                            }`}>
                                            {quest.name}
                                        </span>
                                        {quest.completed && (
                                            <span className="text-[10px] bg-emerald-700 text-white px-1.5 rounded">âœ“</span>
                                        )}
                                    </div>
                                    <div className="text-[10px] text-slate-400">{quest.description}</div>

                                    {/* Progress Bar */}
                                    <div className="mt-1.5 flex items-center gap-2">
                                        <div className="flex-1 h-1.5 bg-slate-700 rounded-full overflow-hidden">
                                            <div
                                                className={`h-full transition-all duration-500 ${quest.completed
                                                    ? 'bg-emerald-500'
                                                    : 'bg-gradient-to-r from-purple-500 to-indigo-500'
                                                    }`}
                                                style={{ '--quest-progress': `${progressPercent}%`, width: 'var(--quest-progress)' } as any}
                                            />
                                        </div>
                                        <span className="text-[10px] text-slate-500 font-mono">
                                            {quest.progress}/{quest.target}
                                        </span>
                                    </div>
                                </div>
                                <div className="text-xs font-bold text-amber-400">
                                    +{quest.xpReward}
                                </div>
                            </div>
                        </div>
                    );
                })}
            </div>

            {/* Reset Info */}
            <div className="px-3 py-1.5 text-[10px] text-slate-500 text-center border-t border-slate-700/50">
                GÃ¶revler gece yarÄ±sÄ± sÄ±fÄ±rlanÄ±r
            </div>
        </div>
    );
}

```

# Project Application Context - Part 9

## File: app\components\ScenarioEditor.tsx
```
import React from 'react';
import { Match } from '../types';

interface ScenarioEditorProps {
    matches: Match[]; // Upcoming matches
    overrides: Record<string, string>; // matchId ("Home-Away") -> score ("3-0")
    onUpdate: (matchId: string, score: string | null) => void;
    targetTeam: string;
}

const SCORES = ["3-0", "3-1", "3-2", "2-3", "1-3", "0-3"];

const ScenarioEditor: React.FC<ScenarioEditorProps> = ({ matches, overrides, onUpdate, targetTeam }) => {
    return (
        <div className="bg-slate-900 border border-slate-800 rounded-lg p-5 space-y-4">
            <div className="flex justify-between items-center">
                <h3 className="font-bold text-slate-100 flex items-center gap-2">
                    <span>ğŸ®</span> Senaryo Modu
                </h3>
                <span className="text-xs text-slate-500 bg-slate-950 px-2 py-1 rounded">Gelecek 4 MaÃ§</span>
            </div>

            <div className="space-y-3">
                {matches.slice(0, 4).map(match => {
                    const matchId = `${match.homeTeam}-${match.awayTeam}`;
                    const currentScore = overrides[matchId] || "";
                    const isHome = match.homeTeam === targetTeam;
                    const opponent = isHome ? match.awayTeam : match.homeTeam;

                    return (
                        <div key={matchId} className="bg-slate-950 p-3 rounded border border-slate-800/50">
                            <div className="flex justify-between items-center mb-2">
                                <div className="flex items-center gap-2 text-sm text-slate-300">
                                    <span className={`text-[10px] font-bold px-1.5 py-0.5 rounded ${isHome ? 'bg-blue-900/30 text-blue-400' : 'bg-purple-900/30 text-purple-400'}`}>
                                        {isHome ? 'EV' : 'DEP'}
                                    </span>
                                    <span className="font-medium truncate">{opponent}</span>
                                </div>
                                {currentScore && (
                                    <button
                                        onClick={() => onUpdate(matchId, null)}
                                        className="text-[10px] text-slate-500 hover:text-white underline"
                                    >
                                        Temizle
                                    </button>
                                )}
                            </div>

                            <div className="flex gap-2">
                                {/* Win Options */}
                                <div className="flex-1 flex gap-1">
                                    {SCORES.slice(0, 3).map(score => { // 3-0, 3-1, 3-2
                                        const isSelected = currentScore === score;
                                        const [h, a] = score.split('-').map(Number);
                                        const targetWins = isHome ? h > a : a > h;
                                        const colorClass = targetWins ? 'hover:bg-emerald-900/50 hover:border-emerald-500/50' : 'hover:bg-rose-900/50 hover:border-rose-500/50';
                                        const activeClass = targetWins ? 'bg-emerald-700 border-emerald-600 text-white' : 'bg-rose-700 border-rose-600 text-white';

                                        return (
                                            <button
                                                key={score}
                                                onClick={() => onUpdate(matchId, isSelected ? null : score)}
                                                className={`flex-1 text-[10px] py-1.5 rounded border transition-all text-center ${isSelected
                                                    ? activeClass
                                                    : 'bg-slate-900 border-slate-800 text-slate-400 ' + colorClass
                                                    }`}
                                            >
                                                {score}
                                            </button>
                                        );
                                    })}
                                </div>

                                {/* Lose Options */}
                                <div className="flex-1 flex gap-1">
                                    {SCORES.slice(3, 6).map(score => { // 2-3, 1-3, 0-3
                                        const isSelected = currentScore === score;
                                        const [h, a] = score.split('-').map(Number);
                                        const targetWins = isHome ? h > a : a > h;
                                        const colorClass = targetWins ? 'hover:bg-emerald-900/50 hover:border-emerald-500/50' : 'hover:bg-rose-900/50 hover:border-rose-500/50';
                                        const activeClass = targetWins ? 'bg-emerald-700 border-emerald-600 text-white' : 'bg-rose-700 border-rose-600 text-white';

                                        return (
                                            <button
                                                key={score}
                                                onClick={() => onUpdate(matchId, isSelected ? null : score)}
                                                className={`flex-1 text-[10px] py-1.5 rounded border transition-all text-center ${isSelected
                                                    ? activeClass
                                                    : 'bg-slate-900 border-slate-800 text-slate-400 ' + colorClass
                                                    }`}
                                            >
                                                {score}
                                            </button>
                                        );
                                    })}
                                </div>
                            </div>
                        </div>
                    );
                })}
            </div>
            <p className="text-xs text-slate-500 italic">
                * Skorlara tÄ±klayarak simÃ¼lasyonu manipÃ¼le edebilirsiniz. SeÃ§imi kaldÄ±rmak iÃ§in tekrar tÄ±klayÄ±n.
            </p>
        </div>
    );
};

export default ScenarioEditor;

```

## File: app\components\ScrollToTop.tsx
```
"use client";

import { useEffect, useState } from "react";

export default function ScrollToTop() {
    const [isVisible, setIsVisible] = useState(false);

    useEffect(() => {
        const toggleVisibility = () => {
            if (window.scrollY > 300) {
                setIsVisible(true);
            } else {
                setIsVisible(false);
            }
        };

        window.addEventListener("scroll", toggleVisibility);
        return () => window.removeEventListener("scroll", toggleVisibility);
    }, []);

    const scrollToTop = () => {
        window.scrollTo({
            top: 0,
            behavior: "smooth",
        });
    };

    if (!isVisible) return null;

    return (
        <button
            onClick={scrollToTop}
            className="fixed bottom-4 right-4 z-50 p-3 bg-amber-600 hover:bg-amber-500 text-white rounded-full shadow-lg shadow-amber-600/30 transition-all hover:scale-110 active:scale-95 animate-in fade-in slide-in-from-bottom-4 duration-300"
            aria-label="YukarÄ± Ã‡Ä±k"
        >
            <svg
                xmlns="http://www.w3.org/2000/svg"
                className="h-5 w-5"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
            >
                <path
                    strokeLinecap="round"
                    strokeLinejoin="round"
                    strokeWidth={2.5}
                    d="M5 10l7-7m0 0l7 7m-7-7v18"
                />
            </svg>
        </button>
    );
}

```

## File: app\components\SearchFilter.tsx
```
"use client";

import { useState, useEffect } from 'react';

interface SearchFilterProps {
    items: { name: string;[key: string]: any }[];
    onFilter: (filtered: any[]) => void;
    placeholder?: string;
}

export default function SearchFilter({ items, onFilter, placeholder = "Ara..." }: SearchFilterProps) {
    const [query, setQuery] = useState('');

    useEffect(() => {
        if (!query.trim()) {
            onFilter(items);
            return;
        }

        const q = query.toLowerCase();
        const filtered = items.filter(item =>
            item.name.toLowerCase().includes(q)
        );
        onFilter(filtered);
    }, [query, items, onFilter]);

    return (
        <div className="relative">
            <input
                type="text"
                value={query}
                onChange={(e) => setQuery(e.target.value)}
                placeholder={placeholder}
                className="w-full px-4 py-2 pl-10 bg-slate-900 border border-slate-700 rounded-lg text-white text-sm placeholder-slate-500 focus:outline-none focus:border-blue-500 transition-colors"
            />
            <span className="absolute left-3 top-1/2 -translate-y-1/2 text-slate-500">
                ğŸ”
            </span>
            {query && (
                <button
                    onClick={() => setQuery('')}
                    className="absolute right-3 top-1/2 -translate-y-1/2 text-slate-500 hover:text-white"
                >
                    âœ•
                </button>
            )}
        </div>
    );
}

```

## File: app\components\SEOSchema.tsx
```
import Script from "next/script";

interface OrganizationSchemaProps {
    name?: string;
    url?: string;
    logo?: string;
    description?: string;
    sameAs?: string[];
}

export function OrganizationSchema({
    name = "VolleySimulator",
    url = "https://volleysimulator.com",
    logo = "https://volleysimulator.com/volley_simulator_logo.png",
    description = "TÃ¼rkiye voleybol ligleri iÃ§in puan durumu, maÃ§ tahminleri, playoff simÃ¼lasyonu ve liderlik tablosu platformu.",
    sameAs = [],
}: OrganizationSchemaProps) {
    const schema = {
        "@context": "https://schema.org",
        "@type": "Organization",
        name,
        url,
        logo,
        description,
        sameAs,
    };

    return (
        <Script
            id="organization-schema"
            type="application/ld+json"
            dangerouslySetInnerHTML={{ __html: JSON.stringify(schema) }}
        />
    );
}

interface WebsiteSchemaProps {
    name?: string;
    url?: string;
    description?: string;
}

export function WebsiteSchema({
    name = "VolleySimulator",
    url = "https://volleysimulator.com",
    description = "TÃ¼rkiye voleybol ligleri iÃ§in puan durumu, maÃ§ tahminleri, playoff simÃ¼lasyonu ve liderlik tablosu.",
}: WebsiteSchemaProps) {
    const schema = {
        "@context": "https://schema.org",
        "@type": "WebSite",
        name,
        url,
        description,
        potentialAction: {
            "@type": "SearchAction",
            target: {
                "@type": "EntryPoint",
                urlTemplate: `${url}/takimlar/{search_term_string}`,
            },
            "query-input": "required name=search_term_string",
        },
    };

    return (
        <Script
            id="website-schema"
            type="application/ld+json"
            dangerouslySetInnerHTML={{ __html: JSON.stringify(schema) }}
        />
    );
}

interface SportsEventSchemaProps {
    name: string;
    startDate: string;
    location?: string;
    homeTeam: string;
    awayTeam: string;
    sport?: string;
}

export function SportsEventSchema({
    name,
    startDate,
    location = "Turkey",
    homeTeam,
    awayTeam,
    sport = "Volleyball",
}: SportsEventSchemaProps) {
    const schema = {
        "@context": "https://schema.org",
        "@type": "SportsEvent",
        name,
        startDate,
        location: {
            "@type": "Place",
            name: location,
        },
        homeTeam: {
            "@type": "SportsTeam",
            name: homeTeam,
        },
        awayTeam: {
            "@type": "SportsTeam",
            name: awayTeam,
        },
        sport,
    };

    return (
        <Script
            id={`sports-event-${homeTeam}-${awayTeam}`}
            type="application/ld+json"
            dangerouslySetInnerHTML={{ __html: JSON.stringify(schema) }}
        />
    );
}

interface BreadcrumbItem {
    name: string;
    url: string;
}

interface BreadcrumbSchemaProps {
    items: BreadcrumbItem[];
}

export function BreadcrumbSchema({ items }: BreadcrumbSchemaProps) {
    const schema = {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        itemListElement: items.map((item, index) => ({
            "@type": "ListItem",
            position: index + 1,
            name: item.name,
            item: item.url,
        })),
    };

    return (
        <Script
            id="breadcrumb-schema"
            type="application/ld+json"
            dangerouslySetInnerHTML={{ __html: JSON.stringify(schema) }}
        />
    );
}

interface SportsTeamSchemaProps {
    name: string;
    url?: string;
    logo?: string;
    sport?: string;
    league?: string;
}

export function SportsTeamSchema({
    name,
    url,
    logo,
    sport = "Volleyball",
    league,
}: SportsTeamSchemaProps) {
    const schema = {
        "@context": "https://schema.org",
        "@type": "SportsTeam",
        name,
        sport,
        ...(url && { url }),
        ...(logo && { logo }),
        ...(league && {
            memberOf: {
                "@type": "SportsOrganization",
                name: league,
            },
        }),
    };

    return (
        <Script
            id={`sports-team-${name}`}
            type="application/ld+json"
            dangerouslySetInnerHTML={{ __html: JSON.stringify(schema) }}
        />
    );
}

```

## File: app\components\ShareButton.tsx
```
"use client";

import { useCallback, useRef, useState } from "react";
import { toPng } from "html-to-image";

interface ShareButtonProps {
    targetRef: React.RefObject<HTMLElement | null>;
    championName?: string;
    className?: string;
}

export default function ShareButton({ targetRef, championName, className = "" }: ShareButtonProps) {
    const [isLoading, setIsLoading] = useState(false);

    const handleShare = useCallback(async () => {
        if (!targetRef.current) return;

        setIsLoading(true);
        try {
            // Create a wrapper with watermark
            const element = targetRef.current;

            const dataUrl = await toPng(element, {
                backgroundColor: "#0f172a",
                pixelRatio: 2,
                style: {
                    transform: "scale(1)",
                    transformOrigin: "top left",
                }
            });

            // Create canvas to add watermark
            const img = new Image();
            img.src = dataUrl;

            await new Promise((resolve) => { img.onload = resolve; });

            const canvas = document.createElement("canvas");
            canvas.width = img.width;
            canvas.height = img.height + 80; // Extra space for watermark

            const ctx = canvas.getContext("2d");
            if (!ctx) return;

            // Fill background
            ctx.fillStyle = "#0f172a";
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Draw the captured image
            ctx.drawImage(img, 0, 0);

            // Add watermark bar
            ctx.fillStyle = "#1e293b";
            ctx.fillRect(0, img.height, canvas.width, 80);

            // Add champion text
            ctx.fillStyle = "#fbbf24";
            ctx.font = "bold 24px system-ui, sans-serif";
            ctx.textAlign = "center";

            const text = championName
                ? `ğŸ† Benim Senaryoma GÃ¶re Åampiyon: ${championName}`
                : "ğŸ VolleySimulator - Sezon Senaryom";
            ctx.fillText(text, canvas.width / 2, img.height + 50);

            // Convert to blob and download
            canvas.toBlob((blob) => {
                if (!blob) return;
                const url = URL.createObjectURL(blob);
                const a = document.createElement("a");
                a.href = url;
                a.download = `senaryo-${new Date().toLocaleDateString("tr-TR")}.png`;
                a.click();
                URL.revokeObjectURL(url);
            }, "image/png");

        } catch (err) {
            console.error("Share failed:", err);
        } finally {
            setIsLoading(false);
        }
    }, [targetRef, championName]);

    return (
        <button
            onClick={handleShare}
            disabled={isLoading}
            className={`flex items-center gap-2 px-3 py-1.5 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-400 hover:to-orange-400 text-white text-xs font-bold rounded-lg shadow-lg shadow-amber-500/20 transition-all hover:scale-105 active:scale-95 disabled:opacity-50 disabled:cursor-wait ${className}`}
        >
            {isLoading ? (
                <>
                    <div className="w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"></div>
                    <span>Ä°ndiriliyor...</span>
                </>
            ) : (
                <>
                    <span>PaylaÅŸ</span>
                </>
            )}
        </button>
    );
}

```

## File: app\components\StatsCard.tsx
```
"use client";

import { Card, CardContent } from "@/components/ui/card";
import { ArrowUp, ArrowDown, ArrowRight } from "lucide-react";

interface StatsCardProps {
    title: string;
    value: string | number;
    subtitle?: string;
    icon?: string;
    trend?: 'up' | 'down' | 'neutral';
    trendValue?: string;
    color?: 'emerald' | 'blue' | 'amber' | 'rose' | 'purple';
}

export default function StatsCard({
    title,
    value,
    subtitle,
    icon,
    trend,
    trendValue,
    color = 'blue'
}: StatsCardProps) {
    const colors = {
        emerald: 'from-emerald-600 to-emerald-500',
        blue: 'from-blue-600 to-blue-500',
        amber: 'from-amber-600 to-amber-500',
        rose: 'from-rose-600 to-rose-500',
        purple: 'from-purple-600 to-purple-500'
    };

    const trendColors = {
        up: 'text-emerald-400',
        down: 'text-rose-400',
        neutral: 'text-muted-foreground'
    };

    const TrendIcon = {
        up: ArrowUp,
        down: ArrowDown,
        neutral: ArrowRight
    };

    return (
        <Card className="overflow-hidden shadow-sm hover:shadow-md transition-all group">
            <div className={`h-1 bg-gradient-to-r ${colors[color]}`} />
            <CardContent className="p-4">
                <div className="flex items-start justify-between">
                    <div>
                        <p className="text-xs text-muted-foreground mb-1">{title}</p>
                        <p className="text-2xl font-bold text-foreground group-hover:scale-105 transition-transform origin-left">
                            {value}
                        </p>
                        {subtitle && (
                            <p className="text-xs text-muted-foreground mt-1">{subtitle}</p>
                        )}
                    </div>
                    {icon && (
                        <span className="text-2xl opacity-50 group-hover:opacity-100 transition-opacity">
                            {icon}
                        </span>
                    )}
                </div>
                {trend && trendValue && (
                    <div className={`flex items-center gap-1 mt-2 text-xs ${trendColors[trend]}`}>
                        {(() => {
                            const Icon = TrendIcon[trend];
                            return <Icon className="h-3 w-3" />;
                        })()}
                        <span>{trendValue}</span>
                    </div>
                )}
            </CardContent>
        </Card>
    );
}

```

## File: app\components\StreakWidget.tsx
```
"use client";

import { useQuests } from '../context/QuestsContext';

export default function StreakWidget() {
  const { streakData, isLoading } = useQuests();

  if (isLoading || !streakData) {
    return (
      <div className="bg-gradient-to-r from-orange-500/10 to-red-500/10 border border-orange-500/30 rounded-xl p-4 animate-pulse">
        <div className="h-8 bg-slate-700 rounded w-16 mx-auto" />
      </div>
    );
  }

  return (
    <div className="bg-gradient-to-r from-orange-500/10 to-red-500/10 border border-orange-500/30 rounded-xl p-4">
      <div className="flex items-center justify-between">
        <div className="flex items-center gap-3">
          {/* Fire Icon with animation */}
          <div className="relative">
            <span className="text-3xl animate-pulse">ğŸ”¥</span>
            {streakData.currentStreak >= 7 && (
              <span className="absolute -top-1 -right-1 text-lg">âš¡</span>
            )}
          </div>
          
          <div>
            <div className="text-2xl font-black text-white">
              {streakData.currentStreak}
            </div>
            <div className="text-xs text-slate-400">
              GÃ¼nlÃ¼k Seri
            </div>
          </div>
        </div>

        {/* Best streak */}
        <div className="text-right">
          <div className="text-sm text-slate-400">En Ä°yi</div>
          <div className="text-lg font-bold text-orange-400">
            {streakData.longestStreak} ğŸ†
          </div>
        </div>
      </div>

      {/* Freeze tokens */}
      {streakData.streakFreezeAvailable > 0 && (
        <div className="mt-3 pt-3 border-t border-slate-800">
          <div className="flex items-center justify-between text-sm">
            <span className="text-slate-400">Seri Koruma</span>
            <div className="flex gap-1">
              {Array.from({ length: streakData.streakFreezeAvailable }).map((_, i) => (
                <span key={i} className="text-lg">â„ï¸</span>
              ))}
            </div>
          </div>
        </div>
      )}

      {/* Streak bonus message */}
      {streakData.currentStreak >= 3 && (
        <div className="mt-3 bg-orange-500/20 rounded-lg px-3 py-2 text-center">
          <span className="text-sm text-orange-300">
            {streakData.currentStreak >= 30 ? 'ğŸŒŸ Efsanevi Seri! 2x puan' :
             streakData.currentStreak >= 14 ? 'ğŸ’ª SÃ¼per Seri! 1.75x puan' :
             streakData.currentStreak >= 7 ? 'ğŸ”¥ AteÅŸli Seri! 1.5x puan' :
             'âœ¨ BaÅŸarÄ±lÄ± Seri! 1.25x puan'}
          </span>
        </div>
      )}
    </div>
  );
}

// Compact version for navbar
export function StreakBadge() {
  const { streakData, isLoading } = useQuests();

  if (isLoading || !streakData || streakData.currentStreak === 0) {
    return null;
  }

  return (
    <div className="flex items-center gap-1 bg-gradient-to-r from-orange-500/20 to-red-500/20 px-2 py-1 rounded-lg">
      <span className="text-sm">ğŸ”¥</span>
      <span className="text-sm font-bold text-orange-400">{streakData.currentStreak}</span>
    </div>
  );
}

```

## File: app\components\SwipeableTabs.tsx
```
"use client";

import { useRef, useEffect } from 'react';
import { Button } from "@/components/ui/button";
import { ScrollArea, ScrollBar } from "@/components/ui/scroll-area";

interface SwipeableTabsProps {
    tabs: { id: string; label: string }[];
    activeTab: string;
    onChange: (id: string) => void;
    className?: string;
}

/**
 * Horizontal scrollable tabs for mobile-friendly group selection
 * 
 * Features:
 * - Touch-friendly (min 44px height)
 * - Auto-scrolls to keep active tab visible
 * - Single-tap selection (no dropdown needed)
 * - Active indicator animation
 */
export default function SwipeableTabs({
    tabs,
    activeTab,
    onChange,
    className = ''
}: SwipeableTabsProps) {
    const activeTabRef = useRef<HTMLButtonElement>(null);

    // Auto-scroll to active tab when it changes
    useEffect(() => {
        if (activeTabRef.current) {
            activeTabRef.current.scrollIntoView({
                behavior: 'smooth',
                block: 'nearest',
                inline: 'center'
            });
        }
    }, [activeTab]);

    return (
        <ScrollArea className={`w-full ${className}`}>
            <div className="flex gap-2 pb-3">
                {tabs.map((tab) => {
                    const isActive = tab.id === activeTab;

                    return (
                        <Button
                            key={tab.id}
                            ref={isActive ? activeTabRef : null}
                            onClick={() => onChange(tab.id)}
                            variant={isActive ? "default" : "secondary"}
                            size="sm"
                            className={`
                                rounded-full whitespace-nowrap min-h-[44px] flex-shrink-0
                                ${isActive
                                    ? 'bg-primary text-primary-foreground shadow-lg'
                                    : 'bg-secondary text-secondary-foreground hover:bg-secondary/80'
                                }
                            `}
                        >
                            {tab.label}
                        </Button>
                    );
                })}
            </div>
            <ScrollBar orientation="horizontal" />
        </ScrollArea>
    );
}

```

## File: app\components\TeamAvatar.tsx
```
"use client";

import Image from "next/image";
import { useState, memo, useMemo } from "react";

interface TeamAvatarProps {
    name: string;
    size?: 'xs' | 'sm' | 'md' | 'lg';
    showName?: boolean;
    position?: number;
    priority?: boolean;
}

const sizes = {
    xs: 'w-4 h-4 text-[8px]',
    sm: 'w-6 h-6 text-[10px]',
    md: 'w-8 h-8 text-xs',
    lg: 'w-12 h-12 text-sm'
} as const;

const pixelSizes = {
    xs: 16,
    sm: 24,
    md: 32,
    lg: 48
} as const;

const positionColors: Record<number, string> = {
    1: 'ring-2 ring-amber-400',
    2: 'ring-2 ring-slate-300',
    3: 'ring-2 ring-amber-700'
};

// Generate consistent color from team name - memoized outside component
const stringToColor = (str: string) => {
    let hash = 0;
    for (let i = 0; i < str.length; i++) {
        hash = str.charCodeAt(i) + ((hash << 5) - hash);
    }
    const hue = hash % 360;
    return `hsl(${hue}, 60%, 40%)`;
};

const getInitials = (teamName: string) => {
    const words = teamName.split(' ');
    if (words.length >= 2) {
        return words[0][0] + words[1][0];
    }
    return teamName.slice(0, 2);
};

function TeamAvatar({ name, size = 'md', showName = false, position, priority = false }: TeamAvatarProps) {
    const [hasError, setHasError] = useState(false);

    // Memoize computed values
    const backgroundColor = useMemo(() => hasError ? stringToColor(name) : undefined, [hasError, name]);
    const initials = useMemo(() => getInitials(name), [name]);
    const positionClass = position ? positionColors[position] || '' : '';

    return (
        <div className="flex items-center gap-2">
            <div
                className={`${sizes[size]} rounded-full flex items-center justify-center font-bold text-white uppercase relative overflow-hidden ${hasError ? '' : 'bg-slate-800'} ${positionClass}`}
                style={backgroundColor ? { backgroundColor } : undefined}
                title={name}
                role="img"
                aria-label={name}
            >
                {!hasError ? (
                    <Image
                        src={`/logos/${name}.png`}
                        alt={name}
                        width={pixelSizes[size]}
                        height={pixelSizes[size]}
                        className="w-full h-full object-contain p-0.5"
                        onError={() => setHasError(true)}
                        priority={priority}
                        loading={priority ? "eager" : "lazy"}
                        placeholder="blur"
                        blurDataURL="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBmaWxsPSIjMWUyOTNiIiByeD0iMjAiLz48L3N2Zz4="
                        sizes={`${pixelSizes[size]}px`}
                    />
                ) : (
                    <div className="w-full h-full flex items-center justify-center">
                        {initials}
                    </div>
                )}
            </div>
            {showName && (
                <span className="text-sm text-white truncate">{name}</span>
            )}
        </div>
    );
}

export default memo(TeamAvatar);

```

## File: app\components\TeamCompareModal.tsx
```
"use client";

import {
    Dialog,
    DialogContent,
    DialogHeader,
    DialogTitle,
} from "@/components/ui/dialog";
import { Button } from "@/components/ui/button";

interface TeamCompareModalProps {
    isOpen: boolean;
    onClose: () => void;
    team1: TeamData | null;
    team2: TeamData | null;
}

interface TeamData {
    name: string;
    played: number;
    wins: number;
    points: number;
    setsWon: number;
    setsLost: number;
    elo?: number;
}

export default function TeamCompareModal({ isOpen, onClose, team1, team2 }: TeamCompareModalProps) {
    if (!team1 || !team2) return null;

    const stats: { label: string; key: keyof TeamData; icon: string; inverse?: boolean }[] = [
        { label: 'Oynanan', key: 'played', icon: 'ğŸ®' },
        { label: 'Galibiyet', key: 'wins', icon: 'ğŸ†' },
        { label: 'Puan', key: 'points', icon: 'â­' },
        { label: 'Set KazanÄ±lan', key: 'setsWon', icon: 'ğŸ“Š' },
        { label: 'Set Kaybedilen', key: 'setsLost', icon: 'ğŸ“‰', inverse: true },
    ];

    const getWinner = (key: keyof TeamData, inverse = false) => {
        const v1 = team1[key] as number;
        const v2 = team2[key] as number;
        if (v1 === v2) return 0;
        if (inverse) return v1 < v2 ? 1 : 2;
        return v1 > v2 ? 1 : 2;
    };

    return (
        <Dialog open={isOpen} onOpenChange={() => onClose()}>
            <DialogContent className="sm:max-w-lg">
                <DialogHeader>
                    <DialogTitle className="text-center">âš”ï¸ TakÄ±m KarÅŸÄ±laÅŸtÄ±rmasÄ±</DialogTitle>
                </DialogHeader>

                {/* Team Headers */}
                <div className="flex justify-between items-center mb-6">
                    <div className="text-center flex-1">
                        <div className="text-2xl mb-2">ğŸ”µ</div>
                        <h3 className="font-bold text-foreground text-sm truncate px-2">{team1.name}</h3>
                    </div>
                    <div className="text-2xl text-muted-foreground">VS</div>
                    <div className="text-center flex-1">
                        <div className="text-2xl mb-2">ğŸ”´</div>
                        <h3 className="font-bold text-foreground text-sm truncate px-2">{team2.name}</h3>
                    </div>
                </div>

                {/* Stats Comparison */}
                <div className="space-y-3">
                    {stats.map(stat => {
                        const winner = getWinner(stat.key, stat.inverse);
                        const v1 = team1[stat.key] as number;
                        const v2 = team2[stat.key] as number;
                        const max = Math.max(v1, v2) || 1;

                        return (
                            <div key={stat.key} className="bg-muted rounded-lg p-3">
                                <div className="text-xs text-muted-foreground text-center mb-2">{stat.icon} {stat.label}</div>
                                <div className="flex items-center gap-2">
                                    <span className={`text-sm font-bold w-8 text-right ${winner === 1 ? 'text-emerald-400' : 'text-foreground'}`}>
                                        {v1}
                                    </span>
                                    <div className="flex-1 flex gap-1 h-3">
                                        <div
                                            className={`h-full rounded-l transition-all ${winner === 1 ? 'bg-emerald-500' : 'bg-muted-foreground/30'}`}
                                            style={{ width: `${(v1 / max) * 50}%` }}
                                        />
                                        <div
                                            className={`h-full rounded-r transition-all ${winner === 2 ? 'bg-emerald-500' : 'bg-muted-foreground/30'}`}
                                            style={{ width: `${(v2 / max) * 50}%` }}
                                        />
                                    </div>
                                    <span className={`text-sm font-bold w-8 ${winner === 2 ? 'text-emerald-400' : 'text-foreground'}`}>
                                        {v2}
                                    </span>
                                </div>
                            </div>
                        );
                    })}
                </div>

                {/* Close Button */}
                <Button onClick={onClose} variant="secondary" className="w-full mt-4">
                    Kapat
                </Button>
            </DialogContent>
        </Dialog>
    );
}

```

## File: app\components\TeamFormDisplay.tsx
```
"use client";

import { TeamForm, HeadToHeadStats } from '../types';

interface TeamFormDisplayProps {
  form: TeamForm;
  teamName: string;
}

export function TeamFormDisplay({ form, teamName }: TeamFormDisplayProps) {
  const formResults = form.lastFiveMatches || form.last5Results || [];
  const formPercentage = form.formPercentage ?? form.winRate ?? 0;
  const goalsScored = form.goalsScored ?? form.avgPointsScored ?? 0;
  const goalsConceded = form.goalsConceded ?? form.avgPointsConceded ?? 0;
  const winStreak = form.winStreak ?? 0;
  
  return (
    <div className="bg-slate-900/50 border border-slate-800 rounded-xl p-4">
      <div className="flex items-center justify-between mb-3">
        <h4 className="font-bold text-white">{teamName}</h4>
        <span className={`text-sm font-bold ${
          formPercentage >= 70 ? 'text-emerald-400' :
          formPercentage >= 50 ? 'text-amber-400' :
          'text-red-400'
        }`}>
          Form: %{formPercentage}
        </span>
      </div>

      {/* Last 5 Results */}
      <div className="flex items-center gap-1.5 mb-3">
        <span className="text-xs text-slate-500 mr-2">Son 5:</span>
        {formResults.map((result, index) => (
          <span 
            key={index}
            className={`w-6 h-6 rounded flex items-center justify-center text-xs font-bold ${
              result === 'W' ? 'bg-emerald-500/30 text-emerald-400' :
              result === 'D' ? 'bg-amber-500/30 text-amber-400' :
              'bg-red-500/30 text-red-400'
            }`}
          >
            {result === 'W' ? 'G' : result === 'D' ? 'B' : 'M'}
          </span>
        ))}
      </div>

      {/* Stats */}
      <div className="grid grid-cols-3 gap-2 text-center">
        <div className="bg-slate-800/50 rounded-lg p-2">
          <div className="text-lg font-bold text-white">{Math.round(goalsScored)}</div>
          <div className="text-xs text-slate-500">AtÄ±lan</div>
        </div>
        <div className="bg-slate-800/50 rounded-lg p-2">
          <div className="text-lg font-bold text-white">{Math.round(goalsConceded)}</div>
          <div className="text-xs text-slate-500">Yenen</div>
        </div>
        <div className="bg-slate-800/50 rounded-lg p-2">
          <div className="text-lg font-bold text-white">{winStreak}</div>
          <div className="text-xs text-slate-500">Seri</div>
        </div>
      </div>
    </div>
  );
}

interface HeadToHeadDisplayProps {
  stats: HeadToHeadStats;
  homeTeam: string;
  awayTeam: string;
}

export function HeadToHeadDisplay({ stats, homeTeam, awayTeam }: HeadToHeadDisplayProps) {
  const total = stats.totalMatches || 0;
  const homeWinPercent = total > 0 ? Math.round((stats.homeWins / total) * 100) : 0;
  const awayWinPercent = total > 0 ? Math.round((stats.awayWins / total) * 100) : 0;

  return (
    <div className="bg-slate-900/50 border border-slate-800 rounded-xl p-4">
      <h4 className="font-bold text-white mb-4 text-center">KarÅŸÄ±laÅŸma GeÃ§miÅŸi</h4>

      {/* Stats Bar */}
      <div className="mb-4">
        <div className="flex items-center justify-between text-sm mb-2">
          <span className="text-blue-400 font-bold">{stats.homeWins}</span>
          <span className="text-slate-500">{total} maÃ§</span>
          <span className="text-orange-400 font-bold">{stats.awayWins}</span>
        </div>
        <div className="h-3 bg-slate-800 rounded-full overflow-hidden flex">
          <div 
            className="bg-blue-500 transition-all"
            style={{ width: `${homeWinPercent}%` }}
          />
          <div 
            className="bg-orange-500 transition-all"
            style={{ width: `${awayWinPercent}%` }}
          />
        </div>
        <div className="flex items-center justify-between text-xs mt-2 text-slate-500">
          <span>{homeTeam}</span>
          <span>{awayTeam}</span>
        </div>
      </div>

      {/* Last Results */}
      {stats.lastMeetings && stats.lastMeetings.length > 0 && (
        <div>
          <h5 className="text-xs text-slate-500 mb-2">Son KarÅŸÄ±laÅŸmalar</h5>
          <div className="space-y-2">
            {stats.lastMeetings.slice(0, 3).map((result, index) => (
              <div 
                key={index}
                className="flex items-center justify-between text-sm bg-slate-800/50 rounded-lg px-3 py-2"
              >
                <span className="text-slate-500 text-xs">
                  {new Date(result.date).toLocaleDateString('tr-TR', { day: 'numeric', month: 'short' })}
                </span>
                <span className="font-bold text-slate-300">
                  {result.score}
                </span>
              </div>
            ))}
          </div>
        </div>
      )}

      {/* Average Stats */}
      <div className="grid grid-cols-2 gap-2 mt-4 text-center">
        <div className="bg-slate-800/50 rounded-lg p-2">
          <div className="text-sm font-bold text-white">{stats.homeSetWins || 0}</div>
          <div className="text-xs text-slate-500">Set (Ev)</div>
        </div>
        <div className="bg-slate-800/50 rounded-lg p-2">
          <div className="text-sm font-bold text-white">{stats.awaySetWins || 0}</div>
          <div className="text-xs text-slate-500">Set (DÄ±ÅŸ)</div>
        </div>
      </div>
    </div>
  );
}

// Compact version for match cards
export function FormBadge({ form }: { form: TeamForm }) {
  const percentage = form.formPercentage ?? form.winRate ?? 0;
  const color = percentage >= 70 ? 'emerald' :
                percentage >= 50 ? 'amber' : 'red';

  return (
    <div className={`inline-flex items-center gap-1 px-2 py-1 bg-${color}-500/20 rounded-lg`}>
      <span className={`text-xs font-bold text-${color}-400`}>
        {percentage}%
      </span>
      <div className="flex gap-0.5">
        {form.lastFiveMatches?.slice(0, 3).map((result, i) => (
          <span 
            key={i}
            className={`w-1.5 h-1.5 rounded-full ${
              result === 'W' ? 'bg-emerald-400' :
              result === 'D' ? 'bg-amber-400' :
              'bg-red-400'
            }`}
          />
        ))}
      </div>
    </div>
  );
}

```

## File: app\components\TeamLoyaltySelector.tsx
```
"use client";

import { useState, useEffect } from "react";
import { useGameState } from "../utils/gameState";

interface TeamLoyaltySelectorProps {
    teams: { name: string }[];
    onSelect?: (team: string | null) => void;
}

export default function TeamLoyaltySelector({ teams, onSelect }: TeamLoyaltySelectorProps) {
    const { gameState, setFavoriteTeam } = useGameState();
    const [isOpen, setIsOpen] = useState(false);

    const handleSelect = (teamName: string | null) => {
        setFavoriteTeam(teamName);
        setIsOpen(false);
        onSelect?.(teamName);
    };

    return (
        <div className="relative">
            <button
                onClick={() => setIsOpen(!isOpen)}
                className={`flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs font-bold transition-all border ${gameState.favoriteTeam
                        ? 'bg-gradient-to-r from-rose-600 to-pink-600 text-white border-rose-500 shadow-lg shadow-rose-500/20'
                        : 'bg-slate-800 text-slate-400 border-slate-700 hover:text-white hover:bg-slate-700'
                    }`}
            >
                <span>â¤ï¸</span>
                <span className="hidden sm:inline">
                    {gameState.favoriteTeam || "TakÄ±m SeÃ§"}
                </span>
                {gameState.favoriteTeam && (
                    <span className="bg-amber-500 text-[9px] px-1 rounded">+20% XP</span>
                )}
            </button>

            {isOpen && (
                <div className="absolute top-full mt-1 right-0 z-50 bg-slate-900 border border-slate-700 rounded-lg shadow-xl max-h-[300px] overflow-y-auto min-w-[200px]">
                    <div className="p-2 border-b border-slate-700">
                        <div className="text-xs text-slate-400 font-bold uppercase">Favori TakÄ±m</div>
                        <div className="text-[10px] text-amber-500 mt-0.5">MaÃ§larÄ±na +20% XP bonus!</div>
                    </div>

                    {gameState.favoriteTeam && (
                        <button
                            onClick={() => handleSelect(null)}
                            className="w-full px-3 py-2 text-left text-xs text-rose-400 hover:bg-rose-900/30 border-b border-slate-700/50"
                        >
                            âœ• SeÃ§imi KaldÄ±r
                        </button>
                    )}

                    <div className="py-1">
                        {teams.map(team => (
                            <button
                                key={team.name}
                                onClick={() => handleSelect(team.name)}
                                className={`w-full px-3 py-2 text-left text-xs transition-all flex items-center gap-2 ${gameState.favoriteTeam === team.name
                                        ? 'bg-rose-600/20 text-rose-400'
                                        : 'text-slate-300 hover:bg-slate-800'
                                    }`}
                            >
                                {gameState.favoriteTeam === team.name && <span>â¤ï¸</span>}
                                <span className="truncate">{team.name}</span>
                            </button>
                        ))}
                    </div>
                </div>
            )}
        </div>
    );
}

```

## File: app\components\ThemeToggle.tsx
```
"use client";

import { useEffect, useState } from "react";
import { Button } from "@/components/ui/button";
import { Moon, Sun } from "lucide-react";

export default function ThemeToggle() {
    const [theme, setTheme] = useState<'dark' | 'light'>('dark');
    const [mounted, setMounted] = useState(false);

    function applyTheme(newTheme: 'dark' | 'light') {
        document.documentElement.setAttribute('data-theme', newTheme);
        document.documentElement.classList.remove('dark', 'light');
        document.documentElement.classList.add(newTheme);
    }

    useEffect(() => {
        Promise.resolve().then(() => {
            setMounted(true);
            const saved = localStorage.getItem('theme') as 'dark' | 'light' | null;
            const initialTheme = saved || 'dark';
            setTheme(initialTheme);
            applyTheme(initialTheme);
        });
    }, []);

    function toggleTheme() {
        const newTheme = theme === 'dark' ? 'light' : 'dark';
        setTheme(newTheme);
        localStorage.setItem('theme', newTheme);
        applyTheme(newTheme);
    }

    if (!mounted) return null;

    return (
        <Button
            variant="ghost"
            size="icon"
            onClick={toggleTheme}
            title={theme === 'dark' ? 'AÃ§Ä±k Temaya GeÃ§' : 'Koyu Temaya GeÃ§'}
            aria-label="Toggle theme"
            className="h-9 w-9"
        >
            {theme === 'dark' ? (
                <Sun className="h-4 w-4 text-amber-400" />
            ) : (
                <Moon className="h-4 w-4" />
            )}
        </Button>
    );
}

```

## File: app\components\ThemeWrapper.tsx
```
"use client";

import { ReactNode, useEffect, useState } from "react";
import { ThemeProvider } from "../context/ThemeContext";

export default function ThemeWrapper({ children }: { children: ReactNode }) {
    const [mounted, setMounted] = useState(false);

    useEffect(() => {
        Promise.resolve().then(() => {
            setMounted(true);
        });
        // Set initial theme from localStorage or default to dark
        const saved = localStorage.getItem("theme") || "dark";
        document.documentElement.setAttribute("data-theme", saved);
    }, []);

    // Prevent flash by rendering children immediately but theme applies after mount
    return <ThemeProvider>{children}</ThemeProvider>;
}

```

## File: app\components\Toast.tsx
```
"use client";

import { createContext, useContext, useCallback, ReactNode } from 'react';
import { toast as sonnerToast } from 'sonner';
import { Toaster } from '@/components/ui/sonner';

interface ToastContextType {
    showToast: (message: string, type?: 'success' | 'error' | 'info' | 'undo', options?: { action?: { label: string; onClick: () => void }; duration?: number }) => void;
    showUndoToast: (message: string, onUndo: () => void, duration?: number) => void;
    removeToast: (id: string) => void;
}

const ToastContext = createContext<ToastContextType | null>(null);

export function useToast() {
    const context = useContext(ToastContext);
    if (!context) {
        throw new Error('useToast must be used within a ToastProvider');
    }
    return context;
}

export function ToastProvider({ children }: { children: ReactNode }) {
    const showToast = useCallback((
        message: string,
        type: 'success' | 'error' | 'info' | 'undo' = 'success',
        options?: { action?: { label: string; onClick: () => void }; duration?: number }
    ) => {
        const duration = options?.duration ?? 3000;
        const toastOptions: Parameters<typeof sonnerToast>[1] = {
            duration,
            action: options?.action ? {
                label: options.action.label,
                onClick: options.action.onClick,
            } : undefined,
        };

        switch (type) {
            case 'success':
                sonnerToast.success(message, toastOptions);
                break;
            case 'error':
                sonnerToast.error(message, toastOptions);
                break;
            case 'info':
                sonnerToast.info(message, toastOptions);
                break;
            case 'undo':
                sonnerToast(message, {
                    ...toastOptions,
                    duration: options?.duration ?? 5000,
                });
                break;
            default:
                sonnerToast(message, toastOptions);
        }
    }, []);

    const showUndoToast = useCallback((message: string, onUndo: () => void, duration: number = 5000) => {
        sonnerToast(message, {
            duration,
            action: {
                label: 'Geri Al',
                onClick: onUndo,
            },
        });
    }, []);

    const removeToast = useCallback((id: string) => {
        sonnerToast.dismiss(id);
    }, []);

    return (
        <ToastContext.Provider value={{ showToast, showUndoToast, removeToast }}>
            {children}
            <Toaster 
                position="bottom-right"
                richColors
                closeButton
                expand
            />
        </ToastContext.Provider>
    );
}

```

## File: app\components\Tooltip.tsx
```
"use client";

import { ReactNode } from 'react';
import {
    Tooltip as ShadcnTooltip,
    TooltipContent,
    TooltipProvider,
    TooltipTrigger,
} from '@/components/ui/tooltip';

interface TooltipProps {
    content: ReactNode;
    children: ReactNode;
    position?: 'top' | 'bottom' | 'left' | 'right';
    delay?: number;
}

export default function Tooltip({
    content,
    children,
    position = 'top',
    delay = 200
}: TooltipProps) {
    return (
        <TooltipProvider delayDuration={delay}>
            <ShadcnTooltip>
                <TooltipTrigger asChild>
                    <span className="inline-block">{children}</span>
                </TooltipTrigger>
                <TooltipContent side={position}>
                    {content}
                </TooltipContent>
            </ShadcnTooltip>
        </TooltipProvider>
    );
}

```

## File: app\components\TutorialModal.tsx
```
"use client";

import { useState, useEffect } from "react";
import {
    Dialog,
    DialogContent,
} from "@/components/ui/dialog";
import { Button } from "@/components/ui/button";
import { Progress } from "@/components/ui/progress";

interface TutorialStep {
    id: string;
    title: string;
    description: string;
    icon: string;
    image?: string;
    tips?: string[];
}

const TUTORIAL_STEPS: TutorialStep[] = [
    {
        id: "welcome",
        title: "VolleySimulator'a HoÅŸ Geldiniz!",
        description: "TÃ¼rkiye KadÄ±nlar Voleybol Ligi tahmin oyununa hoÅŸ geldiniz. Bu rehber size uygulamayÄ± nasÄ±l kullanacaÄŸÄ±nÄ±zÄ± gÃ¶sterecek.",
        icon: "ğŸ",
        tips: [
            "Tahmin yaparak XP kazanÄ±n",
            "Seviye atlayarak yeni rozetler aÃ§Ä±n",
            "ArkadaÅŸlarÄ±nÄ±zla yarÄ±ÅŸÄ±n"
        ]
    },
    {
        id: "leagues",
        title: "Lig SeÃ§imi",
        description: "Alt menÃ¼den 'Ligler' butonuna tÄ±klayarak takip etmek istediÄŸiniz ligi seÃ§in. Åu an TÃ¼rkiye 1. Lig ve 2. Lig mevcuttur.",
        icon: "ğŸ‡¹ğŸ‡·",
        tips: [
            "1. Lig: Arabica Coffee House KadÄ±nlar Voleybol 1. Ligi",
            "2. Lig: KadÄ±nlar 2. Lig",
            "YakÄ±nda yeni Ã¼lkeler eklenecek!"
        ]
    },
    {
        id: "predictions",
        title: "Tahmin Yapma",
        description: "MaÃ§ listesinden bir maÃ§ seÃ§in ve tahmininizi girin. Her maÃ§ iÃ§in ev sahibi ve deplasman takÄ±mÄ±nÄ±n set skorunu tahmin edin.",
        icon: "ğŸ¯",
        tips: [
            "3-0, 3-1, 3-2, 2-3, 1-3, 0-3 skorlarÄ±ndan birini seÃ§in",
            "MaÃ§ oynanmadan tahmin yapmalÄ±sÄ±nÄ±z",
            "Tahminlerinizi istediÄŸiniz zaman gÃ¼ncelleyebilirsiniz"
        ]
    },
    {
        id: "standings",
        title: "Puan Durumu",
        description: "Sol tarafta canlÄ± puan durumunu gÃ¶receksiniz. Tahminlerinize gÃ¶re takÄ±mlarÄ±n sÄ±ralamasÄ± anlÄ±k olarak gÃ¼ncellenir.",
        icon: "ğŸ“Š",
        tips: [
            "YeÅŸil oklar yÃ¼kselen takÄ±mlarÄ± gÃ¶sterir",
            "KÄ±rmÄ±zÄ± oklar dÃ¼ÅŸen takÄ±mlarÄ± gÃ¶sterir",
            "Gruplar arasÄ±nda geÃ§iÅŸ yapabilirsiniz"
        ]
    },
    {
        id: "xp_system",
        title: "XP ve Seviye Sistemi",
        description: "Her tahmin yaptÄ±ÄŸÄ±nÄ±zda XP kazanÄ±rsÄ±nÄ±z. XP biriktirerek seviye atlarsÄ±nÄ±z ve yeni Ã¼nvanlar kazanÄ±rsÄ±nÄ±z.",
        icon: "âš¡",
        tips: [
            "Tahmin baÅŸÄ±na +10 XP",
            "DoÄŸru tahmin bonusu ek XP kazandÄ±rÄ±r",
            "BaÅŸarÄ±mlar bÃ¼yÃ¼k XP Ã¶dÃ¼lleri verir"
        ]
    },
    {
        id: "achievements",
        title: "BaÅŸarÄ±mlar",
        description: "Ã–zel gÃ¶revleri tamamlayarak baÅŸarÄ±m rozetleri kazanÄ±n. Her baÅŸarÄ±m size ekstra XP ve Ã¶zel Ã¶dÃ¼ller verir.",
        icon: "ğŸ†",
        tips: [
            "Ä°lk tahmin: 'Ä°lk AdÄ±m' rozeti",
            "50+ tahmin: 'Oyun BaÄŸÄ±mlÄ±sÄ±' rozeti",
            "Profilinizden tÃ¼m baÅŸarÄ±mlarÄ± gÃ¶rÃ¼ntÃ¼leyin"
        ]
    },
    {
        id: "save_share",
        title: "Kaydet ve PaylaÅŸ",
        description: "Tahminlerinizi JSON dosyasÄ± olarak kaydedebilir veya puan durumunu sosyal medyada paylaÅŸabilirsiniz.",
        icon: "ğŸ’¾",
        tips: [
            "Kaydet: TÃ¼m tahminlerinizi indirin",
            "YÃ¼kle: Ã–nceki tahminlerinizi geri yÃ¼kleyin",
            "PaylaÅŸ: SonuÃ§larÄ± gÃ¶rsel olarak paylaÅŸÄ±n"
        ]
    },
    {
        id: "finish",
        title: "HazÄ±rsÄ±nÄ±z!",
        description: "ArtÄ±k VolleySimulator'Ä± kullanmaya hazÄ±rsÄ±nÄ±z. Ä°yi tahminler ve bol ÅŸans!",
        icon: "ğŸ‰",
        tips: [
            "SorularÄ±nÄ±z iÃ§in Ayarlar > YardÄ±m",
            "Geri bildirim iÃ§in iletiÅŸime geÃ§in",
            "Keyifli oyunlar!"
        ]
    }
];

interface TutorialModalProps {
    isOpen: boolean;
    onClose: () => void;
    onComplete?: () => void;
}

export default function TutorialModal({ isOpen, onClose, onComplete }: TutorialModalProps) {
    const [currentStep, setCurrentStep] = useState(0);
    const [isAnimating, setIsAnimating] = useState(false);

    const step = TUTORIAL_STEPS[currentStep];
    const isLastStep = currentStep === TUTORIAL_STEPS.length - 1;
    const isFirstStep = currentStep === 0;

    const handleNext = () => {
        if (isLastStep) {
            handleComplete();
        } else {
            setIsAnimating(true);
            setTimeout(() => {
                setCurrentStep(prev => prev + 1);
                setIsAnimating(false);
            }, 150);
        }
    };

    const handlePrev = () => {
        if (!isFirstStep) {
            setIsAnimating(true);
            setTimeout(() => {
                setCurrentStep(prev => prev - 1);
                setIsAnimating(false);
            }, 150);
        }
    };

    const handleComplete = () => {
        localStorage.setItem("tutorialCompleted", "true");
        onComplete?.();
        onClose();
    };

    const handleSkip = () => {
        localStorage.setItem("tutorialCompleted", "true");
        onClose();
    };

    const progressValue = ((currentStep + 1) / TUTORIAL_STEPS.length) * 100;

    return (
        <Dialog open={isOpen} onOpenChange={() => onClose()}>
            <DialogContent className="sm:max-w-lg p-0 overflow-hidden">
                {/* Progress Bar */}
                <Progress value={progressValue} className="h-1 rounded-none" />

                {/* Header */}
                <div className="flex items-center justify-between px-4 py-3 border-b">
                    <div className="flex items-center gap-2">
                        <span className="text-xs text-muted-foreground font-medium">
                            {currentStep + 1} / {TUTORIAL_STEPS.length}
                        </span>
                    </div>
                    <Button variant="ghost" size="sm" onClick={handleSkip} className="text-xs">
                        Atla
                    </Button>
                </div>

                {/* Content */}
                <div className={`p-6 transition-opacity duration-150 ${isAnimating ? 'opacity-0' : 'opacity-100'}`}>
                    {/* Icon */}
                    <div className="flex justify-center mb-6">
                        <div className="w-20 h-20 bg-gradient-to-br from-emerald-600/30 to-cyan-600/30 rounded-2xl flex items-center justify-center border border-emerald-500/30 shadow-lg shadow-emerald-500/10">
                            <span className="text-4xl">{step.icon}</span>
                        </div>
                    </div>

                    {/* Title & Description */}
                    <h2 className="text-xl font-bold text-foreground text-center mb-3">
                        {step.title}
                    </h2>
                    <p className="text-muted-foreground text-center text-sm leading-relaxed mb-6">
                        {step.description}
                    </p>

                    {/* Tips */}
                    {step.tips && (
                        <div className="bg-muted rounded-xl p-4 border">
                            <div className="text-xs font-bold text-muted-foreground uppercase tracking-wider mb-3">
                                ğŸ’¡ Ä°puÃ§larÄ±
                            </div>
                            <ul className="space-y-2">
                                {step.tips.map((tip, index) => (
                                    <li key={index} className="flex items-start gap-2 text-sm text-foreground/80">
                                        <span className="text-emerald-400 mt-0.5">â€¢</span>
                                        {tip}
                                    </li>
                                ))}
                            </ul>
                        </div>
                    )}
                </div>

                {/* Navigation */}
                <div className="flex items-center justify-between p-4 border-t bg-muted/50">
                    <Button
                        variant="ghost"
                        onClick={handlePrev}
                        disabled={isFirstStep}
                        className="text-sm"
                    >
                        â† Geri
                    </Button>

                    {/* Step Dots */}
                    <div className="flex gap-1.5">
                        {TUTORIAL_STEPS.map((_, index) => (
                            <button
                                key={index}
                                onClick={() => setCurrentStep(index)}
                                title={`AdÄ±m ${index + 1}'e git`}
                                className={`h-2 rounded-full transition-all ${index === currentStep
                                    ? 'bg-emerald-500 w-6'
                                    : index < currentStep
                                        ? 'bg-emerald-500/50 w-2'
                                        : 'bg-muted-foreground/30 w-2'
                                    }`}
                            />
                        ))}
                    </div>

                    <Button
                        onClick={handleNext}
                        className={isLastStep ? 'bg-gradient-to-r from-emerald-600 to-cyan-600 text-white' : ''}
                        variant={isLastStep ? 'default' : 'secondary'}
                    >
                        {isLastStep ? 'BaÅŸla! ğŸš€' : 'Ä°leri â†’'}
                    </Button>
                </div>
            </DialogContent>
        </Dialog>
    );
}

// Hook for tutorial state
export function useTutorial() {
    const [showTutorial, setShowTutorial] = useState(false);
    const [isFirstVisit, setIsFirstVisit] = useState(false);

    useEffect(() => {
        const completed = localStorage.getItem("tutorialCompleted");
        if (!completed) {
            Promise.resolve().then(() => {
                setIsFirstVisit(true);
            });
            // Show tutorial on first visit after a short delay
            setTimeout(() => setShowTutorial(true), 1000);
        }
    }, []);

    const openTutorial = () => setShowTutorial(true);
    const closeTutorial = () => setShowTutorial(false);
    const resetTutorial = () => {
        localStorage.removeItem("tutorialCompleted");
        setShowTutorial(true);
    };

    return {
        showTutorial,
        isFirstVisit,
        openTutorial,
        closeTutorial,
        resetTutorial
    };
}

```

## File: app\components\XPBar.tsx
```
"use client";

import { useGameState } from "../utils/gameState";

interface XPBarProps {
    compact?: boolean;
}

export default function XPBar({ compact = false }: XPBarProps) {
    const { gameState, getXPProgress, getLevelTitle } = useGameState();
    const { progress, required, percentage } = getXPProgress();

    if (compact) {
        return (
            <div className="flex items-center gap-2">
                <div className="flex items-center gap-1 bg-gradient-to-r from-amber-500 to-orange-500 px-2 py-0.5 rounded-full">
                    <span className="text-white text-xs font-black">Lv.{gameState.level}</span>
                </div>
                <div className="w-16 h-1.5 bg-slate-700 rounded-full overflow-hidden">
                    <div
                        className="h-full bg-gradient-to-r from-amber-400 to-orange-400 transition-all duration-500"
                        style={{ width: `${Math.min(percentage, 100)}%` }}
                    />
                </div>
            </div>
        );
    }

    return (
        <div className="bg-slate-900/80 backdrop-blur-sm rounded-xl border border-slate-700 p-3">
            {/* Level Badge & Title */}
            <div className="flex items-center justify-between mb-2">
                <div className="flex items-center gap-2">
                    <div className="flex items-center justify-center w-10 h-10 bg-gradient-to-br from-amber-500 to-orange-600 rounded-lg shadow-lg shadow-amber-500/30">
                        <span className="text-white text-lg font-black">{gameState.level}</span>
                    </div>
                    <div>
                        <div className="text-xs text-slate-400">Seviye</div>
                        <div className="text-sm font-bold text-amber-400">{getLevelTitle()}</div>
                    </div>
                </div>
                <div className="text-right">
                    <div className="text-xs text-slate-400">XP</div>
                    <div className="text-sm font-bold text-white">
                        {gameState.xp.toLocaleString()}
                    </div>
                </div>
            </div>

            {/* XP Progress Bar */}
            <div className="relative">
                <div className="h-3 bg-slate-700 rounded-full overflow-hidden">
                    <div
                        className="h-full bg-gradient-to-r from-amber-400 via-orange-400 to-red-400 transition-all duration-700 ease-out relative"
                        style={{ width: `${Math.min(percentage, 100)}%` }}
                    >
                        {/* Shine effect */}
                        <div className="absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent animate-shimmer" />
                    </div>
                </div>
                <div className="flex justify-between mt-1">
                    <span className="text-[10px] text-slate-500">{progress.toLocaleString()} XP</span>
                    <span className="text-[10px] text-slate-500">{required.toLocaleString()} XP</span>
                </div>
            </div>

            {/* Stats Row */}
            <div className="flex gap-4 mt-3 pt-3 border-t border-slate-700/50">
                <div className="flex items-center gap-1.5">
                    <span className="text-base">ğŸ¯</span>
                    <div>
                        <div className="text-[10px] text-slate-500">Tahmin</div>
                        <div className="text-xs font-bold text-white">{gameState.stats.totalPredictions}</div>
                    </div>
                </div>
                <div className="flex items-center gap-1.5">
                    <span className="text-base">ğŸ”¥</span>
                    <div>
                        <div className="text-[10px] text-slate-500">Seri</div>
                        <div className="text-xs font-bold text-orange-400">{gameState.stats.currentStreak}</div>
                    </div>
                </div>
                <div className="flex items-center gap-1.5">
                    <span className="text-base">ğŸ†</span>
                    <div>
                        <div className="text-[10px] text-slate-500">Rozet</div>
                        <div className="text-xs font-bold text-amber-400">{gameState.achievements.length}</div>
                    </div>
                </div>
            </div>
        </div>
    );
}

```

## File: app\components\Calculator\FixtureList.tsx
```
import { useState, memo, useMemo } from "react";
import Link from "next/link";
import { Match } from "../../types";
import { SCORES, normalizeTeamName } from "../../utils/calculatorUtils";
import { generateTeamSlug } from "../../utils/teamSlug";
import TeamAvatar from "../TeamAvatar";
import { Card, CardHeader, CardTitle } from "../ui/Card";
import { Button } from "../ui/Button";
import { Badge } from "../ui/Badge";
import { EmptyState } from "../ui/EmptyState";
import { BottomSheet } from "../ui/BottomSheet";
import { TeamStatsRadar } from "./TeamStatsRadar";
import { cn } from "@/lib/utils";
import { Calendar, ChevronRight, Zap, Trophy, History, Search, Edit2, BarChart2 } from "lucide-react";

interface FixtureListProps {
    matches: Match[];
    overrides: Record<string, string>;
    onScoreChange: (matchId: string, score: string) => void;
    teamRanks?: Map<string, number>;
    totalTeams?: number;
    relegationSpots?: number;
}

function FixtureList({ matches, overrides, onScoreChange, teamRanks, totalTeams = 16, relegationSpots = 2 }: FixtureListProps) {
    const [view, setView] = useState<'upcoming' | 'all' | 'past'>('upcoming');
    const [quickPredictMode, setQuickPredictMode] = useState(false);
    const [collapsedGroups, setCollapsedGroups] = useState<Set<string>>(new Set());
    const [selectedMatchForPredict, setSelectedMatchForPredict] = useState<Match | null>(null);
    const [predictTab, setPredictTab] = useState<'predict' | 'stats'>('predict');

    const toggleGroupCollapse = (groupName: string) => {
        setCollapsedGroups(prev => {
            const newSet = new Set(prev);
            if (newSet.has(groupName)) newSet.delete(groupName);
            else newSet.add(groupName);
            return newSet;
        });
    };

    const isMatchPlayed = (m: Match) => {
        return m.isPlayed || (m.homeScore !== undefined && m.homeScore !== null && m.awayScore !== undefined && m.awayScore !== null);
    };

    const getTeamRank = (teamName: string): number | null => {
        if (!teamRanks) return null;
        if (teamRanks.has(teamName)) return teamRanks.get(teamName)!;
        const normalized = normalizeTeamName(teamName);
        for (const [key, rank] of teamRanks.entries()) {
            if (normalizeTeamName(key) === normalized) return rank;
        }
        return null;
    };

    const getMatchImportance = (homeRank: number | null, awayRank: number | null): { label: string; variant: "success" | "warning" | "destructive" | "secondary" | "default" } | null => {
        if (!homeRank || !awayRank || relegationSpots === 0) return null;
        const playoffBoundary = 4;
        const relegationBoundary = totalTeams - relegationSpots + 1;

        if (homeRank <= playoffBoundary && awayRank <= playoffBoundary) return { label: 'Zirve MÃ¼cadelesi', variant: 'success' };
        if (homeRank >= relegationBoundary && awayRank >= relegationBoundary) return { label: 'Kritik DÃ¼ÅŸme HattÄ±', variant: 'destructive' };
        if (homeRank >= relegationBoundary || awayRank >= relegationBoundary) return { label: 'DÃ¼ÅŸme PotasÄ± Etkisi', variant: 'warning' };
        if (homeRank <= playoffBoundary || awayRank <= playoffBoundary) return { label: 'Play-off Yolunda', variant: 'secondary' };
        return null;
    };

    const parseDate = (dateStr: string | undefined): Date | null => {
        if (!dateStr) return null;
        if (dateStr.includes('.')) {
            const parts = dateStr.split('.');
            if (parts.length === 3) return new Date(parseInt(parts[2]), parseInt(parts[1]) - 1, parseInt(parts[0]));
        }
        if (dateStr.includes('-')) {
            const parts = dateStr.split('-');
            if (parts.length === 3) return new Date(parseInt(parts[0]), parseInt(parts[1]) - 1, parseInt(parts[2]));
        }
        return null;
    };

    const filteredMatches = useMemo(() => {
        if (view === 'upcoming') return matches.filter(m => !isMatchPlayed(m));
        if (view === 'past') return matches.filter(m => isMatchPlayed(m));
        return matches;
    }, [matches, view]);

    const groupedMatches = useMemo(() => {
        const groups: Record<string, Match[]> = {};
        filteredMatches.forEach(match => {
            const dateStr = match.matchDate || (match as any).date || 'Belirsiz Tarih';
            if (!groups[dateStr]) groups[dateStr] = [];
            groups[dateStr].push(match);
        });
        return groups;
    }, [filteredMatches]);

    const sortedGroups = useMemo(() => {
        return Object.entries(groupedMatches).sort((a, b) => {
            const dateA = parseDate(a[0]);
            const dateB = parseDate(b[0]);
            if (!dateA || !dateB) return 0;
            return view === 'past' ? dateB.getTime() - dateA.getTime() : dateA.getTime() - dateB.getTime();
        });
    }, [groupedMatches, view]);

    const formatDateDisplay = (dateStr: string): string => {
        if (dateStr === 'Belirsiz Tarih') return dateStr;
        const date = parseDate(dateStr);
        if (!date) return dateStr;
        const days = ['PAZAR', 'PAZARTESÄ°', 'SALI', 'Ã‡ARÅAMBA', 'PERÅEMBE', 'CUMA', 'CUMARTESÄ°'];
        return `${date.toLocaleDateString('tr-TR')} ${days[date.getDay()]}`;
    };

    return (
        <Card className="flex flex-col h-full bg-surface-primary/50 backdrop-blur-sm border-border-main/50">
            <CardHeader className="p-2 sm:p-4 bg-surface-secondary/30 border-b border-border-main">
                <div className="flex flex-col gap-3">
                    <div className="flex items-center justify-between">
                        <div className="flex gap-1 bg-surface-primary p-1 rounded-xl">
                            <Button
                                variant={view === 'upcoming' ? 'primary' : 'ghost'}
                                size="sm"
                                className="rounded-lg text-[11px] h-8 px-3"
                                onClick={() => setView('upcoming')}
                            >
                                <Calendar className="w-3.5 h-3.5 mr-1.5" />
                                Gelecek
                            </Button>
                            <Button
                                variant={view === 'past' ? 'secondary' : 'ghost'}
                                size="sm"
                                className="rounded-lg text-[11px] h-8 px-3"
                                onClick={() => setView('past')}
                            >
                                <History className="w-3.5 h-3.5 mr-1.5" />
                                GeÃ§miÅŸ
                            </Button>
                            <Button
                                variant={view === 'all' ? 'outline' : 'ghost'}
                                size="sm"
                                className="rounded-lg text-[11px] h-8 px-3"
                                onClick={() => setView('all')}
                            >
                                Hepsi
                            </Button>
                        </div>

                        <Button
                            variant={quickPredictMode ? 'primary' : 'outline'}
                            size="sm"
                            className={cn("rounded-lg text-[11px] h-8 shadow-premium-sm transition-all")}
                            onClick={() => setQuickPredictMode(!quickPredictMode)}
                        >
                            <Zap className={cn("w-3.5 h-3.5 mr-1.5", quickPredictMode && "fill-current")} />
                            HÄ±zlÄ± Tahmin
                        </Button>
                    </div>
                </div>
            </CardHeader>

            <div className="flex-1 overflow-y-auto p-3 space-y-6 custom-scrollbar">
                {sortedGroups.length === 0 ? (
                    <EmptyState
                        title="MaÃ§ BulunamadÄ±"
                        description={`${view === 'upcoming' ? 'Gelecek' : view === 'past' ? 'GeÃ§miÅŸ' : ''} maÃ§ listesi boÅŸ gÃ¶rÃ¼nÃ¼yor. LÃ¼tfen daha sonra tekrar kontrol edin.`}
                        icon={Search}
                        className="min-h-[300px] border-none bg-transparent"
                    />
                ) : (
                    sortedGroups.map(([dateStr, dateMatches]) => {
                        const isCollapsed = collapsedGroups.has(dateStr);
                        return (
                            <div key={dateStr} className="space-y-3">
                                <button
                                    onClick={() => toggleGroupCollapse(dateStr)}
                                    className="w-full flex items-center justify-between group py-1 border-b border-border-subtle hover:border-text-muted transition-colors"
                                >
                                    <h3 className="text-[11px] font-bold text-text-secondary uppercase tracking-widest flex items-center gap-2">
                                        <ChevronRight className={cn("w-3.5 h-3.5 transition-transform duration-300", !isCollapsed && "rotate-90")} />
                                        {formatDateDisplay(dateStr)}
                                    </h3>
                                    <Badge variant="secondary" className="px-2 py-0 h-5 text-[9px] font-bold">
                                        {dateMatches.length} MaÃ§
                                    </Badge>
                                </button>

                                {!isCollapsed && (
                                    <div className="grid grid-cols-1 gap-3">
                                        {dateMatches.map((match) => {
                                            const matchId = `${match.homeTeam}-${match.awayTeam}`;
                                            const currentScore = overrides[matchId];
                                            const isPlayed = isMatchPlayed(match);
                                            const homeRank = getTeamRank(match.homeTeam);
                                            const awayRank = getTeamRank(match.awayTeam);
                                            const importance = getMatchImportance(homeRank, awayRank);
                                            const matchTime = match.matchTime || (match as any).time;

                                            return (
                                                <Card
                                                    key={matchId}
                                                    onClick={() => !isPlayed && setSelectedMatchForPredict(match)}
                                                    className={cn(
                                                        "relative overflow-hidden group/m transition-all duration-300 p-0 shadow-sm cursor-pointer sm:cursor-default",
                                                        !isPlayed && currentScore ? "ring-1 ring-primary/50 bg-primary/5" : "hover:shadow-md"
                                                    )}
                                                >
                                                    {importance && !isPlayed && (
                                                        <div className={cn(
                                                            "w-full text-[9px] font-bold py-0.5 text-center uppercase tracking-tighter bg-gradient-to-r",
                                                            importance.variant === 'success' ? 'from-emerald-600 to-emerald-400 text-white' :
                                                                importance.variant === 'destructive' ? 'from-rose-600 to-rose-400 text-white' :
                                                                    importance.variant === 'warning' ? 'from-amber-600 to-amber-400 text-white' :
                                                                        'from-slate-600 to-slate-400 text-white'
                                                        )}>
                                                            {importance.label}
                                                        </div>
                                                    )}

                                                    <div className="p-3 pt-4 sm:p-4">
                                                        <div className="flex justify-between items-center mb-4">
                                                            <div className="flex items-center gap-2">
                                                                <span className="text-[10px] bg-surface-secondary px-2 py-0.5 rounded-full font-mono text-text-muted border border-border-subtle">
                                                                    {matchTime || '--:--'}
                                                                </span>
                                                                {isPlayed && <Badge variant="secondary" className="text-[9px] h-5">OynandÄ±</Badge>}
                                                                {!isPlayed && (
                                                                    <div className="sm:hidden text-[10px] text-primary flex items-center gap-1 font-bold">
                                                                        <Edit2 className="w-3 h-3" />
                                                                        TAHMÄ°N YAP
                                                                    </div>
                                                                )}
                                                            </div>
                                                            {!isPlayed && currentScore && (
                                                                <Badge variant="success" className="text-[9px] h-5">Tahmin Girildi</Badge>
                                                            )}
                                                        </div>

                                                        <div className="flex items-center justify-between gap-2 mb-6">
                                                            <TeamInfo
                                                                name={match.homeTeam}
                                                                rank={homeRank}
                                                                align="end"
                                                                winner={isPlayed ? match.homeScore! > match.awayScore! : currentScore ? getScoreWinner(currentScore) === 'home' : false}
                                                            />
                                                            <div className="flex flex-col items-center justify-center px-4">
                                                                <span className="text-xs text-text-secondary font-bold opacity-30 italic">VS</span>
                                                                {isPlayed && (
                                                                    <div className="mt-2 text-xl font-black font-mono tracking-tighter">
                                                                        {match.homeScore}-{match.awayScore}
                                                                    </div>
                                                                )}
                                                            </div>
                                                            <TeamInfo
                                                                name={match.awayTeam}
                                                                rank={awayRank}
                                                                align="start"
                                                                winner={isPlayed ? match.awayScore! > match.homeScore! : currentScore ? getScoreWinner(currentScore) === 'away' : false}
                                                            />
                                                        </div>

                                                        {/* Prediction Area - Hidden on small screens unless QuickPredict is ON */}
                                                        {!isPlayed && (
                                                            <div className={cn(
                                                                "hidden sm:flex overflow-x-auto gap-1.5 pb-1 custom-scrollbar",
                                                                quickPredictMode ? "grid grid-cols-4 sm:flex sm:justify-center" : "justify-center"
                                                            )}>
                                                                {SCORES.map(score => {
                                                                    const isSelected = currentScore === score;
                                                                    const [h, a] = score.split('-').map(Number);
                                                                    const isHomeWin = h > a;
                                                                    return (
                                                                        <button
                                                                            key={score}
                                                                            onClick={(e) => {
                                                                                e.stopPropagation();
                                                                                onScoreChange(matchId, isSelected ? '' : score);
                                                                                if (isSelected) navigator.vibrate?.(10);
                                                                                else navigator.vibrate?.(50);
                                                                            }}
                                                                            className={cn(
                                                                                "h-8 min-w-[36px] flex items-center justify-center rounded-lg text-[10px] font-black transition-all border shrink-0",
                                                                                isSelected
                                                                                    ? isHomeWin
                                                                                        ? "bg-emerald-600 border-emerald-500 text-white shadow-lg scale-105 z-10"
                                                                                        : "bg-rose-600 border-rose-500 text-white shadow-lg scale-105 z-10"
                                                                                    : "bg-surface-secondary/50 border-border-subtle text-text-muted hover:border-text-secondary hover:bg-surface-secondary"
                                                                            )}
                                                                        >
                                                                            {score}
                                                                        </button>
                                                                    );
                                                                })}
                                                            </div>
                                                        )}
                                                    </div>
                                                </Card>
                                            );
                                        })}
                                    </div>
                                )}
                            </div>
                        );
                    })
                )}
            </div>

            {/* Mobile Prediction Bottom Sheet */}
            <BottomSheet
                isOpen={!!selectedMatchForPredict}
                onClose={() => {
                    setSelectedMatchForPredict(null);
                    setPredictTab('predict');
                }}
                title={predictTab === 'predict' ? "Tahmin Gir" : "TakÄ±m Analizi"}
            >
                {selectedMatchForPredict && (
                    <div className="space-y-6">
                        {/* Tab Switcher */}
                        <div className="flex p-1 bg-surface-secondary rounded-xl">
                            <button
                                onClick={() => setPredictTab('predict')}
                                className={cn(
                                    "flex-1 flex items-center justify-center gap-2 py-2 text-[10px] font-black uppercase tracking-widest rounded-lg transition-all",
                                    predictTab === 'predict'
                                        ? "bg-surface-primary text-primary shadow-premium-sm"
                                        : "text-text-muted hover:text-text-primary"
                                )}
                            >
                                <Zap className={cn("w-3.5 h-3.5", predictTab === 'predict' && "fill-primary")} />
                                Tahmin
                            </button>
                            <button
                                onClick={() => setPredictTab('stats')}
                                className={cn(
                                    "flex-1 flex items-center justify-center gap-2 py-2 text-[10px] font-black uppercase tracking-widest rounded-lg transition-all",
                                    predictTab === 'stats'
                                        ? "bg-surface-primary text-primary shadow-premium-sm"
                                        : "text-text-muted hover:text-text-primary"
                                )}
                            >
                                <BarChart2 className="w-3.5 h-3.5" />
                                Ä°statistik
                            </button>
                        </div>

                        {predictTab === 'predict' ? (
                            <>
                                <div className="flex items-center justify-between gap-4 p-4 bg-surface-secondary/50 rounded-2xl">
                                    <div className="flex flex-col items-center gap-2 flex-1">
                                        <TeamAvatar name={selectedMatchForPredict.homeTeam} size="md" />
                                        <span className="text-xs font-black text-center">{selectedMatchForPredict.homeTeam}</span>
                                    </div>
                                    <div className="text-xl font-black italic opacity-20">VS</div>
                                    <div className="flex flex-col items-center gap-2 flex-1">
                                        <TeamAvatar name={selectedMatchForPredict.awayTeam} size="md" />
                                        <span className="text-xs font-black text-center">{selectedMatchForPredict.awayTeam}</span>
                                    </div>
                                </div>

                                <div className="grid grid-cols-4 gap-2">
                                    {SCORES.map(score => {
                                        const matchId = `${selectedMatchForPredict.homeTeam}-${selectedMatchForPredict.awayTeam}`;
                                        const isSelected = overrides[matchId] === score;
                                        const [h, a] = score.split('-').map(Number);
                                        const isHomeWin = h > a;

                                        return (
                                            <button
                                                key={score}
                                                onClick={() => {
                                                    onScoreChange(matchId, isSelected ? '' : score);
                                                    navigator.vibrate?.(isSelected ? 10 : 50);
                                                    if (!isSelected) {
                                                        // Small delay for UX feel then close
                                                        setTimeout(() => {
                                                            setSelectedMatchForPredict(null);
                                                            setPredictTab('predict');
                                                        }, 150);
                                                    }
                                                }}
                                                className={cn(
                                                    "h-12 flex flex-col items-center justify-center rounded-xl text-xs font-black transition-all border",
                                                    isSelected
                                                        ? isHomeWin
                                                            ? "bg-emerald-600 border-emerald-500 text-white shadow-glow-primary scale-105"
                                                            : "bg-rose-600 border-rose-500 text-white shadow-lg scale-105"
                                                        : "bg-surface-secondary border-border-subtle text-text-primary hocus:bg-surface-dark"
                                                )}
                                            >
                                                {score}
                                            </button>
                                        );
                                    })}
                                </div>
                            </>
                        ) : (
                            <div className="py-2">
                                <TeamStatsRadar
                                    homeTeam={selectedMatchForPredict.homeTeam}
                                    awayTeam={selectedMatchForPredict.awayTeam}
                                />
                                <p className="mt-4 text-[10px] text-text-muted text-center italic leading-relaxed">
                                    * Ä°statistikler son 5 maÃ§lÄ±k form ve genel sezon verilerine dayalÄ± tahmini deÄŸerlerdir.
                                </p>
                            </div>
                        )}

                        <Button
                            variant="ghost"
                            className="w-full h-12 rounded-xl text-text-muted"
                            onClick={() => {
                                setSelectedMatchForPredict(null);
                                setPredictTab('predict');
                            }}
                        >
                            Ä°ptal
                        </Button>
                    </div>
                )}
            </BottomSheet>
        </Card>
    );
}

const TeamInfo = ({ name, rank, align, winner }: { name: string; rank: number | null; align: 'start' | 'end'; winner?: boolean }) => (
    <div className={cn("flex flex-1 items-center gap-3", align === 'end' ? 'flex-row' : 'flex-row-reverse')}>
        <div className={cn("flex flex-col min-w-0", align === 'end' ? 'items-end' : 'items-start')}>
            <div className="flex items-center gap-1.5 overflow-hidden">
                {align === 'start' && rank && <RankBadge rank={rank} />}
                <Link
                    href={`/takimlar/${generateTeamSlug(name)}`}
                    className={cn(
                        "text-xs sm:text-sm font-black truncate hover:underline",
                        winner ? "text-text-primary" : "text-text-secondary opacity-70"
                    )}
                >
                    {name}
                </Link>
                {align === 'end' && rank && <RankBadge rank={rank} />}
            </div>
            {winner && (
                <Badge variant="success" className="h-4 px-1 py-0 text-[8px] font-black uppercase mt-0.5">KazanÄ±r</Badge>
            )}
        </div>
        <div className={cn(
            "relative shrink-0 p-1 rounded-full",
            winner ? "bg-gradient-to-br from-emerald-500 to-emerald-700 shadow-md ring-2 ring-emerald-500/20" : "bg-surface-secondary border border-border-subtle"
        )}>
            <TeamAvatar name={name} size="sm" />
        </div>
    </div>
);

const RankBadge = ({ rank }: { rank: number }) => (
    <span className={cn(
        "text-[9px] px-1.5 py-0.5 rounded font-black shrink-0",
        rank <= 2 ? "bg-emerald-500/20 text-emerald-400" :
            rank <= 4 ? "bg-primary/20 text-primary" :
                rank >= 13 ? "bg-rose-500/20 text-rose-400" :
                    "bg-surface-secondary text-text-muted"
    )}>
        {rank}.
    </span>
);

function getScoreWinner(score: string) {
    const [h, a] = score.split('-').map(Number);
    if (h > a) return 'home';
    if (a > h) return 'away';
    return null;
}

export default memo(FixtureList);

```

